function zD(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function qD(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var UR={exports:{}},qf={},BR={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vc=Symbol.for("react.element"),$D=Symbol.for("react.portal"),WD=Symbol.for("react.fragment"),GD=Symbol.for("react.strict_mode"),HD=Symbol.for("react.profiler"),KD=Symbol.for("react.provider"),QD=Symbol.for("react.context"),YD=Symbol.for("react.forward_ref"),JD=Symbol.for("react.suspense"),XD=Symbol.for("react.memo"),ZD=Symbol.for("react.lazy"),NI=Symbol.iterator;function eO(n){return n===null||typeof n!="object"?null:(n=NI&&n[NI]||n["@@iterator"],typeof n=="function"?n:null)}var jR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zR=Object.assign,qR={};function il(n,e,t){this.props=n,this.context=e,this.refs=qR,this.updater=t||jR}il.prototype.isReactComponent={};il.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};il.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function $R(){}$R.prototype=il.prototype;function Py(n,e,t){this.props=n,this.context=e,this.refs=qR,this.updater=t||jR}var ky=Py.prototype=new $R;ky.constructor=Py;zR(ky,il.prototype);ky.isPureReactComponent=!0;var xI=Array.isArray,WR=Object.prototype.hasOwnProperty,by={current:null},GR={key:!0,ref:!0,__self:!0,__source:!0};function HR(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)WR.call(e,r)&&!GR.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Vc,type:n,key:s,ref:o,props:i,_owner:by.current}}function tO(n,e){return{$$typeof:Vc,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Ny(n){return typeof n=="object"&&n!==null&&n.$$typeof===Vc}function nO(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var DI=/\/+/g;function Em(n,e){return typeof n=="object"&&n!==null&&n.key!=null?nO(""+n.key):e.toString(36)}function ud(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Vc:case $D:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+Em(o,0):r,xI(i)?(t="",n!=null&&(t=n.replace(DI,"$&/")+"/"),ud(i,e,t,"",function(c){return c})):i!=null&&(Ny(i)&&(i=tO(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(DI,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",xI(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+Em(s,a);o+=ud(s,e,t,l,i)}else if(l=eO(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+Em(s,a++),o+=ud(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Dh(n,e,t){if(n==null)return n;var r=[],i=0;return ud(n,r,"","",function(s){return e.call(t,s,i++)}),r}function rO(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var an={current:null},cd={transition:null},iO={ReactCurrentDispatcher:an,ReactCurrentBatchConfig:cd,ReactCurrentOwner:by};function KR(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:Dh,forEach:function(n,e,t){Dh(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Dh(n,function(){e++}),e},toArray:function(n){return Dh(n,function(e){return e})||[]},only:function(n){if(!Ny(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};le.Component=il;le.Fragment=WD;le.Profiler=HD;le.PureComponent=Py;le.StrictMode=GD;le.Suspense=JD;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iO;le.act=KR;le.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=zR({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=by.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)WR.call(e,l)&&!GR.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Vc,type:n.type,key:i,ref:s,props:r,_owner:o}};le.createContext=function(n){return n={$$typeof:QD,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:KD,_context:n},n.Consumer=n};le.createElement=HR;le.createFactory=function(n){var e=HR.bind(null,n);return e.type=n,e};le.createRef=function(){return{current:null}};le.forwardRef=function(n){return{$$typeof:YD,render:n}};le.isValidElement=Ny;le.lazy=function(n){return{$$typeof:ZD,_payload:{_status:-1,_result:n},_init:rO}};le.memo=function(n,e){return{$$typeof:XD,type:n,compare:e===void 0?null:e}};le.startTransition=function(n){var e=cd.transition;cd.transition={};try{n()}finally{cd.transition=e}};le.unstable_act=KR;le.useCallback=function(n,e){return an.current.useCallback(n,e)};le.useContext=function(n){return an.current.useContext(n)};le.useDebugValue=function(){};le.useDeferredValue=function(n){return an.current.useDeferredValue(n)};le.useEffect=function(n,e){return an.current.useEffect(n,e)};le.useId=function(){return an.current.useId()};le.useImperativeHandle=function(n,e,t){return an.current.useImperativeHandle(n,e,t)};le.useInsertionEffect=function(n,e){return an.current.useInsertionEffect(n,e)};le.useLayoutEffect=function(n,e){return an.current.useLayoutEffect(n,e)};le.useMemo=function(n,e){return an.current.useMemo(n,e)};le.useReducer=function(n,e,t){return an.current.useReducer(n,e,t)};le.useRef=function(n){return an.current.useRef(n)};le.useState=function(n){return an.current.useState(n)};le.useSyncExternalStore=function(n,e,t){return an.current.useSyncExternalStore(n,e,t)};le.useTransition=function(){return an.current.useTransition()};le.version="18.3.1";BR.exports=le;var B=BR.exports;const sO=qD(B),oO=zD({__proto__:null,default:sO},[B]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aO=B,lO=Symbol.for("react.element"),uO=Symbol.for("react.fragment"),cO=Object.prototype.hasOwnProperty,hO=aO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dO={key:!0,ref:!0,__self:!0,__source:!0};function QR(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)cO.call(e,r)&&!dO.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:lO,type:n,key:s,ref:o,props:i,_owner:hO.current}}qf.Fragment=uO;qf.jsx=QR;qf.jsxs=QR;UR.exports=qf;var U=UR.exports,Rg={},YR={exports:{}},xn={},JR={exports:{}},XR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(Q,ne){var re=Q.length;Q.push(ne);e:for(;0<re;){var Pe=re-1>>>1,we=Q[Pe];if(0<i(we,ne))Q[Pe]=ne,Q[re]=we,re=Pe;else break e}}function t(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var ne=Q[0],re=Q.pop();if(re!==ne){Q[0]=re;e:for(var Pe=0,we=Q.length,ze=we>>>1;Pe<ze;){var Qn=2*(Pe+1)-1,Yn=Q[Qn],Jn=Qn+1,Xn=Q[Jn];if(0>i(Yn,re))Jn<we&&0>i(Xn,Yn)?(Q[Pe]=Xn,Q[Jn]=re,Pe=Jn):(Q[Pe]=Yn,Q[Qn]=re,Pe=Qn);else if(Jn<we&&0>i(Xn,re))Q[Pe]=Xn,Q[Jn]=re,Pe=Jn;else break e}}return ne}function i(Q,ne){var re=Q.sortIndex-ne.sortIndex;return re!==0?re:Q.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,g=!1,y=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(Q){for(var ne=t(c);ne!==null;){if(ne.callback===null)r(c);else if(ne.startTime<=Q)r(c),ne.sortIndex=ne.expirationTime,e(l,ne);else break;ne=t(c)}}function k(Q){if(S=!1,E(Q),!y)if(t(l)!==null)y=!0,_s(M);else{var ne=t(c);ne!==null&&Kn(k,ne.startTime-Q)}}function M(Q,ne){y=!1,S&&(S=!1,I(v),v=-1),g=!0;var re=p;try{for(E(ne),d=t(l);d!==null&&(!(d.expirationTime>ne)||Q&&!b());){var Pe=d.callback;if(typeof Pe=="function"){d.callback=null,p=d.priorityLevel;var we=Pe(d.expirationTime<=ne);ne=n.unstable_now(),typeof we=="function"?d.callback=we:d===t(l)&&r(l),E(ne)}else r(l);d=t(l)}if(d!==null)var ze=!0;else{var Qn=t(c);Qn!==null&&Kn(k,Qn.startTime-ne),ze=!1}return ze}finally{d=null,p=re,g=!1}}var F=!1,T=null,v=-1,R=5,P=-1;function b(){return!(n.unstable_now()-P<R)}function N(){if(T!==null){var Q=n.unstable_now();P=Q;var ne=!0;try{ne=T(!0,Q)}finally{ne?A():(F=!1,T=null)}}else F=!1}var A;if(typeof w=="function")A=function(){w(N)};else if(typeof MessageChannel<"u"){var un=new MessageChannel,Fr=un.port2;un.port1.onmessage=N,A=function(){Fr.postMessage(null)}}else A=function(){C(N,0)};function _s(Q){T=Q,F||(F=!0,A())}function Kn(Q,ne){v=C(function(){Q(n.unstable_now())},ne)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_continueExecution=function(){y||g||(y=!0,_s(M))},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(Q){switch(p){case 1:case 2:case 3:var ne=3;break;default:ne=p}var re=p;p=ne;try{return Q()}finally{p=re}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Q,ne){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var re=p;p=Q;try{return ne()}finally{p=re}},n.unstable_scheduleCallback=function(Q,ne,re){var Pe=n.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?Pe+re:Pe):re=Pe,Q){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=re+we,Q={id:h++,callback:ne,priorityLevel:Q,startTime:re,expirationTime:we,sortIndex:-1},re>Pe?(Q.sortIndex=re,e(c,Q),t(l)===null&&Q===t(c)&&(S?(I(v),v=-1):S=!0,Kn(k,re-Pe))):(Q.sortIndex=we,e(l,Q),y||g||(y=!0,_s(M))),Q},n.unstable_shouldYield=b,n.unstable_wrapCallback=function(Q){var ne=p;return function(){var re=p;p=ne;try{return Q.apply(this,arguments)}finally{p=re}}}})(XR);JR.exports=XR;var fO=JR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pO=B,kn=fO;function q(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ZR=new Set,Hu={};function vo(n,e){ka(n,e),ka(n+"Capture",e)}function ka(n,e){for(Hu[n]=e,n=0;n<e.length;n++)ZR.add(e[n])}var ei=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ag=Object.prototype.hasOwnProperty,mO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,OI={},LI={};function gO(n){return Ag.call(LI,n)?!0:Ag.call(OI,n)?!1:mO.test(n)?LI[n]=!0:(OI[n]=!0,!1)}function _O(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function yO(n,e,t,r){if(e===null||typeof e>"u"||_O(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ln(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Dt[n]=new ln(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Dt[e]=new ln(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Dt[n]=new ln(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Dt[n]=new ln(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Dt[n]=new ln(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Dt[n]=new ln(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Dt[n]=new ln(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Dt[n]=new ln(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Dt[n]=new ln(n,5,!1,n.toLowerCase(),null,!1,!1)});var xy=/[\-:]([a-z])/g;function Dy(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(xy,Dy);Dt[e]=new ln(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(xy,Dy);Dt[e]=new ln(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(xy,Dy);Dt[e]=new ln(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Dt[n]=new ln(n,1,!1,n.toLowerCase(),null,!1,!1)});Dt.xlinkHref=new ln("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Dt[n]=new ln(n,1,!1,n.toLowerCase(),null,!0,!0)});function Oy(n,e,t,r){var i=Dt.hasOwnProperty(e)?Dt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(yO(e,t,i,r)&&(t=null),r||i===null?gO(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var ai=pO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Oh=Symbol.for("react.element"),Zo=Symbol.for("react.portal"),ea=Symbol.for("react.fragment"),Ly=Symbol.for("react.strict_mode"),Cg=Symbol.for("react.profiler"),eA=Symbol.for("react.provider"),tA=Symbol.for("react.context"),Vy=Symbol.for("react.forward_ref"),Pg=Symbol.for("react.suspense"),kg=Symbol.for("react.suspense_list"),My=Symbol.for("react.memo"),Si=Symbol.for("react.lazy"),nA=Symbol.for("react.offscreen"),VI=Symbol.iterator;function Wl(n){return n===null||typeof n!="object"?null:(n=VI&&n[VI]||n["@@iterator"],typeof n=="function"?n:null)}var Ge=Object.assign,Im;function fu(n){if(Im===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Im=e&&e[1]||""}return`
`+Im+n}var Tm=!1;function Sm(n,e){if(!n||Tm)return"";Tm=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Tm=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?fu(n):""}function vO(n){switch(n.tag){case 5:return fu(n.type);case 16:return fu("Lazy");case 13:return fu("Suspense");case 19:return fu("SuspenseList");case 0:case 2:case 15:return n=Sm(n.type,!1),n;case 11:return n=Sm(n.type.render,!1),n;case 1:return n=Sm(n.type,!0),n;default:return""}}function bg(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case ea:return"Fragment";case Zo:return"Portal";case Cg:return"Profiler";case Ly:return"StrictMode";case Pg:return"Suspense";case kg:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case tA:return(n.displayName||"Context")+".Consumer";case eA:return(n._context.displayName||"Context")+".Provider";case Vy:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case My:return e=n.displayName||null,e!==null?e:bg(n.type)||"Memo";case Si:e=n._payload,n=n._init;try{return bg(n(e))}catch{}}return null}function wO(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bg(e);case 8:return e===Ly?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ki(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function rA(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function EO(n){var e=rA(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Lh(n){n._valueTracker||(n._valueTracker=EO(n))}function iA(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=rA(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Md(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Ng(n,e){var t=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function MI(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Ki(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function sA(n,e){e=e.checked,e!=null&&Oy(n,"checked",e,!1)}function xg(n,e){sA(n,e);var t=Ki(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Dg(n,e.type,t):e.hasOwnProperty("defaultValue")&&Dg(n,e.type,Ki(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function FI(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Dg(n,e,t){(e!=="number"||Md(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var pu=Array.isArray;function pa(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Ki(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function Og(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function UI(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(q(92));if(pu(t)){if(1<t.length)throw Error(q(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Ki(t)}}function oA(n,e){var t=Ki(e.value),r=Ki(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function BI(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function aA(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lg(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?aA(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Vh,lA=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Vh=Vh||document.createElement("div"),Vh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vh.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Ku(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Su={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IO=["Webkit","ms","Moz","O"];Object.keys(Su).forEach(function(n){IO.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Su[e]=Su[n]})});function uA(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Su.hasOwnProperty(n)&&Su[n]?(""+e).trim():e+"px"}function cA(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=uA(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var TO=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vg(n,e){if(e){if(TO[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function Mg(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fg=null;function Fy(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ug=null,ma=null,ga=null;function jI(n){if(n=Uc(n)){if(typeof Ug!="function")throw Error(q(280));var e=n.stateNode;e&&(e=Kf(e),Ug(n.stateNode,n.type,e))}}function hA(n){ma?ga?ga.push(n):ga=[n]:ma=n}function dA(){if(ma){var n=ma,e=ga;if(ga=ma=null,jI(n),e)for(n=0;n<e.length;n++)jI(e[n])}}function fA(n,e){return n(e)}function pA(){}var Rm=!1;function mA(n,e,t){if(Rm)return n(e,t);Rm=!0;try{return fA(n,e,t)}finally{Rm=!1,(ma!==null||ga!==null)&&(pA(),dA())}}function Qu(n,e){var t=n.stateNode;if(t===null)return null;var r=Kf(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(q(231,e,typeof t));return t}var Bg=!1;if(ei)try{var Gl={};Object.defineProperty(Gl,"passive",{get:function(){Bg=!0}}),window.addEventListener("test",Gl,Gl),window.removeEventListener("test",Gl,Gl)}catch{Bg=!1}function SO(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(h){this.onError(h)}}var Ru=!1,Fd=null,Ud=!1,jg=null,RO={onError:function(n){Ru=!0,Fd=n}};function AO(n,e,t,r,i,s,o,a,l){Ru=!1,Fd=null,SO.apply(RO,arguments)}function CO(n,e,t,r,i,s,o,a,l){if(AO.apply(this,arguments),Ru){if(Ru){var c=Fd;Ru=!1,Fd=null}else throw Error(q(198));Ud||(Ud=!0,jg=c)}}function wo(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function gA(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function zI(n){if(wo(n)!==n)throw Error(q(188))}function PO(n){var e=n.alternate;if(!e){if(e=wo(n),e===null)throw Error(q(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return zI(i),n;if(s===r)return zI(i),e;s=s.sibling}throw Error(q(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(q(189))}}if(t.alternate!==r)throw Error(q(190))}if(t.tag!==3)throw Error(q(188));return t.stateNode.current===t?n:e}function _A(n){return n=PO(n),n!==null?yA(n):null}function yA(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=yA(n);if(e!==null)return e;n=n.sibling}return null}var vA=kn.unstable_scheduleCallback,qI=kn.unstable_cancelCallback,kO=kn.unstable_shouldYield,bO=kn.unstable_requestPaint,rt=kn.unstable_now,NO=kn.unstable_getCurrentPriorityLevel,Uy=kn.unstable_ImmediatePriority,wA=kn.unstable_UserBlockingPriority,Bd=kn.unstable_NormalPriority,xO=kn.unstable_LowPriority,EA=kn.unstable_IdlePriority,$f=null,Pr=null;function DO(n){if(Pr&&typeof Pr.onCommitFiberRoot=="function")try{Pr.onCommitFiberRoot($f,n,void 0,(n.current.flags&128)===128)}catch{}}var ar=Math.clz32?Math.clz32:VO,OO=Math.log,LO=Math.LN2;function VO(n){return n>>>=0,n===0?32:31-(OO(n)/LO|0)|0}var Mh=64,Fh=4194304;function mu(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function jd(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=mu(a):(s&=o,s!==0&&(r=mu(s)))}else o=t&~i,o!==0?r=mu(o):s!==0&&(r=mu(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-ar(e),i=1<<t,r|=n[t],e&=~i;return r}function MO(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FO(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-ar(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=MO(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function zg(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function IA(){var n=Mh;return Mh<<=1,!(Mh&4194240)&&(Mh=64),n}function Am(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Mc(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-ar(e),n[e]=t}function UO(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-ar(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function By(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-ar(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Ie=0;function TA(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var SA,jy,RA,AA,CA,qg=!1,Uh=[],Li=null,Vi=null,Mi=null,Yu=new Map,Ju=new Map,Ai=[],BO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $I(n,e){switch(n){case"focusin":case"focusout":Li=null;break;case"dragenter":case"dragleave":Vi=null;break;case"mouseover":case"mouseout":Mi=null;break;case"pointerover":case"pointerout":Yu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ju.delete(e.pointerId)}}function Hl(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Uc(e),e!==null&&jy(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function jO(n,e,t,r,i){switch(e){case"focusin":return Li=Hl(Li,n,e,t,r,i),!0;case"dragenter":return Vi=Hl(Vi,n,e,t,r,i),!0;case"mouseover":return Mi=Hl(Mi,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return Yu.set(s,Hl(Yu.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ju.set(s,Hl(Ju.get(s)||null,n,e,t,r,i)),!0}return!1}function PA(n){var e=Os(n.target);if(e!==null){var t=wo(e);if(t!==null){if(e=t.tag,e===13){if(e=gA(t),e!==null){n.blockedOn=e,CA(n.priority,function(){RA(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function hd(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=$g(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);Fg=r,t.target.dispatchEvent(r),Fg=null}else return e=Uc(t),e!==null&&jy(e),n.blockedOn=t,!1;e.shift()}return!0}function WI(n,e,t){hd(n)&&t.delete(e)}function zO(){qg=!1,Li!==null&&hd(Li)&&(Li=null),Vi!==null&&hd(Vi)&&(Vi=null),Mi!==null&&hd(Mi)&&(Mi=null),Yu.forEach(WI),Ju.forEach(WI)}function Kl(n,e){n.blockedOn===e&&(n.blockedOn=null,qg||(qg=!0,kn.unstable_scheduleCallback(kn.unstable_NormalPriority,zO)))}function Xu(n){function e(i){return Kl(i,n)}if(0<Uh.length){Kl(Uh[0],n);for(var t=1;t<Uh.length;t++){var r=Uh[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Li!==null&&Kl(Li,n),Vi!==null&&Kl(Vi,n),Mi!==null&&Kl(Mi,n),Yu.forEach(e),Ju.forEach(e),t=0;t<Ai.length;t++)r=Ai[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Ai.length&&(t=Ai[0],t.blockedOn===null);)PA(t),t.blockedOn===null&&Ai.shift()}var _a=ai.ReactCurrentBatchConfig,zd=!0;function qO(n,e,t,r){var i=Ie,s=_a.transition;_a.transition=null;try{Ie=1,zy(n,e,t,r)}finally{Ie=i,_a.transition=s}}function $O(n,e,t,r){var i=Ie,s=_a.transition;_a.transition=null;try{Ie=4,zy(n,e,t,r)}finally{Ie=i,_a.transition=s}}function zy(n,e,t,r){if(zd){var i=$g(n,e,t,r);if(i===null)Vm(n,e,r,qd,t),$I(n,r);else if(jO(i,n,e,t,r))r.stopPropagation();else if($I(n,r),e&4&&-1<BO.indexOf(n)){for(;i!==null;){var s=Uc(i);if(s!==null&&SA(s),s=$g(n,e,t,r),s===null&&Vm(n,e,r,qd,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else Vm(n,e,r,null,t)}}var qd=null;function $g(n,e,t,r){if(qd=null,n=Fy(r),n=Os(n),n!==null)if(e=wo(n),e===null)n=null;else if(t=e.tag,t===13){if(n=gA(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return qd=n,null}function kA(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(NO()){case Uy:return 1;case wA:return 4;case Bd:case xO:return 16;case EA:return 536870912;default:return 16}default:return 16}}var bi=null,qy=null,dd=null;function bA(){if(dd)return dd;var n,e=qy,t=e.length,r,i="value"in bi?bi.value:bi.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return dd=i.slice(n,1<r?1-r:void 0)}function fd(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Bh(){return!0}function GI(){return!1}function Dn(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Bh:GI,this.isPropagationStopped=GI,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Bh)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Bh)},persist:function(){},isPersistent:Bh}),e}var sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$y=Dn(sl),Fc=Ge({},sl,{view:0,detail:0}),WO=Dn(Fc),Cm,Pm,Ql,Wf=Ge({},Fc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wy,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ql&&(Ql&&n.type==="mousemove"?(Cm=n.screenX-Ql.screenX,Pm=n.screenY-Ql.screenY):Pm=Cm=0,Ql=n),Cm)},movementY:function(n){return"movementY"in n?n.movementY:Pm}}),HI=Dn(Wf),GO=Ge({},Wf,{dataTransfer:0}),HO=Dn(GO),KO=Ge({},Fc,{relatedTarget:0}),km=Dn(KO),QO=Ge({},sl,{animationName:0,elapsedTime:0,pseudoElement:0}),YO=Dn(QO),JO=Ge({},sl,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),XO=Dn(JO),ZO=Ge({},sl,{data:0}),KI=Dn(ZO),eL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rL(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=nL[n])?!!e[n]:!1}function Wy(){return rL}var iL=Ge({},Fc,{key:function(n){if(n.key){var e=eL[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=fd(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?tL[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wy,charCode:function(n){return n.type==="keypress"?fd(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?fd(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),sL=Dn(iL),oL=Ge({},Wf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),QI=Dn(oL),aL=Ge({},Fc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wy}),lL=Dn(aL),uL=Ge({},sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),cL=Dn(uL),hL=Ge({},Wf,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),dL=Dn(hL),fL=[9,13,27,32],Gy=ei&&"CompositionEvent"in window,Au=null;ei&&"documentMode"in document&&(Au=document.documentMode);var pL=ei&&"TextEvent"in window&&!Au,NA=ei&&(!Gy||Au&&8<Au&&11>=Au),YI=" ",JI=!1;function xA(n,e){switch(n){case"keyup":return fL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function DA(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ta=!1;function mL(n,e){switch(n){case"compositionend":return DA(e);case"keypress":return e.which!==32?null:(JI=!0,YI);case"textInput":return n=e.data,n===YI&&JI?null:n;default:return null}}function gL(n,e){if(ta)return n==="compositionend"||!Gy&&xA(n,e)?(n=bA(),dd=qy=bi=null,ta=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return NA&&e.locale!=="ko"?null:e.data;default:return null}}var _L={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function XI(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!_L[n.type]:e==="textarea"}function OA(n,e,t,r){hA(r),e=$d(e,"onChange"),0<e.length&&(t=new $y("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Cu=null,Zu=null;function yL(n){WA(n,0)}function Gf(n){var e=ia(n);if(iA(e))return n}function vL(n,e){if(n==="change")return e}var LA=!1;if(ei){var bm;if(ei){var Nm="oninput"in document;if(!Nm){var ZI=document.createElement("div");ZI.setAttribute("oninput","return;"),Nm=typeof ZI.oninput=="function"}bm=Nm}else bm=!1;LA=bm&&(!document.documentMode||9<document.documentMode)}function eT(){Cu&&(Cu.detachEvent("onpropertychange",VA),Zu=Cu=null)}function VA(n){if(n.propertyName==="value"&&Gf(Zu)){var e=[];OA(e,Zu,n,Fy(n)),mA(yL,e)}}function wL(n,e,t){n==="focusin"?(eT(),Cu=e,Zu=t,Cu.attachEvent("onpropertychange",VA)):n==="focusout"&&eT()}function EL(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Gf(Zu)}function IL(n,e){if(n==="click")return Gf(e)}function TL(n,e){if(n==="input"||n==="change")return Gf(e)}function SL(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var hr=typeof Object.is=="function"?Object.is:SL;function ec(n,e){if(hr(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!Ag.call(e,i)||!hr(n[i],e[i]))return!1}return!0}function tT(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function nT(n,e){var t=tT(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=tT(t)}}function MA(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?MA(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function FA(){for(var n=window,e=Md();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Md(n.document)}return e}function Hy(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function RL(n){var e=FA(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&MA(t.ownerDocument.documentElement,t)){if(r!==null&&Hy(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=nT(t,s);var o=nT(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var AL=ei&&"documentMode"in document&&11>=document.documentMode,na=null,Wg=null,Pu=null,Gg=!1;function rT(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Gg||na==null||na!==Md(r)||(r=na,"selectionStart"in r&&Hy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Pu&&ec(Pu,r)||(Pu=r,r=$d(Wg,"onSelect"),0<r.length&&(e=new $y("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=na)))}function jh(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var ra={animationend:jh("Animation","AnimationEnd"),animationiteration:jh("Animation","AnimationIteration"),animationstart:jh("Animation","AnimationStart"),transitionend:jh("Transition","TransitionEnd")},xm={},UA={};ei&&(UA=document.createElement("div").style,"AnimationEvent"in window||(delete ra.animationend.animation,delete ra.animationiteration.animation,delete ra.animationstart.animation),"TransitionEvent"in window||delete ra.transitionend.transition);function Hf(n){if(xm[n])return xm[n];if(!ra[n])return n;var e=ra[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in UA)return xm[n]=e[t];return n}var BA=Hf("animationend"),jA=Hf("animationiteration"),zA=Hf("animationstart"),qA=Hf("transitionend"),$A=new Map,iT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ls(n,e){$A.set(n,e),vo(e,[n])}for(var Dm=0;Dm<iT.length;Dm++){var Om=iT[Dm],CL=Om.toLowerCase(),PL=Om[0].toUpperCase()+Om.slice(1);ls(CL,"on"+PL)}ls(BA,"onAnimationEnd");ls(jA,"onAnimationIteration");ls(zA,"onAnimationStart");ls("dblclick","onDoubleClick");ls("focusin","onFocus");ls("focusout","onBlur");ls(qA,"onTransitionEnd");ka("onMouseEnter",["mouseout","mouseover"]);ka("onMouseLeave",["mouseout","mouseover"]);ka("onPointerEnter",["pointerout","pointerover"]);ka("onPointerLeave",["pointerout","pointerover"]);vo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vo("onBeforeInput",["compositionend","keypress","textInput","paste"]);vo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kL=new Set("cancel close invalid load scroll toggle".split(" ").concat(gu));function sT(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,CO(r,e,void 0,n),n.currentTarget=null}function WA(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;sT(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;sT(i,a,c),s=l}}}if(Ud)throw n=jg,Ud=!1,jg=null,n}function be(n,e){var t=e[Jg];t===void 0&&(t=e[Jg]=new Set);var r=n+"__bubble";t.has(r)||(GA(e,n,2,!1),t.add(r))}function Lm(n,e,t){var r=0;e&&(r|=4),GA(t,n,r,e)}var zh="_reactListening"+Math.random().toString(36).slice(2);function tc(n){if(!n[zh]){n[zh]=!0,ZR.forEach(function(t){t!=="selectionchange"&&(kL.has(t)||Lm(t,!1,n),Lm(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[zh]||(e[zh]=!0,Lm("selectionchange",!1,e))}}function GA(n,e,t,r){switch(kA(e)){case 1:var i=qO;break;case 4:i=$O;break;default:i=zy}t=i.bind(null,e,t,n),i=void 0,!Bg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function Vm(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Os(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}mA(function(){var c=s,h=Fy(t),d=[];e:{var p=$A.get(n);if(p!==void 0){var g=$y,y=n;switch(n){case"keypress":if(fd(t)===0)break e;case"keydown":case"keyup":g=sL;break;case"focusin":y="focus",g=km;break;case"focusout":y="blur",g=km;break;case"beforeblur":case"afterblur":g=km;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=HI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=HO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=lL;break;case BA:case jA:case zA:g=YO;break;case qA:g=cL;break;case"scroll":g=WO;break;case"wheel":g=dL;break;case"copy":case"cut":case"paste":g=XO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=QI}var S=(e&4)!==0,C=!S&&n==="scroll",I=S?p!==null?p+"Capture":null:p;S=[];for(var w=c,E;w!==null;){E=w;var k=E.stateNode;if(E.tag===5&&k!==null&&(E=k,I!==null&&(k=Qu(w,I),k!=null&&S.push(nc(w,k,E)))),C)break;w=w.return}0<S.length&&(p=new g(p,y,null,t,h),d.push({event:p,listeners:S}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",p&&t!==Fg&&(y=t.relatedTarget||t.fromElement)&&(Os(y)||y[ti]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(y=t.relatedTarget||t.toElement,g=c,y=y?Os(y):null,y!==null&&(C=wo(y),y!==C||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=c),g!==y)){if(S=HI,k="onMouseLeave",I="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(S=QI,k="onPointerLeave",I="onPointerEnter",w="pointer"),C=g==null?p:ia(g),E=y==null?p:ia(y),p=new S(k,w+"leave",g,t,h),p.target=C,p.relatedTarget=E,k=null,Os(h)===c&&(S=new S(I,w+"enter",y,t,h),S.target=E,S.relatedTarget=C,k=S),C=k,g&&y)t:{for(S=g,I=y,w=0,E=S;E;E=Bo(E))w++;for(E=0,k=I;k;k=Bo(k))E++;for(;0<w-E;)S=Bo(S),w--;for(;0<E-w;)I=Bo(I),E--;for(;w--;){if(S===I||I!==null&&S===I.alternate)break t;S=Bo(S),I=Bo(I)}S=null}else S=null;g!==null&&oT(d,p,g,S,!1),y!==null&&C!==null&&oT(d,C,y,S,!0)}}e:{if(p=c?ia(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var M=vL;else if(XI(p))if(LA)M=TL;else{M=EL;var F=wL}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(M=IL);if(M&&(M=M(n,c))){OA(d,M,t,h);break e}F&&F(n,p,c),n==="focusout"&&(F=p._wrapperState)&&F.controlled&&p.type==="number"&&Dg(p,"number",p.value)}switch(F=c?ia(c):window,n){case"focusin":(XI(F)||F.contentEditable==="true")&&(na=F,Wg=c,Pu=null);break;case"focusout":Pu=Wg=na=null;break;case"mousedown":Gg=!0;break;case"contextmenu":case"mouseup":case"dragend":Gg=!1,rT(d,t,h);break;case"selectionchange":if(AL)break;case"keydown":case"keyup":rT(d,t,h)}var T;if(Gy)e:{switch(n){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else ta?xA(n,t)&&(v="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(v="onCompositionStart");v&&(NA&&t.locale!=="ko"&&(ta||v!=="onCompositionStart"?v==="onCompositionEnd"&&ta&&(T=bA()):(bi=h,qy="value"in bi?bi.value:bi.textContent,ta=!0)),F=$d(c,v),0<F.length&&(v=new KI(v,n,null,t,h),d.push({event:v,listeners:F}),T?v.data=T:(T=DA(t),T!==null&&(v.data=T)))),(T=pL?mL(n,t):gL(n,t))&&(c=$d(c,"onBeforeInput"),0<c.length&&(h=new KI("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:c}),h.data=T))}WA(d,e)})}function nc(n,e,t){return{instance:n,listener:e,currentTarget:t}}function $d(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Qu(n,t),s!=null&&r.unshift(nc(n,s,i)),s=Qu(n,e),s!=null&&r.push(nc(n,s,i))),n=n.return}return r}function Bo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function oT(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Qu(t,s),l!=null&&o.unshift(nc(t,l,a))):i||(l=Qu(t,s),l!=null&&o.push(nc(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var bL=/\r\n?/g,NL=/\u0000|\uFFFD/g;function aT(n){return(typeof n=="string"?n:""+n).replace(bL,`
`).replace(NL,"")}function qh(n,e,t){if(e=aT(e),aT(n)!==e&&t)throw Error(q(425))}function Wd(){}var Hg=null,Kg=null;function Qg(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Yg=typeof setTimeout=="function"?setTimeout:void 0,xL=typeof clearTimeout=="function"?clearTimeout:void 0,lT=typeof Promise=="function"?Promise:void 0,DL=typeof queueMicrotask=="function"?queueMicrotask:typeof lT<"u"?function(n){return lT.resolve(null).then(n).catch(OL)}:Yg;function OL(n){setTimeout(function(){throw n})}function Mm(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),Xu(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);Xu(e)}function Fi(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function uT(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var ol=Math.random().toString(36).slice(2),yr="__reactFiber$"+ol,rc="__reactProps$"+ol,ti="__reactContainer$"+ol,Jg="__reactEvents$"+ol,LL="__reactListeners$"+ol,VL="__reactHandles$"+ol;function Os(n){var e=n[yr];if(e)return e;for(var t=n.parentNode;t;){if(e=t[ti]||t[yr]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=uT(n);n!==null;){if(t=n[yr])return t;n=uT(n)}return e}n=t,t=n.parentNode}return null}function Uc(n){return n=n[yr]||n[ti],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ia(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(q(33))}function Kf(n){return n[rc]||null}var Xg=[],sa=-1;function us(n){return{current:n}}function Oe(n){0>sa||(n.current=Xg[sa],Xg[sa]=null,sa--)}function Ce(n,e){sa++,Xg[sa]=n.current,n.current=e}var Qi={},Ht=us(Qi),yn=us(!1),Qs=Qi;function ba(n,e){var t=n.type.contextTypes;if(!t)return Qi;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function vn(n){return n=n.childContextTypes,n!=null}function Gd(){Oe(yn),Oe(Ht)}function cT(n,e,t){if(Ht.current!==Qi)throw Error(q(168));Ce(Ht,e),Ce(yn,t)}function HA(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(q(108,wO(n)||"Unknown",i));return Ge({},t,r)}function Hd(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Qi,Qs=Ht.current,Ce(Ht,n),Ce(yn,yn.current),!0}function hT(n,e,t){var r=n.stateNode;if(!r)throw Error(q(169));t?(n=HA(n,e,Qs),r.__reactInternalMemoizedMergedChildContext=n,Oe(yn),Oe(Ht),Ce(Ht,n)):Oe(yn),Ce(yn,t)}var qr=null,Qf=!1,Fm=!1;function KA(n){qr===null?qr=[n]:qr.push(n)}function ML(n){Qf=!0,KA(n)}function cs(){if(!Fm&&qr!==null){Fm=!0;var n=0,e=Ie;try{var t=qr;for(Ie=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}qr=null,Qf=!1}catch(i){throw qr!==null&&(qr=qr.slice(n+1)),vA(Uy,cs),i}finally{Ie=e,Fm=!1}}return null}var oa=[],aa=0,Kd=null,Qd=0,Ln=[],Vn=0,Ys=null,$r=1,Wr="";function Ss(n,e){oa[aa++]=Qd,oa[aa++]=Kd,Kd=n,Qd=e}function QA(n,e,t){Ln[Vn++]=$r,Ln[Vn++]=Wr,Ln[Vn++]=Ys,Ys=n;var r=$r;n=Wr;var i=32-ar(r)-1;r&=~(1<<i),t+=1;var s=32-ar(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$r=1<<32-ar(e)+i|t<<i|r,Wr=s+n}else $r=1<<s|t<<i|r,Wr=n}function Ky(n){n.return!==null&&(Ss(n,1),QA(n,1,0))}function Qy(n){for(;n===Kd;)Kd=oa[--aa],oa[aa]=null,Qd=oa[--aa],oa[aa]=null;for(;n===Ys;)Ys=Ln[--Vn],Ln[Vn]=null,Wr=Ln[--Vn],Ln[Vn]=null,$r=Ln[--Vn],Ln[Vn]=null}var Cn=null,Rn=null,Me=!1,rr=null;function YA(n,e){var t=Mn(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function dT(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Cn=n,Rn=Fi(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Cn=n,Rn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ys!==null?{id:$r,overflow:Wr}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Mn(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Cn=n,Rn=null,!0):!1;default:return!1}}function Zg(n){return(n.mode&1)!==0&&(n.flags&128)===0}function e_(n){if(Me){var e=Rn;if(e){var t=e;if(!dT(n,e)){if(Zg(n))throw Error(q(418));e=Fi(t.nextSibling);var r=Cn;e&&dT(n,e)?YA(r,t):(n.flags=n.flags&-4097|2,Me=!1,Cn=n)}}else{if(Zg(n))throw Error(q(418));n.flags=n.flags&-4097|2,Me=!1,Cn=n}}}function fT(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Cn=n}function $h(n){if(n!==Cn)return!1;if(!Me)return fT(n),Me=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Qg(n.type,n.memoizedProps)),e&&(e=Rn)){if(Zg(n))throw JA(),Error(q(418));for(;e;)YA(n,e),e=Fi(e.nextSibling)}if(fT(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(q(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Rn=Fi(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Rn=null}}else Rn=Cn?Fi(n.stateNode.nextSibling):null;return!0}function JA(){for(var n=Rn;n;)n=Fi(n.nextSibling)}function Na(){Rn=Cn=null,Me=!1}function Yy(n){rr===null?rr=[n]:rr.push(n)}var FL=ai.ReactCurrentBatchConfig;function Yl(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(q(309));var r=t.stateNode}if(!r)throw Error(q(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(q(284));if(!t._owner)throw Error(q(290,n))}return n}function Wh(n,e){throw n=Object.prototype.toString.call(e),Error(q(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function pT(n){var e=n._init;return e(n._payload)}function XA(n){function e(I,w){if(n){var E=I.deletions;E===null?(I.deletions=[w],I.flags|=16):E.push(w)}}function t(I,w){if(!n)return null;for(;w!==null;)e(I,w),w=w.sibling;return null}function r(I,w){for(I=new Map;w!==null;)w.key!==null?I.set(w.key,w):I.set(w.index,w),w=w.sibling;return I}function i(I,w){return I=zi(I,w),I.index=0,I.sibling=null,I}function s(I,w,E){return I.index=E,n?(E=I.alternate,E!==null?(E=E.index,E<w?(I.flags|=2,w):E):(I.flags|=2,w)):(I.flags|=1048576,w)}function o(I){return n&&I.alternate===null&&(I.flags|=2),I}function a(I,w,E,k){return w===null||w.tag!==6?(w=Wm(E,I.mode,k),w.return=I,w):(w=i(w,E),w.return=I,w)}function l(I,w,E,k){var M=E.type;return M===ea?h(I,w,E.props.children,k,E.key):w!==null&&(w.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Si&&pT(M)===w.type)?(k=i(w,E.props),k.ref=Yl(I,w,E),k.return=I,k):(k=wd(E.type,E.key,E.props,null,I.mode,k),k.ref=Yl(I,w,E),k.return=I,k)}function c(I,w,E,k){return w===null||w.tag!==4||w.stateNode.containerInfo!==E.containerInfo||w.stateNode.implementation!==E.implementation?(w=Gm(E,I.mode,k),w.return=I,w):(w=i(w,E.children||[]),w.return=I,w)}function h(I,w,E,k,M){return w===null||w.tag!==7?(w=zs(E,I.mode,k,M),w.return=I,w):(w=i(w,E),w.return=I,w)}function d(I,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Wm(""+w,I.mode,E),w.return=I,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Oh:return E=wd(w.type,w.key,w.props,null,I.mode,E),E.ref=Yl(I,null,w),E.return=I,E;case Zo:return w=Gm(w,I.mode,E),w.return=I,w;case Si:var k=w._init;return d(I,k(w._payload),E)}if(pu(w)||Wl(w))return w=zs(w,I.mode,E,null),w.return=I,w;Wh(I,w)}return null}function p(I,w,E,k){var M=w!==null?w.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return M!==null?null:a(I,w,""+E,k);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Oh:return E.key===M?l(I,w,E,k):null;case Zo:return E.key===M?c(I,w,E,k):null;case Si:return M=E._init,p(I,w,M(E._payload),k)}if(pu(E)||Wl(E))return M!==null?null:h(I,w,E,k,null);Wh(I,E)}return null}function g(I,w,E,k,M){if(typeof k=="string"&&k!==""||typeof k=="number")return I=I.get(E)||null,a(w,I,""+k,M);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Oh:return I=I.get(k.key===null?E:k.key)||null,l(w,I,k,M);case Zo:return I=I.get(k.key===null?E:k.key)||null,c(w,I,k,M);case Si:var F=k._init;return g(I,w,E,F(k._payload),M)}if(pu(k)||Wl(k))return I=I.get(E)||null,h(w,I,k,M,null);Wh(w,k)}return null}function y(I,w,E,k){for(var M=null,F=null,T=w,v=w=0,R=null;T!==null&&v<E.length;v++){T.index>v?(R=T,T=null):R=T.sibling;var P=p(I,T,E[v],k);if(P===null){T===null&&(T=R);break}n&&T&&P.alternate===null&&e(I,T),w=s(P,w,v),F===null?M=P:F.sibling=P,F=P,T=R}if(v===E.length)return t(I,T),Me&&Ss(I,v),M;if(T===null){for(;v<E.length;v++)T=d(I,E[v],k),T!==null&&(w=s(T,w,v),F===null?M=T:F.sibling=T,F=T);return Me&&Ss(I,v),M}for(T=r(I,T);v<E.length;v++)R=g(T,I,v,E[v],k),R!==null&&(n&&R.alternate!==null&&T.delete(R.key===null?v:R.key),w=s(R,w,v),F===null?M=R:F.sibling=R,F=R);return n&&T.forEach(function(b){return e(I,b)}),Me&&Ss(I,v),M}function S(I,w,E,k){var M=Wl(E);if(typeof M!="function")throw Error(q(150));if(E=M.call(E),E==null)throw Error(q(151));for(var F=M=null,T=w,v=w=0,R=null,P=E.next();T!==null&&!P.done;v++,P=E.next()){T.index>v?(R=T,T=null):R=T.sibling;var b=p(I,T,P.value,k);if(b===null){T===null&&(T=R);break}n&&T&&b.alternate===null&&e(I,T),w=s(b,w,v),F===null?M=b:F.sibling=b,F=b,T=R}if(P.done)return t(I,T),Me&&Ss(I,v),M;if(T===null){for(;!P.done;v++,P=E.next())P=d(I,P.value,k),P!==null&&(w=s(P,w,v),F===null?M=P:F.sibling=P,F=P);return Me&&Ss(I,v),M}for(T=r(I,T);!P.done;v++,P=E.next())P=g(T,I,v,P.value,k),P!==null&&(n&&P.alternate!==null&&T.delete(P.key===null?v:P.key),w=s(P,w,v),F===null?M=P:F.sibling=P,F=P);return n&&T.forEach(function(N){return e(I,N)}),Me&&Ss(I,v),M}function C(I,w,E,k){if(typeof E=="object"&&E!==null&&E.type===ea&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Oh:e:{for(var M=E.key,F=w;F!==null;){if(F.key===M){if(M=E.type,M===ea){if(F.tag===7){t(I,F.sibling),w=i(F,E.props.children),w.return=I,I=w;break e}}else if(F.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Si&&pT(M)===F.type){t(I,F.sibling),w=i(F,E.props),w.ref=Yl(I,F,E),w.return=I,I=w;break e}t(I,F);break}else e(I,F);F=F.sibling}E.type===ea?(w=zs(E.props.children,I.mode,k,E.key),w.return=I,I=w):(k=wd(E.type,E.key,E.props,null,I.mode,k),k.ref=Yl(I,w,E),k.return=I,I=k)}return o(I);case Zo:e:{for(F=E.key;w!==null;){if(w.key===F)if(w.tag===4&&w.stateNode.containerInfo===E.containerInfo&&w.stateNode.implementation===E.implementation){t(I,w.sibling),w=i(w,E.children||[]),w.return=I,I=w;break e}else{t(I,w);break}else e(I,w);w=w.sibling}w=Gm(E,I.mode,k),w.return=I,I=w}return o(I);case Si:return F=E._init,C(I,w,F(E._payload),k)}if(pu(E))return y(I,w,E,k);if(Wl(E))return S(I,w,E,k);Wh(I,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,w!==null&&w.tag===6?(t(I,w.sibling),w=i(w,E),w.return=I,I=w):(t(I,w),w=Wm(E,I.mode,k),w.return=I,I=w),o(I)):t(I,w)}return C}var xa=XA(!0),ZA=XA(!1),Yd=us(null),Jd=null,la=null,Jy=null;function Xy(){Jy=la=Jd=null}function Zy(n){var e=Yd.current;Oe(Yd),n._currentValue=e}function t_(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function ya(n,e){Jd=n,Jy=la=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(fn=!0),n.firstContext=null)}function $n(n){var e=n._currentValue;if(Jy!==n)if(n={context:n,memoizedValue:e,next:null},la===null){if(Jd===null)throw Error(q(308));la=n,Jd.dependencies={lanes:0,firstContext:n}}else la=la.next=n;return e}var Ls=null;function ev(n){Ls===null?Ls=[n]:Ls.push(n)}function eC(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,ev(e)):(t.next=i.next,i.next=t),e.interleaved=t,ni(n,r)}function ni(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Ri=!1;function tv(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tC(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Yr(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Ui(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ni(n,t)}return i=r.interleaved,i===null?(e.next=e,ev(r)):(e.next=i.next,i.next=e),r.interleaved=e,ni(n,t)}function pd(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,By(n,t)}}function mT(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Xd(n,e,t,r){var i=n.updateQueue;Ri=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,g=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=n,S=a;switch(p=e,g=t,S.tag){case 1:if(y=S.payload,typeof y=="function"){d=y.call(g,d,p);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=S.payload,p=typeof y=="function"?y.call(g,d,p):y,p==null)break e;d=Ge({},d,p);break e;case 2:Ri=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=g,l=d):h=h.next=g,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Xs|=o,n.lanes=o,n.memoizedState=d}}function gT(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(q(191,i));i.call(r)}}}var Bc={},kr=us(Bc),ic=us(Bc),sc=us(Bc);function Vs(n){if(n===Bc)throw Error(q(174));return n}function nv(n,e){switch(Ce(sc,e),Ce(ic,n),Ce(kr,Bc),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Lg(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Lg(e,n)}Oe(kr),Ce(kr,e)}function Da(){Oe(kr),Oe(ic),Oe(sc)}function nC(n){Vs(sc.current);var e=Vs(kr.current),t=Lg(e,n.type);e!==t&&(Ce(ic,n),Ce(kr,t))}function rv(n){ic.current===n&&(Oe(kr),Oe(ic))}var qe=us(0);function Zd(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Um=[];function iv(){for(var n=0;n<Um.length;n++)Um[n]._workInProgressVersionPrimary=null;Um.length=0}var md=ai.ReactCurrentDispatcher,Bm=ai.ReactCurrentBatchConfig,Js=0,$e=null,ht=null,_t=null,ef=!1,ku=!1,oc=0,UL=0;function Ft(){throw Error(q(321))}function sv(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!hr(n[t],e[t]))return!1;return!0}function ov(n,e,t,r,i,s){if(Js=s,$e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,md.current=n===null||n.memoizedState===null?qL:$L,n=t(r,i),ku){s=0;do{if(ku=!1,oc=0,25<=s)throw Error(q(301));s+=1,_t=ht=null,e.updateQueue=null,md.current=WL,n=t(r,i)}while(ku)}if(md.current=tf,e=ht!==null&&ht.next!==null,Js=0,_t=ht=$e=null,ef=!1,e)throw Error(q(300));return n}function av(){var n=oc!==0;return oc=0,n}function _r(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?$e.memoizedState=_t=n:_t=_t.next=n,_t}function Wn(){if(ht===null){var n=$e.alternate;n=n!==null?n.memoizedState:null}else n=ht.next;var e=_t===null?$e.memoizedState:_t.next;if(e!==null)_t=e,ht=n;else{if(n===null)throw Error(q(310));ht=n,n={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},_t===null?$e.memoizedState=_t=n:_t=_t.next=n}return _t}function ac(n,e){return typeof e=="function"?e(n):e}function jm(n){var e=Wn(),t=e.queue;if(t===null)throw Error(q(311));t.lastRenderedReducer=n;var r=ht,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((Js&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,$e.lanes|=h,Xs|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,hr(r,e.memoizedState)||(fn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,$e.lanes|=s,Xs|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function zm(n){var e=Wn(),t=e.queue;if(t===null)throw Error(q(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);hr(s,e.memoizedState)||(fn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function rC(){}function iC(n,e){var t=$e,r=Wn(),i=e(),s=!hr(r.memoizedState,i);if(s&&(r.memoizedState=i,fn=!0),r=r.queue,lv(aC.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||_t!==null&&_t.memoizedState.tag&1){if(t.flags|=2048,lc(9,oC.bind(null,t,r,i,e),void 0,null),Et===null)throw Error(q(349));Js&30||sC(t,e,i)}return i}function sC(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function oC(n,e,t,r){e.value=t,e.getSnapshot=r,lC(e)&&uC(n)}function aC(n,e,t){return t(function(){lC(e)&&uC(n)})}function lC(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!hr(n,t)}catch{return!0}}function uC(n){var e=ni(n,1);e!==null&&lr(e,n,1,-1)}function _T(n){var e=_r();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ac,lastRenderedState:n},e.queue=n,n=n.dispatch=zL.bind(null,$e,n),[e.memoizedState,n]}function lc(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function cC(){return Wn().memoizedState}function gd(n,e,t,r){var i=_r();$e.flags|=n,i.memoizedState=lc(1|e,t,void 0,r===void 0?null:r)}function Yf(n,e,t,r){var i=Wn();r=r===void 0?null:r;var s=void 0;if(ht!==null){var o=ht.memoizedState;if(s=o.destroy,r!==null&&sv(r,o.deps)){i.memoizedState=lc(e,t,s,r);return}}$e.flags|=n,i.memoizedState=lc(1|e,t,s,r)}function yT(n,e){return gd(8390656,8,n,e)}function lv(n,e){return Yf(2048,8,n,e)}function hC(n,e){return Yf(4,2,n,e)}function dC(n,e){return Yf(4,4,n,e)}function fC(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function pC(n,e,t){return t=t!=null?t.concat([n]):null,Yf(4,4,fC.bind(null,e,n),t)}function uv(){}function mC(n,e){var t=Wn();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&sv(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function gC(n,e){var t=Wn();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&sv(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function _C(n,e,t){return Js&21?(hr(t,e)||(t=IA(),$e.lanes|=t,Xs|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,fn=!0),n.memoizedState=t)}function BL(n,e){var t=Ie;Ie=t!==0&&4>t?t:4,n(!0);var r=Bm.transition;Bm.transition={};try{n(!1),e()}finally{Ie=t,Bm.transition=r}}function yC(){return Wn().memoizedState}function jL(n,e,t){var r=ji(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},vC(n))wC(e,t);else if(t=eC(n,e,t,r),t!==null){var i=tn();lr(t,n,r,i),EC(t,e,r)}}function zL(n,e,t){var r=ji(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(vC(n))wC(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,hr(a,o)){var l=e.interleaved;l===null?(i.next=i,ev(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=eC(n,e,i,r),t!==null&&(i=tn(),lr(t,n,r,i),EC(t,e,r))}}function vC(n){var e=n.alternate;return n===$e||e!==null&&e===$e}function wC(n,e){ku=ef=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function EC(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,By(n,t)}}var tf={readContext:$n,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},qL={readContext:$n,useCallback:function(n,e){return _r().memoizedState=[n,e===void 0?null:e],n},useContext:$n,useEffect:yT,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,gd(4194308,4,fC.bind(null,e,n),t)},useLayoutEffect:function(n,e){return gd(4194308,4,n,e)},useInsertionEffect:function(n,e){return gd(4,2,n,e)},useMemo:function(n,e){var t=_r();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=_r();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=jL.bind(null,$e,n),[r.memoizedState,n]},useRef:function(n){var e=_r();return n={current:n},e.memoizedState=n},useState:_T,useDebugValue:uv,useDeferredValue:function(n){return _r().memoizedState=n},useTransition:function(){var n=_T(!1),e=n[0];return n=BL.bind(null,n[1]),_r().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=$e,i=_r();if(Me){if(t===void 0)throw Error(q(407));t=t()}else{if(t=e(),Et===null)throw Error(q(349));Js&30||sC(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,yT(aC.bind(null,r,s,n),[n]),r.flags|=2048,lc(9,oC.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=_r(),e=Et.identifierPrefix;if(Me){var t=Wr,r=$r;t=(r&~(1<<32-ar(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=oc++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=UL++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},$L={readContext:$n,useCallback:mC,useContext:$n,useEffect:lv,useImperativeHandle:pC,useInsertionEffect:hC,useLayoutEffect:dC,useMemo:gC,useReducer:jm,useRef:cC,useState:function(){return jm(ac)},useDebugValue:uv,useDeferredValue:function(n){var e=Wn();return _C(e,ht.memoizedState,n)},useTransition:function(){var n=jm(ac)[0],e=Wn().memoizedState;return[n,e]},useMutableSource:rC,useSyncExternalStore:iC,useId:yC,unstable_isNewReconciler:!1},WL={readContext:$n,useCallback:mC,useContext:$n,useEffect:lv,useImperativeHandle:pC,useInsertionEffect:hC,useLayoutEffect:dC,useMemo:gC,useReducer:zm,useRef:cC,useState:function(){return zm(ac)},useDebugValue:uv,useDeferredValue:function(n){var e=Wn();return ht===null?e.memoizedState=n:_C(e,ht.memoizedState,n)},useTransition:function(){var n=zm(ac)[0],e=Wn().memoizedState;return[n,e]},useMutableSource:rC,useSyncExternalStore:iC,useId:yC,unstable_isNewReconciler:!1};function tr(n,e){if(n&&n.defaultProps){e=Ge({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function n_(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Ge({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Jf={isMounted:function(n){return(n=n._reactInternals)?wo(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=tn(),i=ji(n),s=Yr(r,i);s.payload=e,t!=null&&(s.callback=t),e=Ui(n,s,i),e!==null&&(lr(e,n,i,r),pd(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=tn(),i=ji(n),s=Yr(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Ui(n,s,i),e!==null&&(lr(e,n,i,r),pd(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=tn(),r=ji(n),i=Yr(t,r);i.tag=2,e!=null&&(i.callback=e),e=Ui(n,i,r),e!==null&&(lr(e,n,r,t),pd(e,n,r))}};function vT(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ec(t,r)||!ec(i,s):!0}function IC(n,e,t){var r=!1,i=Qi,s=e.contextType;return typeof s=="object"&&s!==null?s=$n(s):(i=vn(e)?Qs:Ht.current,r=e.contextTypes,s=(r=r!=null)?ba(n,i):Qi),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jf,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function wT(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Jf.enqueueReplaceState(e,e.state,null)}function r_(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},tv(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=$n(s):(s=vn(e)?Qs:Ht.current,i.context=ba(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(n_(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Jf.enqueueReplaceState(i,i.state,null),Xd(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Oa(n,e){try{var t="",r=e;do t+=vO(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function qm(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function i_(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var GL=typeof WeakMap=="function"?WeakMap:Map;function TC(n,e,t){t=Yr(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){rf||(rf=!0,p_=r),i_(n,e)},t}function SC(n,e,t){t=Yr(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){i_(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){i_(n,e),typeof r!="function"&&(Bi===null?Bi=new Set([this]):Bi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function ET(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new GL;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=oV.bind(null,n,e,t),e.then(n,n))}function IT(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function TT(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Yr(-1,1),e.tag=2,Ui(t,e,1))),t.lanes|=1),n)}var HL=ai.ReactCurrentOwner,fn=!1;function Jt(n,e,t,r){e.child=n===null?ZA(e,null,t,r):xa(e,n.child,t,r)}function ST(n,e,t,r,i){t=t.render;var s=e.ref;return ya(e,i),r=ov(n,e,t,r,s,i),t=av(),n!==null&&!fn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,ri(n,e,i)):(Me&&t&&Ky(e),e.flags|=1,Jt(n,e,r,i),e.child)}function RT(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!_v(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,RC(n,e,s,r,i)):(n=wd(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:ec,t(o,r)&&n.ref===e.ref)return ri(n,e,i)}return e.flags|=1,n=zi(s,r),n.ref=e.ref,n.return=e,e.child=n}function RC(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(ec(s,r)&&n.ref===e.ref)if(fn=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(fn=!0);else return e.lanes=n.lanes,ri(n,e,i)}return s_(n,e,t,r,i)}function AC(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(ca,Tn),Tn|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Ce(ca,Tn),Tn|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,Ce(ca,Tn),Tn|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,Ce(ca,Tn),Tn|=r;return Jt(n,e,i,t),e.child}function CC(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function s_(n,e,t,r,i){var s=vn(t)?Qs:Ht.current;return s=ba(e,s),ya(e,i),t=ov(n,e,t,r,s,i),r=av(),n!==null&&!fn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,ri(n,e,i)):(Me&&r&&Ky(e),e.flags|=1,Jt(n,e,t,i),e.child)}function AT(n,e,t,r,i){if(vn(t)){var s=!0;Hd(e)}else s=!1;if(ya(e,i),e.stateNode===null)_d(n,e),IC(e,t,r),r_(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=$n(c):(c=vn(t)?Qs:Ht.current,c=ba(e,c));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&wT(e,o,r,c),Ri=!1;var p=e.memoizedState;o.state=p,Xd(e,r,o,i),l=e.memoizedState,a!==r||p!==l||yn.current||Ri?(typeof h=="function"&&(n_(e,t,h,r),l=e.memoizedState),(a=Ri||vT(e,t,a,r,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,tC(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:tr(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=$n(l):(l=vn(t)?Qs:Ht.current,l=ba(e,l));var g=t.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&wT(e,o,r,l),Ri=!1,p=e.memoizedState,o.state=p,Xd(e,r,o,i);var y=e.memoizedState;a!==d||p!==y||yn.current||Ri?(typeof g=="function"&&(n_(e,t,g,r),y=e.memoizedState),(c=Ri||vT(e,t,c,r,p,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return o_(n,e,t,r,s,i)}function o_(n,e,t,r,i,s){CC(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&hT(e,t,!1),ri(n,e,s);r=e.stateNode,HL.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=xa(e,n.child,null,s),e.child=xa(e,null,a,s)):Jt(n,e,a,s),e.memoizedState=r.state,i&&hT(e,t,!0),e.child}function PC(n){var e=n.stateNode;e.pendingContext?cT(n,e.pendingContext,e.pendingContext!==e.context):e.context&&cT(n,e.context,!1),nv(n,e.containerInfo)}function CT(n,e,t,r,i){return Na(),Yy(i),e.flags|=256,Jt(n,e,t,r),e.child}var a_={dehydrated:null,treeContext:null,retryLane:0};function l_(n){return{baseLanes:n,cachePool:null,transitions:null}}function kC(n,e,t){var r=e.pendingProps,i=qe.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Ce(qe,i&1),n===null)return e_(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ep(o,r,0,null),n=zs(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=l_(t),e.memoizedState=a_,n):cv(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return KL(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=zi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=zi(a,s):(s=zs(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?l_(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=a_,r}return s=n.child,n=s.sibling,r=zi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function cv(n,e){return e=ep({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Gh(n,e,t,r){return r!==null&&Yy(r),xa(e,n.child,null,t),n=cv(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function KL(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=qm(Error(q(422))),Gh(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=ep({mode:"visible",children:r.children},i,0,null),s=zs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&xa(e,n.child,null,o),e.child.memoizedState=l_(o),e.memoizedState=a_,s);if(!(e.mode&1))return Gh(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(q(419)),r=qm(s,r,void 0),Gh(n,e,o,r)}if(a=(o&n.childLanes)!==0,fn||a){if(r=Et,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ni(n,i),lr(r,n,i,-1))}return gv(),r=qm(Error(q(421))),Gh(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=aV.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,Rn=Fi(i.nextSibling),Cn=e,Me=!0,rr=null,n!==null&&(Ln[Vn++]=$r,Ln[Vn++]=Wr,Ln[Vn++]=Ys,$r=n.id,Wr=n.overflow,Ys=e),e=cv(e,r.children),e.flags|=4096,e)}function PT(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),t_(n.return,e,t)}function $m(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function bC(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Jt(n,e,r.children,t),r=qe.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&PT(n,t,e);else if(n.tag===19)PT(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Ce(qe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Zd(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),$m(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Zd(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}$m(e,!0,t,null,s);break;case"together":$m(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _d(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function ri(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Xs|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(q(153));if(e.child!==null){for(n=e.child,t=zi(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=zi(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function QL(n,e,t){switch(e.tag){case 3:PC(e),Na();break;case 5:nC(e);break;case 1:vn(e.type)&&Hd(e);break;case 4:nv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ce(Yd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ce(qe,qe.current&1),e.flags|=128,null):t&e.child.childLanes?kC(n,e,t):(Ce(qe,qe.current&1),n=ri(n,e,t),n!==null?n.sibling:null);Ce(qe,qe.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return bC(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ce(qe,qe.current),r)break;return null;case 22:case 23:return e.lanes=0,AC(n,e,t)}return ri(n,e,t)}var NC,u_,xC,DC;NC=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};u_=function(){};xC=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Vs(kr.current);var s=null;switch(t){case"input":i=Ng(n,i),r=Ng(n,r),s=[];break;case"select":i=Ge({},i,{value:void 0}),r=Ge({},r,{value:void 0}),s=[];break;case"textarea":i=Og(n,i),r=Og(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Wd)}Vg(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Hu.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Hu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&be("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};DC=function(n,e,t,r){t!==r&&(e.flags|=4)};function Jl(n,e){if(!Me)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Ut(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function YL(n,e,t){var r=e.pendingProps;switch(Qy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(e),null;case 1:return vn(e.type)&&Gd(),Ut(e),null;case 3:return r=e.stateNode,Da(),Oe(yn),Oe(Ht),iv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&($h(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,rr!==null&&(__(rr),rr=null))),u_(n,e),Ut(e),null;case 5:rv(e);var i=Vs(sc.current);if(t=e.type,n!==null&&e.stateNode!=null)xC(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return Ut(e),null}if(n=Vs(kr.current),$h(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[yr]=e,r[rc]=s,n=(e.mode&1)!==0,t){case"dialog":be("cancel",r),be("close",r);break;case"iframe":case"object":case"embed":be("load",r);break;case"video":case"audio":for(i=0;i<gu.length;i++)be(gu[i],r);break;case"source":be("error",r);break;case"img":case"image":case"link":be("error",r),be("load",r);break;case"details":be("toggle",r);break;case"input":MI(r,s),be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},be("invalid",r);break;case"textarea":UI(r,s),be("invalid",r)}Vg(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&qh(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&qh(r.textContent,a,n),i=["children",""+a]):Hu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&be("scroll",r)}switch(t){case"input":Lh(r),FI(r,s,!0);break;case"textarea":Lh(r),BI(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Wd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=aA(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[yr]=e,n[rc]=r,NC(n,e,!1,!1),e.stateNode=n;e:{switch(o=Mg(t,r),t){case"dialog":be("cancel",n),be("close",n),i=r;break;case"iframe":case"object":case"embed":be("load",n),i=r;break;case"video":case"audio":for(i=0;i<gu.length;i++)be(gu[i],n);i=r;break;case"source":be("error",n),i=r;break;case"img":case"image":case"link":be("error",n),be("load",n),i=r;break;case"details":be("toggle",n),i=r;break;case"input":MI(n,r),i=Ng(n,r),be("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Ge({},r,{value:void 0}),be("invalid",n);break;case"textarea":UI(n,r),i=Og(n,r),be("invalid",n);break;default:i=r}Vg(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?cA(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&lA(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Ku(n,l):typeof l=="number"&&Ku(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Hu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&be("scroll",n):l!=null&&Oy(n,s,l,o))}switch(t){case"input":Lh(n),FI(n,r,!1);break;case"textarea":Lh(n),BI(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Ki(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?pa(n,!!r.multiple,s,!1):r.defaultValue!=null&&pa(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Wd)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ut(e),null;case 6:if(n&&e.stateNode!=null)DC(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(t=Vs(sc.current),Vs(kr.current),$h(e)){if(r=e.stateNode,t=e.memoizedProps,r[yr]=e,(s=r.nodeValue!==t)&&(n=Cn,n!==null))switch(n.tag){case 3:qh(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&qh(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[yr]=e,e.stateNode=r}return Ut(e),null;case 13:if(Oe(qe),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Me&&Rn!==null&&e.mode&1&&!(e.flags&128))JA(),Na(),e.flags|=98560,s=!1;else if(s=$h(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(q(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(q(317));s[yr]=e}else Na(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ut(e),s=!1}else rr!==null&&(__(rr),rr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||qe.current&1?dt===0&&(dt=3):gv())),e.updateQueue!==null&&(e.flags|=4),Ut(e),null);case 4:return Da(),u_(n,e),n===null&&tc(e.stateNode.containerInfo),Ut(e),null;case 10:return Zy(e.type._context),Ut(e),null;case 17:return vn(e.type)&&Gd(),Ut(e),null;case 19:if(Oe(qe),s=e.memoizedState,s===null)return Ut(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Jl(s,!1);else{if(dt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Zd(n),o!==null){for(e.flags|=128,Jl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Ce(qe,qe.current&1|2),e.child}n=n.sibling}s.tail!==null&&rt()>La&&(e.flags|=128,r=!0,Jl(s,!1),e.lanes=4194304)}else{if(!r)if(n=Zd(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Jl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Me)return Ut(e),null}else 2*rt()-s.renderingStartTime>La&&t!==1073741824&&(e.flags|=128,r=!0,Jl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=rt(),e.sibling=null,t=qe.current,Ce(qe,r?t&1|2:t&1),e):(Ut(e),null);case 22:case 23:return mv(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Tn&1073741824&&(Ut(e),e.subtreeFlags&6&&(e.flags|=8192)):Ut(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function JL(n,e){switch(Qy(e),e.tag){case 1:return vn(e.type)&&Gd(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Da(),Oe(yn),Oe(Ht),iv(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return rv(e),null;case 13:if(Oe(qe),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(q(340));Na()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Oe(qe),null;case 4:return Da(),null;case 10:return Zy(e.type._context),null;case 22:case 23:return mv(),null;case 24:return null;default:return null}}var Hh=!1,jt=!1,XL=typeof WeakSet=="function"?WeakSet:Set,J=null;function ua(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Ye(n,e,r)}else t.current=null}function c_(n,e,t){try{t()}catch(r){Ye(n,e,r)}}var kT=!1;function ZL(n,e){if(Hg=zd,n=FA(),Hy(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=n,p=null;t:for(;;){for(var g;d!==t||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)p=d,d=g;for(;;){if(d===n)break t;if(p===t&&++c===i&&(a=o),p===s&&++h===r&&(l=o),(g=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=g}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Kg={focusedElem:n,selectionRange:t},zd=!1,J=e;J!==null;)if(e=J,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,J=n;else for(;J!==null;){e=J;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var S=y.memoizedProps,C=y.memoizedState,I=e.stateNode,w=I.getSnapshotBeforeUpdate(e.elementType===e.type?S:tr(e.type,S),C);I.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(k){Ye(e,e.return,k)}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}return y=kT,kT=!1,y}function bu(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&c_(e,t,s)}i=i.next}while(i!==r)}}function Xf(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function h_(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function OC(n){var e=n.alternate;e!==null&&(n.alternate=null,OC(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[yr],delete e[rc],delete e[Jg],delete e[LL],delete e[VL])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function LC(n){return n.tag===5||n.tag===3||n.tag===4}function bT(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||LC(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function d_(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Wd));else if(r!==4&&(n=n.child,n!==null))for(d_(n,e,t),n=n.sibling;n!==null;)d_(n,e,t),n=n.sibling}function f_(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(f_(n,e,t),n=n.sibling;n!==null;)f_(n,e,t),n=n.sibling}var kt=null,nr=!1;function yi(n,e,t){for(t=t.child;t!==null;)VC(n,e,t),t=t.sibling}function VC(n,e,t){if(Pr&&typeof Pr.onCommitFiberUnmount=="function")try{Pr.onCommitFiberUnmount($f,t)}catch{}switch(t.tag){case 5:jt||ua(t,e);case 6:var r=kt,i=nr;kt=null,yi(n,e,t),kt=r,nr=i,kt!==null&&(nr?(n=kt,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):kt.removeChild(t.stateNode));break;case 18:kt!==null&&(nr?(n=kt,t=t.stateNode,n.nodeType===8?Mm(n.parentNode,t):n.nodeType===1&&Mm(n,t),Xu(n)):Mm(kt,t.stateNode));break;case 4:r=kt,i=nr,kt=t.stateNode.containerInfo,nr=!0,yi(n,e,t),kt=r,nr=i;break;case 0:case 11:case 14:case 15:if(!jt&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&c_(t,e,o),i=i.next}while(i!==r)}yi(n,e,t);break;case 1:if(!jt&&(ua(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Ye(t,e,a)}yi(n,e,t);break;case 21:yi(n,e,t);break;case 22:t.mode&1?(jt=(r=jt)||t.memoizedState!==null,yi(n,e,t),jt=r):yi(n,e,t);break;default:yi(n,e,t)}}function NT(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new XL),e.forEach(function(r){var i=lV.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function er(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:kt=a.stateNode,nr=!1;break e;case 3:kt=a.stateNode.containerInfo,nr=!0;break e;case 4:kt=a.stateNode.containerInfo,nr=!0;break e}a=a.return}if(kt===null)throw Error(q(160));VC(s,o,i),kt=null,nr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ye(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)MC(e,n),e=e.sibling}function MC(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(er(e,n),gr(n),r&4){try{bu(3,n,n.return),Xf(3,n)}catch(S){Ye(n,n.return,S)}try{bu(5,n,n.return)}catch(S){Ye(n,n.return,S)}}break;case 1:er(e,n),gr(n),r&512&&t!==null&&ua(t,t.return);break;case 5:if(er(e,n),gr(n),r&512&&t!==null&&ua(t,t.return),n.flags&32){var i=n.stateNode;try{Ku(i,"")}catch(S){Ye(n,n.return,S)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&sA(i,s),Mg(a,o);var c=Mg(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?cA(i,d):h==="dangerouslySetInnerHTML"?lA(i,d):h==="children"?Ku(i,d):Oy(i,h,d,c)}switch(a){case"input":xg(i,s);break;case"textarea":oA(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?pa(i,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?pa(i,!!s.multiple,s.defaultValue,!0):pa(i,!!s.multiple,s.multiple?[]:"",!1))}i[rc]=s}catch(S){Ye(n,n.return,S)}}break;case 6:if(er(e,n),gr(n),r&4){if(n.stateNode===null)throw Error(q(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(S){Ye(n,n.return,S)}}break;case 3:if(er(e,n),gr(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Xu(e.containerInfo)}catch(S){Ye(n,n.return,S)}break;case 4:er(e,n),gr(n);break;case 13:er(e,n),gr(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(fv=rt())),r&4&&NT(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(jt=(c=jt)||h,er(e,n),jt=c):er(e,n),gr(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!h&&n.mode&1)for(J=n,h=n.child;h!==null;){for(d=J=h;J!==null;){switch(p=J,g=p.child,p.tag){case 0:case 11:case 14:case 15:bu(4,p,p.return);break;case 1:ua(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(S){Ye(r,t,S)}}break;case 5:ua(p,p.return);break;case 22:if(p.memoizedState!==null){DT(d);continue}}g!==null?(g.return=p,J=g):DT(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=uA("display",o))}catch(S){Ye(n,n.return,S)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(S){Ye(n,n.return,S)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:er(e,n),gr(n),r&4&&NT(n);break;case 21:break;default:er(e,n),gr(n)}}function gr(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(LC(t)){var r=t;break e}t=t.return}throw Error(q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ku(i,""),r.flags&=-33);var s=bT(n);f_(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=bT(n);d_(n,a,o);break;default:throw Error(q(161))}}catch(l){Ye(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function eV(n,e,t){J=n,FC(n)}function FC(n,e,t){for(var r=(n.mode&1)!==0;J!==null;){var i=J,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Hh;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||jt;a=Hh;var c=jt;if(Hh=o,(jt=l)&&!c)for(J=i;J!==null;)o=J,l=o.child,o.tag===22&&o.memoizedState!==null?OT(i):l!==null?(l.return=o,J=l):OT(i);for(;s!==null;)J=s,FC(s),s=s.sibling;J=i,Hh=a,jt=c}xT(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,J=s):xT(n)}}function xT(n){for(;J!==null;){var e=J;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:jt||Xf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!jt)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:tr(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&gT(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}gT(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Xu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}jt||e.flags&512&&h_(e)}catch(p){Ye(e,e.return,p)}}if(e===n){J=null;break}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}}function DT(n){for(;J!==null;){var e=J;if(e===n){J=null;break}var t=e.sibling;if(t!==null){t.return=e.return,J=t;break}J=e.return}}function OT(n){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Xf(4,e)}catch(l){Ye(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ye(e,i,l)}}var s=e.return;try{h_(e)}catch(l){Ye(e,s,l)}break;case 5:var o=e.return;try{h_(e)}catch(l){Ye(e,o,l)}}}catch(l){Ye(e,e.return,l)}if(e===n){J=null;break}var a=e.sibling;if(a!==null){a.return=e.return,J=a;break}J=e.return}}var tV=Math.ceil,nf=ai.ReactCurrentDispatcher,hv=ai.ReactCurrentOwner,jn=ai.ReactCurrentBatchConfig,ge=0,Et=null,ut=null,xt=0,Tn=0,ca=us(0),dt=0,uc=null,Xs=0,Zf=0,dv=0,Nu=null,dn=null,fv=0,La=1/0,zr=null,rf=!1,p_=null,Bi=null,Kh=!1,Ni=null,sf=0,xu=0,m_=null,yd=-1,vd=0;function tn(){return ge&6?rt():yd!==-1?yd:yd=rt()}function ji(n){return n.mode&1?ge&2&&xt!==0?xt&-xt:FL.transition!==null?(vd===0&&(vd=IA()),vd):(n=Ie,n!==0||(n=window.event,n=n===void 0?16:kA(n.type)),n):1}function lr(n,e,t,r){if(50<xu)throw xu=0,m_=null,Error(q(185));Mc(n,t,r),(!(ge&2)||n!==Et)&&(n===Et&&(!(ge&2)&&(Zf|=t),dt===4&&Ci(n,xt)),wn(n,r),t===1&&ge===0&&!(e.mode&1)&&(La=rt()+500,Qf&&cs()))}function wn(n,e){var t=n.callbackNode;FO(n,e);var r=jd(n,n===Et?xt:0);if(r===0)t!==null&&qI(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&qI(t),e===1)n.tag===0?ML(LT.bind(null,n)):KA(LT.bind(null,n)),DL(function(){!(ge&6)&&cs()}),t=null;else{switch(TA(r)){case 1:t=Uy;break;case 4:t=wA;break;case 16:t=Bd;break;case 536870912:t=EA;break;default:t=Bd}t=GC(t,UC.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function UC(n,e){if(yd=-1,vd=0,ge&6)throw Error(q(327));var t=n.callbackNode;if(va()&&n.callbackNode!==t)return null;var r=jd(n,n===Et?xt:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=of(n,r);else{e=r;var i=ge;ge|=2;var s=jC();(Et!==n||xt!==e)&&(zr=null,La=rt()+500,js(n,e));do try{iV();break}catch(a){BC(n,a)}while(!0);Xy(),nf.current=s,ge=i,ut!==null?e=0:(Et=null,xt=0,e=dt)}if(e!==0){if(e===2&&(i=zg(n),i!==0&&(r=i,e=g_(n,i))),e===1)throw t=uc,js(n,0),Ci(n,r),wn(n,rt()),t;if(e===6)Ci(n,r);else{if(i=n.current.alternate,!(r&30)&&!nV(i)&&(e=of(n,r),e===2&&(s=zg(n),s!==0&&(r=s,e=g_(n,s))),e===1))throw t=uc,js(n,0),Ci(n,r),wn(n,rt()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:Rs(n,dn,zr);break;case 3:if(Ci(n,r),(r&130023424)===r&&(e=fv+500-rt(),10<e)){if(jd(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){tn(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=Yg(Rs.bind(null,n,dn,zr),e);break}Rs(n,dn,zr);break;case 4:if(Ci(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-ar(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tV(r/1960))-r,10<r){n.timeoutHandle=Yg(Rs.bind(null,n,dn,zr),r);break}Rs(n,dn,zr);break;case 5:Rs(n,dn,zr);break;default:throw Error(q(329))}}}return wn(n,rt()),n.callbackNode===t?UC.bind(null,n):null}function g_(n,e){var t=Nu;return n.current.memoizedState.isDehydrated&&(js(n,e).flags|=256),n=of(n,e),n!==2&&(e=dn,dn=t,e!==null&&__(e)),n}function __(n){dn===null?dn=n:dn.push.apply(dn,n)}function nV(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!hr(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ci(n,e){for(e&=~dv,e&=~Zf,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-ar(e),r=1<<t;n[t]=-1,e&=~r}}function LT(n){if(ge&6)throw Error(q(327));va();var e=jd(n,0);if(!(e&1))return wn(n,rt()),null;var t=of(n,e);if(n.tag!==0&&t===2){var r=zg(n);r!==0&&(e=r,t=g_(n,r))}if(t===1)throw t=uc,js(n,0),Ci(n,e),wn(n,rt()),t;if(t===6)throw Error(q(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Rs(n,dn,zr),wn(n,rt()),null}function pv(n,e){var t=ge;ge|=1;try{return n(e)}finally{ge=t,ge===0&&(La=rt()+500,Qf&&cs())}}function Zs(n){Ni!==null&&Ni.tag===0&&!(ge&6)&&va();var e=ge;ge|=1;var t=jn.transition,r=Ie;try{if(jn.transition=null,Ie=1,n)return n()}finally{Ie=r,jn.transition=t,ge=e,!(ge&6)&&cs()}}function mv(){Tn=ca.current,Oe(ca)}function js(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,xL(t)),ut!==null)for(t=ut.return;t!==null;){var r=t;switch(Qy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Gd();break;case 3:Da(),Oe(yn),Oe(Ht),iv();break;case 5:rv(r);break;case 4:Da();break;case 13:Oe(qe);break;case 19:Oe(qe);break;case 10:Zy(r.type._context);break;case 22:case 23:mv()}t=t.return}if(Et=n,ut=n=zi(n.current,null),xt=Tn=e,dt=0,uc=null,dv=Zf=Xs=0,dn=Nu=null,Ls!==null){for(e=0;e<Ls.length;e++)if(t=Ls[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}Ls=null}return n}function BC(n,e){do{var t=ut;try{if(Xy(),md.current=tf,ef){for(var r=$e.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ef=!1}if(Js=0,_t=ht=$e=null,ku=!1,oc=0,hv.current=null,t===null||t.return===null){dt=1,uc=e,ut=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=xt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=IT(o);if(g!==null){g.flags&=-257,TT(g,o,a,s,e),g.mode&1&&ET(s,c,e),e=g,l=c;var y=e.updateQueue;if(y===null){var S=new Set;S.add(l),e.updateQueue=S}else y.add(l);break e}else{if(!(e&1)){ET(s,c,e),gv();break e}l=Error(q(426))}}else if(Me&&a.mode&1){var C=IT(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),TT(C,o,a,s,e),Yy(Oa(l,a));break e}}s=l=Oa(l,a),dt!==4&&(dt=2),Nu===null?Nu=[s]:Nu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var I=TC(s,l,e);mT(s,I);break e;case 1:a=l;var w=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Bi===null||!Bi.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=SC(s,a,e);mT(s,k);break e}}s=s.return}while(s!==null)}qC(t)}catch(M){e=M,ut===t&&t!==null&&(ut=t=t.return);continue}break}while(!0)}function jC(){var n=nf.current;return nf.current=tf,n===null?tf:n}function gv(){(dt===0||dt===3||dt===2)&&(dt=4),Et===null||!(Xs&268435455)&&!(Zf&268435455)||Ci(Et,xt)}function of(n,e){var t=ge;ge|=2;var r=jC();(Et!==n||xt!==e)&&(zr=null,js(n,e));do try{rV();break}catch(i){BC(n,i)}while(!0);if(Xy(),ge=t,nf.current=r,ut!==null)throw Error(q(261));return Et=null,xt=0,dt}function rV(){for(;ut!==null;)zC(ut)}function iV(){for(;ut!==null&&!kO();)zC(ut)}function zC(n){var e=WC(n.alternate,n,Tn);n.memoizedProps=n.pendingProps,e===null?qC(n):ut=e,hv.current=null}function qC(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=JL(t,e),t!==null){t.flags&=32767,ut=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{dt=6,ut=null;return}}else if(t=YL(t,e,Tn),t!==null){ut=t;return}if(e=e.sibling,e!==null){ut=e;return}ut=e=n}while(e!==null);dt===0&&(dt=5)}function Rs(n,e,t){var r=Ie,i=jn.transition;try{jn.transition=null,Ie=1,sV(n,e,t,r)}finally{jn.transition=i,Ie=r}return null}function sV(n,e,t,r){do va();while(Ni!==null);if(ge&6)throw Error(q(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(q(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(UO(n,s),n===Et&&(ut=Et=null,xt=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Kh||(Kh=!0,GC(Bd,function(){return va(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=jn.transition,jn.transition=null;var o=Ie;Ie=1;var a=ge;ge|=4,hv.current=null,ZL(n,t),MC(t,n),RL(Kg),zd=!!Hg,Kg=Hg=null,n.current=t,eV(t),bO(),ge=a,Ie=o,jn.transition=s}else n.current=t;if(Kh&&(Kh=!1,Ni=n,sf=i),s=n.pendingLanes,s===0&&(Bi=null),DO(t.stateNode),wn(n,rt()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(rf)throw rf=!1,n=p_,p_=null,n;return sf&1&&n.tag!==0&&va(),s=n.pendingLanes,s&1?n===m_?xu++:(xu=0,m_=n):xu=0,cs(),null}function va(){if(Ni!==null){var n=TA(sf),e=jn.transition,t=Ie;try{if(jn.transition=null,Ie=16>n?16:n,Ni===null)var r=!1;else{if(n=Ni,Ni=null,sf=0,ge&6)throw Error(q(331));var i=ge;for(ge|=4,J=n.current;J!==null;){var s=J,o=s.child;if(J.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(J=c;J!==null;){var h=J;switch(h.tag){case 0:case 11:case 15:bu(8,h,s)}var d=h.child;if(d!==null)d.return=h,J=d;else for(;J!==null;){h=J;var p=h.sibling,g=h.return;if(OC(h),h===c){J=null;break}if(p!==null){p.return=g,J=p;break}J=g}}}var y=s.alternate;if(y!==null){var S=y.child;if(S!==null){y.child=null;do{var C=S.sibling;S.sibling=null,S=C}while(S!==null)}}J=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,J=o;else e:for(;J!==null;){if(s=J,s.flags&2048)switch(s.tag){case 0:case 11:case 15:bu(9,s,s.return)}var I=s.sibling;if(I!==null){I.return=s.return,J=I;break e}J=s.return}}var w=n.current;for(J=w;J!==null;){o=J;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,J=E;else e:for(o=w;J!==null;){if(a=J,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Xf(9,a)}}catch(M){Ye(a,a.return,M)}if(a===o){J=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,J=k;break e}J=a.return}}if(ge=i,cs(),Pr&&typeof Pr.onPostCommitFiberRoot=="function")try{Pr.onPostCommitFiberRoot($f,n)}catch{}r=!0}return r}finally{Ie=t,jn.transition=e}}return!1}function VT(n,e,t){e=Oa(t,e),e=TC(n,e,1),n=Ui(n,e,1),e=tn(),n!==null&&(Mc(n,1,e),wn(n,e))}function Ye(n,e,t){if(n.tag===3)VT(n,n,t);else for(;e!==null;){if(e.tag===3){VT(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Bi===null||!Bi.has(r))){n=Oa(t,n),n=SC(e,n,1),e=Ui(e,n,1),n=tn(),e!==null&&(Mc(e,1,n),wn(e,n));break}}e=e.return}}function oV(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=tn(),n.pingedLanes|=n.suspendedLanes&t,Et===n&&(xt&t)===t&&(dt===4||dt===3&&(xt&130023424)===xt&&500>rt()-fv?js(n,0):dv|=t),wn(n,e)}function $C(n,e){e===0&&(n.mode&1?(e=Fh,Fh<<=1,!(Fh&130023424)&&(Fh=4194304)):e=1);var t=tn();n=ni(n,e),n!==null&&(Mc(n,e,t),wn(n,t))}function aV(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),$C(n,t)}function lV(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),$C(n,t)}var WC;WC=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||yn.current)fn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return fn=!1,QL(n,e,t);fn=!!(n.flags&131072)}else fn=!1,Me&&e.flags&1048576&&QA(e,Qd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;_d(n,e),n=e.pendingProps;var i=ba(e,Ht.current);ya(e,t),i=ov(null,e,r,n,i,t);var s=av();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,vn(r)?(s=!0,Hd(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,tv(e),i.updater=Jf,e.stateNode=i,i._reactInternals=e,r_(e,r,n,t),e=o_(null,e,r,!0,s,t)):(e.tag=0,Me&&s&&Ky(e),Jt(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(_d(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=cV(r),n=tr(r,n),i){case 0:e=s_(null,e,r,n,t);break e;case 1:e=AT(null,e,r,n,t);break e;case 11:e=ST(null,e,r,n,t);break e;case 14:e=RT(null,e,r,tr(r.type,n),t);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tr(r,i),s_(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tr(r,i),AT(n,e,r,i,t);case 3:e:{if(PC(e),n===null)throw Error(q(387));r=e.pendingProps,s=e.memoizedState,i=s.element,tC(n,e),Xd(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Oa(Error(q(423)),e),e=CT(n,e,r,t,i);break e}else if(r!==i){i=Oa(Error(q(424)),e),e=CT(n,e,r,t,i);break e}else for(Rn=Fi(e.stateNode.containerInfo.firstChild),Cn=e,Me=!0,rr=null,t=ZA(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Na(),r===i){e=ri(n,e,t);break e}Jt(n,e,r,t)}e=e.child}return e;case 5:return nC(e),n===null&&e_(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,Qg(r,i)?o=null:s!==null&&Qg(r,s)&&(e.flags|=32),CC(n,e),Jt(n,e,o,t),e.child;case 6:return n===null&&e_(e),null;case 13:return kC(n,e,t);case 4:return nv(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=xa(e,null,r,t):Jt(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tr(r,i),ST(n,e,r,i,t);case 7:return Jt(n,e,e.pendingProps,t),e.child;case 8:return Jt(n,e,e.pendingProps.children,t),e.child;case 12:return Jt(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ce(Yd,r._currentValue),r._currentValue=o,s!==null)if(hr(s.value,o)){if(s.children===i.children&&!yn.current){e=ri(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Yr(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),t_(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(q(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),t_(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Jt(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ya(e,t),i=$n(i),r=r(i),e.flags|=1,Jt(n,e,r,t),e.child;case 14:return r=e.type,i=tr(r,e.pendingProps),i=tr(r.type,i),RT(n,e,r,i,t);case 15:return RC(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tr(r,i),_d(n,e),e.tag=1,vn(r)?(n=!0,Hd(e)):n=!1,ya(e,t),IC(e,r,i),r_(e,r,i,t),o_(null,e,r,!0,n,t);case 19:return bC(n,e,t);case 22:return AC(n,e,t)}throw Error(q(156,e.tag))};function GC(n,e){return vA(n,e)}function uV(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(n,e,t,r){return new uV(n,e,t,r)}function _v(n){return n=n.prototype,!(!n||!n.isReactComponent)}function cV(n){if(typeof n=="function")return _v(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Vy)return 11;if(n===My)return 14}return 2}function zi(n,e){var t=n.alternate;return t===null?(t=Mn(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function wd(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")_v(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case ea:return zs(t.children,i,s,e);case Ly:o=8,i|=8;break;case Cg:return n=Mn(12,t,e,i|2),n.elementType=Cg,n.lanes=s,n;case Pg:return n=Mn(13,t,e,i),n.elementType=Pg,n.lanes=s,n;case kg:return n=Mn(19,t,e,i),n.elementType=kg,n.lanes=s,n;case nA:return ep(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case eA:o=10;break e;case tA:o=9;break e;case Vy:o=11;break e;case My:o=14;break e;case Si:o=16,r=null;break e}throw Error(q(130,n==null?n:typeof n,""))}return e=Mn(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function zs(n,e,t,r){return n=Mn(7,n,r,e),n.lanes=t,n}function ep(n,e,t,r){return n=Mn(22,n,r,e),n.elementType=nA,n.lanes=t,n.stateNode={isHidden:!1},n}function Wm(n,e,t){return n=Mn(6,n,null,e),n.lanes=t,n}function Gm(n,e,t){return e=Mn(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function hV(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Am(0),this.expirationTimes=Am(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Am(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function yv(n,e,t,r,i,s,o,a,l){return n=new hV(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Mn(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},tv(s),n}function dV(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zo,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function HC(n){if(!n)return Qi;n=n._reactInternals;e:{if(wo(n)!==n||n.tag!==1)throw Error(q(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(vn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(n.tag===1){var t=n.type;if(vn(t))return HA(n,t,e)}return e}function KC(n,e,t,r,i,s,o,a,l){return n=yv(t,r,!0,n,i,s,o,a,l),n.context=HC(null),t=n.current,r=tn(),i=ji(t),s=Yr(r,i),s.callback=e??null,Ui(t,s,i),n.current.lanes=i,Mc(n,i,r),wn(n,r),n}function tp(n,e,t,r){var i=e.current,s=tn(),o=ji(i);return t=HC(t),e.context===null?e.context=t:e.pendingContext=t,e=Yr(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Ui(i,e,o),n!==null&&(lr(n,i,o,s),pd(n,i,o)),o}function af(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function MT(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function vv(n,e){MT(n,e),(n=n.alternate)&&MT(n,e)}function fV(){return null}var QC=typeof reportError=="function"?reportError:function(n){console.error(n)};function wv(n){this._internalRoot=n}np.prototype.render=wv.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(q(409));tp(n,e,null,null)};np.prototype.unmount=wv.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Zs(function(){tp(null,n,null,null)}),e[ti]=null}};function np(n){this._internalRoot=n}np.prototype.unstable_scheduleHydration=function(n){if(n){var e=AA();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Ai.length&&e!==0&&e<Ai[t].priority;t++);Ai.splice(t,0,n),t===0&&PA(n)}};function Ev(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function rp(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function FT(){}function pV(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=af(o);s.call(c)}}var o=KC(e,r,n,0,null,!1,!1,"",FT);return n._reactRootContainer=o,n[ti]=o.current,tc(n.nodeType===8?n.parentNode:n),Zs(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=af(l);a.call(c)}}var l=yv(n,0,!1,null,null,!1,!1,"",FT);return n._reactRootContainer=l,n[ti]=l.current,tc(n.nodeType===8?n.parentNode:n),Zs(function(){tp(e,l,t,r)}),l}function ip(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=af(o);a.call(l)}}tp(e,o,n,i)}else o=pV(t,e,n,i,r);return af(o)}SA=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=mu(e.pendingLanes);t!==0&&(By(e,t|1),wn(e,rt()),!(ge&6)&&(La=rt()+500,cs()))}break;case 13:Zs(function(){var r=ni(n,1);if(r!==null){var i=tn();lr(r,n,1,i)}}),vv(n,1)}};jy=function(n){if(n.tag===13){var e=ni(n,134217728);if(e!==null){var t=tn();lr(e,n,134217728,t)}vv(n,134217728)}};RA=function(n){if(n.tag===13){var e=ji(n),t=ni(n,e);if(t!==null){var r=tn();lr(t,n,e,r)}vv(n,e)}};AA=function(){return Ie};CA=function(n,e){var t=Ie;try{return Ie=n,e()}finally{Ie=t}};Ug=function(n,e,t){switch(e){case"input":if(xg(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=Kf(r);if(!i)throw Error(q(90));iA(r),xg(r,i)}}}break;case"textarea":oA(n,t);break;case"select":e=t.value,e!=null&&pa(n,!!t.multiple,e,!1)}};fA=pv;pA=Zs;var mV={usingClientEntryPoint:!1,Events:[Uc,ia,Kf,hA,dA,pv]},Xl={findFiberByHostInstance:Os,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gV={bundleType:Xl.bundleType,version:Xl.version,rendererPackageName:Xl.rendererPackageName,rendererConfig:Xl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ai.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=_A(n),n===null?null:n.stateNode},findFiberByHostInstance:Xl.findFiberByHostInstance||fV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qh.isDisabled&&Qh.supportsFiber)try{$f=Qh.inject(gV),Pr=Qh}catch{}}xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mV;xn.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ev(e))throw Error(q(200));return dV(n,e,null,t)};xn.createRoot=function(n,e){if(!Ev(n))throw Error(q(299));var t=!1,r="",i=QC;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=yv(n,1,!1,null,null,t,!1,r,i),n[ti]=e.current,tc(n.nodeType===8?n.parentNode:n),new wv(e)};xn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(q(188)):(n=Object.keys(n).join(","),Error(q(268,n)));return n=_A(e),n=n===null?null:n.stateNode,n};xn.flushSync=function(n){return Zs(n)};xn.hydrate=function(n,e,t){if(!rp(e))throw Error(q(200));return ip(null,n,e,!0,t)};xn.hydrateRoot=function(n,e,t){if(!Ev(n))throw Error(q(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=QC;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=KC(e,null,n,1,t??null,i,!1,s,o),n[ti]=e.current,tc(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new np(e)};xn.render=function(n,e,t){if(!rp(e))throw Error(q(200));return ip(null,n,e,!1,t)};xn.unmountComponentAtNode=function(n){if(!rp(n))throw Error(q(40));return n._reactRootContainer?(Zs(function(){ip(null,null,n,!1,function(){n._reactRootContainer=null,n[ti]=null})}),!0):!1};xn.unstable_batchedUpdates=pv;xn.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!rp(t))throw Error(q(200));if(n==null||n._reactInternals===void 0)throw Error(q(38));return ip(n,e,t,!1,r)};xn.version="18.3.1-next-f1338f8080-20240426";function YC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(YC)}catch(n){console.error(n)}}YC(),YR.exports=xn;var _V=YR.exports,UT=_V;Rg.createRoot=UT.createRoot,Rg.hydrateRoot=UT.hydrateRoot;/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cc(){return cc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},cc.apply(this,arguments)}var xi;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(xi||(xi={}));const BT="popstate";function yV(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return y_("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:lf(i)}return wV(e,t,null,n)}function ct(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function JC(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vV(){return Math.random().toString(36).substr(2,8)}function jT(n,e){return{usr:n.state,key:n.key,idx:e}}function y_(n,e,t,r){return t===void 0&&(t=null),cc({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?al(e):e,{state:t,key:e&&e.key||r||vV()})}function lf(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function al(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function wV(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=xi.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(cc({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=xi.Pop;let C=h(),I=C==null?null:C-c;c=C,l&&l({action:a,location:S.location,delta:I})}function p(C,I){a=xi.Push;let w=y_(S.location,C,I);c=h()+1;let E=jT(w,c),k=S.createHref(w);try{o.pushState(E,"",k)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(k)}s&&l&&l({action:a,location:S.location,delta:1})}function g(C,I){a=xi.Replace;let w=y_(S.location,C,I);c=h();let E=jT(w,c),k=S.createHref(w);o.replaceState(E,"",k),s&&l&&l({action:a,location:S.location,delta:0})}function y(C){let I=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof C=="string"?C:lf(C);return w=w.replace(/ $/,"%20"),ct(I,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,I)}let S={get action(){return a},get location(){return n(i,o)},listen(C){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(BT,d),l=C,()=>{i.removeEventListener(BT,d),l=null}},createHref(C){return e(i,C)},createURL:y,encodeLocation(C){let I=y(C);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:p,replace:g,go(C){return o.go(C)}};return S}var zT;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(zT||(zT={}));function EV(n,e,t){t===void 0&&(t="/");let r=typeof e=="string"?al(e):e,i=Iv(r.pathname||"/",t);if(i==null)return null;let s=XC(n);IV(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let l=OV(i);o=NV(s[a],l)}return o}function XC(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(ct(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=qi([r,l.relativePath]),h=t.concat(l);s.children&&s.children.length>0&&(ct(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),XC(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:kV(c,s.index),routesMeta:h})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of ZC(s.path))i(s,o,l)}),e}function ZC(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=ZC(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function IV(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:bV(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const TV=/^:[\w-]+$/,SV=3,RV=2,AV=1,CV=10,PV=-2,qT=n=>n==="*";function kV(n,e){let t=n.split("/"),r=t.length;return t.some(qT)&&(r+=PV),e&&(r+=RV),t.filter(i=>!qT(i)).reduce((i,s)=>i+(TV.test(s)?SV:s===""?AV:CV),r)}function bV(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function NV(n,e){let{routesMeta:t}=n,r={},i="/",s=[];for(let o=0;o<t.length;++o){let a=t[o],l=o===t.length-1,c=i==="/"?e:e.slice(i.length)||"/",h=xV({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!h)return null;Object.assign(r,h.params);let d=a.route;s.push({params:r,pathname:qi([i,h.pathname]),pathnameBase:FV(qi([i,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(i=qi([i,h.pathnameBase]))}return s}function xV(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=DV(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:p,isOptional:g}=h;if(p==="*"){let S=a[d]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const y=a[d];return g&&!y?c[p]=void 0:c[p]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:n}}function DV(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),JC(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function OV(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return JC(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Iv(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function LV(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?al(n):n;return{pathname:t?t.startsWith("/")?t:VV(t,e):e,search:UV(r),hash:BV(i)}}function VV(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Hm(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function MV(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function eP(n,e){let t=MV(n);return e?t.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function tP(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=al(n):(i=cc({},n),ct(!i.pathname||!i.pathname.includes("?"),Hm("?","pathname","search",i)),ct(!i.pathname||!i.pathname.includes("#"),Hm("#","pathname","hash",i)),ct(!i.search||!i.search.includes("#"),Hm("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=t;else{let d=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=LV(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const qi=n=>n.join("/").replace(/\/\/+/g,"/"),FV=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),UV=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,BV=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function jV(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const nP=["post","put","patch","delete"];new Set(nP);const zV=["get",...nP];new Set(zV);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hc(){return hc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},hc.apply(this,arguments)}const Tv=B.createContext(null),qV=B.createContext(null),Eo=B.createContext(null),sp=B.createContext(null),Io=B.createContext({outlet:null,matches:[],isDataRoute:!1}),rP=B.createContext(null);function $V(n,e){let{relative:t}=e===void 0?{}:e;jc()||ct(!1);let{basename:r,navigator:i}=B.useContext(Eo),{hash:s,pathname:o,search:a}=oP(n,{relative:t}),l=o;return r!=="/"&&(l=o==="/"?r:qi([r,o])),i.createHref({pathname:l,search:a,hash:s})}function jc(){return B.useContext(sp)!=null}function op(){return jc()||ct(!1),B.useContext(sp).location}function iP(n){B.useContext(Eo).static||B.useLayoutEffect(n)}function sP(){let{isDataRoute:n}=B.useContext(Io);return n?rM():WV()}function WV(){jc()||ct(!1);let n=B.useContext(Tv),{basename:e,future:t,navigator:r}=B.useContext(Eo),{matches:i}=B.useContext(Io),{pathname:s}=op(),o=JSON.stringify(eP(i,t.v7_relativeSplatPath)),a=B.useRef(!1);return iP(()=>{a.current=!0}),B.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=tP(c,JSON.parse(o),s,h.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:qi([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,s,n])}function oP(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=B.useContext(Eo),{matches:i}=B.useContext(Io),{pathname:s}=op(),o=JSON.stringify(eP(i,r.v7_relativeSplatPath));return B.useMemo(()=>tP(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function GV(n,e){return HV(n,e)}function HV(n,e,t,r){jc()||ct(!1);let{navigator:i}=B.useContext(Eo),{matches:s}=B.useContext(Io),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=op(),h;if(e){var d;let C=typeof e=="string"?al(e):e;l==="/"||(d=C.pathname)!=null&&d.startsWith(l)||ct(!1),h=C}else h=c;let p=h.pathname||"/",g=p;if(l!=="/"){let C=l.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(C.length).join("/")}let y=EV(n,{pathname:g}),S=XV(y&&y.map(C=>Object.assign({},C,{params:Object.assign({},a,C.params),pathname:qi([l,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?l:qi([l,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),s,t,r);return e&&S?B.createElement(sp.Provider,{value:{location:hc({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:xi.Pop}},S):S}function KV(){let n=nM(),e=jV(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},e),t?B.createElement("pre",{style:i},t):null,null)}const QV=B.createElement(KV,null);class YV extends B.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?B.createElement(Io.Provider,{value:this.props.routeContext},B.createElement(rP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function JV(n){let{routeContext:e,match:t,children:r}=n,i=B.useContext(Tv);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),B.createElement(Io.Provider,{value:e},r)}function XV(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if((s=t)!=null&&s.errors)n=t.matches;else return null}let o=n,a=(i=t)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||ct(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(t&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:p,errors:g}=t,y=d.route.loader&&p[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,p)=>{let g,y=!1,S=null,C=null;t&&(g=a&&d.route.id?a[d.route.id]:void 0,S=d.route.errorElement||QV,l&&(c<0&&p===0?(y=!0,C=null):c===p&&(y=!0,C=d.route.hydrateFallbackElement||null)));let I=e.concat(o.slice(0,p+1)),w=()=>{let E;return g?E=S:y?E=C:d.route.Component?E=B.createElement(d.route.Component,null):d.route.element?E=d.route.element:E=h,B.createElement(JV,{match:d,routeContext:{outlet:h,matches:I,isDataRoute:t!=null},children:E})};return t&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?B.createElement(YV,{location:t.location,revalidation:t.revalidation,component:S,error:g,children:w(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):w()},null)}var aP=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(aP||{}),uf=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(uf||{});function ZV(n){let e=B.useContext(Tv);return e||ct(!1),e}function eM(n){let e=B.useContext(qV);return e||ct(!1),e}function tM(n){let e=B.useContext(Io);return e||ct(!1),e}function lP(n){let e=tM(),t=e.matches[e.matches.length-1];return t.route.id||ct(!1),t.route.id}function nM(){var n;let e=B.useContext(rP),t=eM(uf.UseRouteError),r=lP(uf.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function rM(){let{router:n}=ZV(aP.UseNavigateStable),e=lP(uf.UseNavigateStable),t=B.useRef(!1);return iP(()=>{t.current=!0}),B.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,hc({fromRouteId:e},s)))},[n,e])}function Ed(n){ct(!1)}function iM(n){let{basename:e="/",children:t=null,location:r,navigationType:i=xi.Pop,navigator:s,static:o=!1,future:a}=n;jc()&&ct(!1);let l=e.replace(/^\/*/,"/"),c=B.useMemo(()=>({basename:l,navigator:s,static:o,future:hc({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=al(r));let{pathname:h="/",search:d="",hash:p="",state:g=null,key:y="default"}=r,S=B.useMemo(()=>{let C=Iv(h,l);return C==null?null:{location:{pathname:C,search:d,hash:p,state:g,key:y},navigationType:i}},[l,h,d,p,g,y,i]);return S==null?null:B.createElement(Eo.Provider,{value:c},B.createElement(sp.Provider,{children:t,value:S}))}function sM(n){let{children:e,location:t}=n;return GV(v_(e),t)}new Promise(()=>{});function v_(n,e){e===void 0&&(e=[]);let t=[];return B.Children.forEach(n,(r,i)=>{if(!B.isValidElement(r))return;let s=[...e,i];if(r.type===B.Fragment){t.push.apply(t,v_(r.props.children,s));return}r.type!==Ed&&ct(!1),!r.props.index||!r.props.children||ct(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=v_(r.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function w_(){return w_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},w_.apply(this,arguments)}function oM(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function aM(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function lM(n,e){return n.button===0&&(!e||e==="_self")&&!aM(n)}const uM=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],cM="6";try{window.__reactRouterVersion=cM}catch{}const hM="startTransition",$T=oO[hM];function dM(n){let{basename:e,children:t,future:r,window:i}=n,s=B.useRef();s.current==null&&(s.current=yV({window:i,v5Compat:!0}));let o=s.current,[a,l]=B.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=B.useCallback(d=>{c&&$T?$T(()=>l(d)):l(d)},[l,c]);return B.useLayoutEffect(()=>o.listen(h),[o,h]),B.createElement(iM,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:r})}const fM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Km=B.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,unstable_viewTransition:d}=e,p=oM(e,uM),{basename:g}=B.useContext(Eo),y,S=!1;if(typeof c=="string"&&pM.test(c)&&(y=c,fM))try{let E=new URL(window.location.href),k=c.startsWith("//")?new URL(E.protocol+c):new URL(c),M=Iv(k.pathname,g);k.origin===E.origin&&M!=null?c=M+k.search+k.hash:S=!0}catch{}let C=$V(c,{relative:i}),I=mM(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,unstable_viewTransition:d});function w(E){r&&r(E),E.defaultPrevented||I(E)}return B.createElement("a",w_({},p,{href:y||C,onClick:S||s?r:w,ref:t,target:l}))});var WT;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(WT||(WT={}));var GT;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(GT||(GT={}));function mM(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=sP(),c=op(),h=oP(n,{relative:o});return B.useCallback(d=>{if(lM(d,t)){d.preventDefault();let p=r!==void 0?r:lf(c)===lf(h);l(n,{replace:p,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,h,r,i,t,n,s,o,a])}var HT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K=function(n,e){if(!n)throw ll(e)},ll=function(n){return new Error("Firebase Database ("+uP.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},gM=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],a=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Sv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(p=64)),r.push(t[h],t[d],t[p],t[g])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(cP(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):gM(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new _M;const p=s<<2|a>>4;if(r.push(p),c!==64){const g=a<<4&240|c>>2;if(r.push(g),d!==64){const y=c<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class _M extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hP=function(n){const e=cP(n);return Sv.encodeByteArray(e,!0)},cf=function(n){return hP(n).replace(/\./g,"")},hf=function(n){try{return Sv.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yM(n){return dc(void 0,n)}function dc(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!vM(t)||(n[t]=dc(n[t],e[t]));return n}function vM(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM=()=>wM().__FIREBASE_DEFAULTS__,IM=()=>{if(typeof process>"u"||typeof HT>"u")return;const n=HT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},TM=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&hf(n[1]);return e&&JSON.parse(e)},ap=()=>{try{return EM()||IM()||TM()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},dP=n=>{var e,t;return(t=(e=ap())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},SM=n=>{const e=dP(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},fP=()=>{var n;return(n=ap())===null||n===void 0?void 0:n.config},pP=n=>{var e;return(e=ap())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[cf(JSON.stringify(t)),cf(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Av(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(je())}function Cv(){var n;const e=(n=ap())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gP(){return typeof self=="object"&&self.self===self}function _P(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function lp(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yP(){const n=je();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function vP(){return uP.NODE_ADMIN===!0}function wP(){return!Cv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fc(){try{return typeof indexedDB=="object"}catch{return!1}}function RM(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM="FirebaseError";class Gt extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=AM,Object.setPrototypeOf(this,Gt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,To.prototype.create)}}class To{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?CM(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Gt(i,a,r)}}function CM(n,e){return n.replace(PM,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const PM=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(n){return JSON.parse(n)}function bt(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=function(n){let e={},t={},r={},i="";try{const s=n.split(".");e=pc(hf(s[0])||""),t=pc(hf(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}},kM=function(n){const e=EP(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},bM=function(n){const e=EP(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Va(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function E_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function df(n,e,t){const r={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function Ma(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(KT(s)&&KT(o)){if(!Ma(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function KT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function So(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ha(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function _u(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)r[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){const p=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(p<<1|p>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,h;for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),h=1518500249):(c=s^o^a,h=1859775393):d<60?(c=s&o|a&(s|o),h=2400959708):(c=s^o^a,h=3395469782);const p=(i<<5|i>>>27)+c+l+h+r[d]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=p}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const r=t-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<t;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function IP(n,e){const t=new xM(n,e);return t.subscribe.bind(t)}class xM{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");DM(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Qm),i.error===void 0&&(i.error=Qm),i.complete===void 0&&(i.complete=Qm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function DM(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Qm(){}function OM(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,K(r<n.length,"Surrogate pair missing trail surrogate.");const o=n.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},up=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(n){return n&&n._delegate?n._delegate:n}class bn{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Rv;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(FM(e))try{this.getOrInitializeService({instanceIdentifier:As})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=As){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=As){return this.instances.has(e)}getOptions(e=As){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:MM(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=As){return this.component?this.component.multipleInstances?e:As:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function MM(n){return n===As?void 0:n}function FM(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new VM(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv=[];var ae;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ae||(ae={}));const SP={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},UM=ae.INFO,BM={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},jM=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=BM[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zc{constructor(e){this.name=e,this._logLevel=UM,this._logHandler=jM,this._userLogHandler=null,Pv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}function zM(n){Pv.forEach(e=>{e.setLogLevel(n)})}function qM(n,e){for(const t of Pv){let r=null;e&&e.level&&(r=SP[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&n({level:ae[s].toLowerCase(),message:a,args:o,type:i.name})}}}const $M=(n,e)=>e.some(t=>n instanceof t);let QT,YT;function WM(){return QT||(QT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GM(){return YT||(YT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const RP=new WeakMap,I_=new WeakMap,AP=new WeakMap,Ym=new WeakMap,kv=new WeakMap;function HM(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t($i(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&RP.set(t,n)}).catch(()=>{}),kv.set(e,n),e}function KM(n){if(I_.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});I_.set(n,e)}let T_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return I_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||AP.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return $i(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function QM(n){T_=n(T_)}function YM(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Jm(this),e,...t);return AP.set(r,e.sort?e.sort():[e]),$i(r)}:GM().includes(n)?function(...e){return n.apply(Jm(this),e),$i(RP.get(this))}:function(...e){return $i(n.apply(Jm(this),e))}}function JM(n){return typeof n=="function"?YM(n):(n instanceof IDBTransaction&&KM(n),$M(n,WM())?new Proxy(n,T_):n)}function $i(n){if(n instanceof IDBRequest)return HM(n);if(Ym.has(n))return Ym.get(n);const e=JM(n);return e!==n&&(Ym.set(n,e),kv.set(e,n)),e}const Jm=n=>kv.get(n);function XM(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=$i(o);return r&&o.addEventListener("upgradeneeded",l=>{r($i(o.result),l.oldVersion,l.newVersion,$i(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const ZM=["get","getKey","getAll","getAllKeys","count"],eF=["put","add","delete","clear"],Xm=new Map;function JT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Xm.get(e))return Xm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=eF.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ZM.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),i&&l.done]))[0]};return Xm.set(e,s),s}QM(n=>({...n,get:(e,t,r)=>JT(e,t)||n.get(e,t,r),has:(e,t)=>!!JT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tF{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(nF(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function nF(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ff="@firebase/app",S_="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=new zc("@firebase/app"),rF="@firebase/app-compat",iF="@firebase/analytics-compat",sF="@firebase/analytics",oF="@firebase/app-check-compat",aF="@firebase/app-check",lF="@firebase/auth",uF="@firebase/auth-compat",cF="@firebase/database",hF="@firebase/database-compat",dF="@firebase/functions",fF="@firebase/functions-compat",pF="@firebase/installations",mF="@firebase/installations-compat",gF="@firebase/messaging",_F="@firebase/messaging-compat",yF="@firebase/performance",vF="@firebase/performance-compat",wF="@firebase/remote-config",EF="@firebase/remote-config-compat",IF="@firebase/storage",TF="@firebase/storage-compat",SF="@firebase/firestore",RF="@firebase/vertexai-preview",AF="@firebase/firestore-compat",CF="firebase",PF="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi="[DEFAULT]",kF={[ff]:"fire-core",[rF]:"fire-core-compat",[sF]:"fire-analytics",[iF]:"fire-analytics-compat",[aF]:"fire-app-check",[oF]:"fire-app-check-compat",[lF]:"fire-auth",[uF]:"fire-auth-compat",[cF]:"fire-rtdb",[hF]:"fire-rtdb-compat",[dF]:"fire-fn",[fF]:"fire-fn-compat",[pF]:"fire-iid",[mF]:"fire-iid-compat",[gF]:"fire-fcm",[_F]:"fire-fcm-compat",[yF]:"fire-perf",[vF]:"fire-perf-compat",[wF]:"fire-rc",[EF]:"fire-rc-compat",[IF]:"fire-gcs",[TF]:"fire-gcs-compat",[SF]:"fire-fst",[AF]:"fire-fst-compat",[RF]:"fire-vertex","fire-js":"fire-js",[CF]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=new Map,Fa=new Map,Ua=new Map;function mc(n,e){try{n.container.addComponent(e)}catch(t){eo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function CP(n,e){n.container.addOrOverwriteComponent(e)}function Dr(n){const e=n.name;if(Ua.has(e))return eo.debug(`There were multiple attempts to register component ${e}.`),!1;Ua.set(e,n);for(const t of Ji.values())mc(t,n);for(const t of Fa.values())mc(t,n);return!0}function qc(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function bF(n,e,t=Yi){qc(n,e).clearInstance(t)}function PP(n){return n.options!==void 0}function Xe(n){return n.settings!==void 0}function NF(){Ua.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zn=new To("app","Firebase",xF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kP=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF extends kP{constructor(e,t,r,i){const s=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{const a=e;super(a.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},t),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,nn(ff,S_,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){xv(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw zn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr=PF;function bv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Yi,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw zn.create("bad-app-name",{appName:String(i)});if(t||(t=fP()),!t)throw zn.create("no-options");const s=Ji.get(i);if(s){if(Ma(t,s.options)&&Ma(r,s.config))return s;throw zn.create("duplicate-app",{appName:i})}const o=new TP(i);for(const l of Ua.values())o.addComponent(l);const a=new kP(t,r,o);return Ji.set(i,a),a}function OF(n,e){if(gP())throw zn.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;PP(n)?t=n.options:t=n;const r=Object.assign(Object.assign({},e),t);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=c=>[...c].reduce((h,d)=>Math.imul(31,h)+d.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw zn.create("finalization-registry-not-supported",{});const s=""+i(JSON.stringify(r)),o=Fa.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;const a=new TP(s);for(const c of Ua.values())a.addComponent(c);const l=new DF(t,e,s,a);return Fa.set(s,l),l}function Nv(n=Yi){const e=Ji.get(n);if(!e&&n===Yi&&fP())return bv();if(!e)throw zn.create("no-app",{appName:n});return e}function LF(){return Array.from(Ji.values())}async function xv(n){let e=!1;const t=n.name;Ji.has(t)?(e=!0,Ji.delete(t)):Fa.has(t)&&n.decRefCount()<=0&&(Fa.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function nn(n,e,t){var r;let i=(r=kF[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),eo.warn(a.join(" "));return}Dr(new bn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function bP(n,e){if(n!==null&&typeof n!="function")throw zn.create("invalid-log-argument");qM(n,e)}function NP(n){zM(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VF="firebase-heartbeat-database",MF=1,gc="firebase-heartbeat-store";let Zm=null;function xP(){return Zm||(Zm=XM(VF,MF,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(gc)}catch(t){console.warn(t)}}}}).catch(n=>{throw zn.create("idb-open",{originalErrorMessage:n.message})})),Zm}async function FF(n){try{const t=(await xP()).transaction(gc),r=await t.objectStore(gc).get(DP(n));return await t.done,r}catch(e){if(e instanceof Gt)eo.warn(e.message);else{const t=zn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});eo.warn(t.message)}}}async function XT(n,e){try{const r=(await xP()).transaction(gc,"readwrite");await r.objectStore(gc).put(e,DP(n)),await r.done}catch(t){if(t instanceof Gt)eo.warn(t.message);else{const r=zn.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});eo.warn(r.message)}}}function DP(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UF=1024,BF=30*24*60*60*1e3;class jF{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new qF(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ZT();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=BF}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ZT(),{heartbeatsToSend:r,unsentEntries:i}=zF(this._heartbeatsCache.heartbeats),s=cf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function ZT(){return new Date().toISOString().substring(0,10)}function zF(n,e=UF){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),e0(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),e0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class qF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fc()?RM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await FF(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return XT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return XT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function e0(n){return cf(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $F(n){Dr(new bn("platform-logger",e=>new tF(e),"PRIVATE")),Dr(new bn("heartbeat",e=>new jF(e),"PRIVATE")),nn(ff,S_,n),nn(ff,S_,"esm2017"),nn("fire-js","")}$F("");const WF=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Gt,SDK_VERSION:Mr,_DEFAULT_ENTRY_NAME:Yi,_addComponent:mc,_addOrOverwriteComponent:CP,_apps:Ji,_clearComponents:NF,_components:Ua,_getProvider:qc,_isFirebaseApp:PP,_isFirebaseServerApp:Xe,_registerComponent:Dr,_removeServiceInstance:bF,_serverApps:Fa,deleteApp:xv,getApp:Nv,getApps:LF,initializeApp:bv,initializeServerApp:OF,onLog:bP,registerVersion:nn,setLogLevel:NP},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GF{constructor(e,t){this._delegate=e,this.firebase=t,mc(e,new bn("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),xv(this._delegate)))}_getService(e,t=Yi){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=Yi){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){mc(this._delegate,e)}_addOrOverwriteComponent(e){CP(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HF={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},t0=new To("app-compat","Firebase",HF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KF(n){const e={},t={__esModule:!0,initializeApp:s,app:i,registerVersion:nn,setLogLevel:NP,onLog:bP,apps:null,SDK_VERSION:Mr,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:WF}};t.default=t,Object.defineProperty(t,"apps",{get:o});function r(c){delete e[c]}function i(c){if(c=c||Yi,!dr(e,c))throw t0.create("no-app",{appName:c});return e[c]}i.App=n;function s(c,h={}){const d=bv(c,h);if(dr(e,d.name))return e[d.name];const p=new n(d,t);return e[d.name]=p,p}function o(){return Object.keys(e).map(c=>e[c])}function a(c){const h=c.name,d=h.replace("-compat","");if(Dr(c)&&c.type==="PUBLIC"){const p=(g=i())=>{if(typeof g[d]!="function")throw t0.create("invalid-app-argument",{appName:h});return g[d]()};c.serviceProps!==void 0&&dc(p,c.serviceProps),t[d]=p,n.prototype[d]=function(...g){return this._getService.bind(this,h).apply(this,c.multipleInstances?g:[])}}return c.type==="PUBLIC"?t[d]:null}function l(c,h){return h==="serverAuth"?null:h}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(){const n=KF(GF);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:OP,extendNamespace:e,createSubscribe:IP,ErrorFactory:To,deepExtend:dc});function e(t){dc(n,t)}return n}const QF=OP();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0=new zc("@firebase/app-compat"),YF="@firebase/app-compat",JF="0.2.35";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XF(n){nn(YF,JF,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(gP()&&self.firebase!==void 0){n0.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const n=self.firebase.SDK_VERSION;n&&n.indexOf("LITE")>=0&&n0.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const Te=QF;XF();var ZF="firebase",e2="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Te.registerVersion(ZF,e2,"app-compat");function Dv(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}const Zl={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},jo={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function LP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const n2=t2,r2=LP,VP=new To("auth","Firebase",LP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf=new zc("@firebase/auth");function i2(n,...e){pf.logLevel<=ae.WARN&&pf.warn(`Auth (${Mr}): ${n}`,...e)}function Id(n,...e){pf.logLevel<=ae.ERROR&&pf.error(`Auth (${Mr}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(n,...e){throw Lv(n,...e)}function ft(n,...e){return Lv(n,...e)}function Ov(n,e,t){const r=Object.assign(Object.assign({},r2()),{[e]:t});return new To("auth","Firebase",r).create(e,{appName:n.name})}function It(n){return Ov(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ul(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&St(n,"argument-error"),Ov(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Lv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return VP.create(n,...e)}function $(n,e,...t){if(!n)throw Lv(e,...t)}function Sr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Id(e),new Error(e)}function fr(n,e){n||Sr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Vv(){return r0()==="http:"||r0()==="https:"}function r0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Vv()||_P()||"connection"in navigator)?navigator.onLine:!0}function o2(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,t){this.shortDelay=e,this.longDelay=t,fr(t>e,"Short delay should be less than long delay!"),this.isMobile=Av()||lp()}get(){return s2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(n,e){fr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=new $c(3e4,6e4);function tt(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function nt(n,e,t,r,i={}){return FP(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=So(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();return l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode),MP.fetch()(UP(n,n.config.apiHost,t,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function FP(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},a2),e);try{const i=new c2(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw yu(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw yu(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw yu(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw yu(n,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Ov(n,h,c);St(n,h)}}catch(i){if(i instanceof Gt)throw i;St(n,"network-request-failed",{message:String(i)})}}async function li(n,e,t,r,i={}){const s=await nt(n,e,t,r,i);return"mfaPendingCredential"in s&&St(n,"multi-factor-auth-required",{_serverResponse:s}),s}function UP(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?Mv(n.config,i):`${n.config.apiScheme}://${i}`}function u2(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class c2{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ft(this.auth,"network-request-failed")),l2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function yu(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ft(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(n){return n!==void 0&&n.getResponse!==void 0}function s0(n){return n!==void 0&&n.enterprise!==void 0}class h2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return u2(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d2(n){return(await nt(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function f2(n,e){return nt(n,"GET","/v2/recaptchaConfig",tt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p2(n,e){return nt(n,"POST","/v1/accounts:delete",e)}async function m2(n,e){return nt(n,"POST","/v1/accounts:update",e)}async function BP(n,e){return nt(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Du(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function g2(n,e=!1){const t=X(n),r=await t.getIdToken(e),i=cp(r);$(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Du(eg(i.auth_time)),issuedAtTime:Du(eg(i.iat)),expirationTime:Du(eg(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function eg(n){return Number(n)*1e3}function cp(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Id("JWT malformed, contained fewer than 3 sections"),null;try{const i=hf(t);return i?JSON.parse(i):(Id("Failed to decode base64 JWT payload"),null)}catch(i){return Id("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function o0(n){const e=cp(n);return $(e,"internal-error"),$(typeof e.exp<"u","internal-error"),$(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ii(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Gt&&_2(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function _2({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Du(this.lastLoginAt),this.creationTime=Du(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yc(n){var e;const t=n.auth,r=await n.getIdToken(),i=await ii(n,BP(t,{idToken:r}));$(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?jP(s.providerUserInfo):[],a=w2(n.providerData,o),l=n.isAnonymous,c=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new R_(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,d)}async function v2(n){const e=X(n);await yc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function w2(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function jP(n){return n.map(e=>{var{providerId:t}=e,r=Dv(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E2(n,e){const t=await FP(n,{},async()=>{const r=So({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=UP(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",MP.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function I2(n,e){return nt(n,"POST","/v2/accounts:revokeToken",tt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$(e.idToken,"internal-error"),$(typeof e.idToken<"u","internal-error"),$(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):o0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){$(e.length!==0,"internal-error");const t=o0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:($(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await E2(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new wa;return r&&($(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&($(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&($(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wa,this.toJSON())}_performRefresh(){return Sr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(n,e){$(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Gr{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Dv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new y2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new R_(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await ii(this,this.stsTokenManager.getToken(this.auth,e));return $(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return g2(this,e)}reload(){return v2(this)}_assign(e){this!==e&&($(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Gr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await yc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xe(this.auth.app))return Promise.reject(It(this.auth));const e=await this.getIdToken();return await ii(this,p2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,l,c,h;const d=(r=t.displayName)!==null&&r!==void 0?r:void 0,p=(i=t.email)!==null&&i!==void 0?i:void 0,g=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=t.photoURL)!==null&&o!==void 0?o:void 0,S=(a=t.tenantId)!==null&&a!==void 0?a:void 0,C=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,I=(c=t.createdAt)!==null&&c!==void 0?c:void 0,w=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:E,emailVerified:k,isAnonymous:M,providerData:F,stsTokenManager:T}=t;$(E&&T,e,"internal-error");const v=wa.fromJSON(this.name,T);$(typeof E=="string",e,"internal-error"),vi(d,e.name),vi(p,e.name),$(typeof k=="boolean",e,"internal-error"),$(typeof M=="boolean",e,"internal-error"),vi(g,e.name),vi(y,e.name),vi(S,e.name),vi(C,e.name),vi(I,e.name),vi(w,e.name);const R=new Gr({uid:E,auth:e,email:p,emailVerified:k,displayName:d,isAnonymous:M,photoURL:y,phoneNumber:g,tenantId:S,stsTokenManager:v,createdAt:I,lastLoginAt:w});return F&&Array.isArray(F)&&(R.providerData=F.map(P=>Object.assign({},P))),C&&(R._redirectEventId=C),R}static async _fromIdTokenResponse(e,t,r=!1){const i=new wa;i.updateFromServerResponse(t);const s=new Gr({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await yc(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];$(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?jP(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new wa;a.updateFromIdToken(r);const l=new Gr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new R_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0=new Map;function An(n){fr(n instanceof Function,"Expected a class definition");let e=a0.get(n);return e?(fr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,a0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}zP.type="NONE";const Ba=zP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qs(n,e,t){return`firebase:${n}:${e}:${t}`}class Ea{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=qs(this.userKey,i.apiKey,s),this.fullPersistenceKey=qs("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Gr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ea(An(Ba),e,r);const i=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||An(Ba);const o=qs(r,e.config.apiKey,e.name);let a=null;for(const c of t)try{const h=await c._get(o);if(h){const d=Gr._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ea(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ea(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(WP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(GP(e))return"Blackberry";if(HP(e))return"Webos";if(Fv(e))return"Safari";if((e.includes("chrome/")||$P(e))&&!e.includes("edge/"))return"Chrome";if(Wc(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function qP(n=je()){return/firefox\//i.test(n)}function Fv(n=je()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $P(n=je()){return/crios\//i.test(n)}function WP(n=je()){return/iemobile/i.test(n)}function Wc(n=je()){return/android/i.test(n)}function GP(n=je()){return/blackberry/i.test(n)}function HP(n=je()){return/webos/i.test(n)}function cl(n=je()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function T2(n=je()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function S2(n=je()){var e;return cl(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function R2(){return yP()&&document.documentMode===10}function KP(n=je()){return cl(n)||Wc(n)||HP(n)||GP(n)||/windows phone/i.test(n)||WP(n)}function A2(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QP(n,e=[]){let t;switch(n){case"Browser":t=l0(je());break;case"Worker":t=`${l0(je())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Mr}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P2(n,e={}){return nt(n,"GET","/v2/passwordPolicy",tt(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2=6;class b2{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:k2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new u0(this),this.idTokenSubscription=new u0(this),this.beforeStateQueue=new C2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=An(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ea.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await BP(this,{idToken:e}),r=await Gr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Xe(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return $(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await yc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=o2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xe(this.app))return Promise.reject(It(this));const t=e?X(e):null;return t&&$(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&$(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xe(this.app)?Promise.reject(It(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xe(this.app)?Promise.reject(It(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(An(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await P2(this),t=new b2(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new To("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await I2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&An(e)||this._popupRedirectResolver;$(t,this,"argument-error"),this.redirectPersistenceManager=await Ea.create(this,[An(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if($(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=QP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&i2(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ze(n){return X(n)}class u0{constructor(e){this.auth=e,this.observer=null,this.addObserver=IP(t=>this.observer=t)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function x2(n){Gc=n}function Uv(n){return Gc.loadJS(n)}function D2(){return Gc.recaptchaV2Script}function O2(){return Gc.recaptchaEnterpriseScript}function L2(){return Gc.gapiScript}function YP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const V2="recaptcha-enterprise",M2="NO_RECAPTCHA";class F2{constructor(e){this.type=V2,this.auth=Ze(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{f2(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new h2(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;s0(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(M2)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&s0(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=O2();l.length!==0&&(l+=a),Uv(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function c0(n,e,t,r=!1){const i=new F2(n);let s;try{s=await i.verify(t)}catch{s=await i.verify(t,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function vc(n,e,t,r){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await c0(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await c0(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(n,e){const t=qc(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Ma(s,e??{}))return i;St(i,"already-initialized")}return t.initialize({options:e})}function B2(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(An);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function JP(n,e,t){const r=Ze(n);$(r._canInitEmulator,r,"emulator-config-failed"),$(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),s=XP(e),{host:o,port:a}=j2(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||z2()}function XP(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function j2(n){const e=XP(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:h0(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:h0(o)}}}function h0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function z2(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Sr("not implemented")}_getIdTokenResponse(e){return Sr("not implemented")}_linkToIdToken(e,t){return Sr("not implemented")}_getReauthenticationResolver(e){return Sr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZP(n,e){return nt(n,"POST","/v1/accounts:resetPassword",tt(n,e))}async function q2(n,e){return nt(n,"POST","/v1/accounts:update",e)}async function $2(n,e){return nt(n,"POST","/v1/accounts:signUp",e)}async function W2(n,e){return nt(n,"POST","/v1/accounts:update",tt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G2(n,e){return li(n,"POST","/v1/accounts:signInWithPassword",tt(n,e))}async function hp(n,e){return nt(n,"POST","/v1/accounts:sendOobCode",tt(n,e))}async function H2(n,e){return hp(n,e)}async function K2(n,e){return hp(n,e)}async function Q2(n,e){return hp(n,e)}async function Y2(n,e){return hp(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J2(n,e){return li(n,"POST","/v1/accounts:signInWithEmailLink",tt(n,e))}async function X2(n,e){return li(n,"POST","/v1/accounts:signInWithEmailLink",tt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc extends hl{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new wc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new wc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vc(e,t,"signInWithPassword",G2);case"emailLink":return J2(e,{email:this._email,oobCode:this._password});default:St(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vc(e,r,"signUpPassword",$2);case"emailLink":return X2(e,{idToken:t,email:this._email,oobCode:this._password});default:St(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jr(n,e){return li(n,"POST","/v1/accounts:signInWithIdp",tt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2="http://localhost";class Or extends hl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Or(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):St("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Dv(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Or(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Jr(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Jr(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Jr(e,t)}buildRequest(){const e={requestUri:Z2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=So(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eU(n,e){return nt(n,"POST","/v1/accounts:sendVerificationCode",tt(n,e))}async function tU(n,e){return li(n,"POST","/v1/accounts:signInWithPhoneNumber",tt(n,e))}async function nU(n,e){const t=await li(n,"POST","/v1/accounts:signInWithPhoneNumber",tt(n,e));if(t.temporaryProof)throw yu(n,"account-exists-with-different-credential",t);return t}const rU={USER_NOT_FOUND:"user-not-found"};async function iU(n,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return li(n,"POST","/v1/accounts:signInWithPhoneNumber",tt(n,t),rU)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends hl{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new $s({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new $s({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return tU(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return nU(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return iU(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!t&&!i&&!s?null:new $s({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sU(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function oU(n){const e=ha(_u(n)).link,t=e?ha(_u(e)).deep_link_id:null,r=ha(_u(n)).deep_link_id;return(r?ha(_u(r)).link:null)||r||t||e||n}class dp{constructor(e){var t,r,i,s,o,a;const l=ha(_u(e)),c=(t=l.apiKey)!==null&&t!==void 0?t:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,d=sU((i=l.mode)!==null&&i!==void 0?i:null);$(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=oU(e);try{return new dp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(){this.providerId=hs.PROVIDER_ID}static credential(e,t){return wc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=dp.parseLink(t);return $(r,"argument-error"),wc._fromEmailAndCode(e,r.code,r.tenantId)}}hs.PROVIDER_ID="password";hs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";hs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl extends ui{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ia extends dl{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return $("providerId"in t&&"signInMethod"in t,"argument-error"),Or._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return $(e.idToken||e.accessToken,"argument-error"),Or._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Ia.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Ia.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!t&&!s||!a)return null;try{return new Ia(a)._credential({idToken:t,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends dl{constructor(){super("facebook.com")}static credential(e){return Or._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vr.credential(e.oauthAccessToken)}catch{return null}}}vr.FACEBOOK_SIGN_IN_METHOD="facebook.com";vr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends dl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Or._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return wr.credential(t,r)}catch{return null}}}wr.GOOGLE_SIGN_IN_METHOD="google.com";wr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends dl{constructor(){super("github.com")}static credential(e){return Or._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Er.credential(e.oauthAccessToken)}catch{return null}}}Er.GITHUB_SIGN_IN_METHOD="github.com";Er.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aU="http://localhost";class ja extends hl{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return Jr(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Jr(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Jr(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=t;return!r||!i||!s||r!==i?null:new ja(r,s)}static _create(e,t){return new ja(e,t)}buildRequest(){return{requestUri:aU,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lU="saml.";class mf extends ui{constructor(e){$(e.startsWith(lU),"argument-error"),super(e)}static credentialFromResult(e){return mf.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return mf.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=ja.fromJSON(e);return $(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return ja._create(r,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends dl{constructor(){super("twitter.com")}static credential(e,t){return Or._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ir.credential(t,r)}catch{return null}}}Ir.TWITTER_SIGN_IN_METHOD="twitter.com";Ir.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ek(n,e){return li(n,"POST","/v1/accounts:signUp",tt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Gr._fromIdTokenResponse(e,r,i),o=d0(r);return new Gn({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=d0(r);return new Gn({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function d0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uU(n){var e;if(Xe(n.app))return Promise.reject(It(n));const t=Ze(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new Gn({user:t.currentUser,providerId:null,operationType:"signIn"});const r=await ek(t,{returnSecureToken:!0}),i=await Gn._fromIdTokenResponse(t,"signIn",r,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf extends Gt{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,gf.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new gf(e,t,r,i)}}function tk(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?gf._fromErrorAndOperation(n,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cU(n,e){const t=X(n);await fp(!0,t,e);const{providerUserInfo:r}=await m2(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),i=nk(r||[]);return t.providerData=t.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function Bv(n,e,t=!1){const r=await ii(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Gn._forOperation(n,"link",r)}async function fp(n,e,t){await yc(e);const r=nk(e.providerData),i=n===!1?"provider-already-linked":"no-such-provider";$(r.has(t)===n,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rk(n,e,t=!1){const{auth:r}=n;if(Xe(r.app))return Promise.reject(It(r));const i="reauthenticate";try{const s=await ii(n,tk(r,i,e,n),t);$(s.idToken,r,"internal-error");const o=cp(s.idToken);$(o,r,"internal-error");const{sub:a}=o;return $(n.uid===a,r,"user-mismatch"),Gn._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&St(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ik(n,e,t=!1){if(Xe(n.app))return Promise.reject(It(n));const r="signIn",i=await tk(n,r,e),s=await Gn._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function pp(n,e){return ik(Ze(n),e)}async function sk(n,e){const t=X(n);return await fp(!1,t,e.providerId),Bv(t,e)}async function ok(n,e){return rk(X(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hU(n,e){return li(n,"POST","/v1/accounts:signInWithCustomToken",tt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dU(n,e){if(Xe(n.app))return Promise.reject(It(n));const t=Ze(n),r=await hU(t,{token:e,returnSecureToken:!0}),i=await Gn._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?jv._fromServerResponse(e,t):"totpInfo"in t?zv._fromServerResponse(e,t):St(e,"internal-error")}}class jv extends Hc{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new jv(t)}}class zv extends Hc{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new zv(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(n,e,t){var r;$(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),$(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&($(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&($(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qv(n){const e=Ze(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function fU(n,e,t){const r=Ze(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&mp(r,i,t),await vc(r,i,"getOobCode",K2)}async function pU(n,e,t){await ZP(X(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&qv(n),r})}async function mU(n,e){await W2(X(n),{oobCode:e})}async function ak(n,e){const t=X(n),r=await ZP(t,{oobCode:e}),i=r.requestType;switch($(i,t,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":$(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":$(r.mfaInfo,t,"internal-error");default:$(r.email,t,"internal-error")}let s=null;return r.mfaInfo&&(s=Hc._fromServerResponse(Ze(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function gU(n,e){const{data:t}=await ak(X(n),e);return t.email}async function _U(n,e,t){if(Xe(n.app))return Promise.reject(It(n));const r=Ze(n),o=await vc(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ek).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&qv(n),l}),a=await Gn._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function yU(n,e,t){return Xe(n.app)?Promise.reject(It(n)):pp(X(n),hs.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&qv(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vU(n,e,t){const r=Ze(n),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){$(a.handleCodeInApp,r,"argument-error"),a&&mp(r,o,a)}s(i,t),await vc(r,i,"getOobCode",Q2)}function wU(n,e){const t=dp.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function EU(n,e,t){if(Xe(n.app))return Promise.reject(It(n));const r=X(n),i=hs.credentialWithLink(e,t||_c());return $(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),pp(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IU(n,e){return nt(n,"POST","/v1/accounts:createAuthUri",tt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TU(n,e){const t=Vv()?_c():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:i}=await IU(X(n),r);return i||[]}async function SU(n,e){const t=X(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&mp(t.auth,i,e);const{email:s}=await H2(t.auth,i);s!==n.email&&await n.reload()}async function RU(n,e,t){const r=X(n),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&mp(r.auth,s,t);const{email:o}=await Y2(r.auth,s);o!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AU(n,e){return nt(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lk(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=X(n),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await ii(r,AU(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function CU(n,e){const t=X(n);return Xe(t.auth.app)?Promise.reject(It(t.auth)):uk(t,e,null)}function PU(n,e){return uk(X(n),null,e)}async function uk(n,e,t){const{auth:r}=n,s={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(s.email=e),t&&(s.password=t);const o=await ii(n,q2(r,s));await n._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kU(n){var e,t;if(!n)return null;const{providerId:r}=n,i=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},s=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(n!=null&&n.idToken)){const o=(t=(e=cp(n.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new Ta(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new bU(s,i);case"github.com":return new NU(s,i);case"google.com":return new xU(s,i);case"twitter.com":return new DU(s,i,n.screenName||null);case"custom":case"anonymous":return new Ta(s,null);default:return new Ta(s,r,i)}}class Ta{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class ck extends Ta{constructor(e,t,r,i){super(e,t,r),this.username=i}}class bU extends Ta{constructor(e,t){super(e,"facebook.com",t)}}class NU extends ck{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class xU extends Ta{constructor(e,t){super(e,"google.com",t)}}class DU extends ck{constructor(e,t,r){super(e,"twitter.com",t,r)}}function OU(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:kU(t)}function LU(n,e,t,r){return X(n).onIdTokenChanged(e,t,r)}function VU(n,e,t){return X(n).beforeAuthStateChanged(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new Ms("enroll",e,t)}static _fromMfaPendingCredential(e){return new Ms("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(e!=null&&e.multiFactorSession){if(!((t=e.multiFactorSession)===null||t===void 0)&&t.pendingCredential)return Ms._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Ms._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=Ze(e),i=t.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>Hc._fromServerResponse(r,a));$(i.mfaPendingCredential,r,"internal-error");const o=Ms._fromMfaPendingCredential(i.mfaPendingCredential);return new $v(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const c=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(t.operationType){case"signIn":const h=await Gn._fromIdTokenResponse(r,t.operationType,c);return await r._updateCurrentUser(h.user),h;case"reauthenticate":return $(t.user,r,"internal-error"),Gn._forOperation(t.user,t.operationType,c);default:St(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function MU(n,e){var t;const r=X(n),i=e;return $(e.customData.operationType,r,"argument-error"),$((t=i.customData._serverResponse)===null||t===void 0?void 0:t.mfaPendingCredential,r,"argument-error"),$v._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FU(n,e){return nt(n,"POST","/v2/accounts/mfaEnrollment:start",tt(n,e))}function UU(n,e){return nt(n,"POST","/v2/accounts/mfaEnrollment:finalize",tt(n,e))}function BU(n,e){return nt(n,"POST","/v2/accounts/mfaEnrollment:withdraw",tt(n,e))}class Wv{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>Hc._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new Wv(e)}async getSession(){return Ms._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,i=await this.getSession(),s=await ii(this.user,r._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await ii(this.user,BU(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==t),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const tg=new WeakMap;function jU(n){const e=X(n);return tg.has(e)||tg.set(e,Wv._fromUser(e)),tg.get(e)}const _f="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(_f,"1"),this.storage.removeItem(_f),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zU(){const n=je();return Fv(n)||cl(n)}const qU=1e3,$U=10;class dk extends hk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=zU()&&A2(),this.fallbackToPolling=KP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!t)return}const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);R2()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,$U):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},qU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}dk.type="LOCAL";const gp=dk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk extends hk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}fk.type="SESSION";const Xi=fk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WU(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new _p(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(t.origin,s)),l=await WU(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_p.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Kc("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(){return window}function HU(n){lt().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(){return typeof lt().WorkerGlobalScope<"u"&&typeof lt().importScripts=="function"}async function KU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function QU(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function YU(){return Gv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk="firebaseLocalStorageDb",JU=1,yf="firebaseLocalStorage",mk="fbase_key";class Qc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function yp(n,e){return n.transaction([yf],e?"readwrite":"readonly").objectStore(yf)}function XU(){const n=indexedDB.deleteDatabase(pk);return new Qc(n).toPromise()}function A_(){const n=indexedDB.open(pk,JU);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(yf,{keyPath:mk})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(yf)?e(r):(r.close(),await XU(),e(await A_()))})})}async function f0(n,e,t){const r=yp(n,!0).put({[mk]:e,value:t});return new Qc(r).toPromise()}async function ZU(n,e){const t=yp(n,!1).get(e),r=await new Qc(t).toPromise();return r===void 0?null:r.value}function p0(n,e){const t=yp(n,!0).delete(e);return new Qc(t).toPromise()}const eB=800,tB=3;class gk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await A_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>tB)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Gv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_p._getInstance(YU()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await KU(),!this.activeServiceWorker)return;this.sender=new GU(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||QU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await A_();return await f0(e,_f,"1"),await p0(e,_f),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>f0(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>ZU(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>p0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=yp(i,!1).getAll();return new Qc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),eB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gk.type="LOCAL";const za=gk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nB(n,e){return nt(n,"POST","/v2/accounts/mfaSignIn:start",tt(n,e))}function rB(n,e){return nt(n,"POST","/v2/accounts/mfaSignIn:finalize",tt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iB=500,sB=6e4,Yh=1e12;class oB{constructor(e){this.auth=e,this.counter=Yh,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new aB(e,this.auth.name,t||{})),this.counter++,r}reset(e){var t;const r=e||Yh;(t=this._widgets.get(r))===null||t===void 0||t.delete(),this._widgets.delete(r)}getResponse(e){var t;const r=e||Yh;return((t=this._widgets.get(r))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const r=e||Yh;return(t=this._widgets.get(r))===null||t===void 0||t.execute(),""}}class aB{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;$(i,"argument-error",{appName:t}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=lB(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},sB)},iB))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function lB(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng=YP("rcb"),uB=new $c(3e4,6e4);class cB{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=lt().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return $(hB(t),e,"argument-error"),this.shouldResolveImmediately(t)&&i0(lt().grecaptcha)?Promise.resolve(lt().grecaptcha):new Promise((r,i)=>{const s=lt().setTimeout(()=>{i(ft(e,"network-request-failed"))},uB.get());lt()[ng]=()=>{lt().clearTimeout(s),delete lt()[ng];const a=lt().grecaptcha;if(!a||!i0(a)){i(ft(e,"internal-error"));return}const l=a.render;a.render=(c,h)=>{const d=l(c,h);return this.counter++,d},this.hostLanguage=t,r(a)};const o=`${D2()}?${So({onload:ng,render:"explicit",hl:t})}`;Uv(o).catch(()=>{clearTimeout(s),i(ft(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=lt().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function hB(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class dB{async load(e){return new oB(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k="recaptcha",fB={theme:"light",type:"image"};let pB=class{constructor(e,t,r=Object.assign({},fB)){this.parameters=r,this.type=_k,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ze(e),this.isInvisible=this.parameters.size==="invisible",$(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof t=="string"?document.getElementById(t):t;$(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new dB:new cB,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){$(!this.parameters.sitekey,this.auth,"argument-error"),$(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),$(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=lt()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){$(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){$(Vv()&&!Gv(),this.auth,"internal-error"),await mB(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await d2(this.auth);$(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return $(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function mB(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=$s._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function gB(n,e,t){if(Xe(n.app))return Promise.reject(It(n));const r=Ze(n),i=await vp(r,e,X(t));return new Hv(i,s=>pp(r,s))}async function _B(n,e,t){const r=X(n);await fp(!1,r,"phone");const i=await vp(r.auth,e,X(t));return new Hv(i,s=>sk(r,s))}async function yB(n,e,t){const r=X(n);if(Xe(r.auth.app))return Promise.reject(It(r.auth));const i=await vp(r.auth,e,X(t));return new Hv(i,s=>ok(r,s))}async function vp(n,e,t){var r;const i=await t.verify();try{$(typeof i=="string",n,"argument-error"),$(t.type===_k,n,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return $(o.type==="enroll",n,"internal-error"),(await FU(n,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{$(o.type==="signin",n,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return $(a,n,"missing-multi-factor-info"),(await nB(n,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await eU(n,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{t._reset()}}async function vB(n,e){const t=X(n);if(Xe(t.auth.app))return Promise.reject(It(t.auth));await Bv(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let to=class Td{constructor(e){this.providerId=Td.PROVIDER_ID,this.auth=Ze(e)}verifyPhoneNumber(e,t){return vp(this.auth,e,X(t))}static credential(e,t){return $s._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Td.credentialFromTaggedObject(t)}static credentialFromError(e){return Td.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?$s._fromTokenResponse(t,r):null}};to.PROVIDER_ID="phone";to.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(n,e){return e?An(e):($(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv extends hl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Jr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Jr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function wB(n){return ik(n.auth,new Kv(n),n.bypassAuthState)}function EB(n){const{auth:e,user:t}=n;return $(t,e,"internal-error"),rk(t,new Kv(n),n.bypassAuthState)}async function IB(n){const{auth:e,user:t}=n;return $(t,e,"internal-error"),Bv(t,new Kv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wB;case"linkViaPopup":case"linkViaRedirect":return IB;case"reauthViaPopup":case"reauthViaRedirect":return EB;default:St(this.auth,"internal-error")}}resolve(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TB=new $c(2e3,1e4);async function SB(n,e,t){if(Xe(n.app))return Promise.reject(ft(n,"operation-not-supported-in-this-environment"));const r=Ze(n);ul(n,e,ui);const i=Ro(r,t);return new Hr(r,"signInViaPopup",e,i).executeNotNull()}async function RB(n,e,t){const r=X(n);if(Xe(r.auth.app))return Promise.reject(ft(r.auth,"operation-not-supported-in-this-environment"));ul(r.auth,e,ui);const i=Ro(r.auth,t);return new Hr(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function AB(n,e,t){const r=X(n);ul(r.auth,e,ui);const i=Ro(r.auth,t);return new Hr(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Hr extends yk{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Hr.currentPopupAction&&Hr.currentPopupAction.cancel(),Hr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $(e,this.auth,"internal-error"),e}async onExecution(){fr(this.filter.length===1,"Popup operations only handle one event");const e=Kc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ft(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ft(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ft(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,TB.get())};e()}}Hr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CB="pendingRedirect",Ou=new Map;class PB extends yk{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Ou.get(this.auth._key());if(!e){try{const r=await kB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ou.set(this.auth._key(),e)}return this.bypassAuthState||Ou.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function kB(n,e){const t=wk(e),r=vk(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}async function Qv(n,e){return vk(n)._set(wk(e),"true")}function bB(){Ou.clear()}function Yv(n,e){Ou.set(n._key(),e)}function vk(n){return An(n._redirectPersistence)}function wk(n){return qs(CB,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NB(n,e,t){return xB(n,e,t)}async function xB(n,e,t){if(Xe(n.app))return Promise.reject(It(n));const r=Ze(n);ul(n,e,ui),await r._initializationPromise;const i=Ro(r,t);return await Qv(i,r),i._openRedirect(r,e,"signInViaRedirect")}function DB(n,e,t){return OB(n,e,t)}async function OB(n,e,t){const r=X(n);if(ul(r.auth,e,ui),Xe(r.auth.app))return Promise.reject(It(r.auth));await r.auth._initializationPromise;const i=Ro(r.auth,t);await Qv(i,r.auth);const s=await Ek(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function LB(n,e,t){return VB(n,e,t)}async function VB(n,e,t){const r=X(n);ul(r.auth,e,ui),await r.auth._initializationPromise;const i=Ro(r.auth,t);await fp(!1,r,e.providerId),await Qv(i,r.auth);const s=await Ek(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function MB(n,e){return await Ze(n)._initializationPromise,wp(n,e,!1)}async function wp(n,e,t=!1){if(Xe(n.app))return Promise.reject(It(n));const r=Ze(n),i=Ro(r,e),o=await new PB(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function Ek(n){const e=Kc(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FB=10*60*1e3;class Ik{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!UB(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Tk(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ft(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=FB&&this.cachedEventUids.clear(),this.cachedEventUids.has(m0(e))}saveEventToCache(e){this.cachedEventUids.add(m0(e)),this.lastProcessedEventTime=Date.now()}}function m0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Tk({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function UB(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Tk(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sk(n,e={}){return nt(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jB=/^https?/;async function zB(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Sk(n);for(const t of e)try{if(qB(t))return}catch{}St(n,"unauthorized-domain")}function qB(n){const e=_c(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!jB.test(t))return!1;if(BB.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $B=new $c(3e4,6e4);function g0(){const n=lt().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function WB(n){return new Promise((e,t)=>{var r,i,s;function o(){g0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{g0(),t(ft(n,"network-request-failed"))},timeout:$B.get()})}if(!((i=(r=lt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=lt().gapi)===null||s===void 0)&&s.load)o();else{const a=YP("iframefcb");return lt()[a]=()=>{gapi.load?o():t(ft(n,"network-request-failed"))},Uv(`${L2()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Sd=null,e})}let Sd=null;function GB(n){return Sd=Sd||WB(n),Sd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HB=new $c(5e3,15e3),KB="__/auth/iframe",QB="emulator/auth/iframe",YB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XB(n){const e=n.config;$(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Mv(e,QB):`https://${n.config.authDomain}/${KB}`,r={apiKey:e.apiKey,appName:n.name,v:Mr},i=JB.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${So(r).slice(1)}`}async function ZB(n){const e=await GB(n),t=lt().gapi;return $(t,n,"internal-error"),e.open({where:document.body,url:XB(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YB,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=ft(n,"network-request-failed"),a=lt().setTimeout(()=>{s(o)},HB.get());function l(){lt().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},t4=500,n4=600,r4="_blank",i4="http://localhost";class _0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function s4(n,e,t,r=t4,i=n4){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},e4),{width:r.toString(),height:i.toString(),top:s,left:o}),c=je().toLowerCase();t&&(a=$P(c)?r4:t),qP(c)&&(e=e||i4,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[g,y])=>`${p}${g}=${y},`,"");if(S2(c)&&a!=="_self")return o4(e||"",a),new _0(null);const d=window.open(e||"",a,h);$(d,n,"popup-blocked");try{d.focus()}catch{}return new _0(d)}function o4(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4="__/auth/handler",l4="emulator/auth/handler",u4=encodeURIComponent("fac");async function C_(n,e,t,r,i,s){$(n.config.authDomain,n,"auth-domain-config-required"),$(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Mr,eventId:i};if(e instanceof ui){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",E_(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries(s||{}))o[h]=d}if(e instanceof dl){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await n._getAppCheckToken(),c=l?`#${u4}=${encodeURIComponent(l)}`:"";return`${c4(n)}?${So(a).slice(1)}${c}`}function c4({config:n}){return n.emulator?Mv(n,l4):`https://${n.authDomain}/${a4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg="webStorageSupport";class h4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xi,this._completeRedirectFn=wp,this._overrideRedirectResult=Yv}async _openPopup(e,t,r,i){var s;fr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await C_(e,t,r,_c(),i);return s4(e,o,Kc())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await C_(e,t,r,_c(),i);return HU(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(fr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await ZB(e),r=new Ik(e);return t.register("authEvent",i=>($(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(rg,{type:rg},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[rg];o!==void 0&&t(!!o),St(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=zB(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return KP()||Fv()||cl()}}const Rk=h4;class d4{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return Sr("unexpected MultiFactorSessionType")}}}class Jv extends d4{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Jv(e)}_finalizeEnroll(e,t,r){return UU(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return rB(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Ak{constructor(){}static assertion(e){return Jv._fromCredential(e)}}Ak.FACTOR_ID="phone";var y0="@firebase/auth",v0="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function m4(n){Dr(new bn("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;$(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:QP(n)},c=new N2(r,i,s,l);return B2(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Dr(new bn("auth-internal",e=>{const t=Ze(e.getProvider("auth").getImmediate());return(r=>new f4(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),nn(y0,v0,p4(n)),nn(y0,v0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4=5*60,_4=pP("authIdTokenMaxAge")||g4;let w0=null;const y4=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>_4)return;const i=t==null?void 0:t.token;w0!==i&&(w0=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function v4(n=Nv()){const e=qc(n,"auth");if(e.isInitialized())return e.getImmediate();const t=U2(n,{popupRedirectResolver:Rk,persistence:[za,gp,Xi]}),r=pP("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=y4(s.toString());VU(t,o,()=>o(t.currentUser)),LU(t,a=>o(a))}}const i=dP("auth");return i&&JP(t,`http://${i}`),t}function w4(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}x2({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=ft("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",w4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});m4("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4=2e3;async function I4(n,e,t){var r;const{BuildInfo:i}=no();fr(e.sessionId,"AuthEvent did not contain a session ID");const s=await C4(e.sessionId),o={};return cl()?o.ibi=i.packageName:Wc()?o.apn=i.packageName:St(n,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,C_(n,t,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function T4(n){const{BuildInfo:e}=no(),t={};cl()?t.iosBundleId=e.packageName:Wc()?t.androidPackageName=e.packageName:St(n,"operation-not-supported-in-this-environment"),await Sk(n,t)}function S4(n){const{cordova:e}=no();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(n):i=e.InAppBrowser.open(n,T2()?"_blank":"_system","location=yes"),t(i)})})}async function R4(n,e,t){const{cordova:r}=no();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var d;s();const p=(d=r.plugins.browsertab)===null||d===void 0?void 0:d.close;typeof p=="function"&&p(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function c(){a||(a=window.setTimeout(()=>{o(ft(n,"redirect-cancelled-by-user"))},E4))}function h(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(l),document.addEventListener("resume",c,!1),Wc()&&document.addEventListener("visibilitychange",h,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",h,!1),a&&window.clearTimeout(a)}})}finally{i()}}function A4(n){var e,t,r,i,s,o,a,l,c,h;const d=no();$(typeof((e=d==null?void 0:d.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),$(typeof((t=d==null?void 0:d.BuildInfo)===null||t===void 0?void 0:t.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),$(typeof((s=(i=(r=d==null?void 0:d.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$(typeof((l=(a=(o=d==null?void 0:d.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$(typeof((h=(c=d==null?void 0:d.cordova)===null||c===void 0?void 0:c.InAppBrowser)===null||h===void 0?void 0:h.open)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function C4(n){const e=P4(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(i=>i.toString(16).padStart(2,"0")).join("")}function P4(n){if(fr(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4=20;class b4 extends Ik{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function N4(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:O4(),postBody:null,tenantId:n.tenantId,error:ft(n,"no-auth-event")}}function x4(n,e){return P_()._set(k_(n),e)}async function E0(n){const e=await P_()._get(k_(n));return e&&await P_()._remove(k_(n)),e}function D4(n,e){var t,r;const i=V4(e);if(i.includes("/__/auth/callback")){const s=Rd(i),o=s.firebaseError?L4(decodeURIComponent(s.firebaseError)):null,a=(r=(t=o==null?void 0:o.code)===null||t===void 0?void 0:t.split("auth/"))===null||r===void 0?void 0:r[1],l=a?ft(a):null;return l?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:i,postBody:null}}return null}function O4(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<k4;t++){const r=Math.floor(Math.random()*e.length);n.push(e.charAt(r))}return n.join("")}function P_(){return An(gp)}function k_(n){return qs("authEvent",n.config.apiKey,n.name)}function L4(n){try{return JSON.parse(n)}catch{return null}}function V4(n){const e=Rd(n),t=e.link?decodeURIComponent(e.link):void 0,r=Rd(t).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Rd(i).link||i||r||t||n}function Rd(n){if(!(n!=null&&n.includes("?")))return{};const[e,...t]=n.split("?");return ha(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4=500;class F4{constructor(){this._redirectPersistence=Xi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=wp,this._overrideRedirectResult=Yv}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new b4(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){St(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,i){A4(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),bB(),await this._originValidation(e);const o=N4(e,r,i);await x4(e,o);const a=await I4(e,o,t),l=await S4(a);return R4(e,s,l)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=T4(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=no(),o=setTimeout(async()=>{await E0(e),t.onEvent(I0())},M4),a=async h=>{clearTimeout(o);const d=await E0(e);let p=null;d&&(h!=null&&h.url)&&(p=D4(d,h.url)),t.onEvent(p||I0())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,c=`${s.packageName.toLowerCase()}://`;no().handleOpenURL=async h=>{if(h.toLowerCase().startsWith(c)&&a({url:h}),typeof l=="function")try{l(h)}catch(d){console.error(d)}}}}const U4=F4;function I0(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ft("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4(n,e){Ze(n)._logFramework(e)}var j4="@firebase/auth-compat",z4="0.5.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4=1e3;function Lu(){var n;return((n=self==null?void 0:self.location)===null||n===void 0?void 0:n.protocol)||null}function $4(){return Lu()==="http:"||Lu()==="https:"}function Ck(n=je()){return!!((Lu()==="file:"||Lu()==="ionic:"||Lu()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function W4(){return lp()||Cv()}function G4(){return yP()&&(document==null?void 0:document.documentMode)===11}function H4(n=je()){return/Edge\/\d+/.test(n)}function K4(n=je()){return G4()||H4(n)}function Pk(){try{const n=self.localStorage,e=Kc();if(n)return n.setItem(e,"1"),n.removeItem(e),K4()?fc():!0}catch{return Xv()&&fc()}return!1}function Xv(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function ig(){return($4()||_P()||Ck())&&!W4()&&Pk()&&!Xv()}function kk(){return Ck()&&typeof document<"u"}async function Q4(){return kk()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},q4);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function Y4(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn={LOCAL:"local",NONE:"none",SESSION:"session"},eu=$,bk="persistence";function J4(n,e){if(eu(Object.values(Sn).includes(e),n,"invalid-persistence-type"),lp()){eu(e!==Sn.SESSION,n,"unsupported-persistence-type");return}if(Cv()){eu(e===Sn.NONE,n,"unsupported-persistence-type");return}if(Xv()){eu(e===Sn.NONE||e===Sn.LOCAL&&fc(),n,"unsupported-persistence-type");return}eu(e===Sn.NONE||Pk(),n,"unsupported-persistence-type")}async function b_(n){await n._initializationPromise;const e=Nk(),t=qs(bk,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistence())}function X4(n,e){const t=Nk();if(!t)return[];const r=qs(bk,n,e);switch(t.getItem(r)){case Sn.NONE:return[Ba];case Sn.LOCAL:return[za,Xi];case Sn.SESSION:return[Xi];default:return[]}}function Nk(){var n;try{return((n=Y4())===null||n===void 0?void 0:n.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4=$;class Di{constructor(){this.browserResolver=An(Rk),this.cordovaResolver=An(U4),this.underlyingResolver=null,this._redirectPersistence=Xi,this._completeRedirectFn=wp,this._overrideRedirectResult=Yv}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,i)}async _openRedirect(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,i)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return kk()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Z4(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await Q4();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(n){return n.unwrap()}function ej(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tj(n){return Dk(n)}function nj(n,e){var t;const r=(t=e.customData)===null||t===void 0?void 0:t._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new rj(n,MU(n,e))}else if(r){const i=Dk(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function Dk(n){const{_tokenResponse:e}=n instanceof Gt?n.customData:n;if(!e)return null;if(!(n instanceof Gt)&&"temporaryProof"in e&&"phoneNumber"in e)return to.credentialFromResult(n);const t=e.providerId;if(!t||t===Zl.PASSWORD)return null;let r;switch(t){case Zl.GOOGLE:r=wr;break;case Zl.FACEBOOK:r=vr;break;case Zl.GITHUB:r=Er;break;case Zl.TWITTER:r=Ir;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!i&&!a?null:a?t.startsWith("saml.")?ja._create(t,a):Or._fromParams({providerId:t,signInMethod:t,pendingToken:a,idToken:i,accessToken:s}):new Ia(t).credential({idToken:i,accessToken:s,rawNonce:l})}return n instanceof Gt?r.credentialFromError(n):r.credentialFromResult(n)}function cn(n,e){return e.catch(t=>{throw t instanceof Gt&&nj(n,t),t}).then(t=>{const r=t.operationType,i=t.user;return{operationType:r,credential:tj(t),additionalUserInfo:OU(t),user:Ep.getOrCreate(i)}})}async function N_(n,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>cn(n,t.confirm(r))}}class rj{constructor(e,t){this.resolver=t,this.auth=ej(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return cn(xk(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ep=class vu{constructor(e){this._delegate=e,this.multiFactor=jU(e)}static getOrCreate(e){return vu.USER_MAP.has(e)||vu.USER_MAP.set(e,new vu(e)),vu.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return cn(this.auth,sk(this._delegate,e))}async linkWithPhoneNumber(e,t){return N_(this.auth,_B(this._delegate,e,t))}async linkWithPopup(e){return cn(this.auth,AB(this._delegate,e,Di))}async linkWithRedirect(e){return await b_(Ze(this.auth)),LB(this._delegate,e,Di)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return cn(this.auth,ok(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return N_(this.auth,yB(this._delegate,e,t))}reauthenticateWithPopup(e){return cn(this.auth,RB(this._delegate,e,Di))}async reauthenticateWithRedirect(e){return await b_(Ze(this.auth)),DB(this._delegate,e,Di)}sendEmailVerification(e){return SU(this._delegate,e)}async unlink(e){return await cU(this._delegate,e),this}updateEmail(e){return CU(this._delegate,e)}updatePassword(e){return PU(this._delegate,e)}updatePhoneNumber(e){return vB(this._delegate,e)}updateProfile(e){return lk(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return RU(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};Ep.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tu=$;class x_{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;tu(r,"invalid-api-key",{appName:e.name}),tu(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Di:void 0;this._delegate=t.initialize({options:{persistence:ij(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(n2),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ep.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){JP(this._delegate,e,t)}applyActionCode(e){return mU(this._delegate,e)}checkActionCode(e){return ak(this._delegate,e)}confirmPasswordReset(e,t){return pU(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return cn(this._delegate,_U(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return TU(this._delegate,e)}isSignInWithEmailLink(e){return wU(this._delegate,e)}async getRedirectResult(){tu(ig(),this._delegate,"operation-not-supported-in-this-environment");const e=await MB(this._delegate,Di);return e?cn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){B4(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:i,error:s,complete:o}=T0(e,t,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,t,r){const{next:i,error:s,complete:o}=T0(e,t,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,t){return vU(this._delegate,e,t)}sendPasswordResetEmail(e,t){return fU(this._delegate,e,t||void 0)}async setPersistence(e){J4(this._delegate,e);let t;switch(e){case Sn.SESSION:t=Xi;break;case Sn.LOCAL:t=await An(za)._isAvailable()?za:gp;break;case Sn.NONE:t=Ba;break;default:return St("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return cn(this._delegate,uU(this._delegate))}signInWithCredential(e){return cn(this._delegate,pp(this._delegate,e))}signInWithCustomToken(e){return cn(this._delegate,dU(this._delegate,e))}signInWithEmailAndPassword(e,t){return cn(this._delegate,yU(this._delegate,e,t))}signInWithEmailLink(e,t){return cn(this._delegate,EU(this._delegate,e,t))}signInWithPhoneNumber(e,t){return N_(this._delegate,gB(this._delegate,e,t))}async signInWithPopup(e){return tu(ig(),this._delegate,"operation-not-supported-in-this-environment"),cn(this._delegate,SB(this._delegate,e,Di))}async signInWithRedirect(e){return tu(ig(),this._delegate,"operation-not-supported-in-this-environment"),await b_(this._delegate),NB(this._delegate,e,Di)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return gU(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}x_.Persistence=Sn;function T0(n,e,t){let r=n;typeof n!="function"&&({next:r,error:e,complete:t}=n);const i=r;return{next:o=>i(o&&Ep.getOrCreate(o)),error:e,complete:t}}function ij(n,e){const t=X4(n,e);if(typeof self<"u"&&!t.includes(za)&&t.push(za),typeof window<"u")for(const r of[gp,Xi])t.includes(r)||t.push(r);return t.includes(Ba)||t.push(Ba),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(){this.providerId="phone",this._delegate=new to(xk(Te.auth()))}static credential(e,t){return to.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}Zv.PHONE_SIGN_IN_METHOD=to.PHONE_SIGN_IN_METHOD;Zv.PROVIDER_ID=to.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj=$;class oj{constructor(e,t,r=Te.app()){var i;sj((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new pB(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aj="auth-compat";function lj(n){n.INTERNAL.registerComponent(new bn(aj,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new x_(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:jo.EMAIL_SIGNIN,PASSWORD_RESET:jo.PASSWORD_RESET,RECOVER_EMAIL:jo.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:jo.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:jo.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:jo.VERIFY_EMAIL}},EmailAuthProvider:hs,FacebookAuthProvider:vr,GithubAuthProvider:Er,GoogleAuthProvider:wr,OAuthProvider:Ia,SAMLAuthProvider:mf,PhoneAuthProvider:Zv,PhoneMultiFactorGenerator:Ak,RecaptchaVerifier:oj,TwitterAuthProvider:Ir,Auth:x_,AuthCredential:hl,Error:Gt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(j4,z4)}lj(Te);var S0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ws,Ok;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,v){function R(){}R.prototype=v.prototype,T.D=v.prototype,T.prototype=new R,T.prototype.constructor=T,T.C=function(P,b,N){for(var A=Array(arguments.length-2),un=2;un<arguments.length;un++)A[un-2]=arguments[un];return v.prototype[b].apply(P,A)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,R){R||(R=0);var P=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)P[b]=v.charCodeAt(R++)|v.charCodeAt(R++)<<8|v.charCodeAt(R++)<<16|v.charCodeAt(R++)<<24;else for(b=0;16>b;++b)P[b]=v[R++]|v[R++]<<8|v[R++]<<16|v[R++]<<24;v=T.g[0],R=T.g[1],b=T.g[2];var N=T.g[3],A=v+(N^R&(b^N))+P[0]+3614090360&4294967295;v=R+(A<<7&4294967295|A>>>25),A=N+(b^v&(R^b))+P[1]+3905402710&4294967295,N=v+(A<<12&4294967295|A>>>20),A=b+(R^N&(v^R))+P[2]+606105819&4294967295,b=N+(A<<17&4294967295|A>>>15),A=R+(v^b&(N^v))+P[3]+3250441966&4294967295,R=b+(A<<22&4294967295|A>>>10),A=v+(N^R&(b^N))+P[4]+4118548399&4294967295,v=R+(A<<7&4294967295|A>>>25),A=N+(b^v&(R^b))+P[5]+1200080426&4294967295,N=v+(A<<12&4294967295|A>>>20),A=b+(R^N&(v^R))+P[6]+2821735955&4294967295,b=N+(A<<17&4294967295|A>>>15),A=R+(v^b&(N^v))+P[7]+4249261313&4294967295,R=b+(A<<22&4294967295|A>>>10),A=v+(N^R&(b^N))+P[8]+1770035416&4294967295,v=R+(A<<7&4294967295|A>>>25),A=N+(b^v&(R^b))+P[9]+2336552879&4294967295,N=v+(A<<12&4294967295|A>>>20),A=b+(R^N&(v^R))+P[10]+4294925233&4294967295,b=N+(A<<17&4294967295|A>>>15),A=R+(v^b&(N^v))+P[11]+2304563134&4294967295,R=b+(A<<22&4294967295|A>>>10),A=v+(N^R&(b^N))+P[12]+1804603682&4294967295,v=R+(A<<7&4294967295|A>>>25),A=N+(b^v&(R^b))+P[13]+4254626195&4294967295,N=v+(A<<12&4294967295|A>>>20),A=b+(R^N&(v^R))+P[14]+2792965006&4294967295,b=N+(A<<17&4294967295|A>>>15),A=R+(v^b&(N^v))+P[15]+1236535329&4294967295,R=b+(A<<22&4294967295|A>>>10),A=v+(b^N&(R^b))+P[1]+4129170786&4294967295,v=R+(A<<5&4294967295|A>>>27),A=N+(R^b&(v^R))+P[6]+3225465664&4294967295,N=v+(A<<9&4294967295|A>>>23),A=b+(v^R&(N^v))+P[11]+643717713&4294967295,b=N+(A<<14&4294967295|A>>>18),A=R+(N^v&(b^N))+P[0]+3921069994&4294967295,R=b+(A<<20&4294967295|A>>>12),A=v+(b^N&(R^b))+P[5]+3593408605&4294967295,v=R+(A<<5&4294967295|A>>>27),A=N+(R^b&(v^R))+P[10]+38016083&4294967295,N=v+(A<<9&4294967295|A>>>23),A=b+(v^R&(N^v))+P[15]+3634488961&4294967295,b=N+(A<<14&4294967295|A>>>18),A=R+(N^v&(b^N))+P[4]+3889429448&4294967295,R=b+(A<<20&4294967295|A>>>12),A=v+(b^N&(R^b))+P[9]+568446438&4294967295,v=R+(A<<5&4294967295|A>>>27),A=N+(R^b&(v^R))+P[14]+3275163606&4294967295,N=v+(A<<9&4294967295|A>>>23),A=b+(v^R&(N^v))+P[3]+4107603335&4294967295,b=N+(A<<14&4294967295|A>>>18),A=R+(N^v&(b^N))+P[8]+1163531501&4294967295,R=b+(A<<20&4294967295|A>>>12),A=v+(b^N&(R^b))+P[13]+2850285829&4294967295,v=R+(A<<5&4294967295|A>>>27),A=N+(R^b&(v^R))+P[2]+4243563512&4294967295,N=v+(A<<9&4294967295|A>>>23),A=b+(v^R&(N^v))+P[7]+1735328473&4294967295,b=N+(A<<14&4294967295|A>>>18),A=R+(N^v&(b^N))+P[12]+2368359562&4294967295,R=b+(A<<20&4294967295|A>>>12),A=v+(R^b^N)+P[5]+4294588738&4294967295,v=R+(A<<4&4294967295|A>>>28),A=N+(v^R^b)+P[8]+2272392833&4294967295,N=v+(A<<11&4294967295|A>>>21),A=b+(N^v^R)+P[11]+1839030562&4294967295,b=N+(A<<16&4294967295|A>>>16),A=R+(b^N^v)+P[14]+4259657740&4294967295,R=b+(A<<23&4294967295|A>>>9),A=v+(R^b^N)+P[1]+2763975236&4294967295,v=R+(A<<4&4294967295|A>>>28),A=N+(v^R^b)+P[4]+1272893353&4294967295,N=v+(A<<11&4294967295|A>>>21),A=b+(N^v^R)+P[7]+4139469664&4294967295,b=N+(A<<16&4294967295|A>>>16),A=R+(b^N^v)+P[10]+3200236656&4294967295,R=b+(A<<23&4294967295|A>>>9),A=v+(R^b^N)+P[13]+681279174&4294967295,v=R+(A<<4&4294967295|A>>>28),A=N+(v^R^b)+P[0]+3936430074&4294967295,N=v+(A<<11&4294967295|A>>>21),A=b+(N^v^R)+P[3]+3572445317&4294967295,b=N+(A<<16&4294967295|A>>>16),A=R+(b^N^v)+P[6]+76029189&4294967295,R=b+(A<<23&4294967295|A>>>9),A=v+(R^b^N)+P[9]+3654602809&4294967295,v=R+(A<<4&4294967295|A>>>28),A=N+(v^R^b)+P[12]+3873151461&4294967295,N=v+(A<<11&4294967295|A>>>21),A=b+(N^v^R)+P[15]+530742520&4294967295,b=N+(A<<16&4294967295|A>>>16),A=R+(b^N^v)+P[2]+3299628645&4294967295,R=b+(A<<23&4294967295|A>>>9),A=v+(b^(R|~N))+P[0]+4096336452&4294967295,v=R+(A<<6&4294967295|A>>>26),A=N+(R^(v|~b))+P[7]+1126891415&4294967295,N=v+(A<<10&4294967295|A>>>22),A=b+(v^(N|~R))+P[14]+2878612391&4294967295,b=N+(A<<15&4294967295|A>>>17),A=R+(N^(b|~v))+P[5]+4237533241&4294967295,R=b+(A<<21&4294967295|A>>>11),A=v+(b^(R|~N))+P[12]+1700485571&4294967295,v=R+(A<<6&4294967295|A>>>26),A=N+(R^(v|~b))+P[3]+2399980690&4294967295,N=v+(A<<10&4294967295|A>>>22),A=b+(v^(N|~R))+P[10]+4293915773&4294967295,b=N+(A<<15&4294967295|A>>>17),A=R+(N^(b|~v))+P[1]+2240044497&4294967295,R=b+(A<<21&4294967295|A>>>11),A=v+(b^(R|~N))+P[8]+1873313359&4294967295,v=R+(A<<6&4294967295|A>>>26),A=N+(R^(v|~b))+P[15]+4264355552&4294967295,N=v+(A<<10&4294967295|A>>>22),A=b+(v^(N|~R))+P[6]+2734768916&4294967295,b=N+(A<<15&4294967295|A>>>17),A=R+(N^(b|~v))+P[13]+1309151649&4294967295,R=b+(A<<21&4294967295|A>>>11),A=v+(b^(R|~N))+P[4]+4149444226&4294967295,v=R+(A<<6&4294967295|A>>>26),A=N+(R^(v|~b))+P[11]+3174756917&4294967295,N=v+(A<<10&4294967295|A>>>22),A=b+(v^(N|~R))+P[2]+718787259&4294967295,b=N+(A<<15&4294967295|A>>>17),A=R+(N^(b|~v))+P[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(b+(A<<21&4294967295|A>>>11))&4294967295,T.g[2]=T.g[2]+b&4294967295,T.g[3]=T.g[3]+N&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var R=v-this.blockSize,P=this.B,b=this.h,N=0;N<v;){if(b==0)for(;N<=R;)i(this,T,N),N+=this.blockSize;if(typeof T=="string"){for(;N<v;)if(P[b++]=T.charCodeAt(N++),b==this.blockSize){i(this,P),b=0;break}}else for(;N<v;)if(P[b++]=T[N++],b==this.blockSize){i(this,P),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var R=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=R&255,R/=256;for(this.u(T),T=Array(16),v=R=0;4>v;++v)for(var P=0;32>P;P+=8)T[R++]=this.g[v]>>>P&255;return T};function s(T,v){var R=a;return Object.prototype.hasOwnProperty.call(R,T)?R[T]:R[T]=v(T)}function o(T,v){this.h=v;for(var R=[],P=!0,b=T.length-1;0<=b;b--){var N=T[b]|0;P&&N==v||(R[b]=N,P=!1)}this.g=R}var a={};function l(T){return-128<=T&&128>T?s(T,function(v){return new o([v|0],0>v?-1:0)}):new o([T|0],0>T?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return d;if(0>T)return C(c(-T));for(var v=[],R=1,P=0;T>=R;P++)v[P]=T/R|0,R*=4294967296;return new o(v,0)}function h(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return C(h(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=c(Math.pow(v,8)),P=d,b=0;b<T.length;b+=8){var N=Math.min(8,T.length-b),A=parseInt(T.substring(b,b+N),v);8>N?(N=c(Math.pow(v,N)),P=P.j(N).add(c(A))):(P=P.j(R),P=P.add(c(A)))}return P}var d=l(0),p=l(1),g=l(16777216);n=o.prototype,n.m=function(){if(S(this))return-C(this).m();for(var T=0,v=1,R=0;R<this.g.length;R++){var P=this.i(R);T+=(0<=P?P:4294967296+P)*v,v*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(y(this))return"0";if(S(this))return"-"+C(this).toString(T);for(var v=c(Math.pow(T,6)),R=this,P="";;){var b=k(R,v).g;R=I(R,b.j(v));var N=((0<R.g.length?R.g[0]:R.h)>>>0).toString(T);if(R=b,y(R))return N+P;for(;6>N.length;)N="0"+N;P=N+P}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function y(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function S(T){return T.h==-1}n.l=function(T){return T=I(this,T),S(T)?-1:y(T)?0:1};function C(T){for(var v=T.g.length,R=[],P=0;P<v;P++)R[P]=~T.g[P];return new o(R,~T.h).add(p)}n.abs=function(){return S(this)?C(this):this},n.add=function(T){for(var v=Math.max(this.g.length,T.g.length),R=[],P=0,b=0;b<=v;b++){var N=P+(this.i(b)&65535)+(T.i(b)&65535),A=(N>>>16)+(this.i(b)>>>16)+(T.i(b)>>>16);P=A>>>16,N&=65535,A&=65535,R[b]=A<<16|N}return new o(R,R[R.length-1]&-2147483648?-1:0)};function I(T,v){return T.add(C(v))}n.j=function(T){if(y(this)||y(T))return d;if(S(this))return S(T)?C(this).j(C(T)):C(C(this).j(T));if(S(T))return C(this.j(C(T)));if(0>this.l(g)&&0>T.l(g))return c(this.m()*T.m());for(var v=this.g.length+T.g.length,R=[],P=0;P<2*v;P++)R[P]=0;for(P=0;P<this.g.length;P++)for(var b=0;b<T.g.length;b++){var N=this.i(P)>>>16,A=this.i(P)&65535,un=T.i(b)>>>16,Fr=T.i(b)&65535;R[2*P+2*b]+=A*Fr,w(R,2*P+2*b),R[2*P+2*b+1]+=N*Fr,w(R,2*P+2*b+1),R[2*P+2*b+1]+=A*un,w(R,2*P+2*b+1),R[2*P+2*b+2]+=N*un,w(R,2*P+2*b+2)}for(P=0;P<v;P++)R[P]=R[2*P+1]<<16|R[2*P];for(P=v;P<2*v;P++)R[P]=0;return new o(R,0)};function w(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function E(T,v){this.g=T,this.h=v}function k(T,v){if(y(v))throw Error("division by zero");if(y(T))return new E(d,d);if(S(T))return v=k(C(T),v),new E(C(v.g),C(v.h));if(S(v))return v=k(T,C(v)),new E(C(v.g),v.h);if(30<T.g.length){if(S(T)||S(v))throw Error("slowDivide_ only works with positive integers.");for(var R=p,P=v;0>=P.l(T);)R=M(R),P=M(P);var b=F(R,1),N=F(P,1);for(P=F(P,2),R=F(R,2);!y(P);){var A=N.add(P);0>=A.l(T)&&(b=b.add(R),N=A),P=F(P,1),R=F(R,1)}return v=I(T,b.j(v)),new E(b,v)}for(b=d;0<=T.l(v);){for(R=Math.max(1,Math.floor(T.m()/v.m())),P=Math.ceil(Math.log(R)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),N=c(R),A=N.j(v);S(A)||0<A.l(T);)R-=P,N=c(R),A=N.j(v);y(N)&&(N=p),b=b.add(N),T=I(T,A)}return new E(b,T)}n.A=function(T){return k(this,T).h},n.and=function(T){for(var v=Math.max(this.g.length,T.g.length),R=[],P=0;P<v;P++)R[P]=this.i(P)&T.i(P);return new o(R,this.h&T.h)},n.or=function(T){for(var v=Math.max(this.g.length,T.g.length),R=[],P=0;P<v;P++)R[P]=this.i(P)|T.i(P);return new o(R,this.h|T.h)},n.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),R=[],P=0;P<v;P++)R[P]=this.i(P)^T.i(P);return new o(R,this.h^T.h)};function M(T){for(var v=T.g.length+1,R=[],P=0;P<v;P++)R[P]=T.i(P)<<1|T.i(P-1)>>>31;return new o(R,T.h)}function F(T,v){var R=v>>5;v%=32;for(var P=T.g.length-R,b=[],N=0;N<P;N++)b[N]=0<v?T.i(N+R)>>>v|T.i(N+R+1)<<32-v:T.i(N+R);return new o(b,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Ok=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Ws=o}).apply(typeof S0<"u"?S0:typeof self<"u"?self:typeof window<"u"?window:{});var Jh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Lk,Vk,wu,Mk,Ad,D_,Fk,Uk,Bk;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jh=="object"&&Jh];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=t(this);function i(u,f){if(f)e:{var m=r;u=u.split(".");for(var _=0;_<u.length-1;_++){var x=u[_];if(!(x in m))break e;m=m[x]}u=u[u.length-1],_=m[u],f=f(_),f!=_&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var m=0,_=!1,x={next:function(){if(!_&&m<u.length){var L=m++;return{value:f(L,u[L]),done:!1}}return _=!0,{done:!0,value:void 0}}};return x[Symbol.iterator]=function(){return x},x}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,m){return u.call.apply(u.bind,arguments)}function d(u,f,m){if(!u)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var x=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(x,_),u.apply(f,x)}}return function(){return u.apply(f,arguments)}}function p(u,f,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function g(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var _=m.slice();return _.push.apply(_,arguments),u.apply(this,_)}}function y(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(_,x,L){for(var W=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)W[Ae-2]=arguments[Ae];return f.prototype[x].apply(_,W)}}function S(u){const f=u.length;if(0<f){const m=Array(f);for(let _=0;_<f;_++)m[_]=u[_];return m}return[]}function C(u,f){for(let m=1;m<arguments.length;m++){const _=arguments[m];if(l(_)){const x=u.length||0,L=_.length||0;u.length=x+L;for(let W=0;W<L;W++)u[x+W]=_[W]}else u.push(_)}}class I{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function w(u){return/^[\s\xa0]*$/.test(u)}function E(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function k(u){return k[" "](u),u}k[" "]=function(){};var M=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function F(u,f,m){for(const _ in u)f.call(m,u[_],_,u)}function T(u,f){for(const m in u)f.call(void 0,u[m],m,u)}function v(u){const f={};for(const m in u)f[m]=u[m];return f}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,f){let m,_;for(let x=1;x<arguments.length;x++){_=arguments[x];for(m in _)u[m]=_[m];for(let L=0;L<R.length;L++)m=R[L],Object.prototype.hasOwnProperty.call(_,m)&&(u[m]=_[m])}}function b(u){var f=1;u=u.split(":");const m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function N(u){a.setTimeout(()=>{throw u},0)}function A(){var u=ne;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class un{constructor(){this.h=this.g=null}add(f,m){const _=Fr.get();_.set(f,m),this.h?this.h.next=_:this.g=_,this.h=_}}var Fr=new I(()=>new _s,u=>u.reset());class _s{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Kn,Q=!1,ne=new un,re=()=>{const u=a.Promise.resolve(void 0);Kn=()=>{u.then(Pe)}};var Pe=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(m){N(m)}var f=Fr;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}Q=!1};function we(){this.s=this.s,this.C=this.C}we.prototype.s=!1,we.prototype.ma=function(){this.s||(this.s=!0,this.N())},we.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ze(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}ze.prototype.h=function(){this.defaultPrevented=!0};var Qn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return u}();function Yn(u,f){if(ze.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,_=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(M){e:{try{k(f.nodeName);var x=!0;break e}catch{}x=!1}x||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Jn[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Yn.aa.h.call(this)}}y(Yn,ze);var Jn={2:"touch",3:"pen",4:"mouse"};Yn.prototype.h=function(){Yn.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Xn="closure_listenable_"+(1e6*Math.random()|0),rm=0;function im(u,f,m,_,x){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!_,this.ha=x,this.key=++rm,this.da=this.fa=!1}function Do(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Oo(u){this.src=u,this.g={},this.h=0}Oo.prototype.add=function(u,f,m,_,x){var L=u.toString();u=this.g[L],u||(u=this.g[L]=[],this.h++);var W=Pl(u,f,_,x);return-1<W?(f=u[W],m||(f.fa=!1)):(f=new im(f,this.src,L,!!_,x),f.fa=m,u.push(f)),f};function Cl(u,f){var m=f.type;if(m in u.g){var _=u.g[m],x=Array.prototype.indexOf.call(_,f,void 0),L;(L=0<=x)&&Array.prototype.splice.call(_,x,1),L&&(Do(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function Pl(u,f,m,_){for(var x=0;x<u.length;++x){var L=u[x];if(!L.da&&L.listener==f&&L.capture==!!m&&L.ha==_)return x}return-1}var kl="closure_lm_"+(1e6*Math.random()|0),bl={};function _h(u,f,m,_,x){if(Array.isArray(f)){for(var L=0;L<f.length;L++)_h(u,f[L],m,_,x);return null}return m=LE(m),u&&u[Xn]?u.K(f,m,c(_)?!!_.capture:!!_,x):OE(u,f,m,!1,_,x)}function OE(u,f,m,_,x,L){if(!f)throw Error("Invalid event type");var W=c(x)?!!x.capture:!!x,Ae=pi(u);if(Ae||(u[kl]=Ae=new Oo(u)),m=Ae.add(f,m,_,W,L),m.proxy)return m;if(_=te(),m.proxy=_,_.src=u,_.listener=m,u.addEventListener)Qn||(x=W),x===void 0&&(x=!1),u.addEventListener(f.toString(),_,x);else if(u.attachEvent)u.attachEvent(On(f.toString()),_);else if(u.addListener&&u.removeListener)u.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return m}function te(){function u(m){return f.call(u.src,u.listener,m)}const f=ys;return u}function he(u,f,m,_,x){if(Array.isArray(f))for(var L=0;L<f.length;L++)he(u,f[L],m,_,x);else _=c(_)?!!_.capture:!!_,m=LE(m),u&&u[Xn]?(u=u.i,f=String(f).toString(),f in u.g&&(L=u.g[f],m=Pl(L,m,_,x),-1<m&&(Do(L[m]),Array.prototype.splice.call(L,m,1),L.length==0&&(delete u.g[f],u.h--)))):u&&(u=pi(u))&&(f=u.g[f.toString()],u=-1,f&&(u=Pl(f,m,_,x)),(m=-1<u?f[u]:null)&&Ot(m))}function Ot(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[Xn])Cl(f.i,u);else{var m=u.type,_=u.proxy;f.removeEventListener?f.removeEventListener(m,_,u.capture):f.detachEvent?f.detachEvent(On(m),_):f.addListener&&f.removeListener&&f.removeListener(_),(m=pi(f))?(Cl(m,u),m.h==0&&(m.src=null,f[kl]=null)):Do(u)}}}function On(u){return u in bl?bl[u]:bl[u]="on"+u}function ys(u,f){if(u.da)u=!0;else{f=new Yn(f,this);var m=u.listener,_=u.ha||u.src;u.fa&&Ot(u),u=m.call(_,f)}return u}function pi(u){return u=u[kl],u instanceof Oo?u:null}var Lo="__closure_events_fn_"+(1e9*Math.random()>>>0);function LE(u){return typeof u=="function"?u:(u[Lo]||(u[Lo]=function(f){return u.handleEvent(f)}),u[Lo])}function Lt(){we.call(this),this.i=new Oo(this),this.M=this,this.F=null}y(Lt,we),Lt.prototype[Xn]=!0,Lt.prototype.removeEventListener=function(u,f,m,_){he(this,u,f,m,_)};function Kt(u,f){var m,_=u.F;if(_)for(m=[];_;_=_.F)m.push(_);if(u=u.M,_=f.type||f,typeof f=="string")f=new ze(f,u);else if(f instanceof ze)f.target=f.target||u;else{var x=f;f=new ze(_,u),P(f,x)}if(x=!0,m)for(var L=m.length-1;0<=L;L--){var W=f.g=m[L];x=yh(W,_,!0,f)&&x}if(W=f.g=u,x=yh(W,_,!0,f)&&x,x=yh(W,_,!1,f)&&x,m)for(L=0;L<m.length;L++)W=f.g=m[L],x=yh(W,_,!1,f)&&x}Lt.prototype.N=function(){if(Lt.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],_=0;_<m.length;_++)Do(m[_]);delete u.g[f],u.h--}}this.F=null},Lt.prototype.K=function(u,f,m,_){return this.i.add(String(u),f,!1,m,_)},Lt.prototype.L=function(u,f,m,_){return this.i.add(String(u),f,!0,m,_)};function yh(u,f,m,_){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var x=!0,L=0;L<f.length;++L){var W=f[L];if(W&&!W.da&&W.capture==m){var Ae=W.listener,Ct=W.ha||W.src;W.fa&&Cl(u.i,W),x=Ae.call(Ct,_)!==!1&&x}}return x&&!_.defaultPrevented}function VE(u,f,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function ME(u){u.g=VE(()=>{u.g=null,u.i&&(u.i=!1,ME(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class gD extends we{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:ME(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nl(u){we.call(this),this.h=u,this.g={}}y(Nl,we);var FE=[];function UE(u){F(u.g,function(f,m){this.g.hasOwnProperty(m)&&Ot(f)},u),u.g={}}Nl.prototype.N=function(){Nl.aa.N.call(this),UE(this)},Nl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sm=a.JSON.stringify,_D=a.JSON.parse,yD=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function om(){}om.prototype.h=null;function BE(u){return u.h||(u.h=u.i())}function jE(){}var xl={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function am(){ze.call(this,"d")}y(am,ze);function lm(){ze.call(this,"c")}y(lm,ze);var vs={},zE=null;function vh(){return zE=zE||new Lt}vs.La="serverreachability";function qE(u){ze.call(this,vs.La,u)}y(qE,ze);function Dl(u){const f=vh();Kt(f,new qE(f))}vs.STAT_EVENT="statevent";function $E(u,f){ze.call(this,vs.STAT_EVENT,u),this.stat=f}y($E,ze);function Qt(u){const f=vh();Kt(f,new $E(f,u))}vs.Ma="timingevent";function WE(u,f){ze.call(this,vs.Ma,u),this.size=f}y(WE,ze);function Ol(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function Ll(){this.g=!0}Ll.prototype.xa=function(){this.g=!1};function vD(u,f,m,_,x,L){u.info(function(){if(u.g)if(L)for(var W="",Ae=L.split("&"),Ct=0;Ct<Ae.length;Ct++){var ye=Ae[Ct].split("=");if(1<ye.length){var Vt=ye[0];ye=ye[1];var Mt=Vt.split("_");W=2<=Mt.length&&Mt[1]=="type"?W+(Vt+"="+ye+"&"):W+(Vt+"=redacted&")}}else W=null;else W=L;return"XMLHTTP REQ ("+_+") [attempt "+x+"]: "+f+`
`+m+`
`+W})}function wD(u,f,m,_,x,L,W){u.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+x+"]: "+f+`
`+m+`
`+L+" "+W})}function Vo(u,f,m,_){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+ID(u,m)+(_?" "+_:"")})}function ED(u,f){u.info(function(){return"TIMEOUT: "+f})}Ll.prototype.info=function(){};function ID(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var _=m[u];if(!(2>_.length)){var x=_[1];if(Array.isArray(x)&&!(1>x.length)){var L=x[0];if(L!="noop"&&L!="stop"&&L!="close")for(var W=1;W<x.length;W++)x[W]=""}}}}return sm(m)}catch{return f}}var wh={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},GE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},um;function Eh(){}y(Eh,om),Eh.prototype.g=function(){return new XMLHttpRequest},Eh.prototype.i=function(){return{}},um=new Eh;function mi(u,f,m,_){this.j=u,this.i=f,this.l=m,this.R=_||1,this.U=new Nl(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new HE}function HE(){this.i=null,this.g="",this.h=!1}var KE={},cm={};function hm(u,f,m){u.L=1,u.v=Rh(Ur(f)),u.m=m,u.P=!0,QE(u,null)}function QE(u,f){u.F=Date.now(),Ih(u),u.A=Ur(u.v);var m=u.A,_=u.R;Array.isArray(_)||(_=[String(_)]),uI(m.i,"t",_),u.C=0,m=u.j.J,u.h=new HE,u.g=CI(u.j,m?f:null,!u.m),0<u.O&&(u.M=new gD(p(u.Y,u,u.g),u.O)),f=u.U,m=u.g,_=u.ca;var x="readystatechange";Array.isArray(x)||(x&&(FE[0]=x.toString()),x=FE);for(var L=0;L<x.length;L++){var W=_h(m,x[L],_||f.handleEvent,!1,f.h||f);if(!W)break;f.g[W.key]=W}f=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),Dl(),vD(u.i,u.u,u.A,u.l,u.R,u.m)}mi.prototype.ca=function(u){u=u.target;const f=this.M;f&&Br(u)==3?f.j():this.Y(u)},mi.prototype.Y=function(u){try{if(u==this.g)e:{const Mt=Br(this.g);var f=this.g.Ba();const Uo=this.g.Z();if(!(3>Mt)&&(Mt!=3||this.g&&(this.h.h||this.g.oa()||gI(this.g)))){this.J||Mt!=4||f==7||(f==8||0>=Uo?Dl(3):Dl(2)),dm(this);var m=this.g.Z();this.X=m;t:if(YE(this)){var _=gI(this.g);u="";var x=_.length,L=Br(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ws(this),Vl(this);var W="";break t}this.h.i=new a.TextDecoder}for(f=0;f<x;f++)this.h.h=!0,u+=this.h.i.decode(_[f],{stream:!(L&&f==x-1)});_.length=0,this.h.g+=u,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=m==200,wD(this.i,this.u,this.A,this.l,this.R,Mt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ae,Ct=this.g;if((Ae=Ct.g?Ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Ae)){var ye=Ae;break t}}ye=null}if(m=ye)Vo(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fm(this,m);else{this.o=!1,this.s=3,Qt(12),ws(this),Vl(this);break e}}if(this.P){m=!0;let Zn;for(;!this.J&&this.C<W.length;)if(Zn=TD(this,W),Zn==cm){Mt==4&&(this.s=4,Qt(14),m=!1),Vo(this.i,this.l,null,"[Incomplete Response]");break}else if(Zn==KE){this.s=4,Qt(15),Vo(this.i,this.l,W,"[Invalid Chunk]"),m=!1;break}else Vo(this.i,this.l,Zn,null),fm(this,Zn);if(YE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mt!=4||W.length!=0||this.h.h||(this.s=1,Qt(16),m=!1),this.o=this.o&&m,!m)Vo(this.i,this.l,W,"[Invalid Chunked Response]"),ws(this),Vl(this);else if(0<W.length&&!this.W){this.W=!0;var Vt=this.j;Vt.g==this&&Vt.ba&&!Vt.M&&(Vt.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),vm(Vt),Vt.M=!0,Qt(11))}}else Vo(this.i,this.l,W,null),fm(this,W);Mt==4&&ws(this),this.o&&!this.J&&(Mt==4?TI(this.j,this):(this.o=!1,Ih(this)))}else BD(this.g),m==400&&0<W.indexOf("Unknown SID")?(this.s=3,Qt(12)):(this.s=0,Qt(13)),ws(this),Vl(this)}}}catch{}finally{}};function YE(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function TD(u,f){var m=u.C,_=f.indexOf(`
`,m);return _==-1?cm:(m=Number(f.substring(m,_)),isNaN(m)?KE:(_+=1,_+m>f.length?cm:(f=f.slice(_,_+m),u.C=_+m,f)))}mi.prototype.cancel=function(){this.J=!0,ws(this)};function Ih(u){u.S=Date.now()+u.I,JE(u,u.I)}function JE(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ol(p(u.ba,u),f)}function dm(u){u.B&&(a.clearTimeout(u.B),u.B=null)}mi.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ED(this.i,this.A),this.L!=2&&(Dl(),Qt(17)),ws(this),this.s=2,Vl(this)):JE(this,this.S-u)};function Vl(u){u.j.G==0||u.J||TI(u.j,u)}function ws(u){dm(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,UE(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function fm(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||pm(m.h,u))){if(!u.K&&pm(m.h,u)&&m.G==3){try{var _=m.Da.g.parse(f)}catch{_=null}if(Array.isArray(_)&&_.length==3){var x=_;if(x[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)bh(m),Ph(m);else break e;ym(m),Qt(18)}}else m.za=x[1],0<m.za-m.T&&37500>x[2]&&m.F&&m.v==0&&!m.C&&(m.C=Ol(p(m.Za,m),6e3));if(1>=eI(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Is(m,11)}else if((u.K||m.g==u)&&bh(m),!w(f))for(x=m.Da.g.parse(f),f=0;f<x.length;f++){let ye=x[f];if(m.T=ye[0],ye=ye[1],m.G==2)if(ye[0]=="c"){m.K=ye[1],m.ia=ye[2];const Vt=ye[3];Vt!=null&&(m.la=Vt,m.j.info("VER="+m.la));const Mt=ye[4];Mt!=null&&(m.Aa=Mt,m.j.info("SVER="+m.Aa));const Uo=ye[5];Uo!=null&&typeof Uo=="number"&&0<Uo&&(_=1.5*Uo,m.L=_,m.j.info("backChannelRequestTimeoutMs_="+_)),_=m;const Zn=u.g;if(Zn){const xh=Zn.g?Zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xh){var L=_.h;L.g||xh.indexOf("spdy")==-1&&xh.indexOf("quic")==-1&&xh.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(mm(L,L.h),L.h=null))}if(_.D){const wm=Zn.g?Zn.g.getResponseHeader("X-HTTP-Session-Id"):null;wm&&(_.ya=wm,ke(_.I,_.D,wm))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),_=m;var W=u;if(_.qa=AI(_,_.J?_.ia:null,_.W),W.K){tI(_.h,W);var Ae=W,Ct=_.L;Ct&&(Ae.I=Ct),Ae.B&&(dm(Ae),Ih(Ae)),_.g=W}else EI(_);0<m.i.length&&kh(m)}else ye[0]!="stop"&&ye[0]!="close"||Is(m,7);else m.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?Is(m,7):_m(m):ye[0]!="noop"&&m.l&&m.l.ta(ye),m.v=0)}}Dl(4)}catch{}}var SD=class{constructor(u,f){this.g=u,this.map=f}};function XE(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ZE(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function eI(u){return u.h?1:u.g?u.g.size:0}function pm(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function mm(u,f){u.g?u.g.add(f):u.h=f}function tI(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}XE.prototype.cancel=function(){if(this.i=nI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function nI(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const m of u.g.values())f=f.concat(m.D);return f}return S(u.i)}function RD(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],m=u.length,_=0;_<m;_++)f.push(u[_]);return f}f=[],m=0;for(_ in u)f[m++]=u[_];return f}function AD(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(const _ in u)f[m++]=_;return f}}}function rI(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=AD(u),_=RD(u),x=_.length,L=0;L<x;L++)f.call(void 0,_[L],m&&m[L],u)}var iI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function CD(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var _=u[m].indexOf("="),x=null;if(0<=_){var L=u[m].substring(0,_);x=u[m].substring(_+1)}else L=u[m];f(L,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function Es(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Es){this.h=u.h,Th(this,u.j),this.o=u.o,this.g=u.g,Sh(this,u.s),this.l=u.l;var f=u.i,m=new Ul;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),sI(this,m),this.m=u.m}else u&&(f=String(u).match(iI))?(this.h=!1,Th(this,f[1]||"",!0),this.o=Ml(f[2]||""),this.g=Ml(f[3]||"",!0),Sh(this,f[4]),this.l=Ml(f[5]||"",!0),sI(this,f[6]||"",!0),this.m=Ml(f[7]||"")):(this.h=!1,this.i=new Ul(null,this.h))}Es.prototype.toString=function(){var u=[],f=this.j;f&&u.push(Fl(f,oI,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Fl(f,oI,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(Fl(m,m.charAt(0)=="/"?bD:kD,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",Fl(m,xD)),u.join("")};function Ur(u){return new Es(u)}function Th(u,f,m){u.j=m?Ml(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Sh(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function sI(u,f,m){f instanceof Ul?(u.i=f,DD(u.i,u.h)):(m||(f=Fl(f,ND)),u.i=new Ul(f,u.h))}function ke(u,f,m){u.i.set(f,m)}function Rh(u){return ke(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ml(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Fl(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,PD),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function PD(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var oI=/[#\/\?@]/g,kD=/[#\?:]/g,bD=/[#\?]/g,ND=/[#\?@]/g,xD=/#/g;function Ul(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function gi(u){u.g||(u.g=new Map,u.h=0,u.i&&CD(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}n=Ul.prototype,n.add=function(u,f){gi(this),this.i=null,u=Mo(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function aI(u,f){gi(u),f=Mo(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function lI(u,f){return gi(u),f=Mo(u,f),u.g.has(f)}n.forEach=function(u,f){gi(this),this.g.forEach(function(m,_){m.forEach(function(x){u.call(f,x,_,this)},this)},this)},n.na=function(){gi(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let _=0;_<f.length;_++){const x=u[_];for(let L=0;L<x.length;L++)m.push(f[_])}return m},n.V=function(u){gi(this);let f=[];if(typeof u=="string")lI(this,u)&&(f=f.concat(this.g.get(Mo(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},n.set=function(u,f){return gi(this),this.i=null,u=Mo(this,u),lI(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function uI(u,f,m){aI(u,f),0<m.length&&(u.i=null,u.g.set(Mo(u,f),S(m)),u.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var _=f[m];const L=encodeURIComponent(String(_)),W=this.V(_);for(_=0;_<W.length;_++){var x=L;W[_]!==""&&(x+="="+encodeURIComponent(String(W[_]))),u.push(x)}}return this.i=u.join("&")};function Mo(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function DD(u,f){f&&!u.j&&(gi(u),u.i=null,u.g.forEach(function(m,_){var x=_.toLowerCase();_!=x&&(aI(this,_),uI(this,x,m))},u)),u.j=f}function OD(u,f){const m=new Ll;if(a.Image){const _=new Image;_.onload=g(_i,m,"TestLoadImage: loaded",!0,f,_),_.onerror=g(_i,m,"TestLoadImage: error",!1,f,_),_.onabort=g(_i,m,"TestLoadImage: abort",!1,f,_),_.ontimeout=g(_i,m,"TestLoadImage: timeout",!1,f,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=u}else f(!1)}function LD(u,f){const m=new Ll,_=new AbortController,x=setTimeout(()=>{_.abort(),_i(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:_.signal}).then(L=>{clearTimeout(x),L.ok?_i(m,"TestPingServer: ok",!0,f):_i(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(x),_i(m,"TestPingServer: error",!1,f)})}function _i(u,f,m,_,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),_(m)}catch{}}function VD(){this.g=new yD}function MD(u,f,m){const _=m||"";try{rI(u,function(x,L){let W=x;c(x)&&(W=sm(x)),f.push(_+L+"="+encodeURIComponent(W))})}catch(x){throw f.push(_+"type="+encodeURIComponent("_badmap")),x}}function Bl(u){this.l=u.Ub||null,this.j=u.eb||!1}y(Bl,om),Bl.prototype.g=function(){return new Ah(this.l,this.j)},Bl.prototype.i=function(u){return function(){return u}}({});function Ah(u,f){Lt.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Ah,Lt),n=Ah.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,zl(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jl(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,zl(this)),this.g&&(this.readyState=3,zl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;cI(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function cI(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?jl(this):zl(this),this.readyState==3&&cI(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,jl(this))},n.Qa=function(u){this.g&&(this.response=u,jl(this))},n.ga=function(){this.g&&jl(this)};function jl(u){u.readyState=4,u.l=null,u.j=null,u.v=null,zl(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function zl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ah.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function hI(u){let f="";return F(u,function(m,_){f+=_,f+=":",f+=m,f+=`\r
`}),f}function gm(u,f,m){e:{for(_ in m){var _=!1;break e}_=!0}_||(m=hI(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):ke(u,f,m))}function Qe(u){Lt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Qe,Lt);var FD=/^https?$/i,UD=["POST","PUT"];n=Qe.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,m,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():um.g(),this.v=this.o?BE(this.o):BE(um),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(L){dI(this,L);return}if(u=m||"",m=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var x in _)m.set(x,_[x]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const L of _.keys())m.set(L,_.get(L));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(m.keys()).find(L=>L.toLowerCase()=="content-type"),x=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(UD,f,void 0))||_||x||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,W]of m)this.g.setRequestHeader(L,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{mI(this),this.u=!0,this.g.send(u),this.u=!1}catch(L){dI(this,L)}};function dI(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,fI(u),Ch(u)}function fI(u){u.A||(u.A=!0,Kt(u,"complete"),Kt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Kt(this,"complete"),Kt(this,"abort"),Ch(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ch(this,!0)),Qe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?pI(this):this.bb())},n.bb=function(){pI(this)};function pI(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Br(u)!=4||u.Z()!=2)){if(u.u&&Br(u)==4)VE(u.Ea,0,u);else if(Kt(u,"readystatechange"),Br(u)==4){u.h=!1;try{const W=u.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var _;if(_=W===0){var x=String(u.D).match(iI)[1]||null;!x&&a.self&&a.self.location&&(x=a.self.location.protocol.slice(0,-1)),_=!FD.test(x?x.toLowerCase():"")}m=_}if(m)Kt(u,"complete"),Kt(u,"success");else{u.m=6;try{var L=2<Br(u)?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.Z()+"]",fI(u)}}finally{Ch(u)}}}}function Ch(u,f){if(u.g){mI(u);const m=u.g,_=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||Kt(u,"ready");try{m.onreadystatechange=_}catch{}}}function mI(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Br(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Br(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),_D(f)}};function gI(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function BD(u){const f={};u=(u.g&&2<=Br(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<u.length;_++){if(w(u[_]))continue;var m=b(u[_]);const x=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const L=f[x]||[];f[x]=L,L.push(m)}T(f,function(_){return _.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ql(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function _I(u){this.Aa=0,this.i=[],this.j=new Ll,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ql("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ql("baseRetryDelayMs",5e3,u),this.cb=ql("retryDelaySeedMs",1e4,u),this.Wa=ql("forwardChannelMaxRetries",2,u),this.wa=ql("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new XE(u&&u.concurrentRequestLimit),this.Da=new VD,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=_I.prototype,n.la=8,n.G=1,n.connect=function(u,f,m,_){Qt(0),this.W=u,this.H=f||{},m&&_!==void 0&&(this.H.OSID=m,this.H.OAID=_),this.F=this.X,this.I=AI(this,null,this.W),kh(this)};function _m(u){if(yI(u),u.G==3){var f=u.U++,m=Ur(u.I);if(ke(m,"SID",u.K),ke(m,"RID",f),ke(m,"TYPE","terminate"),$l(u,m),f=new mi(u,u.j,f),f.L=2,f.v=Rh(Ur(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=CI(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Ih(f)}RI(u)}function Ph(u){u.g&&(vm(u),u.g.cancel(),u.g=null)}function yI(u){Ph(u),u.u&&(a.clearTimeout(u.u),u.u=null),bh(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function kh(u){if(!ZE(u.h)&&!u.s){u.s=!0;var f=u.Ga;Kn||re(),Q||(Kn(),Q=!0),ne.add(f,u),u.B=0}}function jD(u,f){return eI(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ol(p(u.Ga,u,f),SI(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const x=new mi(this,this.j,u);let L=this.o;if(this.S&&(L?(L=v(L),P(L,this.S)):L=this.S),this.m!==null||this.O||(x.H=L,L=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var _=this.i[m];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(f+=_,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=wI(this,x,f),m=Ur(this.I),ke(m,"RID",u),ke(m,"CVER",22),this.D&&ke(m,"X-HTTP-Session-Id",this.D),$l(this,m),L&&(this.O?f="headers="+encodeURIComponent(String(hI(L)))+"&"+f:this.m&&gm(m,this.m,L)),mm(this.h,x),this.Ua&&ke(m,"TYPE","init"),this.P?(ke(m,"$req",f),ke(m,"SID","null"),x.T=!0,hm(x,m,null)):hm(x,m,f),this.G=2}}else this.G==3&&(u?vI(this,u):this.i.length==0||ZE(this.h)||vI(this))};function vI(u,f){var m;f?m=f.l:m=u.U++;const _=Ur(u.I);ke(_,"SID",u.K),ke(_,"RID",m),ke(_,"AID",u.T),$l(u,_),u.m&&u.o&&gm(_,u.m,u.o),m=new mi(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=wI(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),mm(u.h,m),hm(m,_,f)}function $l(u,f){u.H&&F(u.H,function(m,_){ke(f,_,m)}),u.l&&rI({},function(m,_){ke(f,_,m)})}function wI(u,f,m){m=Math.min(u.i.length,m);var _=u.l?p(u.l.Na,u.l,u):null;e:{var x=u.i;let L=-1;for(;;){const W=["count="+m];L==-1?0<m?(L=x[0].g,W.push("ofs="+L)):L=0:W.push("ofs="+L);let Ae=!0;for(let Ct=0;Ct<m;Ct++){let ye=x[Ct].g;const Vt=x[Ct].map;if(ye-=L,0>ye)L=Math.max(0,x[Ct].g-100),Ae=!1;else try{MD(Vt,W,"req"+ye+"_")}catch{_&&_(Vt)}}if(Ae){_=W.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,_}function EI(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;Kn||re(),Q||(Kn(),Q=!0),ne.add(f,u),u.v=0}}function ym(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ol(p(u.Fa,u),SI(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,II(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ol(p(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Qt(10),Ph(this),II(this))};function vm(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function II(u){u.g=new mi(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=Ur(u.qa);ke(f,"RID","rpc"),ke(f,"SID",u.K),ke(f,"AID",u.T),ke(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&ke(f,"TO",u.ja),ke(f,"TYPE","xmlhttp"),$l(u,f),u.m&&u.o&&gm(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Rh(Ur(f)),m.m=null,m.P=!0,QE(m,u)}n.Za=function(){this.C!=null&&(this.C=null,Ph(this),ym(this),Qt(19))};function bh(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function TI(u,f){var m=null;if(u.g==f){bh(u),vm(u),u.g=null;var _=2}else if(pm(u.h,f))m=f.D,tI(u.h,f),_=1;else return;if(u.G!=0){if(f.o)if(_==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var x=u.B;_=vh(),Kt(_,new WE(_,m)),kh(u)}else EI(u);else if(x=f.s,x==3||x==0&&0<f.X||!(_==1&&jD(u,f)||_==2&&ym(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),x){case 1:Is(u,5);break;case 4:Is(u,10);break;case 3:Is(u,6);break;default:Is(u,2)}}}function SI(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function Is(u,f){if(u.j.info("Error code "+f),f==2){var m=p(u.fb,u),_=u.Xa;const x=!_;_=new Es(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Th(_,"https"),Rh(_),x?OD(_.toString(),m):LD(_.toString(),m)}else Qt(2);u.G=0,u.l&&u.l.sa(f),RI(u),yI(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Qt(2)):(this.j.info("Failed to ping google.com"),Qt(1))};function RI(u){if(u.G=0,u.ka=[],u.l){const f=nI(u.h);(f.length!=0||u.i.length!=0)&&(C(u.ka,f),C(u.ka,u.i),u.h.i.length=0,S(u.i),u.i.length=0),u.l.ra()}}function AI(u,f,m){var _=m instanceof Es?Ur(m):new Es(m);if(_.g!="")f&&(_.g=f+"."+_.g),Sh(_,_.s);else{var x=a.location;_=x.protocol,f=f?f+"."+x.hostname:x.hostname,x=+x.port;var L=new Es(null);_&&Th(L,_),f&&(L.g=f),x&&Sh(L,x),m&&(L.l=m),_=L}return m=u.D,f=u.ya,m&&f&&ke(_,m,f),ke(_,"VER",u.la),$l(u,_),_}function CI(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Qe(new Bl({eb:m})):new Qe(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function PI(){}n=PI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Nh(){}Nh.prototype.g=function(u,f){return new In(u,f)};function In(u,f){Lt.call(this),this.g=new _I(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!w(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!w(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new Fo(this)}y(In,Lt),In.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){_m(this.g)},In.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=sm(u),u=m);f.i.push(new SD(f.Ya++,u)),f.G==3&&kh(f)},In.prototype.N=function(){this.g.l=null,delete this.j,_m(this.g),delete this.g,In.aa.N.call(this)};function kI(u){am.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}y(kI,am);function bI(){lm.call(this),this.status=1}y(bI,lm);function Fo(u){this.g=u}y(Fo,PI),Fo.prototype.ua=function(){Kt(this.g,"a")},Fo.prototype.ta=function(u){Kt(this.g,new kI(u))},Fo.prototype.sa=function(u){Kt(this.g,new bI)},Fo.prototype.ra=function(){Kt(this.g,"b")},Nh.prototype.createWebChannel=Nh.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,Bk=function(){return new Nh},Uk=function(){return vh()},Fk=vs,D_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wh.NO_ERROR=0,wh.TIMEOUT=8,wh.HTTP_ERROR=6,Ad=wh,GE.COMPLETE="complete",Mk=GE,jE.EventType=xl,xl.OPEN="a",xl.CLOSE="b",xl.ERROR="c",xl.MESSAGE="d",Lt.prototype.listen=Lt.prototype.K,wu=jE,Vk=Bl,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,Lk=Qe}).apply(typeof Jh<"u"?Jh:typeof self<"u"?self:typeof window<"u"?window:{});const R0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fl="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi=new zc("@firebase/firestore");function Ko(){return Zi.logLevel}function uj(n){Zi.setLogLevel(n)}function z(n,...e){if(Zi.logLevel<=ae.DEBUG){const t=e.map(ew);Zi.debug(`Firestore (${fl}): ${n}`,...t)}}function it(n,...e){if(Zi.logLevel<=ae.ERROR){const t=e.map(ew);Zi.error(`Firestore (${fl}): ${n}`,...t)}}function pr(n,...e){if(Zi.logLevel<=ae.WARN){const t=e.map(ew);Zi.warn(`Firestore (${fl}): ${n}`,...t)}}function ew(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(n="Unexpected state"){const e=`FIRESTORE (${fl}) INTERNAL ASSERTION FAILED: `+n;throw it(e),new Error(e)}function Z(n,e){n||Y()}function cj(n,e){n||Y()}function H(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class j extends Gt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yt.UNAUTHENTICATED))}shutdown(){}}class dj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class fj{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new Tt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Tt,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Tt)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Z(typeof r.accessToken=="string"),new jk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Z(e===null||typeof e=="string"),new yt(e)}}class pj{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class mj{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new pj(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _j{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{s.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Z(typeof t.token=="string"),this.R=t.token,new gj(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yj(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=yj(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function ie(n,e){return n<e?-1:n>e?1:0}function qa(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function qk(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new j(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new j(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new j(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Be.fromMillis(Date.now())}static fromDate(e){return Be.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Be(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ee(e)}static min(){return new ee(new Be(0,0))}static max(){return new ee(new Be(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,t,r){t===void 0?t=0:t>e.length&&Y(),r===void 0?r=e.length-t:r>e.length-t&&Y(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ec.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ec?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ue extends Ec{construct(e,t,r){return new ue(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new j(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new ue(t)}static emptyPath(){return new ue([])}}const vj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fe extends Ec{construct(e,t,r){return new Fe(e,t,r)}static isValidIdentifier(e){return vj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Fe(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new j(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new j(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new j(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new j(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fe(t)}static emptyPath(){return new Fe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(ue.fromString(e))}static fromName(e){return new G(ue.fromString(e).popFirst(5))}static empty(){return new G(ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ue.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new ue(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function O_(n){return n.fields.find(e=>e.kind===2)}function Cs(n){return n.fields.filter(e=>e.kind!==2)}vf.UNKNOWN_ID=-1;class Cd{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ic{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ic(0,Nn.min())}}function $k(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new Be(t+1,0):new Be(t,r));return new Nn(i,G.empty(),e)}function Wk(n){return new Nn(n.readTime,n.key,-1)}class Nn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Nn(ee.min(),G.empty(),-1)}static max(){return new Nn(ee.max(),G.empty(),-1)}}function tw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=G.comparator(n.documentKey,e.documentKey),t!==0?t:ie(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Hk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ds(n){if(n.code!==O.FAILED_PRECONDITION||n.message!==Gk)throw n;z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new D((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof D?t:D.resolve(t)}catch(t){return D.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):D.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):D.reject(t)}static resolve(e){return new D((t,r)=>{t(e)})}static reject(e){return new D((t,r)=>{r(e)})}static waitFor(e){return new D((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=D.resolve(!1);for(const r of e)t=t.next(i=>i?D.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new D((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new D((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Tt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Vu(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=nw(r.target.error);this.V.reject(new Vu(e,i))}}static open(e,t,r,i){try{return new Ip(t,e.transaction(i,r))}catch(s){throw new Vu(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(z("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ej(t)}}class br{constructor(e,t,r){this.name=e,this.version=t,this.p=r,br.S(je())===12.2&&it("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return z("SimpleDb","Removing database:",e),ks(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!fc())return!1;if(br.C())return!0;const e=je(),t=br.S(e),r=0<t&&t<10,i=Kk(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(z("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;t(o)},i.onblocked=()=>{r(new Vu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new j(O.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new j(O.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Vu(e,o))},i.onupgradeneeded=s=>{z("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{z("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=Ip.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),D.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(z("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Kk(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class wj{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ks(this.B.delete())}}class Vu extends j{constructor(e,t){super(O.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function fs(n){return n.name==="IndexedDbTransactionError"}class Ej{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(z("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(z("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ks(r)}add(e){return z("SimpleDb","ADD",this.store.name,e,e),ks(this.store.add(e))}get(e){return ks(this.store.get(e)).next(t=>(t===void 0&&(t=null),z("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return z("SimpleDb","DELETE",this.store.name,e),ks(this.store.delete(e))}count(){return z("SimpleDb","COUNT",this.store.name),ks(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new D((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new D((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){z("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new D((r,i)=>{t.onerror=s=>{const o=nw(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new D((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new wj(a),c=t(a.primaryKey,a.value,l);if(c instanceof D){const h=c.catch(d=>(l.done(),D.reject(d)));r.push(h)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>D.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ks(n){return new D((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=nw(r.target.error);t(i)}})}let A0=!1;function nw(n){const e=br.S(je());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new j("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return A0||(A0=!0,setTimeout(()=>{throw r},0)),r}}return n}class Ij{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){z("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{z("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){fs(t)?z("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await ds(t)}await this.X(6e4)})}}class Tj{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){const r=new Set;let i=t,s=!0;return D.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return z("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(z("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=Wk(s);tw(o,r)>0&&(r=o)}),new Nn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}pn.oe=-1;function Yc(n){return n==null}function Tc(n){return n===0&&1/n==-1/0}function Qk(n){return typeof n=="number"&&Number.isInteger(n)&&!Tc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=C0(e)),e=Sj(n.get(t),e);return C0(e)}function Sj(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function C0(n){return n+""}function Rr(n){const e=n.length;if(Z(e>=2),e===2)return Z(n.charAt(0)===""&&n.charAt(1)===""),ue.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("",s);switch((o<0||o>t)&&Y(),n.charAt(o+1)){case"":const a=n.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=n.substring(s,o),i+="\0";break;case"":i+=n.substring(s,o+1);break;default:Y()}s=o+2}return new ue(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pd(n,e){return[n,rn(e)]}function Yk(n,e,t){return[n,rn(e),t]}const Rj={},Aj=["prefixPath","collectionGroup","readTime","documentId"],Cj=["prefixPath","collectionGroup","documentId"],Pj=["collectionGroup","readTime","prefixPath","documentId"],kj=["canonicalId","targetId"],bj=["targetId","path"],Nj=["path","targetId"],xj=["collectionId","parent"],Dj=["indexId","uid"],Oj=["uid","sequenceNumber"],Lj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Vj=["indexId","uid","orderedDocumentKey"],Mj=["userId","collectionPath","documentId"],Fj=["userId","collectionPath","largestBatchId"],Uj=["userId","collectionGroup","largestBatchId"],Jk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Bj=[...Jk,"documentOverlays"],Xk=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Zk=Xk,e1=[...Zk,"indexConfiguration","indexState","indexEntries"],jj=e1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_ extends Hk{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Rt(n,e){const t=H(n);return br.F(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ao(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function t1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let He=class V_{constructor(e,t){this.comparator=e,this.root=t||Wi.EMPTY}insert(e,t){return new V_(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wi.BLACK,null,null))}remove(e){return new V_(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xh(this.root,e,this.comparator,!0)}},Xh=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Wi=class jr{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??jr.RED,this.left=i??jr.EMPTY,this.right=s??jr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new jr(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return jr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return jr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();const e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}};Wi.EMPTY=null,Wi.RED=!0,Wi.BLACK=!1;Wi.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Wi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.comparator=e,this.data=new He(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new b0(this.data.getIterator())}getIteratorFrom(e){return new b0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Re)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Re(this.comparator);return t.data=e,t}}class b0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function zo(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.fields=e,e.sort(Fe.comparator)}static empty(){return new mn([])}unionWith(e){let t=new Re(Fe.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new mn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qa(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zj(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new n1("Invalid base64 string: "+s):s}}(e);return new pt(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new pt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pt.EMPTY_BYTE_STRING=new pt("");const qj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function si(n){if(Z(!!n),typeof n=="string"){let e=0;const t=qj.exec(n);if(Z(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Je(n.seconds),nanos:Je(n.nanos)}}function Je(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function es(n){return typeof n=="string"?pt.fromBase64String(n):pt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function rw(n){const e=n.mapValue.fields.__previous_value__;return Tp(e)?rw(e):e}function Sc(n){const e=si(n.mapValue.fields.__local_write_time__.timestampValue);return new Be(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e,t,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class ts{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ts("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ts&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},kd={nullValue:"NULL_VALUE"};function ro(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Tp(n)?4:r1(n)?9007199254740991:10:Y()}function Lr(n,e){if(n===e)return!0;const t=ro(n);if(t!==ro(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Sc(n).isEqual(Sc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=si(i.timestampValue),a=si(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return es(i.bytesValue).isEqual(es(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Je(i.geoPointValue.latitude)===Je(s.geoPointValue.latitude)&&Je(i.geoPointValue.longitude)===Je(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Je(i.integerValue)===Je(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Je(i.doubleValue),a=Je(s.doubleValue);return o===a?Tc(o)===Tc(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return qa(n.arrayValue.values||[],e.arrayValue.values||[],Lr);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(k0(o)!==k0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Lr(o[l],a[l])))return!1;return!0}(n,e);default:return Y()}}function Rc(n,e){return(n.values||[]).find(t=>Lr(t,e))!==void 0}function ns(n,e){if(n===e)return 0;const t=ro(n),r=ro(e);if(t!==r)return ie(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ie(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Je(s.integerValue||s.doubleValue),l=Je(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return N0(n.timestampValue,e.timestampValue);case 4:return N0(Sc(n),Sc(e));case 5:return ie(n.stringValue,e.stringValue);case 6:return function(s,o){const a=es(s),l=es(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=ie(a[c],l[c]);if(h!==0)return h}return ie(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ie(Je(s.latitude),Je(o.latitude));return a!==0?a:ie(Je(s.longitude),Je(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const h=ns(a[c],l[c]);if(h)return h}return ie(a.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Oi.mapValue&&o===Oi.mapValue)return 0;if(s===Oi.mapValue)return 1;if(o===Oi.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=ie(l[d],h[d]);if(p!==0)return p;const g=ns(a[l[d]],c[h[d]]);if(g!==0)return g}return ie(l.length,h.length)}(n.mapValue,e.mapValue);default:throw Y()}}function N0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ie(n,e);const t=si(n),r=si(e),i=ie(t.seconds,r.seconds);return i!==0?i:ie(t.nanos,r.nanos)}function $a(n){return M_(n)}function M_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=si(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return es(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return G.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=M_(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${M_(t.fields[o])}`;return i+"}"}(n.mapValue):Y()}function io(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function F_(n){return!!n&&"integerValue"in n}function Ac(n){return!!n&&"arrayValue"in n}function x0(n){return!!n&&"nullValue"in n}function D0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function bd(n){return!!n&&"mapValue"in n}function Mu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ao(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Mu(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Mu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function r1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function Wj(n){return"nullValue"in n?kd:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?io(ts.empty(),G.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Y()}function Gj(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?io(ts.empty(),G.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Oi:Y()}function O0(n,e){const t=ns(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function L0(n,e){const t=ns(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.value=e}static empty(){return new Nt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!bd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mu(t)}setAll(e){let t=Fe.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Mu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());bd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Lr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];bd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ao(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Nt(Mu(this.value))}}function i1(n){const e=[];return Ao(n.fields,(t,r)=>{const i=new Fe([t]);if(bd(r)){const s=i1(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new mn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new De(e,0,ee.min(),ee.min(),ee.min(),Nt.empty(),0)}static newFoundDocument(e,t,r,i){return new De(e,1,t,ee.min(),r,i,0)}static newNoDocument(e,t){return new De(e,2,t,ee.min(),ee.min(),Nt.empty(),0)}static newUnknownDocument(e,t){return new De(e,3,t,ee.min(),ee.min(),Nt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof De&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new De(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,t){this.position=e,this.inclusive=t}}function V0(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),t.key):r=ns(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function M0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Lr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,t="asc"){this.field=e,this.dir=t}}function Hj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{}class ce extends s1{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Kj(e,t,r):t==="array-contains"?new Jj(e,r):t==="in"?new h1(e,r):t==="not-in"?new Xj(e,r):t==="array-contains-any"?new Zj(e,r):new ce(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Qj(e,r):new Yj(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ns(t,this.value)):t!==null&&ro(this.value)===ro(t)&&this.matchesComparison(ns(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ee extends s1{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Ee(e,t)}matches(e){return Wa(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Wa(n){return n.op==="and"}function U_(n){return n.op==="or"}function iw(n){return o1(n)&&Wa(n)}function o1(n){for(const e of n.filters)if(e instanceof Ee)return!1;return!0}function B_(n){if(n instanceof ce)return n.field.canonicalString()+n.op.toString()+$a(n.value);if(iw(n))return n.filters.map(e=>B_(e)).join(",");{const e=n.filters.map(t=>B_(t)).join(",");return`${n.op}(${e})`}}function a1(n,e){return n instanceof ce?function(r,i){return i instanceof ce&&r.op===i.op&&r.field.isEqual(i.field)&&Lr(r.value,i.value)}(n,e):n instanceof Ee?function(r,i){return i instanceof Ee&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&a1(o,i.filters[a]),!0):!1}(n,e):void Y()}function l1(n,e){const t=n.filters.concat(e);return Ee.create(t,n.op)}function u1(n){return n instanceof ce?function(t){return`${t.field.canonicalString()} ${t.op} ${$a(t.value)}`}(n):n instanceof Ee?function(t){return t.op.toString()+" {"+t.getFilters().map(u1).join(" ,")+"}"}(n):"Filter"}class Kj extends ce{constructor(e,t,r){super(e,t,r),this.key=G.fromName(r.referenceValue)}matches(e){const t=G.comparator(e.key,this.key);return this.matchesComparison(t)}}class Qj extends ce{constructor(e,t){super(e,"in",t),this.keys=c1("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Yj extends ce{constructor(e,t){super(e,"not-in",t),this.keys=c1("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function c1(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>G.fromName(r.referenceValue))}class Jj extends ce{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ac(t)&&Rc(t.arrayValue,this.value)}}class h1 extends ce{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Rc(this.value.arrayValue,t)}}class Xj extends ce{constructor(e,t){super(e,"not-in",t)}matches(e){if(Rc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Rc(this.value.arrayValue,t)}}class Zj extends ce{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ac(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Rc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ez{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function j_(n,e=null,t=[],r=[],i=null,s=null,o=null){return new ez(n,e,t,r,i,s,o)}function so(n){const e=H(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>B_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Yc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>$a(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>$a(r)).join(",")),e.ue=t}return e.ue}function Jc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Hj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!a1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!M0(n.startAt,e.startAt)&&M0(n.endAt,e.endAt)}function wf(n){return G.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Ef(n,e){return n.filters.filter(t=>t instanceof ce&&t.field.isEqual(e))}function F0(n,e,t){let r=kd,i=!0;for(const s of Ef(n,e)){let o=kd,a=!0;switch(s.op){case"<":case"<=":o=Wj(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=kd}O0({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];O0({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}function U0(n,e,t){let r=Oi,i=!0;for(const s of Ef(n,e)){let o=Oi,a=!0;switch(s.op){case">=":case">":o=Gj(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Oi}L0({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];L0({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function d1(n,e,t,r,i,s,o,a){return new ci(n,e,t,r,i,s,o,a)}function pl(n){return new ci(n)}function B0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function sw(n){return n.collectionGroup!==null}function Sa(n){const e=H(n);if(e.ce===null){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Re(Fe.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Cc(s,r))}),t.has(Fe.keyField().canonicalString())||e.ce.push(new Cc(Fe.keyField(),r))}return e.ce}function sn(n){const e=H(n);return e.le||(e.le=tz(e,Sa(n))),e.le}function tz(n,e){if(n.limitType==="F")return j_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Cc(i.field,s)});const t=n.endAt?new rs(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new rs(n.startAt.position,n.startAt.inclusive):null;return j_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function z_(n,e){const t=n.filters.concat([e]);return new ci(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function If(n,e,t){return new ci(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Xc(n,e){return Jc(sn(n),sn(e))&&n.limitType===e.limitType}function f1(n){return`${so(sn(n))}|lt:${n.limitType}`}function Qo(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>u1(i)).join(", ")}]`),Yc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>$a(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>$a(i)).join(",")),`Target(${r})`}(sn(n))}; limitType=${n.limitType})`}function Zc(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):G.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Sa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=V0(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Sa(r),i)||r.endAt&&!function(o,a,l){const c=V0(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Sa(r),i))}(n,e)}function p1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function m1(n){return(e,t)=>{let r=!1;for(const i of Sa(n)){const s=nz(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function nz(n,e,t){const r=n.field.isKeyField()?G.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?ns(l,c):Y()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ao(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return t1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rz=new He(G.comparator);function gn(){return rz}const g1=new He(G.comparator);function Eu(...n){let e=g1;for(const t of n)e=e.insert(t.key,t);return e}function _1(n){let e=g1;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ar(){return Fu()}function y1(){return Fu()}function Fu(){return new ps(n=>n.toString(),(n,e)=>n.isEqual(e))}const iz=new He(G.comparator),sz=new Re(G.comparator);function oe(...n){let e=sz;for(const t of n)e=e.add(t);return e}const oz=new Re(ie);function ow(){return oz}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tc(e)?"-0":e}}function w1(n){return{integerValue:""+n}}function E1(n,e){return Qk(e)?w1(e):v1(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(){this._=void 0}}function az(n,e,t){return n instanceof Ga?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Tp(s)&&(s=rw(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof oo?T1(n,e):n instanceof ao?S1(n,e):function(i,s){const o=I1(i,s),a=j0(o)+j0(i.Pe);return F_(o)&&F_(i.Pe)?w1(a):v1(i.serializer,a)}(n,e)}function lz(n,e,t){return n instanceof oo?T1(n,e):n instanceof ao?S1(n,e):t}function I1(n,e){return n instanceof Ha?function(r){return F_(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Ga extends Sp{}class oo extends Sp{constructor(e){super(),this.elements=e}}function T1(n,e){const t=R1(e);for(const r of n.elements)t.some(i=>Lr(i,r))||t.push(r);return{arrayValue:{values:t}}}class ao extends Sp{constructor(e){super(),this.elements=e}}function S1(n,e){let t=R1(e);for(const r of n.elements)t=t.filter(i=>!Lr(i,r));return{arrayValue:{values:t}}}class Ha extends Sp{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function j0(n){return Je(n.integerValue||n.doubleValue)}function R1(n){return Ac(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,t){this.field=e,this.transform=t}}function uz(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof oo&&i instanceof oo||r instanceof ao&&i instanceof ao?qa(r.elements,i.elements,Lr):r instanceof Ha&&i instanceof Ha?Lr(r.Pe,i.Pe):r instanceof Ga&&i instanceof Ga}(n.transform,e.transform)}class cz{constructor(e,t){this.version=e,this.transformResults=t}}class Ue{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ue}static exists(e){return new Ue(void 0,e)}static updateTime(e){return new Ue(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Rp{}function A1(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new gl(n.key,Ue.none()):new ml(n.key,n.data,Ue.none());{const t=n.data,r=Nt.empty();let i=new Re(Fe.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new hi(n.key,r,new mn(i.toArray()),Ue.none())}}function hz(n,e,t){n instanceof ml?function(i,s,o){const a=i.value.clone(),l=q0(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof hi?function(i,s,o){if(!Nd(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=q0(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(C1(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Uu(n,e,t,r){return n instanceof ml?function(s,o,a,l){if(!Nd(s.precondition,o))return a;const c=s.value.clone(),h=$0(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof hi?function(s,o,a,l){if(!Nd(s.precondition,o))return a;const c=$0(s.fieldTransforms,l,o),h=o.data;return h.setAll(C1(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(n,e,t,r):function(s,o,a){return Nd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function dz(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=I1(r.transform,i||null);s!=null&&(t===null&&(t=Nt.empty()),t.set(r.field,s))}return t||null}function z0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&qa(r,i,(s,o)=>uz(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ml extends Rp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class hi extends Rp{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function C1(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function q0(n,e,t){const r=new Map;Z(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,lz(o,a,t[i]))}return r}function $0(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,az(s,o,e))}return r}class gl extends Rp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aw extends Rp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&hz(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Uu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Uu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=y1();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=A1(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),oe())}isEqual(e){return this.batchId===e.batchId&&qa(this.mutations,e.mutations,(t,r)=>z0(t,r))&&qa(this.baseMutations,e.baseMutations,(t,r)=>z0(t,r))}}class uw{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Z(e.mutations.length===r.length);let i=function(){return iz}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new uw(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fz{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at,fe;function P1(n){switch(n){default:return Y();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0}}function k1(n){if(n===void 0)return it("GRPC error has no .code"),O.UNKNOWN;switch(n){case at.OK:return O.OK;case at.CANCELLED:return O.CANCELLED;case at.UNKNOWN:return O.UNKNOWN;case at.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case at.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case at.INTERNAL:return O.INTERNAL;case at.UNAVAILABLE:return O.UNAVAILABLE;case at.UNAUTHENTICATED:return O.UNAUTHENTICATED;case at.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case at.NOT_FOUND:return O.NOT_FOUND;case at.ALREADY_EXISTS:return O.ALREADY_EXISTS;case at.PERMISSION_DENIED:return O.PERMISSION_DENIED;case at.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case at.ABORTED:return O.ABORTED;case at.OUT_OF_RANGE:return O.OUT_OF_RANGE;case at.UNIMPLEMENTED:return O.UNIMPLEMENTED;case at.DATA_LOSS:return O.DATA_LOSS;default:return Y()}}(fe=at||(at={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pz=new Ws([4294967295,4294967295],0);function W0(n){const e=b1().encode(n),t=new Ok;return t.update(e),new Uint8Array(t.digest())}function G0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ws([t,r],0),new Ws([i,s],0)]}class hw{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Iu(`Invalid padding: ${t}`);if(r<0)throw new Iu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Iu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Iu(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Ws.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Ws.fromNumber(r)));return i.compare(pz)===1&&(i=new Ws([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=W0(e),[r,i]=G0(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new hw(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const t=W0(e),[r,i]=G0(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Iu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,nh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new th(ee.min(),i,new He(ie),gn(),oe())}}class nh{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new nh(r,t,oe(),oe(),oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class N1{constructor(e,t){this.targetId=e,this.me=t}}class x1{constructor(e,t,r=pt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class H0{constructor(){this.fe=0,this.ge=Q0(),this.pe=pt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=oe(),t=oe(),r=oe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Y()}}),new nh(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=Q0()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Z(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class mz{constructor(e){this.Le=e,this.Be=new Map,this.ke=gn(),this.qe=K0(),this.Qe=new He(ie)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Y()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(wf(s))if(r===0){const o=new G(s.path);this.Ue(t,o,De.newNoDocument(o,ee.min()))}else Z(r===1);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,c)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=es(r).toUint8Array()}catch(l){if(l instanceof n1)return pr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new hw(o,i,s)}catch(l){return pr(l instanceof Iu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&wf(a.target)){const l=new G(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,De.newNoDocument(l,e))}s.be&&(t.set(o,s.Ce()),s.ve())}});let r=oe();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new th(e,t,this.Qe,this.ke,r);return this.ke=gn(),this.qe=K0(),this.Qe=new He(ie),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new H0,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Re(ie),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||z("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new H0),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function K0(){return new He(G.comparator)}function Q0(){return new He(G.comparator)}const gz={asc:"ASCENDING",desc:"DESCENDING"},_z={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yz={and:"AND",or:"OR"};class vz{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function q_(n,e){return n.useProto3Json||Yc(e)?e:{value:e}}function Ka(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function D1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function wz(n,e){return Ka(n,e.toTimestamp())}function st(n){return Z(!!n),ee.fromTimestamp(function(t){const r=si(t);return new Be(r.seconds,r.nanos)}(n))}function dw(n,e){return $_(n,e).canonicalString()}function $_(n,e){const t=function(i){return new ue(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function O1(n){const e=ue.fromString(n);return Z($1(e)),e}function Pc(n,e){return dw(n.databaseId,e.path)}function Nr(n,e){const t=O1(e);if(t.get(1)!==n.databaseId.projectId)throw new j(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new j(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new G(M1(t))}function L1(n,e){return dw(n.databaseId,e)}function V1(n){const e=O1(n);return e.length===4?ue.emptyPath():M1(e)}function W_(n){return new ue(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function M1(n){return Z(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Y0(n,e,t){return{name:Pc(n,e),fields:t.value.mapValue.fields}}function F1(n,e,t){const r=Nr(n,e.name),i=st(e.updateTime),s=e.createTime?st(e.createTime):ee.min(),o=new Nt({mapValue:{fields:e.fields}}),a=De.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Ez(n,e){return"found"in e?function(r,i){Z(!!i.found),i.found.name,i.found.updateTime;const s=Nr(r,i.found.name),o=st(i.found.updateTime),a=i.found.createTime?st(i.found.createTime):ee.min(),l=new Nt({mapValue:{fields:i.found.fields}});return De.newFoundDocument(s,o,a,l)}(n,e):"missing"in e?function(r,i){Z(!!i.missing),Z(!!i.readTime);const s=Nr(r,i.missing),o=st(i.readTime);return De.newNoDocument(s,o)}(n,e):Y()}function Iz(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Z(h===void 0||typeof h=="string"),pt.fromBase64String(h||"")):(Z(h===void 0||h instanceof Buffer||h instanceof Uint8Array),pt.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?O.UNKNOWN:k1(c.code);return new j(h,c.message||"")}(o);t=new x1(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Nr(n,r.document.name),s=st(r.document.updateTime),o=r.document.createTime?st(r.document.createTime):ee.min(),a=new Nt({mapValue:{fields:r.document.fields}}),l=De.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];t=new xd(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Nr(n,r.document),s=r.readTime?st(r.readTime):ee.min(),o=De.newNoDocument(i,s),a=r.removedTargetIds||[];t=new xd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Nr(n,r.document),s=r.removedTargetIds||[];t=new xd([],s,i,null)}else{if(!("filter"in e))return Y();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new fz(i,s),a=r.targetId;t=new N1(a,o)}}return t}function kc(n,e){let t;if(e instanceof ml)t={update:Y0(n,e.key,e.value)};else if(e instanceof gl)t={delete:Pc(n,e.key)};else if(e instanceof hi)t={update:Y0(n,e.key,e.data),updateMask:Pz(e.fieldMask)};else{if(!(e instanceof aw))return Y();t={verify:Pc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Ga)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof oo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ao)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ha)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Y()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:wz(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Y()}(n,e.precondition)),t}function G_(n,e){const t=e.currentDocument?function(s){return s.updateTime!==void 0?Ue.updateTime(st(s.updateTime)):s.exists!==void 0?Ue.exists(s.exists):Ue.none()}(e.currentDocument):Ue.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)Z(a.setToServerValue==="REQUEST_TIME"),l=new Ga;else if("appendMissingElements"in a){const h=a.appendMissingElements.values||[];l=new oo(h)}else if("removeAllFromArray"in a){const h=a.removeAllFromArray.values||[];l=new ao(h)}else"increment"in a?l=new Ha(o,a.increment):Y();const c=Fe.fromServerFormat(a.fieldPath);return new eh(c,l)}(n,i)):[];if(e.update){e.update.name;const i=Nr(n,e.update.name),s=new Nt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new mn(c.map(h=>Fe.fromServerFormat(h)))}(e.updateMask);return new hi(i,s,o,t,r)}return new ml(i,s,t,r)}if(e.delete){const i=Nr(n,e.delete);return new gl(i,t)}if(e.verify){const i=Nr(n,e.verify);return new aw(i,t)}return Y()}function Tz(n,e){return n&&n.length>0?(Z(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?st(i.updateTime):st(s);return o.isEqual(ee.min())&&(o=st(s)),new cz(o,i.transformResults||[])}(t,e))):[]}function U1(n,e){return{documents:[L1(n,e.path)]}}function B1(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=L1(n,i);const s=function(c){if(c.length!==0)return q1(Ee.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:Yo(p.field),direction:Rz(p.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=q_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:t,parent:i}}function j1(n){let e=V1(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Z(r===1);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(d){const p=z1(d);return p instanceof Ee&&iw(p)?p.getFilters():[p]}(t.where));let o=[];t.orderBy&&(o=function(d){return d.map(p=>function(y){return new Cc(Jo(y.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(t.orderBy));let a=null;t.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,Yc(p)?null:p}(t.limit));let l=null;t.startAt&&(l=function(d){const p=!!d.before,g=d.values||[];return new rs(g,p)}(t.startAt));let c=null;return t.endAt&&(c=function(d){const p=!d.before,g=d.values||[];return new rs(g,p)}(t.endAt)),d1(e,i,o,s,a,"F",l,c)}function Sz(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function z1(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Jo(t.unaryFilter.field);return ce.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Jo(t.unaryFilter.field);return ce.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Jo(t.unaryFilter.field);return ce.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Jo(t.unaryFilter.field);return ce.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(n):n.fieldFilter!==void 0?function(t){return ce.create(Jo(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ee.create(t.compositeFilter.filters.map(r=>z1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Y()}}(t.compositeFilter.op))}(n):Y()}function Rz(n){return gz[n]}function Az(n){return _z[n]}function Cz(n){return yz[n]}function Yo(n){return{fieldPath:n.canonicalString()}}function Jo(n){return Fe.fromServerFormat(n.fieldPath)}function q1(n){return n instanceof ce?function(t){if(t.op==="=="){if(D0(t.value))return{unaryFilter:{field:Yo(t.field),op:"IS_NAN"}};if(x0(t.value))return{unaryFilter:{field:Yo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(D0(t.value))return{unaryFilter:{field:Yo(t.field),op:"IS_NOT_NAN"}};if(x0(t.value))return{unaryFilter:{field:Yo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yo(t.field),op:Az(t.op),value:t.value}}}(n):n instanceof Ee?function(t){const r=t.getFilters().map(i=>q1(i));return r.length===1?r[0]:{compositeFilter:{op:Cz(t.op),filters:r}}}(n):Y()}function Pz(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function $1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,t,r,i,s=ee.min(),o=ee.min(),a=pt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e){this.ct=e}}function kz(n,e){let t;if(e.document)t=F1(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=G.fromSegments(e.noDocument.path),i=uo(e.noDocument.readTime);t=De.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Y();{const r=G.fromSegments(e.unknownDocument.path),i=uo(e.unknownDocument.version);t=De.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Be(i[0],i[1]);return ee.fromTimestamp(s)}(e.readTime)),t}function J0(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Tf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Pc(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Ka(s,o.version.toTimestamp()),createTime:Ka(s,o.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:lo(e.version)};else{if(!e.isUnknownDocument())return Y();r.unknownDocument={path:t.path.toArray(),version:lo(e.version)}}return r}function Tf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function lo(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function uo(n){const e=new Be(n.seconds,n.nanoseconds);return ee.fromTimestamp(e)}function bs(n,e){const t=(e.baseMutations||[]).map(s=>G_(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>G_(n.ct,s)),i=Be.fromMillis(e.localWriteTimeMs);return new lw(e.batchId,i,t,r)}function Tu(n){const e=uo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?uo(n.lastLimboFreeSnapshotVersion):ee.min();let r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return Z(s.documents.length===1),sn(pl(V1(s.documents[0])))}(n.query):function(s){return sn(j1(s))}(n.query),new Kr(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,pt.fromBase64String(n.resumeToken))}function G1(n,e){const t=lo(e.snapshotVersion),r=lo(e.lastLimboFreeSnapshotVersion);let i;i=wf(e.target)?U1(n.ct,e.target):B1(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:so(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function fw(n){const e=j1({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?If(e,e.limit,"L"):e}function sg(n,e){return new cw(e.largestBatchId,G_(n.ct,e.overlayMutation))}function X0(n,e){const t=e.path.lastSegment();return[n,rn(e.path.popLast()),t]}function Z0(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:lo(r.readTime),documentKey:rn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bz{getBundleMetadata(e,t){return eS(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:uo(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return eS(e).put(function(i){return{bundleId:i.id,createTime:lo(st(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return tS(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:fw(s.bundledQuery),readTime:uo(s.readTime)}}(r)})}saveNamedQuery(e,t){return tS(e).put(function(i){return{name:i.name,readTime:lo(st(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function eS(n){return Rt(n,"bundles")}function tS(n){return Rt(n,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const r=t.uid||"";return new Ap(e,r)}getOverlay(e,t){return nu(e).get(X0(this.userId,t)).next(r=>r?sg(this.serializer,r):null)}getOverlays(e,t){const r=Ar();return D.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new cw(t,o);i.push(this.ht(e,a))}),D.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(rn(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(nu(e).j("collectionPathOverlayIndex",a))}),D.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Ar(),s=rn(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return nu(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=sg(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Ar();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return nu(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,h)=>{const d=sg(this.serializer,c);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):h.done()}).next(()=>s)}ht(e,t){return nu(e).put(function(i,s,o){const[a,l,c]=X0(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:kc(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function nu(n){return Rt(n,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Je(e.integerValue));else if("doubleValue"in e){const r=Je(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),Tc(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),typeof r=="string"&&(r=si(r)),t.At(`${r.seconds||""}`),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(es(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?r1(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Y()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const i of r)this.It(i,t)}gt(e,t){this.Et(t,37),G.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}Ns.bt=new Ns;function Nz(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function nS(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=Nz(255&r[s]);if(i+=o,o!==8)break}return i}(n);return Math.ceil(e/8)}class xz{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=t.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=t.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const t=this.Bt(e),r=nS(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}qt(e){const t=this.Bt(e),r=nS(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ct(e){const t=255&e;t===0?(this.Kt(0),this.Kt(255)):t===255?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Dz{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class Oz{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class ru{constructor(){this.Gt=new xz,this.zt=new Dz(this.Gt),this.jt=new Oz(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new xs(this.indexId,this.documentKey,this.arrayValue,r)}}function wi(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=rS(n.arrayValue,e.arrayValue),t!==0?t:(t=rS(n.directionalValue,e.directionalValue),t!==0?t:G.comparator(n.documentKey,e.documentKey)))}function rS(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e){this.Yt=new Re((t,r)=>Fe.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(Z(e.collectionGroup===this.collectionId),this.en)return!1;const t=O_(e);if(t!==void 0&&!this.nn(t))return!1;const r=Cs(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.rn(a,l)||!this.sn(this.Zt[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.Zt.length||!this.sn(this.Zt[o++],a))return!1}return!0}on(){if(this.en)return null;let e=new Re(Fe.comparator);const t=[];for(const r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Cd(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Cd(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Cd(r.field,r.dir==="asc"?0:1)));return new vf(vf.UNKNOWN_ID,this.collectionId,t,Ic.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(n){var e,t;if(Z(n instanceof ce||n instanceof Ee),n instanceof ce){if(n instanceof h1){const i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>ce.create(n.field,"==",s)))||[];return Ee.create(i,"or")}return n}const r=n.filters.map(i=>H1(i));return Ee.create(r,n.op)}function Lz(n){if(n.getFilters().length===0)return[];const e=Q_(H1(n));return Z(K1(e)),H_(e)||K_(e)?[e]:e.getFilters()}function H_(n){return n instanceof ce}function K_(n){return n instanceof Ee&&iw(n)}function K1(n){return H_(n)||K_(n)||function(t){if(t instanceof Ee&&U_(t)){for(const r of t.getFilters())if(!H_(r)&&!K_(r))return!1;return!0}return!1}(n)}function Q_(n){if(Z(n instanceof ce||n instanceof Ee),n instanceof ce)return n;if(n.filters.length===1)return Q_(n.filters[0]);const e=n.filters.map(r=>Q_(r));let t=Ee.create(e,n.op);return t=Sf(t),K1(t)?t:(Z(t instanceof Ee),Z(Wa(t)),Z(t.filters.length>1),t.filters.reduce((r,i)=>pw(r,i)))}function pw(n,e){let t;return Z(n instanceof ce||n instanceof Ee),Z(e instanceof ce||e instanceof Ee),t=n instanceof ce?e instanceof ce?function(i,s){return Ee.create([i,s],"and")}(n,e):sS(n,e):e instanceof ce?sS(e,n):function(i,s){if(Z(i.filters.length>0&&s.filters.length>0),Wa(i)&&Wa(s))return l1(i,s.getFilters());const o=U_(i)?i:s,a=U_(i)?s:i,l=o.filters.map(c=>pw(c,a));return Ee.create(l,"or")}(n,e),Sf(t)}function sS(n,e){if(Wa(e))return l1(e,n.getFilters());{const t=e.filters.map(r=>pw(n,r));return Ee.create(t,"or")}}function Sf(n){if(Z(n instanceof ce||n instanceof Ee),n instanceof ce)return n;const e=n.getFilters();if(e.length===1)return Sf(e[0]);if(o1(n))return n;const t=e.map(i=>Sf(i)),r=[];return t.forEach(i=>{i instanceof ce?r.push(i):i instanceof Ee&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ee.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vz{constructor(){this._n=new mw}addToCollectionParentIndex(e,t){return this._n.add(t),D.resolve()}getCollectionParents(e,t){return D.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return D.resolve()}deleteFieldIndex(e,t){return D.resolve()}deleteAllFieldIndexes(e){return D.resolve()}createTargetIndexes(e,t){return D.resolve()}getDocumentsMatchingTarget(e,t){return D.resolve(null)}getIndexType(e,t){return D.resolve(0)}getFieldIndexes(e,t){return D.resolve([])}getNextCollectionGroupToUpdate(e){return D.resolve(null)}getMinOffset(e,t){return D.resolve(Nn.min())}getMinOffsetFromCollectionGroup(e,t){return D.resolve(Nn.min())}updateCollectionGroup(e,t,r){return D.resolve()}updateIndexEntries(e,t){return D.resolve()}}class mw{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Re(ue.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Re(ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh=new Uint8Array(0);class Mz{constructor(e,t){this.databaseId=t,this.an=new mw,this.un=new ps(r=>so(r),(r,i)=>Jc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});const s={collectionId:r,parent:rn(i)};return oS(e).put(s)}return D.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[qk(t),""],!1,!0);return oS(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(Rr(o.parent))}return r})}addFieldIndex(e,t){const r=iu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(t);delete i.indexId;const s=r.add(i);if(t.indexState){const o=$o(e);return s.next(a=>{o.put(Z0(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=iu(e),i=$o(e),s=qo(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=iu(e),r=qo(e),i=$o(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return D.forEach(this.cn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new iS(r).on();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=qo(e);let i=!0;const s=new Map;return D.forEach(this.cn(t),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=oe();const a=[];return D.forEach(s,(l,c)=>{z("IndexedDbIndexManager",`Using index ${function(E){return`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(k=>`${k.fieldPath}:${k.kind}`).join(",")}`}(l)} to execute ${so(t)}`);const h=function(E,k){const M=O_(k);if(M===void 0)return null;for(const F of Ef(E,M.fieldPath))switch(F.op){case"array-contains-any":return F.value.arrayValue.values||[];case"array-contains":return[F.value]}return null}(c,l),d=function(E,k){const M=new Map;for(const F of Cs(k))for(const T of Ef(E,F.fieldPath))switch(T.op){case"==":case"in":M.set(F.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return M.set(F.fieldPath.canonicalString(),T.value),Array.from(M.values())}return null}(c,l),p=function(E,k){const M=[];let F=!0;for(const T of Cs(k)){const v=T.kind===0?F0(E,T.fieldPath,E.startAt):U0(E,T.fieldPath,E.startAt);M.push(v.value),F&&(F=v.inclusive)}return new rs(M,F)}(c,l),g=function(E,k){const M=[];let F=!0;for(const T of Cs(k)){const v=T.kind===0?U0(E,T.fieldPath,E.endAt):F0(E,T.fieldPath,E.endAt);M.push(v.value),F&&(F=v.inclusive)}return new rs(M,F)}(c,l),y=this.hn(l,c,p),S=this.hn(l,c,g),C=this.Pn(l,c,d),I=this.In(l.indexId,h,y,p.inclusive,S,g.inclusive,C);return D.forEach(I,w=>r.G(w,t.limit).next(E=>{E.forEach(k=>{const M=G.fromSegments(k.documentKey);o.has(M)||(o=o.add(M),a.push(M))})}))}).next(()=>a)}return D.resolve(null)})}cn(e){let t=this.un.get(e);return t||(e.filters.length===0?t=[e]:t=Lz(Ee.create(e.filters,"and")).map(r=>j_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,i,s,o,a){const l=(t!=null?t.length:1)*Math.max(r.length,s.length),c=l/(t!=null?t.length:1),h=[];for(let d=0;d<l;++d){const p=t?this.Tn(t[d/c]):Zh,g=this.En(e,p,r[d%c],i),y=this.dn(e,p,s[d%c],o),S=a.map(C=>this.En(e,p,C,!0));h.push(...this.createRange(g,y,S))}return h}En(e,t,r,i){const s=new xs(e,G.empty(),t,r);return i?s:s.Jt()}dn(e,t,r,i){const s=new xs(e,G.empty(),t,r);return i?s.Jt():s}ln(e,t){const r=new iS(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.cn(t);return D.forEach(i,s=>this.ln(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new Re(Fe.comparator),h=!1;for(const d of l.filters)for(const p of d.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?h=!0:c=c.add(p.field));for(const d of l.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(t)&&i.length>1&&r===2?1:r)}An(e,t){const r=new ru;for(const i of Cs(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const o=r.Ht(i.kind);Ns.bt.Pt(s,o)}return r.Wt()}Tn(e){const t=new ru;return Ns.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const r=new ru;return Ns.bt.Pt(io(this.databaseId,t),r.Ht(function(s){const o=Cs(s);return o.length===0?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(r===null)return[];let i=[];i.push(new ru);let s=0;for(const o of Cs(e)){const a=r[s++];for(const l of i)if(this.Vn(t,o.fieldPath)&&Ac(a))i=this.mn(i,o,a);else{const c=l.Ht(o.kind);Ns.bt.Pt(a,c)}}return this.fn(i)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new ru;l.seed(a.Wt()),Ns.bt.Pt(o,l.Ht(t.kind)),s.push(l)}return s}Vn(e,t){return!!e.filters.find(r=>r instanceof ce&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=iu(e),i=$o(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return D.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(h,d){const p=d?new Ic(d.sequenceNumber,new Nn(uo(d.readTime),new G(Rr(d.documentKey)),d.largestBatchId)):Ic.empty(),g=h.fields.map(([y,S])=>new Cd(Fe.fromServerFormat(y),S));return new vf(h.indexId,h.collectionGroup,g,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ie(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=iu(e),s=$o(e);return this.gn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>D.forEach(a,l=>s.put(Z0(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return D.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?D.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),D.forEach(a,l=>this.pn(e,i,l).next(c=>{const h=this.yn(s,l);return c.isEqual(h)?D.resolve():this.wn(e,s,l,c,h)}))))})}Sn(e,t,r,i){return qo(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,i){return qo(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){const i=qo(e);let s=new Re(wi);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(o,a)=>{s=s.add(new xs(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,t){let r=new Re(wi);const i=this.An(t,e);if(i==null)return r;const s=O_(t);if(s!=null){const o=e.data.field(s.fieldPath);if(Ac(o))for(const a of o.arrayValue.values||[])r=r.add(new xs(t.indexId,e.key,this.Tn(a),i))}else r=r.add(new xs(t.indexId,e.key,Zh,i));return r}wn(e,t,r,i,s){z("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(l,c,h,d,p){const g=l.getIterator(),y=c.getIterator();let S=zo(g),C=zo(y);for(;S||C;){let I=!1,w=!1;if(S&&C){const E=h(S,C);E<0?w=!0:E>0&&(I=!0)}else S!=null?w=!0:I=!0;I?(d(C),C=zo(y)):w?(p(S),S=zo(g)):(S=zo(g),C=zo(y))}}(i,s,wi,a=>{o.push(this.Sn(e,t,r,a))},a=>{o.push(this.bn(e,t,r,a))}),D.waitFor(o)}gn(e){let t=1;return $o(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>wi(o,a)).filter((o,a,l)=>!a||wi(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=wi(o,e),l=wi(o,t);if(a===0)i[0]=e.Jt();else if(a>0&&l<0)i.push(o),i.push(o.Jt());else if(l>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Zh,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Zh,[]];s.push(IDBKeyRange.bound(a,l))}return s}Dn(e,t){return wi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(aS)}getMinOffset(e,t){return D.mapArray(this.cn(t),r=>this.ln(e,r).next(i=>i||Y())).next(aS)}}function oS(n){return Rt(n,"collectionParents")}function qo(n){return Rt(n,"indexEntries")}function iu(n){return Rt(n,"indexConfiguration")}function $o(n){return Rt(n,"indexState")}function aS(n){Z(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;tw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Nn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class hn{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new hn(e,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=r.J({range:o},(h,d,p)=>(a++,p.delete()));s.push(l.next(()=>{Z(a===1)}));const c=[];for(const h of t.mutations){const d=Yk(e,h.key.path,t.batchId);s.push(i.delete(d)),c.push(h.key)}return D.waitFor(s).next(()=>c)}function Rf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Y();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn(41943040,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(-1,0,0);class Cp{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,t,r,i){Z(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Cp(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ei(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Xo(e),o=Ei(e);return o.add({}).next(a=>{Z(typeof a=="number");const l=new lw(a,t,r,i),c=function(g,y,S){const C=S.baseMutations.map(w=>kc(g.ct,w)),I=S.mutations.map(w=>kc(g.ct,w));return{userId:y,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:C,mutations:I}}(this.serializer,this.userId,l),h=[];let d=new Re((p,g)=>ie(p.canonicalString(),g.canonicalString()));for(const p of i){const g=Yk(this.userId,p.key.path,a);d=d.add(p.key.path.popLast()),h.push(o.put(c)),h.push(s.put(g,Rj))}return d.forEach(p=>{h.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Cn[a]=l.keys()}),D.waitFor(h).next(()=>l)})}lookupMutationBatch(e,t){return Ei(e).get(t).next(r=>r?(Z(r.userId===this.userId),bs(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?D.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Cn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Ei(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(Z(a.batchId>=r),s=bs(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ei(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ei(e).U("userMutationsIndex",t).next(r=>r.map(i=>bs(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Pd(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Xo(e).J({range:i},(o,a,l)=>{const[c,h,d]=o,p=Rr(h);if(c===this.userId&&t.path.isEqual(p))return Ei(e).get(d).next(g=>{if(!g)throw Y();Z(g.userId===this.userId),s.push(bs(this.serializer,g))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Re(ie);const i=[];return t.forEach(s=>{const o=Pd(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Xo(e).J({range:a},(c,h,d)=>{const[p,g,y]=c,S=Rr(g);p===this.userId&&s.path.isEqual(S)?r=r.add(y):d.done()});i.push(l)}),D.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Pd(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Re(ie);return Xo(e).J({range:o},(l,c,h)=>{const[d,p,g]=l,y=Rr(p);d===this.userId&&r.isPrefixOf(y)?y.length===i&&(a=a.add(g)):h.done()}).next(()=>this.Fn(e,a))}Fn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Ei(e).get(s).next(o=>{if(o===null)throw Y();Z(o.userId===this.userId),r.push(bs(this.serializer,o))}))}),D.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Q1(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),D.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return D.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Xo(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Rr(s[1]);i.push(l)}else a.done()}).next(()=>{Z(i.length===0)})})}containsKey(e,t){return Y1(e,this.userId,t)}xn(e){return J1(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Y1(n,e,t){const r=Pd(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Xo(n).J({range:s,H:!0},(a,l,c)=>{const[h,d,p]=a;h===e&&d===i&&(o=!0),c.done()}).next(()=>o)}function Ei(n){return Rt(n,"mutations")}function Xo(n){return Rt(n,"documentMutations")}function J1(n){return Rt(n,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new co(0)}static Ln(){return new co(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fz{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const r=new co(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>ee.fromTimestamp(new Be(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.kn(e,i)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Wo(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>(Z(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Wo(e).J((o,a)=>{const l=Tu(a);l.sequenceNumber<=t&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>D.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Wo(e).J((r,i)=>{const s=Tu(i);t(s)})}Bn(e){return uS(e).get("targetGlobalKey").next(t=>(Z(t!==null),t))}kn(e,t){return uS(e).put("targetGlobalKey",t)}qn(e,t){return Wo(e).put(G1(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=so(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Wo(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=Tu(a);Jc(t,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Pi(e);return t.forEach(o=>{const a=rn(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),D.waitFor(i)}removeMatchingKeys(e,t,r){const i=Pi(e);return D.forEach(t,s=>{const o=rn(s.path);return D.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Pi(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Pi(e);let s=oe();return i.J({range:r,H:!0},(o,a,l)=>{const c=Rr(o[1]),h=new G(c);s=s.add(h)}).next(()=>s)}containsKey(e,t){const r=rn(t.path),i=IDBKeyRange.bound([r],[qk(r)],!1,!0);let s=0;return Pi(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ot(e,t){return Wo(e).get(t).next(r=>r?Tu(r):null)}}function Wo(n){return Rt(n,"targets")}function uS(n){return Rt(n,"targetGlobal")}function Pi(n){return Rt(n,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS([n,e],[t,r]){const i=ie(n,t);return i===0?ie(e,r):i}class Uz{constructor(e){this.Kn=e,this.buffer=new Re(cS),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();cS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Bz{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){z("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){fs(t)?z("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await ds(t)}await this.zn(3e5)})}}class jz{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return D.resolve(pn.oe);const r=new Uz(t);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(z("LruGarbageCollector","Garbage collection skipped; disabled"),D.resolve(lS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lS):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,i,s,o,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,t))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),Ko()<=ae.DEBUG&&z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),D.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function zz(n,e){return new jz(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qz{constructor(e,t){this.db=e,this.garbageCollector=zz(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,i)=>t(i))}addReference(e,t,r){return ed(e,r)}removeReference(e,t,r){return ed(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ed(e,t)}er(e,t){return function(i,s){let o=!1;return J1(i).Y(a=>Y1(i,a,s).next(l=>(l&&(o=!0),D.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,a)=>{if(a<=t){const l=this.er(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ee.min()),Pi(e).delete(function(d){return[0,rn(d.path)]}(o))))});i.push(l)}}).next(()=>D.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ed(e,t)}Xn(e,t){const r=Pi(e);let i,s=pn.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==pn.oe&&t(new G(Rr(i)),s),s=c,i=l):s=pn.oe}).next(()=>{s!==pn.oe&&t(new G(Rr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ed(n,e){return Pi(n).put(function(r,i){return{targetId:0,path:rn(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(){this.changes=new ps(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,De.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?D.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $z{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ts(e).put(r)}removeEntry(e,t,r){return Ts(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Tf(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=De.newInvalidDocument(t);return Ts(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(su(t))},(i,s)=>{r=this.nr(t,s)}).next(()=>r)}rr(e,t){let r={size:0,document:De.newInvalidDocument(t)};return Ts(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(su(t))},(i,s)=>{r={document:this.nr(t,s),size:Rf(s)}}).next(()=>r)}getEntries(e,t){let r=gn();return this.ir(e,t,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,t){let r=gn(),i=new He(G.comparator);return this.ir(e,t,(s,o)=>{const a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,Rf(o))}).next(()=>({documents:r,_r:i}))}ir(e,t,r){if(t.isEmpty())return D.resolve();let i=new Re(fS);t.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(su(i.first()),su(i.last())),o=i.getIterator();let a=o.getNext();return Ts(e).J({index:"documentKeyIndex",range:s},(l,c,h)=>{const d=G.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&fS(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?h.$(su(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),Tf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ts(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let h=gn();for(const d of c){const p=this.nr(G.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);p.isFoundDocument()&&(Zc(t,p)||i.has(p.key))&&(h=h.insert(p.key,p))}return h})}getAllFromCollectionGroup(e,t,r,i){let s=gn();const o=dS(t,r),a=dS(t,Nn.max());return Ts(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,h)=>{const d=this.nr(G.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(d.key,d),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new Wz(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return hS(e).get("remoteDocumentGlobalKey").next(t=>(Z(!!t),t))}tr(e,t){return hS(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const r=kz(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ee.min())))return r}return De.newInvalidDocument(e)}}function Z1(n){return new $z(n)}class Wz extends X1{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new ps(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Re((s,o)=>ie(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(t.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=J0(this.ar.serializer,o);i=i.add(s.path.popLast());const c=Rf(l);r+=c-a.size,t.push(this.ar.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=J0(this.ar.serializer,o.convertToNoDocument(ee.min()));t.push(this.ar.addEntry(e,s,l))}}),i.forEach(s=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.ar.updateMetadata(e,r)),D.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function hS(n){return Rt(n,"remoteDocumentGlobal")}function Ts(n){return Rt(n,"remoteDocumentsV14")}function su(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function dS(n,e){const t=e.documentKey.path.toArray();return[n,Tf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function fS(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=ie(t[s],r[s]),i)return i;return i=ie(t.length,r.length),i||(i=ie(t[t.length-2],r[r.length-2]),i||ie(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gz{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Uu(r.mutation,i,mn.empty(),Be.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,oe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=oe()){const i=Ar();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Eu();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Ar();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,oe()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=gn();const o=Fu(),a=function(){return Fu()}();return t.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof hi)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Uu(h.mutation,c,h.mutation.getFieldMask(),Be.now())):o.set(c.key,mn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),t.forEach((c,h)=>{var d;return a.set(c,new Gz(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Fu();let i=new He((o,a)=>o-a),s=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let h=r.get(l)||mn.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(i.get(a.batchId)||oe()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=y1();h.forEach(p=>{if(!s.has(p)){const g=A1(t.get(p),r.get(p));g!==null&&d.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return D.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):sw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):D.resolve(Ar());let a=-1,l=s;return o.next(c=>D.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?D.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,oe())).next(h=>({batchId:a,changes:_1(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new G(t)).next(r=>{let i=Eu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=Eu();return this.indexManager.getCollectionParents(e,s).next(a=>D.forEach(a,l=>{const c=function(d,p){return new ci(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,De.newInvalidDocument(h)))});let a=Eu();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&Uu(h.mutation,c,mn.empty(),Be.now()),Zc(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hz{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return D.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:st(i.createTime)}}(t)),D.resolve()}getNamedQuery(e,t){return D.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(i){return{name:i.name,query:fw(i.bundledQuery),readTime:st(i.readTime)}}(t)),D.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kz{constructor(){this.overlays=new He(G.comparator),this.hr=new Map}getOverlay(e,t){return D.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ar();return D.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),D.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),D.resolve()}getOverlaysForCollection(e,t,r){const i=Ar(),s=t.length+1,o=new G(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return D.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new He((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Ar(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Ar(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return D.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new cw(t,r));let s=this.hr.get(t);s===void 0&&(s=oe(),this.hr.set(t,s)),this.hr.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(){this.Pr=new Re(gt.Ir),this.Tr=new Re(gt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new gt(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new gt(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new G(new ue([])),r=new gt(t,e),i=new gt(t,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new G(new ue([])),r=new gt(t,e),i=new gt(t,e+1);let s=oe();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new gt(e,0),r=this.Pr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class gt{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return G.comparator(e.key,t.key)||ie(e.pr,t.pr)}static Er(e,t){return ie(e.pr,t.pr)||G.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qz{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Re(gt.Ir)}checkEmpty(e){return D.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new lw(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new gt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return D.resolve(o)}lookupMutationBatch(e,t){return D.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.br(r),s=i<0?0:i;return D.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return D.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return D.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new gt(t,0),i=new gt(t,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),D.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Re(ie);return t.forEach(i=>{const s=new gt(i,0),o=new gt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),D.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;G.isDocumentKey(s)||(s=s.child(""));const o=new gt(new G(s),0);let a=new Re(ie);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),D.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Z(this.Cr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return D.forEach(t.mutations,i=>{const s=new gt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new gt(t,0),i=this.wr.firstAfterOrEqual(r);return D.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,D.resolve()}Cr(e,t){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yz{constructor(e){this.vr=e,this.docs=function(){return new He(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return D.resolve(r?r.document.mutableCopy():De.newInvalidDocument(t))}getEntries(e,t){let r=gn();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():De.newInvalidDocument(i))}),D.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=gn();const o=t.path,a=new G(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||tw(Wk(h),r)<=0||(i.has(h.key)||Zc(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return D.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Y()}Fr(e,t){return D.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Jz(this)}getSize(e){return D.resolve(this.size)}}class Jz extends X1{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),D.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xz{constructor(e){this.persistence=e,this.Mr=new ps(t=>so(t),Jc),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Or=0,this.Nr=new gw,this.targetCount=0,this.Lr=co.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),D.resolve()}getLastRemoteSnapshotVersion(e){return D.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return D.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),D.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),D.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new co(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,D.resolve()}updateTargetData(e,t){return this.qn(t),D.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,D.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),D.waitFor(s).next(()=>i)}getTargetCount(e){return D.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return D.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),D.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),D.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),D.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return D.resolve(r)}containsKey(e,t){return D.resolve(this.Nr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,t){this.Br={},this.overlays={},this.kr=new pn(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Xz(this),this.indexManager=new Vz,this.remoteDocumentCache=function(i){return new Yz(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new W1(t),this.$r=new Hz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Kz,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new Qz(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){z("MemoryPersistence","Starting transaction:",e);const i=new Zz(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,t){return D.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}}class Zz extends Hk{constructor(e){super(),this.currentSequenceNumber=e}}class Pp{constructor(e){this.persistence=e,this.zr=new gw,this.jr=null}static Hr(e){return new Pp(e)}get Jr(){if(this.jr)return this.jr;throw Y()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),D.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),D.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),D.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return D.forEach(this.Jr,r=>{const i=G.fromPath(r);return this.Yr(e,i).next(s=>{s||t.removeEntry(i,ee.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return D.or([()=>D.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eq{constructor(e){this.serializer=e}O(e,t,r,i){const s=new Ip("createOrUpgrade",t);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",P0,{unique:!0}),l.createObjectStore("documentMutations")}(e),pS(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=D.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),pS(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ee.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(h=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",P0,{unique:!0});const d=c.store("mutations"),p=h.map(g=>d.put(g));return D.waitFor(p)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:Mj});c.createIndex("collectionPathOverlayIndex",Fj,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",Uj,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:Aj});c.createIndex("documentKeyIndex",Cj),c.createIndex("collectionGroupIndex",Pj)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:Dj}).createIndex("sequenceNumberIndex",Oj,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:Lj}).createIndex("documentKeyIndex",Vj,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),o}ei(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Rf(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>D.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>D.forEach(a,l=>{Z(l.userId===s.userId);const c=bs(this.serializer,l);return Q1(e,s.userId,c).next(()=>{})}))}))}ti(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new ue(o),c=function(d){return[0,rn(d)]}(l);s.push(t.get(c).next(h=>h?D.resolve():(d=>t.put({targetId:0,path:rn(d),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>D.waitFor(s))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:xj});const r=t.store("collectionParents"),i=new mw,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:rn(l)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new ue(o);return s(l.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,l],c)=>{const h=Rr(a);return s(h.popLast())}))}ri(e){const t=e.store("targets");return t.J((r,i)=>{const s=Tu(i),o=G1(this.serializer,s);return t.put(o)})}ii(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),l=function(d){return d.document?new G(ue.fromString(d.document.name).popFirst(5)):d.noDocument?G.fromSegments(d.noDocument.path):d.unknownDocument?G.fromSegments(d.unknownDocument.path):Y()}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>D.waitFor(i))}si(e,t){const r=t.store("mutations"),i=Z1(this.serializer),s=new tb(Pp.Hr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let h=(c=a.get(l.userId))!==null&&c!==void 0?c:oe();bs(this.serializer,l).keys().forEach(d=>h=h.add(d)),a.set(l.userId,h)}),D.forEach(a,(l,c)=>{const h=new yt(c),d=Ap.lt(this.serializer,h),p=s.getIndexManager(h),g=Cp.lt(h,this.serializer,p,s.referenceDelegate);return new eb(i,g,d,p).recalculateAndSaveOverlaysForDocumentKeys(new L_(t,pn.oe),l).next()})})}}function pS(n){n.createObjectStore("targetDocuments",{keyPath:bj}).createIndex("documentTargetsIndex",Nj,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",kj,{unique:!0}),n.createObjectStore("targetGlobal")}const og="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class _w{constructor(e,t,r,i,s,o,a,l,c,h,d=16){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=c,this.ai=h,this.ui=d,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=p=>Promise.resolve(),!_w.D())throw new j(O.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qz(this,i),this.Ti=t+"main",this.serializer=new W1(l),this.Ei=new br(this.Ti,this.ui,new eq(this.serializer)),this.Qr=new Fz(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Z1(this.serializer),this.$r=new bz,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,h===!1&&it("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new j(O.FAILED_PRECONDITION,og);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new pn(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(async()=>{this.started&&await this.Ai()}))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>td(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(fs(e))return z("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return z("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return ou(e).get("owner").next(t=>D.resolve(this.Si(t)))}bi(e){return td(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=Rt(t,"clientMetadata");return r.U().next(i=>{const s=this.vi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return D.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?D.resolve(!0):ou(e).get("owner").next(t=>{if(t!==null&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new j(O.FAILED_PRECONDITION,og);return!1}}return!(!this.networkEnabled||!this.inForeground)||td(e).U().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&z("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new L_(e,pn.oe);return this.yi(t).next(()=>this.bi(t))}),this.Ei.close(),this.Li()}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>td(e).U().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return Cp.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Mz(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Ap.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){z("IndexedDbPersistence","Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=function(l){return l===16?jj:l===15?e1:l===14?Zk:l===13?Xk:l===12?Bj:l===11?Jk:void Y()}(this.ui);let o;return this.Ei.runTransaction(e,i,s,a=>(o=new L_(a,this.kr?this.kr.next():pn.oe),t==="readwrite-primary"?this.gi(o).next(l=>!!l||this.pi(o)).next(l=>{if(!l)throw it(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new j(O.FAILED_PRECONDITION,Gk);return r(o)}).next(l=>this.wi(o).next(()=>l)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return ou(e).get("owner").next(t=>{if(t!==null&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new j(O.FAILED_PRECONDITION,og)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ou(e).put("owner",t)}static D(){return br.D()}yi(e){const t=ou(e);return t.get("owner").next(r=>this.Si(r)?(z("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):D.resolve())}Ci(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(it(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;wP()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const r=((t=this.di)===null||t===void 0?void 0:t.getItem(this.Fi(e)))!==null;return z("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return it("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){it("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ou(n){return Rt(n,"owner")}function td(n){return Rt(n,"clientMetadata")}function yw(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=oe(),i=oe();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new vw(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tq{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return wP()?8:Kk(je())>0?6:4}()}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new tq;return this.Ji(e,t,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,t,o,a.size)})}).next(()=>s.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(Ko()<=ae.DEBUG&&z("QueryEngine","SDK will not create cache indexes for query:",Qo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),D.resolve()):(Ko()<=ae.DEBUG&&z("QueryEngine","Query:",Qo(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Ko()<=ae.DEBUG&&z("QueryEngine","The SDK decides to create cache indexes for query:",Qo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sn(t))):D.resolve())}ji(e,t){if(B0(t))return D.resolve(null);let r=sn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=If(t,null,"F"),r=sn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=oe(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(t,a);return this.Xi(t,c,o,l.readTime)?this.ji(e,If(t,null,"F")):this.es(e,c,t,l)}))})))}Hi(e,t,r,i){return B0(t)||i.isEqual(ee.min())?D.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(t,s);return this.Xi(t,o,r,i)?D.resolve(null):(Ko()<=ae.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Qo(t)),this.es(e,o,t,$k(i,-1)).next(a=>a))})}Zi(e,t){let r=new Re(m1(e));return t.forEach((i,s)=>{Zc(e,s)&&(r=r.add(s))}),r}Xi(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,t,r){return Ko()<=ae.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",Qo(t)),this.zi.getDocumentsMatchingQuery(e,t,Nn.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nq{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new He(ie),this.rs=new ps(s=>so(s),Jc),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eb(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function rb(n,e,t,r){return new nq(n,e,t,r)}async function ib(n,e){const t=H(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=oe();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function rq(n,e){const t=H(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,p=d.keys();let g=D.resolve();return p.forEach(y=>{g=g.next(()=>h.getEntry(l,y)).next(S=>{const C=c.docVersions.get(y);Z(C!==null),S.version.compareTo(C)<0&&(d.applyToRemoteDocument(S,c),S.isValidDocument()&&(S.setReadTime(c.commitVersion),h.addEntry(S)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=oe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function sb(n){const e=H(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function iq(n,e){const t=H(n),r=e.snapshotVersion;let i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;const a=[];e.targetChanges.forEach((h,d)=>{const p=i.get(d);if(!p)return;a.push(t.Qr.removeMatchingKeys(s,h.removedDocuments,d).next(()=>t.Qr.addMatchingKeys(s,h.addedDocuments,d)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(pt.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),i=i.insert(d,g),function(S,C,I){return S.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(p,g,h)&&a.push(t.Qr.updateTargetData(s,g))});let l=gn(),c=oe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(ob(s,o,e.documentUpdates).next(h=>{l=h.cs,c=h.ls})),!r.isEqual(ee.min())){const h=t.Qr.getLastRemoteSnapshotVersion(s).next(d=>t.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return D.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.ns=i,s))}function ob(n,e,t){let r=oe(),i=oe();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=gn();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ee.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):z("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:i}})}function sq(n,e){const t=H(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Qa(n,e){const t=H(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(s=>s?(i=s,D.resolve(i)):t.Qr.allocateTargetId(r).next(o=>(i=new Kr(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}async function Ya(n,e,t){const r=H(n),i=r.ns.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!fs(o))throw o;z("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function Af(n,e,t){const r=H(n);let i=ee.min(),s=oe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=H(l),p=d.rs.get(h);return p!==void 0?D.resolve(d.ns.get(p)):d.Qr.getTargetData(c,h)}(r,o,sn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,t?i:ee.min(),t?s:oe())).next(a=>(ub(r,p1(e),a),{documents:a,hs:s})))}function ab(n,e){const t=H(n),r=H(t.Qr),i=t.ns.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function lb(n,e){const t=H(n),r=t.ss.get(e)||ee.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.os.getAllFromCollectionGroup(i,e,$k(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(ub(t,e,i),i))}function ub(n,e,t){let r=n.ss.get(e)||ee.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ss.set(e,r)}async function oq(n,e,t,r){const i=H(n);let s=oe(),o=gn();for(const c of t){const h=e.Ps(c.metadata.name);c.document&&(s=s.add(h));const d=e.Is(c);d.setReadTime(e.Ts(c.metadata.readTime)),o=o.insert(h,d)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=await Qa(i,function(h){return sn(pl(ue.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>ob(c,a,o).next(h=>(a.apply(c),h)).next(h=>i.Qr.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Qr.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,h.cs,h.ls)).next(()=>h.cs)))}async function aq(n,e,t=oe()){const r=await Qa(n,sn(fw(e.bundledQuery))),i=H(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=st(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(s,e);const a=r.withResumeToken(pt.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(s,a).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,t,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})}function mS(n,e){return`firestore_clients_${n}_${e}`}function gS(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ag(n,e){return`firestore_targets_${n}_${e}`}class Cf{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Es(e,t,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new j(i.error.code,i.error.message))),o?new Cf(e,t,i.state,s):(it("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bu{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){const r=JSON.parse(t);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new j(r.error.code,r.error.message))),s?new Bu(e,r.state,i):(it("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Pf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const r=JSON.parse(t);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=ow();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=Qk(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Pf(e,s):(it("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class ww{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new ww(t.clientId,t.onlineState):(it("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Y_{constructor(){this.activeTargetIds=ow()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lg{constructor(e,t,r,i,s){this.window=e,this.oi=t,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new He(ie),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=mS(this.persistenceKey,this.Vs),this.Ss=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Y_),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Fs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const r of e){if(r===this.Vs)continue;const i=this.getItem(mS(this.persistenceKey,r));if(i){const s=Pf.Es(r,i);s&&(this.ps=this.ps.insert(s.clientId,s))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const r=this.xs(t);r&&this.Os(r)}for(const r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,r){this.Ls(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(ag(this.persistenceKey,e));if(r){const i=Bu.Es(e,r);i&&(t=i.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ag(this.persistenceKey,e))}updateQueryState(e,t,r){this.qs(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return z("SharedClientState","READ",e,t),t}setItem(e,t){z("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){z("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(z("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void it("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.bs.test(t.key)){if(t.newValue==null){const r=this.$s(t.key);return this.Us(r,null)}{const r=this.Ws(t.key,t.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(t.key)){if(t.newValue!==null){const r=this.Gs(t.key,t.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(t.key)){if(t.newValue!==null){const r=this.js(t.key,t.newValue);if(r)return this.Hs(r)}}else if(t.key===this.vs){if(t.newValue!==null){const r=this.xs(t.newValue);if(r)return this.Os(r)}}else if(t.key===this.Ss){const r=function(s){let o=pn.oe;if(s!=null)try{const a=JSON.parse(s);Z(typeof a=="number"),o=a}catch(a){it("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(t.newValue);r!==pn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Fs){const r=this.Js(t.newValue);await Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(t)})}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,r){const i=new Cf(this.currentUser,e,t,r),s=gS(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Bs(e){const t=gS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,r){const i=ag(this.persistenceKey,e),s=new Bu(e,t,r);this.setItem(i,s.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const r=this.$s(e);return Pf.Es(r,t)}Gs(e,t){const r=this.Ds.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Cf.Es(new yt(s),i,t)}js(e,t){const r=this.Cs.exec(e),i=Number(r[1]);return Bu.Es(i,t)}xs(e){return ww.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);z("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=ow();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class cb{constructor(){this.no=new Y_,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Y_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lq{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nd=null;function ug(){return nd===null?nd=function(){return 268435456+Math.round(2147483648*Math.random())}():nd++,"0x"+nd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cq{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class hq extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+t.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(t,r,i,s,o){const a=ug(),l=this.vo(t,r.toUriEncodedString());z("RestConnection",`Sending RPC '${t}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,s,o),this.Mo(t,l,c,i).then(h=>(z("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw pr("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}xo(t,r,i,s,o,a){return this.Co(t,r,i,s,o)}Fo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fl}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}vo(t,r){const i=uq[t];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,r,i){const s=ug();return new Promise((o,a)=>{const l=new Lk;l.setWithCredentials(!0),l.listenOnce(Mk.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ad.NO_ERROR:const h=l.getResponseJson();z(Bt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Ad.TIMEOUT:z(Bt,`RPC '${e}' ${s} timed out`),a(new j(O.DEADLINE_EXCEEDED,"Request time out"));break;case Ad.HTTP_ERROR:const d=l.getStatus();if(z(Bt,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const y=function(C){const I=C.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(I)>=0?I:O.UNKNOWN}(g.status);a(new j(y,g.message))}else a(new j(O.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new j(O.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{z(Bt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);z(Bt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",c,r,15)})}Oo(e,t,r){const i=ug(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Bk(),a=Uk(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new Vk({})),this.Fo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const h=s.join("");z(Bt,`Creating RPC '${e}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);let p=!1,g=!1;const y=new cq({lo:C=>{g?z(Bt,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(p||(z(Bt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),p=!0),z(Bt,`RPC '${e}' stream ${i} sending:`,C),d.send(C))},ho:()=>d.close()}),S=(C,I,w)=>{C.listen(I,E=>{try{w(E)}catch(k){setTimeout(()=>{throw k},0)}})};return S(d,wu.EventType.OPEN,()=>{g||(z(Bt,`RPC '${e}' stream ${i} transport opened.`),y.mo())}),S(d,wu.EventType.CLOSE,()=>{g||(g=!0,z(Bt,`RPC '${e}' stream ${i} transport closed`),y.po())}),S(d,wu.EventType.ERROR,C=>{g||(g=!0,pr(Bt,`RPC '${e}' stream ${i} transport errored:`,C),y.po(new j(O.UNAVAILABLE,"The operation could not be completed")))}),S(d,wu.EventType.MESSAGE,C=>{var I;if(!g){const w=C.data[0];Z(!!w);const E=w,k=E.error||((I=E[0])===null||I===void 0?void 0:I.error);if(k){z(Bt,`RPC '${e}' stream ${i} received error:`,k);const M=k.status;let F=function(R){const P=at[R];if(P!==void 0)return k1(P)}(M),T=k.message;F===void 0&&(F=O.INTERNAL,T="Unknown error status: "+M+" with message "+k.message),g=!0,y.po(new j(F,T)),d.close()}else z(Bt,`RPC '${e}' stream ${i} received:`,w),y.yo(w)}}),S(a,Fk.STAT_EVENT,C=>{C.stat===D_.PROXY?z(Bt,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===D_.NOPROXY&&z(Bt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.fo()},0),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(){return typeof window<"u"?window:null}function Dd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(n){return new vz(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,t,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=t,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,t-r);i>0&&z("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e,t,r,i,s,o,a,l){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Ew(e,t)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,t){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():t&&t.code===O.RESOURCE_EXHAUSTED?(it(t.toString()),it("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(t)}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===t&&this.u_(r,i)},r=>{e(()=>{const i=new j(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,t){const r=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(e){return z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dq extends db{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=Iz(this.serializer,e),r=function(s){if(!("targetChange"in s))return ee.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?st(o.readTime):ee.min()}(e);return this.listener.h_(t,r)}P_(e){const t={};t.database=W_(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=wf(l)?{documents:U1(s,l)}:{query:B1(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=D1(s,o.resumeToken);const c=q_(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ee.min())>0){a.readTime=Ka(s,o.snapshotVersion.toTimestamp());const c=q_(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Sz(this.serializer,e);r&&(t.labels=r),this.i_(t)}I_(e){const t={};t.database=W_(this.serializer),t.removeTarget=e,this.i_(t)}}class fq extends db{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(Z(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=Tz(e.writeResults,e.commitTime),r=st(e.commitTime);return this.listener.A_(r,t)}return Z(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=W_(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>kc(this.serializer,r))};this.i_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pq extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new j(O.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,$_(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(O.UNKNOWN,s.toString())})}xo(e,t,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,$_(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(O.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class mq{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(it(t),this.y_=!1):z("OnlineStateTracker",t)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gq{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{ms(this)&&(z("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=H(l);c.M_.add(4),await _l(c),c.N_.set("Unknown"),c.M_.delete(4),await ih(c)}(this))})}),this.N_=new mq(r,i)}}async function ih(n){if(ms(n))for(const e of n.x_)await e(!0)}async function _l(n){for(const e of n.x_)await e(!1)}function kp(n,e){const t=H(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),Sw(t)?Tw(t):vl(t).Xo()&&Iw(t,e))}function Ja(n,e){const t=H(n),r=vl(t);t.F_.delete(e),r.Xo()&&fb(t,e),t.F_.size===0&&(r.Xo()?r.n_():ms(t)&&t.N_.set("Unknown"))}function Iw(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}vl(n).P_(e)}function fb(n,e){n.L_.xe(e),vl(n).I_(e)}function Tw(n){n.L_=new mz({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),vl(n).start(),n.N_.w_()}function Sw(n){return ms(n)&&!vl(n).Zo()&&n.F_.size>0}function ms(n){return H(n).M_.size===0}function pb(n){n.L_=void 0}async function _q(n){n.N_.set("Online")}async function yq(n){n.F_.forEach((e,t)=>{Iw(n,e)})}async function vq(n,e){pb(n),Sw(n)?(n.N_.D_(e),Tw(n)):n.N_.set("Unknown")}async function wq(n,e,t){if(n.N_.set("Online"),e instanceof x1&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(n,e)}catch(r){z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await kf(n,r)}else if(e instanceof xd?n.L_.Ke(e):e instanceof N1?n.L_.He(e):n.L_.We(e),!t.isEqual(ee.min()))try{const r=await sb(n.localStore);t.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.F_.get(c);h&&s.F_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.F_.get(l);if(!h)return;s.F_.set(l,h.withResumeToken(pt.EMPTY_BYTE_STRING,h.snapshotVersion)),fb(s,l);const d=new Kr(h.target,l,c,h.sequenceNumber);Iw(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){z("RemoteStore","Failed to raise snapshot:",r),await kf(n,r)}}async function kf(n,e,t){if(!fs(e))throw e;n.M_.add(1),await _l(n),n.N_.set("Offline"),t||(t=()=>sb(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{z("RemoteStore","Retrying IndexedDB access"),await t(),n.M_.delete(1),await ih(n)})}function mb(n,e){return e().catch(t=>kf(n,t,e))}async function yl(n){const e=H(n),t=is(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;Eq(e);)try{const i=await sq(e.localStore,r);if(i===null){e.v_.length===0&&t.n_();break}r=i.batchId,Iq(e,i)}catch(i){await kf(e,i)}gb(e)&&_b(e)}function Eq(n){return ms(n)&&n.v_.length<10}function Iq(n,e){n.v_.push(e);const t=is(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function gb(n){return ms(n)&&!is(n).Zo()&&n.v_.length>0}function _b(n){is(n).start()}async function Tq(n){is(n).V_()}async function Sq(n){const e=is(n);for(const t of n.v_)e.d_(t.mutations)}async function Rq(n,e,t){const r=n.v_.shift(),i=uw.from(r,e,t);await mb(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await yl(n)}async function Aq(n,e){e&&is(n).E_&&await async function(r,i){if(function(o){return P1(o)&&o!==O.ABORTED}(i.code)){const s=r.v_.shift();is(r).t_(),await mb(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await yl(r)}}(n,e),gb(n)&&_b(n)}async function yS(n,e){const t=H(n);t.asyncQueue.verifyOperationInProgress(),z("RemoteStore","RemoteStore received new credentials");const r=ms(t);t.M_.add(3),await _l(t),r&&t.N_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),await ih(t)}async function J_(n,e){const t=H(n);e?(t.M_.delete(2),await ih(t)):e||(t.M_.add(2),await _l(t),t.N_.set("Unknown"))}function vl(n){return n.B_||(n.B_=function(t,r,i){const s=H(t);return s.f_(),new dq(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:_q.bind(null,n),To:yq.bind(null,n),Ao:vq.bind(null,n),h_:wq.bind(null,n)}),n.x_.push(async e=>{e?(n.B_.t_(),Sw(n)?Tw(n):n.N_.set("Unknown")):(await n.B_.stop(),pb(n))})),n.B_}function is(n){return n.k_||(n.k_=function(t,r,i){const s=H(t);return s.f_(),new fq(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:Tq.bind(null,n),Ao:Aq.bind(null,n),R_:Sq.bind(null,n),A_:Rq.bind(null,n)}),n.x_.push(async e=>{e?(n.k_.t_(),await yl(n)):(await n.k_.stop(),n.v_.length>0&&(z("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))})),n.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Tt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new Rw(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wl(n,e){if(it("AsyncQueue",`${e}: ${n}`),fs(n))return new j(O.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e){this.comparator=e?(t,r)=>e(t,r)||G.comparator(t.key,r.key):(t,r)=>G.comparator(t.key,r.key),this.keyedMap=Eu(),this.sortedSet=new He(this.comparator)}static emptySet(e){return new Ra(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ra)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ra;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(){this.q_=new He(G.comparator)}track(e){const t=e.doc.key,r=this.q_.get(t);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(t,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(t):e.type===1&&r.type===2?this.q_=this.q_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Y():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Xa{constructor(e,t,r,i,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Xa(e,t,Ra.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cq{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class Pq{constructor(){this.queries=new ps(e=>f1(e),Xc),this.onlineState="Unknown",this.z_=new Set}}async function Aw(n,e){const t=H(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new Cq,r=e.G_()?0:1);try{switch(r){case 0:s.K_=await t.onListen(i,!0);break;case 1:s.K_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const a=wl(o,`Initialization of query '${Qo(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.U_.push(e),e.j_(t.onlineState),s.K_&&e.H_(s.K_)&&Pw(t)}async function Cw(n,e){const t=H(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function kq(n,e){const t=H(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&Pw(t)}function bq(n,e,t){const r=H(n),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(t);r.queries.delete(e)}function Pw(n){n.z_.forEach(e=>{e.next()})}var X_,wS;(wS=X_||(X_={})).J_="default",wS.Cache="cache";class kw{constructor(e,t,r){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Xa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache||!this.G_())return!0;const r=t!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ea(e){if(e.docChanges.length>0)return!0;const t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}na(e){e=Xa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==X_.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nq{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e){this.serializer=e}Ps(e){return Nr(this.serializer,e)}Is(e){return e.metadata.exists?F1(this.serializer,e.document,!1):De.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return st(e)}}class xq{constructor(e,t,r){this.oa=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=yb(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const r=ue.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,r=new ES(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||oe()).add(s);t.set(o,a)}}return t}async complete(){const e=await oq(this.localStore,new ES(this.serializer),this.documents,this.oa.id),t=this.aa(this.documents);for(const r of this.queries)await aq(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}}}function yb(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e){this.key=e}}class wb{constructor(e){this.key=e}}class Eb{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=oe(),this.mutatedKeys=oe(),this.Ia=m1(e),this.Ta=new Ra(this.Ia)}get Ea(){return this.la}da(e,t){const r=t?t.Aa:new vS,i=t?t.Ta:this.Ta;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const p=i.get(h),g=Zc(this.query,d)?d:null,y=!!p&&this.mutatedKeys.has(p.key),S=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let C=!1;p&&g?p.data.isEqual(g.data)?y!==S&&(r.track({type:3,doc:g}),C=!0):this.Ra(p,g)||(r.track({type:2,doc:g}),C=!0,(l&&this.Ia(g,l)>0||c&&this.Ia(g,c)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),C=!0):p&&!g&&(r.track({type:1,doc:p}),C=!0,(l||c)&&(a=!0)),C&&(g?(o=o.add(g),s=S?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((h,d)=>function(g,y){const S=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return S(g)-S(y)}(h.type,d.type)||this.Ia(h.doc,d.doc)),this.Va(r),i=i!=null&&i;const a=t&&!i?this.ma():[],l=this.Pa.size===0&&this.current&&!i?1:0,c=l!==this.ha;return this.ha=l,o.length!==0||c?{snapshot:new Xa(this.query,e.Ta,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new vS,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=oe(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const t=[];return e.forEach(r=>{this.Pa.has(r)||t.push(new wb(r))}),this.Pa.forEach(r=>{e.has(r)||t.push(new vb(r))}),t}pa(e){this.la=e.hs,this.Pa=oe();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return Xa.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class Dq{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Oq{constructor(e){this.key=e,this.wa=!1}}class Lq{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new ps(a=>f1(a),Xc),this.Da=new Map,this.Ca=new Set,this.va=new He(G.comparator),this.Fa=new Map,this.Ma=new gw,this.xa={},this.Oa=new Map,this.Na=co.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function Vq(n,e,t=!0){const r=bp(n);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await Ib(r,e,t,!0),i}async function Mq(n,e){const t=bp(n);await Ib(t,e,!0,!1)}async function Ib(n,e,t,r){const i=await Qa(n.localStore,sn(e)),s=i.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await bw(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&kp(n.remoteStore,i),a}async function bw(n,e,t,r,i){n.Ba=(d,p,g)=>async function(S,C,I,w){let E=C.view.da(I);E.Xi&&(E=await Af(S.localStore,C.query,!1).then(({documents:T})=>C.view.da(T,E)));const k=w&&w.targetChanges.get(C.targetId),M=w&&w.targetMismatches.get(C.targetId)!=null,F=C.view.applyChanges(E,S.isPrimaryClient,k,M);return Z_(S,C.targetId,F.fa),F.snapshot}(n,d,p,g);const s=await Af(n.localStore,e,!0),o=new Eb(e,s.hs),a=o.da(s.documents),l=nh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),c=o.applyChanges(a,n.isPrimaryClient,l);Z_(n,t,c.fa);const h=new Dq(e,t,o);return n.ba.set(e,h),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),c.snapshot}async function Fq(n,e,t){const r=H(n),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!Xc(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ya(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Ja(r.remoteStore,i.targetId),Za(r,i.targetId)}).catch(ds)):(Za(r,i.targetId),await Ya(r.localStore,i.targetId,!0))}async function Uq(n,e){const t=H(n),r=t.ba.get(e),i=t.Da.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ja(t.remoteStore,r.targetId))}async function Bq(n,e,t){const r=Ow(n);try{const i=await function(o,a){const l=H(o),c=Be.now(),h=a.reduce((g,y)=>g.add(y.key),oe());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let y=gn(),S=oe();return l.os.getEntries(g,h).next(C=>{y=C,y.forEach((I,w)=>{w.isValidDocument()||(S=S.add(I))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,y)).next(C=>{d=C;const I=[];for(const w of a){const E=dz(w,d.get(w.key).overlayedDocument);E!=null&&I.push(new hi(w.key,E,i1(E.value.mapValue),Ue.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,I,a)}).next(C=>{p=C;const I=C.applyToLocalDocumentSet(d,S);return l.documentOverlayCache.saveOverlays(g,C.batchId,I)})}).then(()=>({batchId:p.batchId,changes:_1(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.xa[o.currentUser.toKey()];c||(c=new He(ie)),c=c.insert(a,l),o.xa[o.currentUser.toKey()]=c}(r,i.batchId,t),await di(r,i.changes),await yl(r.remoteStore)}catch(i){const s=wl(i,"Failed to persist write");t.reject(s)}}async function Tb(n,e){const t=H(n);try{const r=await iq(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Fa.get(s);o&&(Z(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?Z(o.wa):i.removedDocuments.size>0&&(Z(o.wa),o.wa=!1))}),await di(t,r,e)}catch(r){await ds(r)}}function IS(n,e,t){const r=H(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=H(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const p of d.U_)p.j_(a)&&(c=!0)}),c&&Pw(l)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function jq(n,e,t){const r=H(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new He(G.comparator);o=o.insert(s,De.newNoDocument(s,ee.min()));const a=oe().add(s),l=new th(ee.min(),new Map,new He(ie),o,a);await Tb(r,l),r.va=r.va.remove(s),r.Fa.delete(e),Dw(r)}else await Ya(r.localStore,e,!1).then(()=>Za(r,e,t)).catch(ds)}async function zq(n,e){const t=H(n),r=e.batch.batchId;try{const i=await rq(t.localStore,e);xw(t,r,null),Nw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await di(t,i)}catch(i){await ds(i)}}async function qq(n,e,t){const r=H(n);try{const i=await function(o,a){const l=H(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(Z(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);xw(r,e,t),Nw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await di(r,i)}catch(i){await ds(i)}}async function $q(n,e){const t=H(n);ms(t.remoteStore)||z("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=H(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(r===-1)return void e.resolve();const i=t.Oa.get(r)||[];i.push(e),t.Oa.set(r,i)}catch(r){const i=wl(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function Nw(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function xw(n,e,t){const r=H(n);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Za(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Da.get(e))n.ba.delete(r),t&&n.Sa.ka(r,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(r=>{n.Ma.containsKey(r)||Sb(n,r)})}function Sb(n,e){n.Ca.delete(e.path.canonicalString());const t=n.va.get(e);t!==null&&(Ja(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),Dw(n))}function Z_(n,e,t){for(const r of t)r instanceof vb?(n.Ma.addReference(r.key,e),Wq(n,r)):r instanceof wb?(z("SyncEngine","Document no longer in limbo: "+r.key),n.Ma.removeReference(r.key,e),n.Ma.containsKey(r.key)||Sb(n,r.key)):Y()}function Wq(n,e){const t=e.key,r=t.path.canonicalString();n.va.get(t)||n.Ca.has(r)||(z("SyncEngine","New document in limbo: "+t),n.Ca.add(r),Dw(n))}function Dw(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){const e=n.Ca.values().next().value;n.Ca.delete(e);const t=new G(ue.fromString(e)),r=n.Na.next();n.Fa.set(r,new Oq(t)),n.va=n.va.insert(t,r),kp(n.remoteStore,new Kr(sn(pl(t.path)),r,"TargetPurposeLimboResolution",pn.oe))}}async function di(n,e,t){const r=H(n),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,l)=>{o.push(r.Ba(l,e,t).then(c=>{if((c||t)&&r.isPrimaryClient){const h=c&&!c.fromCache;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=vw.Ki(l.targetId,c);s.push(h)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(l,c){const h=H(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>D.forEach(c,p=>D.forEach(p.qi,g=>h.persistence.referenceDelegate.addReference(d,p.targetId,g)).next(()=>D.forEach(p.Qi,g=>h.persistence.referenceDelegate.removeReference(d,p.targetId,g)))))}catch(d){if(!fs(d))throw d;z("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const g=h.ns.get(p),y=g.snapshotVersion,S=g.withLastLimboFreeSnapshotVersion(y);h.ns=h.ns.insert(p,S)}}}(r.localStore,s))}async function Gq(n,e){const t=H(n);if(!t.currentUser.isEqual(e)){z("SyncEngine","User change. New user:",e.toKey());const r=await ib(t.localStore,e);t.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(l=>{l.reject(new j(O.CANCELLED,o))})}),s.Oa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await di(t,r.us)}}function Hq(n,e){const t=H(n),r=t.Fa.get(e);if(r&&r.wa)return oe().add(r.key);{let i=oe();const s=t.Da.get(e);if(!s)return i;for(const o of s){const a=t.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}async function Kq(n,e){const t=H(n),r=await Af(t.localStore,e.query,!0),i=e.view.pa(r);return t.isPrimaryClient&&Z_(t,e.targetId,i.fa),i}async function Qq(n,e){const t=H(n);return lb(t.localStore,e).then(r=>di(t,r))}async function Yq(n,e,t,r){const i=H(n),s=await function(a,l){const c=H(a),h=H(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",d=>h.vn(d,l).next(p=>p?c.localDocuments.getDocuments(d,p):D.resolve(null)))}(i.localStore,e);s!==null?(t==="pending"?await yl(i.remoteStore):t==="acknowledged"||t==="rejected"?(xw(i,e,r||null),Nw(i,e),function(a,l){H(H(a).mutationQueue).Mn(l)}(i.localStore,e)):Y(),await di(i,s)):z("SyncEngine","Cannot apply mutation batch with id: "+e)}async function Jq(n,e){const t=H(n);if(bp(t),Ow(t),e===!0&&t.La!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),i=await TS(t,r.toArray());t.La=!0,await J_(t.remoteStore,!0);for(const s of i)kp(t.remoteStore,s)}else if(e===!1&&t.La!==!1){const r=[];let i=Promise.resolve();t.Da.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Za(t,o),Ya(t.localStore,o,!0))),Ja(t.remoteStore,o)}),await i,await TS(t,r),function(o){const a=H(o);a.Fa.forEach((l,c)=>{Ja(a.remoteStore,c)}),a.Ma.mr(),a.Fa=new Map,a.va=new He(G.comparator)}(t),t.La=!1,await J_(t.remoteStore,!1)}}async function TS(n,e,t){const r=H(n),i=[],s=[];for(const o of e){let a;const l=r.Da.get(o);if(l&&l.length!==0){a=await Qa(r.localStore,sn(l[0]));for(const c of l){const h=r.ba.get(c),d=await Kq(r,h);d.snapshot&&s.push(d.snapshot)}}else{const c=await ab(r.localStore,o);a=await Qa(r.localStore,c),await bw(r,Rb(c),o,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(s),i}function Rb(n){return d1(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Xq(n){return function(t){return H(H(t).persistence).Bi()}(H(n).localStore)}async function Zq(n,e,t,r){const i=H(n);if(i.La)return void z("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=await lb(i.localStore,p1(s[0])),a=th.createSynthesizedRemoteEventForCurrentChange(e,t==="current",pt.EMPTY_BYTE_STRING);await di(i,o,a);break}case"rejected":await Ya(i.localStore,e,!0),Za(i,e,r);break;default:Y()}}async function e$(n,e,t){const r=bp(n);if(r.La){for(const i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){z("SyncEngine","Adding an already active target "+i);continue}const s=await ab(r.localStore,i),o=await Qa(r.localStore,s);await bw(r,Rb(s),o.targetId,!1,o.resumeToken),kp(r.remoteStore,o)}for(const i of t)r.Da.has(i)&&await Ya(r.localStore,i,!1).then(()=>{Ja(r.remoteStore,i),Za(r,i)}).catch(ds)}}function bp(n){const e=H(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Tb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jq.bind(null,e),e.Sa.h_=kq.bind(null,e.eventManager),e.Sa.ka=bq.bind(null,e.eventManager),e}function Ow(n){const e=H(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qq.bind(null,e),e}function t$(n,e,t){const r=H(n);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(g,y){const S=H(g),C=st(y.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",I=>S.$r.getBundleMetadata(I,y.id)).then(I=>!!I&&I.createTime.compareTo(C)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(yb(l));const c=new xq(l,s.localStore,o.serializer);let h=await o.qa();for(;h;){const p=await c._a(h);p&&a._updateProgress(p),h=await o.qa()}const d=await c.complete();return await di(s,d.ca,void 0),await function(g,y){const S=H(g);return S.persistence.runTransaction("Save bundle","readwrite",C=>S.$r.saveBundleMetadata(C,y))}(s.localStore,l),a._completeWith(d.progress),Promise.resolve(d.ua)}catch(l){return pr("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class ey{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=rh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return rb(this.persistence,new nb,e.initialUser,this.serializer)}createPersistence(e){return new tb(Pp.Hr,this.serializer)}createSharedClientState(e){return new cb}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Ab extends ey{constructor(e,t,r){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Qa.initialize(this,e),await Ow(this.Qa.syncEngine),await yl(this.Qa.remoteStore),await this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return rb(this.persistence,new nb,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new Bz(r,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new Tj(t,this.persistence);return new Ij(e.asyncQueue,r)}createPersistence(e){const t=yw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new _w(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,hb(),Dd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new cb}}class n$ extends Ab{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Qa.syncEngine;this.sharedClientState instanceof lg&&(this.sharedClientState.syncEngine={Zs:Yq.bind(null,t),Xs:Zq.bind(null,t),eo:e$.bind(null,t),Bi:Xq.bind(null,t),Ys:Qq.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi(async r=>{await Jq(this.Qa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const t=hb();if(!lg.D(t))throw new j(O.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=yw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new lg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Lw{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>IS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Gq.bind(null,this.syncEngine),await J_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Pq}()}createDatastore(e){const t=rh(e.databaseInfo.databaseId),r=function(s){return new hq(s)}(e.databaseInfo);return function(s,o,a,l){return new pq(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,a){return new gq(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>IS(this.syncEngine,t,0),function(){return _S.D()?new _S:new lq}())}createSyncEngine(e,t){return function(i,s,o,a,l,c,h){const d=new Lq(i,s,o,a,l,c);return h&&(d.La=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(r){const i=H(r);z("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await _l(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):it("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r${constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new Tt,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}async getMetadata(){return this.metadata.promise}async qa(){return await this.getMetadata(),this.Ga()}async Ga(){const e=await this.za();if(e===null)return null;const t=this.Wa.decode(e),r=Number(t);isNaN(r)&&this.ja(`length string (${t}) is not valid number`);const i=await this.Ha(r);return new Nq(JSON.parse(i),e.length+r)}Ja(){return this.buffer.findIndex(e=>e===123)}async za(){for(;this.Ja()<0&&!await this.Ya(););if(this.buffer.length===0)return null;const e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ha(e){for(;this.buffer.length<e;)await this.Ya()&&this.ja("Reached the end of bundle when more is expected.");const t=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ya(){const e=await this.Ua.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i${constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new j(O.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(i,s){const o=H(i),a={documents:s.map(d=>Pc(o.serializer,d))},l=await o.xo("BatchGetDocuments",o.serializer.databaseId,ue.emptyPath(),a,s.length),c=new Map;l.forEach(d=>{const p=Ez(o.serializer,d);c.set(p.key.toString(),p)});const h=[];return s.forEach(d=>{const p=c.get(d.toString());Z(!!p),h.push(p)}),h}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new gl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const i=G.fromPath(r);this.mutations.push(new aw(i,this.precondition(i)))}),await async function(r,i){const s=H(r),o={writes:i.map(a=>kc(s.serializer,a))};await s.Co("Commit",s.serializer.databaseId,ue.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Y();t=ee.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new j(O.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ee.min())?Ue.exists(!1):Ue.updateTime(t):Ue.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ee.min()))throw new j(O.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ue.updateTime(t)}return Ue.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s${constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Za=r.maxAttempts,this.Yo=new Ew(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(async()=>{const e=new i$(this.datastore),t=this.tu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.nu(i)}))}).catch(r=>{this.nu(r)})})}tu(e){try{const t=this.updateFunction(e);return!Yc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!P1(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o${constructor(e,t,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=yt.UNAUTHENTICATED,this.clientId=zk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{z("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(z("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new j(O.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=wl(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Od(n,e){n.asyncQueue.verifyOperationInProgress(),z("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await ib(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function ty(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Vw(n);z("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>yS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>yS(e.remoteStore,i)),n._onlineComponents=e}function Cb(n){return n.name==="FirebaseError"?n.code===O.FAILED_PRECONDITION||n.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}async function Vw(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){z("FirestoreClient","Using user provided OfflineComponentProvider");try{await Od(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!Cb(t))throw t;pr("Error using user provided cache. Falling back to memory cache: "+t),await Od(n,new ey)}}else z("FirestoreClient","Using default OfflineComponentProvider"),await Od(n,new ey);return n._offlineComponents}async function xp(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(z("FirestoreClient","Using user provided OnlineComponentProvider"),await ty(n,n._uninitializedComponentsProvider._online)):(z("FirestoreClient","Using default OnlineComponentProvider"),await ty(n,new Lw))),n._onlineComponents}function Pb(n){return Vw(n).then(e=>e.persistence)}function Mw(n){return Vw(n).then(e=>e.localStore)}function kb(n){return xp(n).then(e=>e.remoteStore)}function Fw(n){return xp(n).then(e=>e.syncEngine)}function a$(n){return xp(n).then(e=>e.datastore)}async function el(n){const e=await xp(n),t=e.eventManager;return t.onListen=Vq.bind(null,e.syncEngine),t.onUnlisten=Fq.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Mq.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Uq.bind(null,e.syncEngine),t}function l$(n){return n.asyncQueue.enqueue(async()=>{const e=await Pb(n),t=await kb(n);return e.setNetworkEnabled(!0),function(i){const s=H(i);return s.M_.delete(0),ih(s)}(t)})}function u$(n){return n.asyncQueue.enqueue(async()=>{const e=await Pb(n),t=await kb(n);return e.setNetworkEnabled(!1),async function(i){const s=H(i);s.M_.add(0),await _l(s),s.N_.set("Offline")}(t)})}function c$(n,e){const t=new Tt;return n.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(c,h){const d=H(c);return d.persistence.runTransaction("read document","readonly",p=>d.localDocuments.getDocument(p,h))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new j(O.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=wl(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await Mw(n),e,t)),t.promise}function bb(n,e,t={}){const r=new Tt;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new Np({next:p=>{o.enqueueAndForget(()=>Cw(s,d));const g=p.docs.has(a);!g&&p.fromCache?c.reject(new j(O.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&l&&l.source==="server"?c.reject(new j(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new kw(pl(a.path),h,{includeMetadataChanges:!0,ra:!0});return Aw(s,d)}(await el(n),n.asyncQueue,e,t,r)),r.promise}function h$(n,e){const t=new Tt;return n.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await Af(i,s,!0),l=new Eb(s,a.hs),c=l.da(a.documents),h=l.applyChanges(c,!1);o.resolve(h.snapshot)}catch(a){const l=wl(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await Mw(n),e,t)),t.promise}function Nb(n,e,t={}){const r=new Tt;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new Np({next:p=>{o.enqueueAndForget(()=>Cw(s,d)),p.fromCache&&l.source==="server"?c.reject(new j(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new kw(a,h,{includeMetadataChanges:!0,ra:!0});return Aw(s,d)}(await el(n),n.asyncQueue,e,t,r)),r.promise}function d$(n,e){const t=new Np(e);return n.asyncQueue.enqueueAndForget(async()=>function(i,s){H(i).z_.add(s),s.next()}(await el(n),t)),()=>{t.$a(),n.asyncQueue.enqueueAndForget(async()=>function(i,s){H(i).z_.delete(s)}(await el(n),t))}}function f$(n,e,t,r){const i=function(o,a){let l;return l=typeof o=="string"?b1().encode(o):o,function(h,d){return new r$(h,d)}(function(h,d){if(h instanceof Uint8Array)return SS(h,d);if(h instanceof ArrayBuffer)return SS(new Uint8Array(h),d);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(t,rh(e));n.asyncQueue.enqueueAndForget(async()=>{t$(await Fw(n),i,r)})}function p$(n,e){return n.asyncQueue.enqueue(async()=>function(r,i){const s=H(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(await Mw(n),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(n,e,t){if(!t)throw new j(O.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Db(n,e,t,r){if(e===!0&&r===!0)throw new j(O.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function AS(n){if(!G.isDocumentKey(n))throw new j(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function CS(n){if(G.isDocumentKey(n))throw new j(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Dp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Y()}function _e(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new j(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Dp(n);throw new j(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Ob(n,e){if(e<=0)throw new j(O.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new j(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new j(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Db("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xb((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new j(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new j(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new j(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sh{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new PS({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new j(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new j(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new PS(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new hj;switch(r.type){case"firstParty":return new mj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new j(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=RS.get(t);r&&(z("ComponentProvider","Removing Datastore"),RS.delete(t),r.terminate())}(this),Promise.resolve()}}function Lb(n,e,t,r={}){var i;const s=(n=_e(n,sh))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&pr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=yt.MOCK_USER;else{a=mP(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new j(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new yt(c)}n._authCredentials=new dj(new jk(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let on=class Vb{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Vb(this.firestore,e,this._query)}},We=class Mb{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mb(this.firestore,e,this._key)}},Gi=class Fb extends on{constructor(e,t,r){super(e,t,pl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new We(this.firestore,null,new G(e))}withConverter(e){return new Fb(this.firestore,e,this._path)}};function Ub(n,e,...t){if(n=X(n),Uw("collection","path",e),n instanceof sh){const r=ue.fromString(e,...t);return CS(r),new Gi(n,null,r)}{if(!(n instanceof We||n instanceof Gi))throw new j(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ue.fromString(e,...t));return CS(r),new Gi(n.firestore,null,r)}}function m$(n,e){if(n=_e(n,sh),Uw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new j(O.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new on(n,null,function(r){return new ci(ue.emptyPath(),r)}(e))}function Gs(n,e,...t){if(n=X(n),arguments.length===1&&(e=zk.newId()),Uw("doc","path",e),n instanceof sh){const r=ue.fromString(e,...t);return AS(r),new We(n,null,new G(r))}{if(!(n instanceof We||n instanceof Gi))throw new j(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ue.fromString(e,...t));return AS(r),new We(n.firestore,n instanceof Gi?n.converter:null,new G(r))}}function Bb(n,e){return n=X(n),e=X(e),(n instanceof We||n instanceof Gi)&&(e instanceof We||e instanceof Gi)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function jb(n,e){return n=X(n),e=X(e),n instanceof on&&e instanceof on&&n.firestore===e.firestore&&Xc(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g${constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Ew(this,"async_queue_retry"),this.hu=()=>{const t=Dd();t&&z("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};const e=Dd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=Dd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const t=new Tt;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!fs(e))throw e;z("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(e){const t=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw it("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=t,t}enqueueAfterDelay(e,t,r){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const i=Rw.createAndSchedule(this,e,t,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Y()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this._u)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function ny(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}class _${constructor(){this._progressObserver={},this._taskCompletionResolver=new Tt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y$=-1;let et=class extends sh{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=function(){return new g$}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||zb(this),this._firestoreClient.terminate()}};function cg(n,e){const t=Nv(),r="(default)",i=qc(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=SM("firestore");s&&Lb(i,...s)}return i}function At(n){return n._firestoreClient||zb(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function zb(n){var e,t,r;const i=n._freezeSettings(),s=function(a,l,c,h){return new $j(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,xb(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new o$(n._authCredentials,n._appCheckCredentials,n._queue,s),!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function v$(n,e){$b(n=_e(n,et));const t=At(n);if(t._uninitializedComponentsProvider)throw new j(O.FAILED_PRECONDITION,"SDK cache is already specified.");pr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Lw;return qb(t,i,new Ab(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function w$(n){$b(n=_e(n,et));const e=At(n);if(e._uninitializedComponentsProvider)throw new j(O.FAILED_PRECONDITION,"SDK cache is already specified.");pr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Lw;return qb(e,r,new n$(r,t.cacheSizeBytes))}function qb(n,e,t){const r=new Tt;return n.asyncQueue.enqueue(async()=>{try{await Od(n,t),await ty(n,e),r.resolve()}catch(i){const s=i;if(!Cb(s))throw s;pr("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}}).then(()=>r.promise)}function E$(n){if(n._initialized&&!n._terminated)throw new j(O.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Tt;return n._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!br.D())return Promise.resolve();const i=r+"main";await br.delete(i)}(yw(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function I$(n){return function(t){const r=new Tt;return t.asyncQueue.enqueueAndForget(async()=>$q(await Fw(t),r)),r.promise}(At(n=_e(n,et)))}function T$(n){return l$(At(n=_e(n,et)))}function S$(n){return u$(At(n=_e(n,et)))}function R$(n,e){const t=At(n=_e(n,et)),r=new _$;return f$(t,n._databaseId,e,r),r}function A$(n,e){return p$(At(n=_e(n,et)),e).then(t=>t?new on(n,null,t.query):null)}function $b(n){if(n._initialized||n._terminated)throw new j(O.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vr(pt.fromBase64String(e))}catch(t){throw new j(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vr(pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ss=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new j(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Co=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new j(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new j(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C$=/^__.*__$/;class P${constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new hi(e,this.data,this.fieldMask,t,this.fieldTransforms):new ml(e,this.data,t,this.fieldTransforms)}}class Wb{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new hi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Gb(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}class Lp{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new Lp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return bf(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(Gb(this.fu)&&C$.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class k${constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||rh(e)}Fu(e,t,r,i=!1){return new Lp({fu:e,methodName:t,vu:r,path:Fe.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Po(n){const e=n._freezeSettings(),t=rh(n._databaseId);return new k$(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Vp(n,e,t,r,i,s={}){const o=n.Fu(s.merge||s.mergeFields?2:0,e,t,i);Gw("Data must be an object, but it was:",o,r);const a=Qb(r,o);let l,c;if(s.merge)l=new mn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const p=ry(e,d,t);if(!o.contains(p))throw new j(O.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Jb(h,p)||h.push(p)}l=new mn(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new P$(new Nt(a),l,c)}class oh extends Co{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof oh}}function Hb(n,e,t){return new Lp({fu:3,vu:e.settings.vu,methodName:n._methodName,yu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Bw extends Co{_toFieldTransform(e){return new eh(e.path,new Ga)}isEqual(e){return e instanceof Bw}}class jw extends Co{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=Hb(this,e,!0),r=this.Mu.map(s=>ko(s,t)),i=new oo(r);return new eh(e.path,i)}isEqual(e){return e instanceof jw&&Ma(this.Mu,e.Mu)}}class zw extends Co{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=Hb(this,e,!0),r=this.Mu.map(s=>ko(s,t)),i=new ao(r);return new eh(e.path,i)}isEqual(e){return e instanceof zw&&Ma(this.Mu,e.Mu)}}class qw extends Co{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new Ha(e.serializer,E1(e.serializer,this.xu));return new eh(e.path,t)}isEqual(e){return e instanceof qw&&this.xu===e.xu}}function $w(n,e,t,r){const i=n.Fu(1,e,t);Gw("Data must be an object, but it was:",i,r);const s=[],o=Nt.empty();Ao(r,(l,c)=>{const h=Hw(e,l,t);c=X(c);const d=i.Su(h);if(c instanceof oh)s.push(h);else{const p=ko(c,d);p!=null&&(s.push(h),o.set(h,p))}});const a=new mn(s);return new Wb(o,a,i.fieldTransforms)}function Ww(n,e,t,r,i,s){const o=n.Fu(1,e,t),a=[ry(e,r,t)],l=[i];if(s.length%2!=0)throw new j(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(ry(e,s[p])),l.push(s[p+1]);const c=[],h=Nt.empty();for(let p=a.length-1;p>=0;--p)if(!Jb(c,a[p])){const g=a[p];let y=l[p];y=X(y);const S=o.Su(g);if(y instanceof oh)c.push(g);else{const C=ko(y,S);C!=null&&(c.push(g),h.set(g,C))}}const d=new mn(c);return new Wb(h,d,o.fieldTransforms)}function Kb(n,e,t,r=!1){return ko(t,n.Fu(r?4:3,e))}function ko(n,e){if(Yb(n=X(n)))return Gw("Unsupported field value:",e,n),Qb(n,e);if(n instanceof Co)return function(r,i){if(!Gb(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=ko(a,i.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=X(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return E1(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Be.fromDate(r);return{timestampValue:Ka(i.serializer,s)}}if(r instanceof Be){const s=new Be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ka(i.serializer,s)}}if(r instanceof Op)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vr)return{bytesValue:D1(i.serializer,r._byteString)};if(r instanceof We){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:dw(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Dp(r)}`)}(n,e)}function Qb(n,e){const t={};return t1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ao(n,(r,i)=>{const s=ko(i,e.pu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function Yb(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Be||n instanceof Op||n instanceof Vr||n instanceof We||n instanceof Co)}function Gw(n,e,t){if(!Yb(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=Dp(t);throw r==="an object"?e.Du(n+" a custom object"):e.Du(n+" "+r)}}function ry(n,e,t){if((e=X(e))instanceof ss)return e._internalPath;if(typeof e=="string")return Hw(n,e);throw bf("Field path arguments must be of type string or ",n,!1,void 0,t)}const b$=new RegExp("[~\\*/\\[\\]]");function Hw(n,e,t){if(e.search(b$)>=0)throw bf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ss(...e.split("."))._internalPath}catch{throw bf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function bf(n,e,t,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new j(O.INVALID_ARGUMENT,a+n+l)}function Jb(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new We(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new N$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Mp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class N$ extends bc{data(){return super.data()}}function Mp(n,e){return typeof e=="string"?Hw(n,e):e instanceof ss?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new j(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kw{}class ah extends Kw{}function Ii(n,e,...t){let r=[];e instanceof Kw&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof Qw).length,a=s.filter(l=>l instanceof Fp).length;if(o>1||o>0&&a>0)throw new j(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Fp extends ah{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Fp(e,t,r)}_apply(e){const t=this._parse(e);return eN(e._query,t),new on(e.firestore,e.converter,z_(e._query,t))}_parse(e){const t=Po(e.firestore);return function(s,o,a,l,c,h,d){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new j(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){bS(d,h);const g=[];for(const y of d)g.push(kS(l,s,y));p={arrayValue:{values:g}}}else p=kS(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||bS(d,h),p=Kb(a,o,d,h==="in"||h==="not-in");return ce.create(c,h,p)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function x$(n,e,t){const r=e,i=Mp("where",n);return Fp._create(i,r,t)}class Qw extends Kw{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Qw(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ee.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)eN(o,l),o=z_(o,l)}(e._query,t),new on(e.firestore,e.converter,z_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Yw extends ah{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Yw(e,t)}_apply(e){const t=function(i,s,o){if(i.startAt!==null)throw new j(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new j(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Cc(s,o)}(e._query,this._field,this._direction);return new on(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ci(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function D$(n,e="asc"){const t=e,r=Mp("orderBy",n);return Yw._create(r,t)}class Up extends ah{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Up(e,t,r)}_apply(e){return new on(e.firestore,e.converter,If(e._query,this._limit,this._limitType))}}function O$(n){return Ob("limit",n),Up._create("limit",n,"F")}function L$(n){return Ob("limitToLast",n),Up._create("limitToLast",n,"L")}class Bp extends ah{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Bp(e,t,r)}_apply(e){const t=Zb(e,this.type,this._docOrFields,this._inclusive);return new on(e.firestore,e.converter,function(i,s){return new ci(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,t))}}function V$(...n){return Bp._create("startAt",n,!0)}function M$(...n){return Bp._create("startAfter",n,!1)}class jp extends ah{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new jp(e,t,r)}_apply(e){const t=Zb(e,this.type,this._docOrFields,this._inclusive);return new on(e.firestore,e.converter,function(i,s){return new ci(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,t))}}function F$(...n){return jp._create("endBefore",n,!1)}function U$(...n){return jp._create("endAt",n,!0)}function Zb(n,e,t,r){if(t[0]=X(t[0]),t[0]instanceof bc)return function(s,o,a,l,c){if(!l)throw new j(O.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const d of Sa(s))if(d.field.isKeyField())h.push(io(o,l.key));else{const p=l.data.field(d.field);if(Tp(p))throw new j(O.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const g=d.field.canonicalString();throw new j(O.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}h.push(p)}return new rs(h,c)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Po(n.firestore);return function(o,a,l,c,h,d){const p=o.explicitOrderBy;if(h.length>p.length)throw new j(O.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const g=[];for(let y=0;y<h.length;y++){const S=h[y];if(p[y].field.isKeyField()){if(typeof S!="string")throw new j(O.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof S}`);if(!sw(o)&&S.indexOf("/")!==-1)throw new j(O.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${S}' contains a slash.`);const C=o.path.child(ue.fromString(S));if(!G.isDocumentKey(C))throw new j(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);const I=new G(C);g.push(io(a,I))}else{const C=Kb(l,c,S);g.push(C)}}return new rs(g,d)}(n._query,n.firestore._databaseId,i,e,t,r)}}function kS(n,e,t){if(typeof(t=X(t))=="string"){if(t==="")throw new j(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sw(e)&&t.indexOf("/")!==-1)throw new j(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ue.fromString(t));if(!G.isDocumentKey(r))throw new j(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return io(n,new G(r))}if(t instanceof We)return io(n,t._key);throw new j(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dp(t)}.`)}function bS(n,e){if(!Array.isArray(n)||n.length===0)throw new j(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function eN(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new j(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new j(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Jw{convertValue(e,t="none"){switch(ro(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Y()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ao(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new Op(Je(e.latitude),Je(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=rw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Sc(e));default:return null}}convertTimestamp(e){const t=si(e);return new Be(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ue.fromString(e);Z($1(r));const i=new ts(r.get(1),r.get(3)),s=new G(r.popFirst(5));return i.isEqual(t)||it(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class B$ extends Jw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new We(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let oi=class extends bc{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ju(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Mp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},ju=class extends oi{data(e={}){return super.data(e)}},os=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Fs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ju(this._firestore,this._userDataWriter,r.key,r,new Fs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new j(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new ju(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new ju(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:j$(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function j$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}function tN(n,e){return n instanceof oi&&e instanceof oi?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof os&&e instanceof os&&n._firestore===e._firestore&&jb(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(n){n=_e(n,We);const e=_e(n.firestore,et);return bb(At(e),n._key).then(t=>Xw(e,n,t))}class bo extends Jw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new We(this.firestore,null,t)}}function z$(n){n=_e(n,We);const e=_e(n.firestore,et),t=At(e),r=new bo(e);return c$(t,n._key).then(i=>new oi(e,r,n._key,i,new Fs(i!==null&&i.hasLocalMutations,!0),n.converter))}function q$(n){n=_e(n,We);const e=_e(n.firestore,et);return bb(At(e),n._key,{source:"server"}).then(t=>Xw(e,n,t))}function $$(n){n=_e(n,on);const e=_e(n.firestore,et),t=At(e),r=new bo(e);return Xb(n._query),Nb(t,n._query).then(i=>new os(e,r,n,i))}function W$(n){n=_e(n,on);const e=_e(n.firestore,et),t=At(e),r=new bo(e);return h$(t,n._query).then(i=>new os(e,r,n,i))}function G$(n){n=_e(n,on);const e=_e(n.firestore,et),t=At(e),r=new bo(e);return Nb(t,n._query,{source:"server"}).then(i=>new os(e,r,n,i))}function Nf(n,e,t){n=_e(n,We);const r=_e(n.firestore,et),i=zp(n.converter,e,t);return lh(r,[Vp(Po(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ue.none())])}function NS(n,e,t,...r){n=_e(n,We);const i=_e(n.firestore,et),s=Po(i);let o;return o=typeof(e=X(e))=="string"||e instanceof ss?Ww(s,"updateDoc",n._key,e,t,r):$w(s,"updateDoc",n._key,e),lh(i,[o.toMutation(n._key,Ue.exists(!0))])}function H$(n){return lh(_e(n.firestore,et),[new gl(n._key,Ue.none())])}function K$(n,e){const t=_e(n.firestore,et),r=Gs(n),i=zp(n.converter,e);return lh(t,[Vp(Po(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ue.exists(!1))]).then(()=>r)}function rN(n,...e){var t,r,i;n=X(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||ny(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(ny(e[o])){const d=e[o];e[o]=(t=d.next)===null||t===void 0?void 0:t.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,c,h;if(n instanceof We)c=_e(n.firestore,et),h=pl(n._key.path),l={next:d=>{e[o]&&e[o](Xw(c,n,d))},error:e[o+1],complete:e[o+2]};else{const d=_e(n,on);c=_e(d.firestore,et),h=d._query;const p=new bo(c);l={next:g=>{e[o]&&e[o](new os(c,p,d,g))},error:e[o+1],complete:e[o+2]},Xb(n._query)}return function(p,g,y,S){const C=new Np(S),I=new kw(g,C,y);return p.asyncQueue.enqueueAndForget(async()=>Aw(await el(p),I)),()=>{C.$a(),p.asyncQueue.enqueueAndForget(async()=>Cw(await el(p),I))}}(At(c),h,a,l)}function Q$(n,e){return d$(At(n=_e(n,et)),ny(e)?e:{next:e})}function lh(n,e){return function(r,i){const s=new Tt;return r.asyncQueue.enqueueAndForget(async()=>Bq(await Fw(r),i,s)),s.promise}(At(n),e)}function Xw(n,e,t){const r=t.docs.get(e._key),i=new bo(n);return new oi(n,i,e._key,r,new Fs(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y$={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let J$=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Po(e)}set(e,t,r){this._verifyNotCommitted();const i=ki(e,this._firestore),s=zp(i.converter,t,r),o=Vp(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Ue.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=ki(e,this._firestore);let o;return o=typeof(t=X(t))=="string"||t instanceof ss?Ww(this._dataReader,"WriteBatch.update",s._key,t,r,i):$w(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Ue.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ki(e,this._firestore);return this._mutations=this._mutations.concat(new gl(t._key,Ue.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new j(O.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function ki(n,e){if((n=X(n)).firestore!==e)throw new j(O.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let X$=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Po(t)}get(t){const r=ki(t,this._firestore),i=new B$(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return Y();const o=s[0];if(o.isFoundDocument())return new bc(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new bc(this._firestore,i,r._key,null,r.converter);throw Y()})}set(t,r,i){const s=ki(t,this._firestore),o=zp(s.converter,r,i),a=Vp(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=ki(t,this._firestore);let a;return a=typeof(r=X(r))=="string"||r instanceof ss?Ww(this._dataReader,"Transaction.update",o._key,r,i,s):$w(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=ki(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ki(e,this._firestore),r=new bo(this._firestore);return super.get(e).then(i=>new oi(this._firestore,r,t._key,i._document,new Fs(!1,!1),t.converter))}};function Z$(n,e,t){n=_e(n,et);const r=Object.assign(Object.assign({},Y$),t);return function(s){if(s.maxAttempts<1)throw new j(O.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new Tt;return s.asyncQueue.enqueueAndForget(async()=>{const c=await a$(s);new s$(s.asyncQueue,c,a,o,l).Xa()}),l.promise}(At(n),i=>e(new X$(n,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e3(){return new oh("deleteField")}function t3(){return new Bw("serverTimestamp")}function n3(...n){return new jw("arrayUnion",n)}function r3(...n){return new zw("arrayRemove",n)}function i3(n){return new qw("increment",n)}(function(e,t=!0){(function(i){fl=i})(Mr),Dr(new bn("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new et(new fj(r.getProvider("auth-internal")),new _j(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new j(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ts(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),nn(R0,"4.6.3",e),nn(R0,"4.6.3","esm2017")})();const s3="@firebase/firestore-compat",o3="0.3.32";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new j("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(){if(typeof Uint8Array>"u")throw new j("unimplemented","Uint8Arrays are not available in this environment.")}function DS(){if(!zj())throw new j("unimplemented","Blobs are unavailable in Firestore in this environment.")}let iN=class iy{constructor(e){this._delegate=e}static fromBase64String(e){return DS(),new iy(Vr.fromBase64String(e))}static fromUint8Array(e){return xS(),new iy(Vr.fromUint8Array(e))}toBase64(){return DS(),this._delegate.toBase64()}toUint8Array(){return xS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(n){return a3(n,["next","error","complete"])}function a3(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{enableIndexedDbPersistence(e,t){return v$(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return w$(e._delegate)}clearIndexedDbPersistence(e){return E$(e._delegate)}}class sN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ts||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&pr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){Lb(this._delegate,e,t,r)}enableNetwork(){return T$(this._delegate)}disableNetwork(){return S$(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Db("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return I$(this._delegate)}onSnapshotsInSync(e){return Q$(this._delegate,e)}get app(){if(!this._appCompat)throw new j("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new tl(this,Ub(this._delegate,e))}catch(t){throw Zt(t,"collection()","Firestore.collection()")}}doc(e){try{return new Fn(this,Gs(this._delegate,e))}catch(t){throw Zt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Xt(this,m$(this._delegate,e))}catch(t){throw Zt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Z$(this._delegate,t=>e(new oN(this,t)))}batch(){return At(this._delegate),new aN(new J$(this._delegate,e=>lh(this._delegate,e)))}loadBundle(e){return R$(this._delegate,e)}namedQuery(e){return A$(this._delegate,e).then(t=>t?new Xt(this,t):null)}}class qp extends Jw{constructor(e){super(),this.firestore=e}convertBytes(e){return new iN(new Vr(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Fn.forKey(t,this.firestore,null)}}function u3(n){uj(n)}class oN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new qp(e)}get(e){const t=Us(e);return this._delegate.get(t).then(r=>new Nc(this._firestore,new oi(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Us(e);return r?(Zw("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Us(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Us(e);return this._delegate.delete(t),this}}class aN{constructor(e){this._delegate=e}set(e,t,r){const i=Us(e);return r?(Zw("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Us(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Us(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ho{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new ju(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new xc(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=ho.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new ho(e,new qp(e),t),i.set(t,s)),s}}ho.INSTANCES=new WeakMap;class Fn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qp(e)}static forPath(e,t,r){if(e.length%2!==0)throw new j("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Fn(t,new We(t._delegate,r,new G(e)))}static forKey(e,t,r){return new Fn(t,new We(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new tl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new tl(this.firestore,Ub(this._delegate,e))}catch(t){throw Zt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=X(e),e instanceof We?Bb(this._delegate,e):!1}set(e,t){t=Zw("DocumentReference.set",t);try{return t?Nf(this._delegate,e,t):Nf(this._delegate,e)}catch(r){throw Zt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?NS(this._delegate,e):NS(this._delegate,e,t,...r)}catch(i){throw Zt(i,"updateDoc()","DocumentReference.update()")}}delete(){return H$(this._delegate)}onSnapshot(...e){const t=lN(e),r=uN(e,i=>new Nc(this.firestore,new oi(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return rN(this._delegate,t,r)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=z$(this._delegate):(e==null?void 0:e.source)==="server"?t=q$(this._delegate):t=nN(this._delegate),t.then(r=>new Nc(this.firestore,new oi(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Fn(this.firestore,e?this._delegate.withConverter(ho.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Zt(n,e,t){return n.message=n.message.replace(e,t),n}function lN(n){for(const e of n)if(typeof e=="object"&&!sy(e))return e;return{}}function uN(n,e){var t,r;let i;return sy(n[0])?i=n[0]:sy(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class Nc{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Fn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return tN(this._delegate,e._delegate)}}class xc extends Nc{data(e){const t=this._delegate.data(e);return this._delegate._converter||cj(t!==void 0),t}}class Xt{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qp(e)}where(e,t,r){try{return new Xt(this.firestore,Ii(this._delegate,x$(e,t,r)))}catch(i){throw Zt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Xt(this.firestore,Ii(this._delegate,D$(e,t)))}catch(r){throw Zt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Xt(this.firestore,Ii(this._delegate,O$(e)))}catch(t){throw Zt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Xt(this.firestore,Ii(this._delegate,L$(e)))}catch(t){throw Zt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Xt(this.firestore,Ii(this._delegate,V$(...e)))}catch(t){throw Zt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Xt(this.firestore,Ii(this._delegate,M$(...e)))}catch(t){throw Zt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Xt(this.firestore,Ii(this._delegate,F$(...e)))}catch(t){throw Zt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Xt(this.firestore,Ii(this._delegate,U$(...e)))}catch(t){throw Zt(t,"endAt()","Query.endAt()")}}isEqual(e){return jb(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=W$(this._delegate):(e==null?void 0:e.source)==="server"?t=G$(this._delegate):t=$$(this._delegate),t.then(r=>new oy(this.firestore,new os(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=lN(e),r=uN(e,i=>new oy(this.firestore,new os(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return rN(this._delegate,t,r)}withConverter(e){return new Xt(this.firestore,e?this._delegate.withConverter(ho.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class c3{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new xc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class oy{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Xt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new xc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new c3(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new xc(this._firestore,r))})}isEqual(e){return tN(this._delegate,e._delegate)}}class tl extends Xt{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Fn(this.firestore,e):null}doc(e){try{return e===void 0?new Fn(this.firestore,Gs(this._delegate)):new Fn(this.firestore,Gs(this._delegate,e))}catch(t){throw Zt(t,"doc()","CollectionReference.doc()")}}add(e){return K$(this._delegate,e).then(t=>new Fn(this.firestore,t))}isEqual(e){return Bb(this._delegate,e._delegate)}withConverter(e){return new tl(this.firestore,e?this._delegate.withConverter(ho.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Us(n){return _e(n,We)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(...e){this._delegate=new ss(...e)}static documentId(){return new eE(Fe.keyField().canonicalString())}isEqual(e){return e=X(e),e instanceof ss?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e){this._delegate=e}static serverTimestamp(){const e=t3();return e._methodName="FieldValue.serverTimestamp",new Ds(e)}static delete(){const e=e3();return e._methodName="FieldValue.delete",new Ds(e)}static arrayUnion(...e){const t=n3(...e);return t._methodName="FieldValue.arrayUnion",new Ds(t)}static arrayRemove(...e){const t=r3(...e);return t._methodName="FieldValue.arrayRemove",new Ds(t)}static increment(e){const t=i3(e);return t._methodName="FieldValue.increment",new Ds(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h3={Firestore:sN,GeoPoint:Op,Timestamp:Be,Blob:iN,Transaction:oN,WriteBatch:aN,DocumentReference:Fn,DocumentSnapshot:Nc,Query:Xt,QueryDocumentSnapshot:xc,QuerySnapshot:oy,CollectionReference:tl,FieldPath:eE,FieldValue:Ds,setLogLevel:u3,CACHE_SIZE_UNLIMITED:y$};function d3(n,e){n.INTERNAL.registerComponent(new bn("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},h3)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f3(n){d3(n,(e,t)=>new sN(e,t,new l3)),n.registerVersion(s3,o3)}f3(Te);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN="firebasestorage.googleapis.com",hN="storageBucket",p3=2*60*1e3,m3=10*60*1e3,g3=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke extends Gt{constructor(e,t,r=0){super(hg(e),`Firebase Storage: ${t} (${hg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ke.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return hg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Le;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Le||(Le={}));function hg(n){return"storage/"+n}function tE(){const n="An unknown error occurred, please check the error payload for server response.";return new Ke(Le.UNKNOWN,n)}function _3(n){return new Ke(Le.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function y3(n){return new Ke(Le.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function v3(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ke(Le.UNAUTHENTICATED,n)}function w3(){return new Ke(Le.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function E3(n){return new Ke(Le.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function dN(){return new Ke(Le.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function fN(){return new Ke(Le.CANCELED,"User canceled the upload/download.")}function I3(n){return new Ke(Le.INVALID_URL,"Invalid URL '"+n+"'.")}function T3(n){return new Ke(Le.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function S3(){return new Ke(Le.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+hN+"' property when initializing the app?")}function pN(){return new Ke(Le.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function R3(){return new Ke(Le.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function A3(){return new Ke(Le.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function C3(n){return new Ke(Le.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Aa(n){return new Ke(Le.INVALID_ARGUMENT,n)}function mN(){return new Ke(Le.APP_DELETED,"The Firebase app was deleted.")}function gN(n){return new Ke(Le.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function zu(n,e){return new Ke(Le.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function au(n){throw new Ke(Le.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=$t.makeFromUrl(e,t)}catch{return new $t(e,"")}if(r.path==="")return r;throw T3(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(k){k.path.charAt(k.path.length-1)==="/"&&(k.path_=k.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(k){k.path_=decodeURIComponent(k.path)}const h="v[A-Za-z0-9_]+",d=t.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",g=new RegExp(`^https?://${d}/${h}/b/${i}/o${p}`,"i"),y={bucket:1,path:3},S=t===cN?"(?:storage.googleapis.com|storage.cloud.google.com)":t,C="([^?#]*)",I=new RegExp(`^https?://${S}/${i}/${C}`,"i"),E=[{regex:a,indices:l,postModify:s},{regex:g,indices:y,postModify:c},{regex:I,indices:{bucket:1,path:2},postModify:c}];for(let k=0;k<E.length;k++){const M=E[k],F=M.regex.exec(e);if(F){const T=F[M.indices.bucket];let v=F[M.indices.path];v||(v=""),r=new $t(T,v),M.postModify(r);break}}if(r==null)throw I3(e);return r}}class P3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k3(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function h(...C){c||(c=!0,e.apply(null,C))}function d(C){i=setTimeout(()=>{i=null,n(g,l())},C)}function p(){s&&clearTimeout(s)}function g(C,...I){if(c){p();return}if(C){p(),h.call(null,C,...I);return}if(l()||o){p(),h.call(null,C,...I);return}r<64&&(r*=2);let E;a===1?(a=2,E=0):E=(r+Math.random())*1e3,d(E)}let y=!1;function S(C){y||(y=!0,p(),!c&&(i!==null?(C||(a=2),clearTimeout(i),d(0)):C||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,S(!0)},t),S}function b3(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N3(n){return n!==void 0}function x3(n){return typeof n=="function"}function D3(n){return typeof n=="object"&&!Array.isArray(n)}function $p(n){return typeof n=="string"||n instanceof String}function OS(n){return nE()&&n instanceof Blob}function nE(){return typeof Blob<"u"}function ay(n,e,t,r){if(r<e)throw Aa(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Aa(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function _N(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hs;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Hs||(Hs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e,t,r,i,s,o,a,l,c,h,d,p=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,y)=>{this.resolve_=g,this.reject_=y,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new rd(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Hs.NO_ERROR,l=s.getStatus();if(!a||yN(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===Hs.ABORT;r(!1,new rd(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new rd(c,s))})},t=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());N3(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=tE();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?mN():fN();o(l)}else{const l=dN();o(l)}};this.canceled_?t(!1,new rd(!1,null,!0)):this.backoffId_=k3(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&b3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class rd{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function L3(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function V3(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function M3(n,e){e&&(n["X-Firebase-GMPID"]=e)}function F3(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function U3(n,e,t,r,i,s,o=!0){const a=_N(n.urlParams),l=n.url+a,c=Object.assign({},n.headers);return M3(c,e),L3(c,t),V3(c,s),F3(c,r),new O3(l,n.method,c,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B3(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function j3(...n){const e=B3();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(nE())return new Blob(n);throw new Ke(Le.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function z3(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q3(n){if(typeof atob>"u")throw C3("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class dg{constructor(e,t){this.data=e,this.contentType=t||null}}function vN(n,e){switch(n){case Un.RAW:return new dg(wN(e));case Un.BASE64:case Un.BASE64URL:return new dg(EN(n,e));case Un.DATA_URL:return new dg(W3(e),G3(e))}throw tE()}function wN(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=n.charCodeAt(++t);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function $3(n){let e;try{e=decodeURIComponent(n)}catch{throw zu(Un.DATA_URL,"Malformed data URL.")}return wN(e)}function EN(n,e){switch(n){case Un.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw zu(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Un.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw zu(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=q3(e)}catch(i){throw i.message.includes("polyfill")?i:zu(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class IN{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw zu(Un.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=H3(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function W3(n){const e=new IN(n);return e.base64?EN(Un.BASE64,e.rest):$3(e.rest)}function G3(n){return new IN(n).contentType}function H3(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,t){let r=0,i="";OS(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(OS(this.data_)){const r=this.data_,i=z3(r,e,t);return i===null?null:new Tr(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Tr(r,!0)}}static getBlob(...e){if(nE()){const t=e.map(r=>r instanceof Tr?r.data_:r);return new Tr(j3.apply(null,t))}else{const t=e.map(o=>$p(o)?vN(Un.RAW,o).data:o.data_);let r=0;t.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Tr(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rE(n){let e;try{e=JSON.parse(n)}catch{return null}return D3(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K3(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Q3(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function TN(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y3(n,e){return e}class Yt{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Y3}}let id=null;function J3(n){return!$p(n)||n.length<2?n:TN(n)}function uh(){if(id)return id;const n=[];n.push(new Yt("bucket")),n.push(new Yt("generation")),n.push(new Yt("metageneration")),n.push(new Yt("name","fullPath",!0));function e(s,o){return J3(o)}const t=new Yt("name");t.xform=e,n.push(t);function r(s,o){return o!==void 0?Number(o):o}const i=new Yt("size");return i.xform=r,n.push(i),n.push(new Yt("timeCreated")),n.push(new Yt("updated")),n.push(new Yt("md5Hash",null,!0)),n.push(new Yt("cacheControl",null,!0)),n.push(new Yt("contentDisposition",null,!0)),n.push(new Yt("contentEncoding",null,!0)),n.push(new Yt("contentLanguage",null,!0)),n.push(new Yt("contentType",null,!0)),n.push(new Yt("metadata","customMetadata",!0)),id=n,id}function X3(n,e){function t(){const r=n.bucket,i=n.fullPath,s=new $t(r,i);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function Z3(n,e,t){const r={};r.type="file";const i=t.length;for(let s=0;s<i;s++){const o=t[s];r[o.local]=o.xform(r,e[o.server])}return X3(r,n),r}function SN(n,e,t){const r=rE(e);return r===null?null:Z3(n,r,t)}function e6(n,e,t,r){const i=rE(e);if(i===null||!$p(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const h=n.bucket,d=n.fullPath,p="/b/"+o(h)+"/o/"+o(d),g=gs(p,t,r),y=_N({alt:"media",token:c});return g+y})[0]}function iE(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="prefixes",VS="items";function t6(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[LS])for(const i of t[LS]){const s=i.replace(/\/$/,""),o=n._makeStorageReference(new $t(e,s));r.prefixes.push(o)}if(t[VS])for(const i of t[VS]){const s=n._makeStorageReference(new $t(e,i.name));r.items.push(s)}return r}function n6(n,e,t){const r=rE(t);return r===null?null:t6(n,e,r)}class fi{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(n){if(!n)throw tE()}function Wp(n,e){function t(r,i){const s=SN(n,i,e);return xr(s!==null),s}return t}function r6(n,e){function t(r,i){const s=n6(n,e,i);return xr(s!==null),s}return t}function i6(n,e){function t(r,i){const s=SN(n,i,e);return xr(s!==null),e6(s,i,n.host,n._protocol)}return t}function El(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=w3():i=v3():t.getStatus()===402?i=y3(n.bucket):t.getStatus()===403?i=E3(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Gp(n){const e=El(n);function t(r,i){let s=e(r,i);return r.getStatus()===404&&(s=_3(n.path)),s.serverResponse=i.serverResponse,s}return t}function RN(n,e,t){const r=e.fullServerUrl(),i=gs(r,n.host,n._protocol),s="GET",o=n.maxOperationRetryTime,a=new fi(i,s,Wp(n,t),o);return a.errorHandler=Gp(e),a}function s6(n,e,t,r,i){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=e.bucketOnlyServerUrl(),a=gs(o,n.host,n._protocol),l="GET",c=n.maxOperationRetryTime,h=new fi(a,l,r6(n,e.bucket),c);return h.urlParams=s,h.errorHandler=El(e),h}function o6(n,e,t){const r=e.fullServerUrl(),i=gs(r,n.host,n._protocol),s="GET",o=n.maxOperationRetryTime,a=new fi(i,s,i6(n,t),o);return a.errorHandler=Gp(e),a}function a6(n,e,t,r){const i=e.fullServerUrl(),s=gs(i,n.host,n._protocol),o="PATCH",a=iE(t,r),l={"Content-Type":"application/json; charset=utf-8"},c=n.maxOperationRetryTime,h=new fi(s,o,Wp(n,r),c);return h.headers=l,h.body=a,h.errorHandler=Gp(e),h}function l6(n,e){const t=e.fullServerUrl(),r=gs(t,n.host,n._protocol),i="DELETE",s=n.maxOperationRetryTime;function o(l,c){}const a=new fi(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=Gp(e),a}function u6(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function AN(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=u6(null,e)),r}function CN(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let E="";for(let k=0;k<2;k++)E=E+Math.random().toString().slice(2);return E}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=AN(e,r,i),h=iE(c,t),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",g=Tr.getBlob(d,r,p);if(g===null)throw pN();const y={name:c.fullPath},S=gs(s,n.host,n._protocol),C="POST",I=n.maxUploadRetryTime,w=new fi(S,C,Wp(n,t),I);return w.urlParams=y,w.headers=o,w.body=g.uploadData(),w.errorHandler=El(e),w}class xf{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function sE(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{xr(!1)}return xr(!!t&&(e||["active"]).indexOf(t)!==-1),t}function c6(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o=AN(e,r,i),a={name:o.fullPath},l=gs(s,n.host,n._protocol),c="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},d=iE(o,t),p=n.maxUploadRetryTime;function g(S){sE(S);let C;try{C=S.getResponseHeader("X-Goog-Upload-URL")}catch{xr(!1)}return xr($p(C)),C}const y=new fi(l,c,g,p);return y.urlParams=a,y.headers=h,y.body=d,y.errorHandler=El(e),y}function h6(n,e,t,r){const i={"X-Goog-Upload-Command":"query"};function s(c){const h=sE(c,["active","final"]);let d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{xr(!1)}d||xr(!1);const p=Number(d);return xr(!isNaN(p)),new xf(p,r.size(),h==="final")}const o="POST",a=n.maxUploadRetryTime,l=new fi(t,o,s,a);return l.headers=i,l.errorHandler=El(e),l}const MS=256*1024;function d6(n,e,t,r,i,s,o,a){const l=new xf(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw R3();const c=l.total-l.current;let h=c;i>0&&(h=Math.min(h,i));const d=l.current,p=d+h;let g="";h===0?g="finalize":c===h?g="upload, finalize":g="upload";const y={"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":`${l.current}`},S=r.slice(d,p);if(S===null)throw pN();function C(k,M){const F=sE(k,["active","final"]),T=l.current+h,v=r.size();let R;return F==="final"?R=Wp(e,s)(k,M):R=null,new xf(T,v,F==="final",R)}const I="POST",w=e.maxUploadRetryTime,E=new fi(t,I,C,w);return E.headers=y,E.body=S.uploadData(),E.progressCallback=a||null,E.errorHandler=El(n),E}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6={STATE_CHANGED:"state_changed"},en={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function fg(n){switch(n){case"running":case"pausing":case"canceling":return en.RUNNING;case"paused":return en.PAUSED;case"success":return en.SUCCESS;case"canceled":return en.CANCELED;case"error":return en.ERROR;default:return en.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(e,t,r){if(x3(e)||t!=null||r!=null)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Go(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class m6{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Hs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Hs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Hs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw au("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw au("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw au("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw au("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw au("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class g6 extends m6{initXhr(){this.xhr_.responseType="text"}}function ir(){return new g6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=uh(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Le.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(yN(i.status,[]))if(s)i=dN();else{this.sleepTime=Math.max(this.sleepTime*2,g3),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Le.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const r=c6(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ir,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=h6(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,ir,t,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=MS*this._chunkMultiplier,t=new xf(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=d6(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,ir,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){MS*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=RN(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,ir,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=CN(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ir,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=fN(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=fg(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new p6(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(fg(this._state)){case en.SUCCESS:Go(this._resolve.bind(null,this.snapshot))();break;case en.CANCELED:case en.ERROR:const t=this._reject;Go(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(fg(this._state)){case en.RUNNING:case en.PAUSED:e.next&&Go(e.next.bind(e,this.snapshot))();break;case en.SUCCESS:e.complete&&Go(e.complete.bind(e))();break;case en.CANCELED:case en.ERROR:e.error&&Go(e.error.bind(e,this._error))();break;default:e.error&&Go(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,t){this._service=e,t instanceof $t?this._location=t:this._location=$t.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new fo(e,t)}get root(){const e=new $t(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return TN(this._location.path)}get storage(){return this._service}get parent(){const e=K3(this._location.path);if(e===null)return null;const t=new $t(this._location.bucket,e);return new fo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw gN(e)}}function _6(n,e,t){n._throwIfRoot("uploadBytes");const r=CN(n.storage,n._location,uh(),new Tr(e,!0),t);return n.storage.makeRequestWithTokens(r,ir).then(i=>({metadata:i,ref:n}))}function y6(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new PN(n,new Tr(e),t)}function v6(n){const e={prefixes:[],items:[]};return kN(n,e).then(()=>e)}async function kN(n,e,t){const i=await bN(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await kN(n,e,i.nextPageToken)}function bN(n,e){e!=null&&typeof e.maxResults=="number"&&ay("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=s6(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,ir)}function w6(n){n._throwIfRoot("getMetadata");const e=RN(n.storage,n._location,uh());return n.storage.makeRequestWithTokens(e,ir)}function E6(n,e){n._throwIfRoot("updateMetadata");const t=a6(n.storage,n._location,e,uh());return n.storage.makeRequestWithTokens(t,ir)}function I6(n){n._throwIfRoot("getDownloadURL");const e=o6(n.storage,n._location,uh());return n.storage.makeRequestWithTokens(e,ir).then(t=>{if(t===null)throw A3();return t})}function T6(n){n._throwIfRoot("deleteObject");const e=l6(n.storage,n._location);return n.storage.makeRequestWithTokens(e,ir)}function NN(n,e){const t=Q3(n._location.path,e),r=new $t(n._location.bucket,t);return new fo(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S6(n){return/^[A-Za-z]+:\/\//.test(n)}function R6(n,e){return new fo(n,e)}function xN(n,e){if(n instanceof oE){const t=n;if(t._bucket==null)throw S3();const r=new fo(t,t._bucket);return e!=null?xN(r,e):r}else return e!==void 0?NN(n,e):n}function A6(n,e){if(e&&S6(e)){if(n instanceof oE)return R6(n,e);throw Aa("To use ref(service, url), the first argument must be a Storage instance.")}else return xN(n,e)}function FS(n,e){const t=e==null?void 0:e[hN];return t==null?null:$t.makeFromBucketSpec(t,n)}function C6(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:mP(i,n.app.options.projectId))}class oE{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=cN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=p3,this._maxUploadRetryTime=m3,this._requests=new Set,i!=null?this._bucket=$t.makeFromBucketSpec(i,this._host):this._bucket=FS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=$t.makeFromBucketSpec(this._url,e):this._bucket=FS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ay("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ay("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new fo(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new P3(mN());{const o=U3(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const US="@firebase/storage",BS="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6="storage";function k6(n,e,t){return n=X(n),_6(n,e,t)}function b6(n,e,t){return n=X(n),y6(n,e,t)}function N6(n){return n=X(n),w6(n)}function x6(n,e){return n=X(n),E6(n,e)}function D6(n,e){return n=X(n),bN(n,e)}function O6(n){return n=X(n),v6(n)}function DN(n){return n=X(n),I6(n)}function L6(n){return n=X(n),T6(n)}function ly(n,e){return n=X(n),A6(n,e)}function V6(n,e){return NN(n,e)}function M6(n,e,t,r={}){C6(n,e,t,r)}function F6(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new oE(t,r,i,e,Mr)}function U6(){Dr(new bn(P6,F6,"PUBLIC").setMultipleInstances(!0)),nn(US,BS,""),nn(US,BS,"esm2017")}U6();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new sd(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new sd(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(typeof t=="function"?s=o=>t(new sd(o,this,this._ref)):s={next:t.next?o=>t.next(new sd(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class zS{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Xr(e,this._service))}get items(){return this._delegate.items.map(e=>new Xr(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=V6(this._delegate,e);return new Xr(t,this.storage)}get root(){return new Xr(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new Xr(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new jS(b6(this._delegate,e,t),this)}putString(e,t=Un.RAW,r){this._throwIfRoot("putString");const i=vN(t,e),s=Object.assign({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new jS(new PN(this._delegate,new Tr(i.data,!0),s),this)}listAll(){return O6(this._delegate).then(e=>new zS(e,this.storage))}list(e){return D6(this._delegate,e||void 0).then(t=>new zS(t,this.storage))}getMetadata(){return N6(this._delegate)}updateMetadata(e){return x6(this._delegate,e)}getDownloadURL(){return DN(this._delegate)}delete(){return this._throwIfRoot("delete"),L6(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw gN(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(qS(e))throw Aa("ref() expected a child path but got a URL, use refFromURL instead.");return new Xr(ly(this._delegate,e),this)}refFromURL(e){if(!qS(e))throw Aa("refFromURL() expected a full URL but got a child path, use ref() instead.");try{$t.makeFromUrl(e,this._delegate.host)}catch{throw Aa("refFromUrl() expected a valid full URL but got an invalid one.")}return new Xr(ly(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){M6(this._delegate,e,t,r)}}function qS(n){return/^[A-Za-z]+:\/\//.test(n)}const B6="@firebase/storage-compat",j6="0.3.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6="storage-compat";function q6(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new ON(t,r)}function $6(n){const e={TaskState:en,TaskEvent:f6,StringFormat:Un,Storage:ON,Reference:Xr};n.INTERNAL.registerComponent(new bn(z6,q6,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion(B6,j6)}$6(Te);const W6={apiKey:"AIzaSyCknnv2K7Zlzh-cxqbAb1lDuoFB79JNvoY",authDomain:"nationsglory-62812.firebaseapp.com",projectId:"nationsglory-62812",storageBucket:"nationsglory-62812.appspot.com",messagingSenderId:"1062049263686",appId:"1:1062049263686:web:42dc7925af2b4f1da69a47",measurementId:"G-156LHMY0NL"};Te.apps.length||Te.initializeApp(W6);const LN=()=>{const n=async()=>{try{await Te.auth().signOut(),console.log("Dconnexion russie !"),window.location.href="/nationglorycomu/"}catch(e){console.error(e.message)}};return U.jsx("div",{children:U.jsx("button",{onClick:n,children:"Se dconnecter"})})},aE=()=>{const[n,e]=B.useState(null),[t,r]=B.useState(!0);return B.useEffect(()=>{const i=Te.auth().onAuthStateChanged(s=>{e(s),r(!1)});return()=>i()},[]),t?U.jsx("div",{children:"Vrification de l'authentification..."}):U.jsx("nav",{children:U.jsxs("ul",{children:[U.jsx("li",{children:U.jsx(Km,{to:"/nationglorycomu/",children:U.jsx("button",{children:"Accueil"})})}),n?U.jsxs(U.Fragment,{children:[U.jsx("li",{children:U.jsx(Km,{to:"/nationglorycomu/Profile",children:U.jsx("button",{children:"Profil"})})}),U.jsx("li",{children:U.jsx(LN,{})})]}):U.jsx("li",{children:U.jsx(Km,{to:"/nationglorycomu/Auth",children:U.jsx("button",{children:"Se connecter"})})})]})})},G6=()=>{const[n,e]=B.useState("");B.useEffect(()=>{const r=Te.auth().onAuthStateChanged(i=>{e(i||null)});return()=>r()},[]);const t=n?n.displayName.split(" ")[0]:"";return U.jsxs("div",{children:[U.jsx(aE,{}),U.jsx("div",{children:U.jsxs("h1",{children:["Welcome to the Home Page! ",t]})})]})},H6=()=>{const[n,e]=B.useState(""),[t,r]=B.useState(""),[i,s]=B.useState(""),[o,a]=B.useState(""),[l,c]=B.useState(""),[h,d]=B.useState(null),[p,g]=B.useState(""),[y,S]=B.useState(!1),[C,I]=B.useState(""),w=async()=>{if(g(""),t!==i){g("Les mots de passe ne correspondent pas.");return}S(!0);try{const k=await Te.auth().createUserWithEmailAndPassword(n,t);if(h){const F=Te.storage().ref().child(`profiles/${k.user.uid}`);await F.put(h);const T=await F.getDownloadURL();await k.user.updateProfile({displayName:`${o} ${l}`,photoURL:T}),await Te.firestore().collection("users").doc(k.user.uid).set({firstName:o,lastName:l,email:n,photoURL:T,pseudong:C}),console.log("Profil utilisateur mis  jour avec succs.")}else await k.user.updateProfile({displayName:`${o} ${l}`}),await Te.firestore().collection("users").doc(k.user.uid).set({firstName:o,lastName:l,email:n,pseudong:C});console.log("Inscription russie !"),window.location.href="/nationglorycomu/"}catch(k){g(k.message),console.error(k.message)}finally{S(!1)}},E=async()=>{S(!0);try{const k=new Te.auth.GoogleAuthProvider,M=await Te.auth().signInWithPopup(k),F=M.user.email,{given_name:T,family_name:v}=M.additionalUserInfo.profile,R=M.user.photoURL||"https://firebasestorage.googleapis.com/v0/b/nationsglory-62812.appspot.com/o/Prendre%20sa%20sant%C3%A9%20en%20main%20n%E2%80%99a%20jamais%20%C3%A9t%C3%A9%20aussi%20simple.jpg?alt=media&token=dc085ed1-9a30-4dc8-92cc-ad7eaa8a840c";await Te.firestore().collection("users").doc(M.user.uid).set({firstName:T,lastName:v,email:F,photoURL:R}),console.log("Inscription avec Google russie !"),window.location.href="/nationglorycomu/"}catch(k){g(k.message),console.error(k.message)}finally{S(!1)}};return U.jsxs("div",{children:[U.jsx("h2",{children:"Inscription"}),p&&U.jsx("p",{style:{color:"red"},children:p}),U.jsx("input",{type:"text",placeholder:"Prnom",value:o,onChange:k=>a(k.target.value)}),U.jsx("input",{type:"text",placeholder:"Nom",value:l,onChange:k=>c(k.target.value)}),U.jsx("input",{type:"email",placeholder:"Adresse email",value:n,onChange:k=>e(k.target.value)}),U.jsx("input",{type:"password",placeholder:"Mot de passe",value:t,onChange:k=>r(k.target.value)}),U.jsx("input",{type:"password",placeholder:"Confirmer le mot de passe",value:i,onChange:k=>s(k.target.value)}),U.jsx("input",{type:"file",accept:"image/*",onChange:k=>d(k.target.files[0])}),U.jsx("input",{type:"text",placeholder:"Pseudong",value:C,onChange:k=>I(k.target.value)}),U.jsx("button",{onClick:w,disabled:y,children:"S'inscrire"}),U.jsx("button",{onClick:E,disabled:y,children:"S'inscrire avec Google"})]})},K6=()=>{const[n,e]=B.useState(""),[t,r]=B.useState(""),[i,s]=B.useState(""),[o,a]=B.useState(!1),l=async()=>{s(""),a(!0);try{await Te.auth().signInWithEmailAndPassword(n,t),console.log("Connexion russie !"),window.location.href="/nationglorycomu/"}catch(h){s(h.message),console.error(h.message)}finally{a(!1)}},c=async()=>{s(""),a(!0);try{const h=new Te.auth.GoogleAuthProvider;await Te.auth().signInWithPopup(h),console.log("Connexion russie avec Google !"),window.location.href="/nationglorycomu/"}catch(h){s(h.message),console.error(h.message)}finally{a(!1)}};return U.jsxs("div",{children:[U.jsx("h2",{children:"Connexion"}),i&&U.jsx("p",{style:{color:"red"},children:i}),U.jsx("input",{type:"email",placeholder:"Adresse email",value:n,onChange:h=>e(h.target.value)}),U.jsx("input",{type:"password",placeholder:"Mot de passe",value:t,onChange:h=>r(h.target.value)}),U.jsx("button",{onClick:l,disabled:o,children:"Se connecter"}),U.jsx("button",{onClick:c,disabled:o,children:"Se connecter avec Google"})]})},Q6=()=>{const[n,e]=B.useState(!0);return U.jsxs("div",{children:[U.jsx(aE,{}),n?U.jsx(K6,{}):U.jsx(H6,{}),U.jsx("button",{onClick:()=>e(!n),children:n?"S'inscrire":"Se connecter"})]})};let od;const Y6=new Uint8Array(16);function J6(){if(!od&&(od=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!od))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return od(Y6)}const Pt=[];for(let n=0;n<256;++n)Pt.push((n+256).toString(16).slice(1));function X6(n,e=0){return Pt[n[e+0]]+Pt[n[e+1]]+Pt[n[e+2]]+Pt[n[e+3]]+"-"+Pt[n[e+4]]+Pt[n[e+5]]+"-"+Pt[n[e+6]]+Pt[n[e+7]]+"-"+Pt[n[e+8]]+Pt[n[e+9]]+"-"+Pt[n[e+10]]+Pt[n[e+11]]+Pt[n[e+12]]+Pt[n[e+13]]+Pt[n[e+14]]+Pt[n[e+15]]}const Z6=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),$S={randomUUID:Z6};function e9(n,e,t){if($S.randomUUID&&!e&&!n)return $S.randomUUID();n=n||{};const r=n.random||(n.rng||J6)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,X6(r)}function VN(n,e){return function(){return n.apply(e,arguments)}}const{toString:t9}=Object.prototype,{getPrototypeOf:lE}=Object,Hp=(n=>e=>{const t=t9.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),mr=n=>(n=n.toLowerCase(),e=>Hp(e)===n),Kp=n=>e=>typeof e===n,{isArray:Il}=Array,Dc=Kp("undefined");function n9(n){return n!==null&&!Dc(n)&&n.constructor!==null&&!Dc(n.constructor)&&qn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const MN=mr("ArrayBuffer");function r9(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&MN(n.buffer),e}const i9=Kp("string"),qn=Kp("function"),FN=Kp("number"),Qp=n=>n!==null&&typeof n=="object",s9=n=>n===!0||n===!1,Ld=n=>{if(Hp(n)!=="object")return!1;const e=lE(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},o9=mr("Date"),a9=mr("File"),l9=mr("Blob"),u9=mr("FileList"),c9=n=>Qp(n)&&qn(n.pipe),h9=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||qn(n.append)&&((e=Hp(n))==="formdata"||e==="object"&&qn(n.toString)&&n.toString()==="[object FormData]"))},d9=mr("URLSearchParams"),[f9,p9,m9,g9]=["ReadableStream","Request","Response","Headers"].map(mr),_9=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ch(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),Il(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{const s=t?Object.getOwnPropertyNames(n):Object.keys(n),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,n[a],a,n)}}function UN(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const BN=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,jN=n=>!Dc(n)&&n!==BN;function uy(){const{caseless:n}=jN(this)&&this||{},e={},t=(r,i)=>{const s=n&&UN(e,i)||i;Ld(e[s])&&Ld(r)?e[s]=uy(e[s],r):Ld(r)?e[s]=uy({},r):Il(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&ch(arguments[r],t);return e}const y9=(n,e,t,{allOwnKeys:r}={})=>(ch(e,(i,s)=>{t&&qn(i)?n[s]=VN(i,t):n[s]=i},{allOwnKeys:r}),n),v9=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),w9=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},E9=(n,e,t,r)=>{let i,s,o;const a={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),s=i.length;s-- >0;)o=i[s],(!r||r(o,n,e))&&!a[o]&&(e[o]=n[o],a[o]=!0);n=t!==!1&&lE(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},I9=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},T9=n=>{if(!n)return null;if(Il(n))return n;let e=n.length;if(!FN(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},S9=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&lE(Uint8Array)),R9=(n,e)=>{const r=(n&&n[Symbol.iterator]).call(n);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(n,s[0],s[1])}},A9=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},C9=mr("HTMLFormElement"),P9=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),WS=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),k9=mr("RegExp"),zN=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};ch(t,(i,s)=>{let o;(o=e(i,s,n))!==!1&&(r[s]=o||i)}),Object.defineProperties(n,r)},b9=n=>{zN(n,(e,t)=>{if(qn(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(qn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},N9=(n,e)=>{const t={},r=i=>{i.forEach(s=>{t[s]=!0})};return Il(n)?r(n):r(String(n).split(e)),t},x9=()=>{},D9=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e,pg="abcdefghijklmnopqrstuvwxyz",GS="0123456789",qN={DIGIT:GS,ALPHA:pg,ALPHA_DIGIT:pg+pg.toUpperCase()+GS},O9=(n=16,e=qN.ALPHA_DIGIT)=>{let t="";const{length:r}=e;for(;n--;)t+=e[Math.random()*r|0];return t};function L9(n){return!!(n&&qn(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const V9=n=>{const e=new Array(10),t=(r,i)=>{if(Qp(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Il(r)?[]:{};return ch(r,(o,a)=>{const l=t(o,i+1);!Dc(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return t(n,0)},M9=mr("AsyncFunction"),F9=n=>n&&(Qp(n)||qn(n))&&qn(n.then)&&qn(n.catch),V={isArray:Il,isArrayBuffer:MN,isBuffer:n9,isFormData:h9,isArrayBufferView:r9,isString:i9,isNumber:FN,isBoolean:s9,isObject:Qp,isPlainObject:Ld,isReadableStream:f9,isRequest:p9,isResponse:m9,isHeaders:g9,isUndefined:Dc,isDate:o9,isFile:a9,isBlob:l9,isRegExp:k9,isFunction:qn,isStream:c9,isURLSearchParams:d9,isTypedArray:S9,isFileList:u9,forEach:ch,merge:uy,extend:y9,trim:_9,stripBOM:v9,inherits:w9,toFlatObject:E9,kindOf:Hp,kindOfTest:mr,endsWith:I9,toArray:T9,forEachEntry:R9,matchAll:A9,isHTMLForm:C9,hasOwnProperty:WS,hasOwnProp:WS,reduceDescriptors:zN,freezeMethods:b9,toObjectSet:N9,toCamelCase:P9,noop:x9,toFiniteNumber:D9,findKey:UN,global:BN,isContextDefined:jN,ALPHABET:qN,generateString:O9,isSpecCompliantForm:L9,toJSONObject:V9,isAsyncFn:M9,isThenable:F9};function se(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i)}V.inherits(se,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:V.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const $N=se.prototype,WN={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{WN[n]={value:n}});Object.defineProperties(se,WN);Object.defineProperty($N,"isAxiosError",{value:!0});se.from=(n,e,t,r,i,s)=>{const o=Object.create($N);return V.toFlatObject(n,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),se.call(o,n.message,e,t,r,i),o.cause=n,o.name=n.name,s&&Object.assign(o,s),o};const U9=null;function cy(n){return V.isPlainObject(n)||V.isArray(n)}function GN(n){return V.endsWith(n,"[]")?n.slice(0,-2):n}function HS(n,e,t){return n?n.concat(e).map(function(i,s){return i=GN(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function B9(n){return V.isArray(n)&&!n.some(cy)}const j9=V.toFlatObject(V,{},null,function(e){return/^is[A-Z]/.test(e)});function Yp(n,e,t){if(!V.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=V.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,C){return!V.isUndefined(C[S])});const r=t.metaTokens,i=t.visitor||h,s=t.dots,o=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&V.isSpecCompliantForm(e);if(!V.isFunction(i))throw new TypeError("visitor must be a function");function c(y){if(y===null)return"";if(V.isDate(y))return y.toISOString();if(!l&&V.isBlob(y))throw new se("Blob is not supported. Use a Buffer instead.");return V.isArrayBuffer(y)||V.isTypedArray(y)?l&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function h(y,S,C){let I=y;if(y&&!C&&typeof y=="object"){if(V.endsWith(S,"{}"))S=r?S:S.slice(0,-2),y=JSON.stringify(y);else if(V.isArray(y)&&B9(y)||(V.isFileList(y)||V.endsWith(S,"[]"))&&(I=V.toArray(y)))return S=GN(S),I.forEach(function(E,k){!(V.isUndefined(E)||E===null)&&e.append(o===!0?HS([S],k,s):o===null?S:S+"[]",c(E))}),!1}return cy(y)?!0:(e.append(HS(C,S,s),c(y)),!1)}const d=[],p=Object.assign(j9,{defaultVisitor:h,convertValue:c,isVisitable:cy});function g(y,S){if(!V.isUndefined(y)){if(d.indexOf(y)!==-1)throw Error("Circular reference detected in "+S.join("."));d.push(y),V.forEach(y,function(I,w){(!(V.isUndefined(I)||I===null)&&i.call(e,I,V.isString(w)?w.trim():w,S,p))===!0&&g(I,S?S.concat(w):[w])}),d.pop()}}if(!V.isObject(n))throw new TypeError("data must be an object");return g(n),e}function KS(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function uE(n,e){this._pairs=[],n&&Yp(n,this,e)}const HN=uE.prototype;HN.append=function(e,t){this._pairs.push([e,t])};HN.toString=function(e){const t=e?function(r){return e.call(this,r,KS)}:KS;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function z9(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function KN(n,e,t){if(!e)return n;const r=t&&t.encode||z9,i=t&&t.serialize;let s;if(i?s=i(e,t):s=V.isURLSearchParams(e)?e.toString():new uE(e,t).toString(r),s){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class QS{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){V.forEach(this.handlers,function(r){r!==null&&e(r)})}}const QN={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},q9=typeof URLSearchParams<"u"?URLSearchParams:uE,$9=typeof FormData<"u"?FormData:null,W9=typeof Blob<"u"?Blob:null,G9={isBrowser:!0,classes:{URLSearchParams:q9,FormData:$9,Blob:W9},protocols:["http","https","file","blob","url","data"]},cE=typeof window<"u"&&typeof document<"u",H9=(n=>cE&&["ReactNative","NativeScript","NS"].indexOf(n)<0)(typeof navigator<"u"&&navigator.product),K9=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Q9=cE&&window.location.href||"http://localhost",Y9=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:cE,hasStandardBrowserEnv:H9,hasStandardBrowserWebWorkerEnv:K9,origin:Q9},Symbol.toStringTag,{value:"Module"})),ur={...Y9,...G9};function J9(n,e){return Yp(n,new ur.classes.URLSearchParams,Object.assign({visitor:function(t,r,i,s){return ur.isNode&&V.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function X9(n){return V.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Z9(n){const e={},t=Object.keys(n);let r;const i=t.length;let s;for(r=0;r<i;r++)s=t[r],e[s]=n[s];return e}function YN(n){function e(t,r,i,s){let o=t[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=t.length;return o=!o&&V.isArray(i)?i.length:o,l?(V.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!V.isObject(i[o]))&&(i[o]=[]),e(t,r,i[o],s)&&V.isArray(i[o])&&(i[o]=Z9(i[o])),!a)}if(V.isFormData(n)&&V.isFunction(n.entries)){const t={};return V.forEachEntry(n,(r,i)=>{e(X9(r),i,t,0)}),t}return null}function eW(n,e,t){if(V.isString(n))try{return(e||JSON.parse)(n),V.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const hh={transitional:QN,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,s=V.isObject(e);if(s&&V.isHTMLForm(e)&&(e=new FormData(e)),V.isFormData(e))return i?JSON.stringify(YN(e)):e;if(V.isArrayBuffer(e)||V.isBuffer(e)||V.isStream(e)||V.isFile(e)||V.isBlob(e)||V.isReadableStream(e))return e;if(V.isArrayBufferView(e))return e.buffer;if(V.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return J9(e,this.formSerializer).toString();if((a=V.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Yp(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),eW(e)):e}],transformResponse:[function(e){const t=this.transitional||hh.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(V.isResponse(e)||V.isReadableStream(e))return e;if(e&&V.isString(e)&&(r&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?se.from(a,se.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ur.classes.FormData,Blob:ur.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};V.forEach(["delete","get","head","post","put","patch"],n=>{hh.headers[n]={}});const tW=V.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),nW=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!t||e[t]&&tW[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},YS=Symbol("internals");function lu(n){return n&&String(n).trim().toLowerCase()}function Vd(n){return n===!1||n==null?n:V.isArray(n)?n.map(Vd):String(n)}function rW(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const iW=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function mg(n,e,t,r,i){if(V.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!V.isString(e)){if(V.isString(r))return e.indexOf(r)!==-1;if(V.isRegExp(r))return r.test(e)}}function sW(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function oW(n,e){const t=V.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class En{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function s(a,l,c){const h=lu(l);if(!h)throw new Error("header name must be a non-empty string");const d=V.findKey(i,h);(!d||i[d]===void 0||c===!0||c===void 0&&i[d]!==!1)&&(i[d||l]=Vd(a))}const o=(a,l)=>V.forEach(a,(c,h)=>s(c,h,l));if(V.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(V.isString(e)&&(e=e.trim())&&!iW(e))o(nW(e),t);else if(V.isHeaders(e))for(const[a,l]of e.entries())s(l,a,r);else e!=null&&s(t,e,r);return this}get(e,t){if(e=lu(e),e){const r=V.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return rW(i);if(V.isFunction(t))return t.call(this,i,r);if(V.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=lu(e),e){const r=V.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||mg(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function s(o){if(o=lu(o),o){const a=V.findKey(r,o);a&&(!t||mg(r,r[a],a,t))&&(delete r[a],i=!0)}}return V.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const s=t[r];(!e||mg(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const t=this,r={};return V.forEach(this,(i,s)=>{const o=V.findKey(r,s);if(o){t[o]=Vd(i),delete t[s];return}const a=e?sW(s):String(s).trim();a!==s&&delete t[s],t[a]=Vd(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return V.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&V.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[YS]=this[YS]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=lu(o);r[a]||(oW(i,o),r[a]=!0)}return V.isArray(e)?e.forEach(s):s(e),this}}En.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);V.reduceDescriptors(En.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});V.freezeMethods(En);function gg(n,e){const t=this||hh,r=e||t,i=En.from(r.headers);let s=r.data;return V.forEach(n,function(a){s=a.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function JN(n){return!!(n&&n.__CANCEL__)}function Tl(n,e,t){se.call(this,n??"canceled",se.ERR_CANCELED,e,t),this.name="CanceledError"}V.inherits(Tl,se,{__CANCEL__:!0});function XN(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new se("Request failed with status code "+t.status,[se.ERR_BAD_REQUEST,se.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function aW(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function lW(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),h=r[s];o||(o=c),t[i]=l,r[i]=c;let d=s,p=0;for(;d!==i;)p+=t[d++],d=d%n;if(i=(i+1)%n,i===s&&(s=(s+1)%n),c-o<e)return;const g=h&&c-h;return g?Math.round(p*1e3/g):void 0}}function uW(n,e){let t=0;const r=1e3/e;let i=null;return function(){const o=this===!0,a=Date.now();if(o||a-t>r)return i&&(clearTimeout(i),i=null),t=a,n.apply(null,arguments);i||(i=setTimeout(()=>(i=null,t=Date.now(),n.apply(null,arguments)),r-(a-t)))}}const Df=(n,e,t=3)=>{let r=0;const i=lW(50,250);return uW(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),h=o<=a;r=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&h?(a-o)/c:void 0,event:s,lengthComputable:a!=null};d[e?"download":"upload"]=!0,n(d)},t)},cW=ur.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let r;function i(s){let o=s;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return r=i(window.location.href),function(o){const a=V.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}(),hW=ur.hasStandardBrowserEnv?{write(n,e,t,r,i,s){const o=[n+"="+encodeURIComponent(e)];V.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),V.isString(r)&&o.push("path="+r),V.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function dW(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function fW(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function ZN(n,e){return n&&!dW(e)?fW(n,e):e}const JS=n=>n instanceof En?{...n}:n;function po(n,e){e=e||{};const t={};function r(c,h,d){return V.isPlainObject(c)&&V.isPlainObject(h)?V.merge.call({caseless:d},c,h):V.isPlainObject(h)?V.merge({},h):V.isArray(h)?h.slice():h}function i(c,h,d){if(V.isUndefined(h)){if(!V.isUndefined(c))return r(void 0,c,d)}else return r(c,h,d)}function s(c,h){if(!V.isUndefined(h))return r(void 0,h)}function o(c,h){if(V.isUndefined(h)){if(!V.isUndefined(c))return r(void 0,c)}else return r(void 0,h)}function a(c,h,d){if(d in e)return r(c,h);if(d in n)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,h)=>i(JS(c),JS(h),!0)};return V.forEach(Object.keys(Object.assign({},n,e)),function(h){const d=l[h]||i,p=d(n[h],e[h],h);V.isUndefined(p)&&d!==a||(t[h]=p)}),t}const ex=n=>{const e=po({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=En.from(o),e.url=KN(ZN(e.baseURL,e.url),n.params,n.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(V.isFormData(t)){if(ur.hasStandardBrowserEnv||ur.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...h]=l?l.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...h].join("; "))}}if(ur.hasStandardBrowserEnv&&(r&&V.isFunction(r)&&(r=r(e)),r||r!==!1&&cW(e.url))){const c=i&&s&&hW.read(s);c&&o.set(i,c)}return e},pW=typeof XMLHttpRequest<"u",mW=pW&&function(n){return new Promise(function(t,r){const i=ex(n);let s=i.data;const o=En.from(i.headers).normalize();let{responseType:a}=i,l;function c(){i.cancelToken&&i.cancelToken.unsubscribe(l),i.signal&&i.signal.removeEventListener("abort",l)}let h=new XMLHttpRequest;h.open(i.method.toUpperCase(),i.url,!0),h.timeout=i.timeout;function d(){if(!h)return;const g=En.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders()),S={data:!a||a==="text"||a==="json"?h.responseText:h.response,status:h.status,statusText:h.statusText,headers:g,config:n,request:h};XN(function(I){t(I),c()},function(I){r(I),c()},S),h=null}"onloadend"in h?h.onloadend=d:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(d)},h.onabort=function(){h&&(r(new se("Request aborted",se.ECONNABORTED,i,h)),h=null)},h.onerror=function(){r(new se("Network Error",se.ERR_NETWORK,i,h)),h=null},h.ontimeout=function(){let y=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const S=i.transitional||QN;i.timeoutErrorMessage&&(y=i.timeoutErrorMessage),r(new se(y,S.clarifyTimeoutError?se.ETIMEDOUT:se.ECONNABORTED,i,h)),h=null},s===void 0&&o.setContentType(null),"setRequestHeader"in h&&V.forEach(o.toJSON(),function(y,S){h.setRequestHeader(S,y)}),V.isUndefined(i.withCredentials)||(h.withCredentials=!!i.withCredentials),a&&a!=="json"&&(h.responseType=i.responseType),typeof i.onDownloadProgress=="function"&&h.addEventListener("progress",Df(i.onDownloadProgress,!0)),typeof i.onUploadProgress=="function"&&h.upload&&h.upload.addEventListener("progress",Df(i.onUploadProgress)),(i.cancelToken||i.signal)&&(l=g=>{h&&(r(!g||g.type?new Tl(null,n,h):g),h.abort(),h=null)},i.cancelToken&&i.cancelToken.subscribe(l),i.signal&&(i.signal.aborted?l():i.signal.addEventListener("abort",l)));const p=aW(i.url);if(p&&ur.protocols.indexOf(p)===-1){r(new se("Unsupported protocol "+p+":",se.ERR_BAD_REQUEST,n));return}h.send(s||null)})},gW=(n,e)=>{let t=new AbortController,r;const i=function(l){if(!r){r=!0,o();const c=l instanceof Error?l:this.reason;t.abort(c instanceof se?c:new Tl(c instanceof Error?c.message:c))}};let s=e&&setTimeout(()=>{i(new se(`timeout ${e} of ms exceeded`,se.ETIMEDOUT))},e);const o=()=>{n&&(s&&clearTimeout(s),s=null,n.forEach(l=>{l&&(l.removeEventListener?l.removeEventListener("abort",i):l.unsubscribe(i))}),n=null)};n.forEach(l=>l&&l.addEventListener&&l.addEventListener("abort",i));const{signal:a}=t;return a.unsubscribe=o,[a,()=>{s&&clearTimeout(s),s=null}]},_W=function*(n,e){let t=n.byteLength;if(!e||t<e){yield n;return}let r=0,i;for(;r<t;)i=r+e,yield n.slice(r,i),r=i},yW=async function*(n,e,t){for await(const r of n)yield*_W(ArrayBuffer.isView(r)?r:await t(String(r)),e)},XS=(n,e,t,r,i)=>{const s=yW(n,e,i);let o=0;return new ReadableStream({type:"bytes",async pull(a){const{done:l,value:c}=await s.next();if(l){a.close(),r();return}let h=c.byteLength;t&&t(o+=h),a.enqueue(new Uint8Array(c))},cancel(a){return r(a),s.return()}},{highWaterMark:2})},ZS=(n,e)=>{const t=n!=null;return r=>setTimeout(()=>e({lengthComputable:t,total:n,loaded:r}))},Jp=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",tx=Jp&&typeof ReadableStream=="function",hy=Jp&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),vW=tx&&(()=>{let n=!1;const e=new Request(ur.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e})(),eR=64*1024,dy=tx&&!!(()=>{try{return V.isReadableStream(new Response("").body)}catch{}})(),Of={stream:dy&&(n=>n.body)};Jp&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Of[e]&&(Of[e]=V.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new se(`Response type '${e}' is not supported`,se.ERR_NOT_SUPPORT,r)})})})(new Response);const wW=async n=>{if(n==null)return 0;if(V.isBlob(n))return n.size;if(V.isSpecCompliantForm(n))return(await new Request(n).arrayBuffer()).byteLength;if(V.isArrayBufferView(n))return n.byteLength;if(V.isURLSearchParams(n)&&(n=n+""),V.isString(n))return(await hy(n)).byteLength},EW=async(n,e)=>{const t=V.toFiniteNumber(n.getContentLength());return t??wW(e)},IW=Jp&&(async n=>{let{url:e,method:t,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:h,withCredentials:d="same-origin",fetchOptions:p}=ex(n);c=c?(c+"").toLowerCase():"text";let[g,y]=i||s||o?gW([i,s],o):[],S,C;const I=()=>{!S&&setTimeout(()=>{g&&g.unsubscribe()}),S=!0};let w;try{if(l&&vW&&t!=="get"&&t!=="head"&&(w=await EW(h,r))!==0){let F=new Request(e,{method:"POST",body:r,duplex:"half"}),T;V.isFormData(r)&&(T=F.headers.get("content-type"))&&h.setContentType(T),F.body&&(r=XS(F.body,eR,ZS(w,Df(l)),null,hy))}V.isString(d)||(d=d?"cors":"omit"),C=new Request(e,{...p,signal:g,method:t.toUpperCase(),headers:h.normalize().toJSON(),body:r,duplex:"half",withCredentials:d});let E=await fetch(C);const k=dy&&(c==="stream"||c==="response");if(dy&&(a||k)){const F={};["status","statusText","headers"].forEach(v=>{F[v]=E[v]});const T=V.toFiniteNumber(E.headers.get("content-length"));E=new Response(XS(E.body,eR,a&&ZS(T,Df(a,!0)),k&&I,hy),F)}c=c||"text";let M=await Of[V.findKey(Of,c)||"text"](E,n);return!k&&I(),y&&y(),await new Promise((F,T)=>{XN(F,T,{data:M,headers:En.from(E.headers),status:E.status,statusText:E.statusText,config:n,request:C})})}catch(E){throw I(),E&&E.name==="TypeError"&&/fetch/i.test(E.message)?Object.assign(new se("Network Error",se.ERR_NETWORK,n,C),{cause:E.cause||E}):se.from(E,E&&E.code,n,C)}}),fy={http:U9,xhr:mW,fetch:IW};V.forEach(fy,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const tR=n=>`- ${n}`,TW=n=>V.isFunction(n)||n===null||n===!1,nx={getAdapter:n=>{n=V.isArray(n)?n:[n];const{length:e}=n;let t,r;const i={};for(let s=0;s<e;s++){t=n[s];let o;if(r=t,!TW(t)&&(r=fy[(o=String(t)).toLowerCase()],r===void 0))throw new se(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(tR).join(`
`):" "+tR(s[0]):"as no adapter specified";throw new se("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:fy};function _g(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Tl(null,n)}function nR(n){return _g(n),n.headers=En.from(n.headers),n.data=gg.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),nx.getAdapter(n.adapter||hh.adapter)(n).then(function(r){return _g(n),r.data=gg.call(n,n.transformResponse,r),r.headers=En.from(r.headers),r},function(r){return JN(r)||(_g(n),r&&r.response&&(r.response.data=gg.call(n,n.transformResponse,r.response),r.response.headers=En.from(r.response.headers))),Promise.reject(r)})}const rx="1.7.2",hE={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{hE[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const rR={};hE.transitional=function(e,t,r){function i(s,o){return"[Axios v"+rx+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new se(i(o," has been removed"+(t?" in "+t:"")),se.ERR_DEPRECATED);return t&&!rR[o]&&(rR[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};function SW(n,e,t){if(typeof n!="object")throw new se("options must be an object",se.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=n[s],l=a===void 0||o(a,s,n);if(l!==!0)throw new se("option "+s+" must be "+l,se.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new se("Unknown option "+s,se.ERR_BAD_OPTION)}}const py={assertOptions:SW,validators:hE},Ti=py.validators;class Ks{constructor(e){this.defaults=e,this.interceptors={request:new QS,response:new QS}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=po(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:s}=t;r!==void 0&&py.assertOptions(r,{silentJSONParsing:Ti.transitional(Ti.boolean),forcedJSONParsing:Ti.transitional(Ti.boolean),clarifyTimeoutError:Ti.transitional(Ti.boolean)},!1),i!=null&&(V.isFunction(i)?t.paramsSerializer={serialize:i}:py.assertOptions(i,{encode:Ti.function,serialize:Ti.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&V.merge(s.common,s[t.method]);s&&V.forEach(["delete","get","head","post","put","patch","common"],y=>{delete s[y]}),t.headers=En.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(t)===!1||(l=l&&S.synchronous,a.unshift(S.fulfilled,S.rejected))});const c=[];this.interceptors.response.forEach(function(S){c.push(S.fulfilled,S.rejected)});let h,d=0,p;if(!l){const y=[nR.bind(this),void 0];for(y.unshift.apply(y,a),y.push.apply(y,c),p=y.length,h=Promise.resolve(t);d<p;)h=h.then(y[d++],y[d++]);return h}p=a.length;let g=t;for(d=0;d<p;){const y=a[d++],S=a[d++];try{g=y(g)}catch(C){S.call(this,C);break}}try{h=nR.call(this,g)}catch(y){return Promise.reject(y)}for(d=0,p=c.length;d<p;)h=h.then(c[d++],c[d++]);return h}getUri(e){e=po(this.defaults,e);const t=ZN(e.baseURL,e.url);return KN(t,e.params,e.paramsSerializer)}}V.forEach(["delete","get","head","options"],function(e){Ks.prototype[e]=function(t,r){return this.request(po(r||{},{method:e,url:t,data:(r||{}).data}))}});V.forEach(["post","put","patch"],function(e){function t(r){return function(s,o,a){return this.request(po(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Ks.prototype[e]=t(),Ks.prototype[e+"Form"]=t(!0)});class dE{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Tl(s,o,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}static source(){let e;return{token:new dE(function(i){e=i}),cancel:e}}}function RW(n){return function(t){return n.apply(null,t)}}function AW(n){return V.isObject(n)&&n.isAxiosError===!0}const my={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(my).forEach(([n,e])=>{my[e]=n});function ix(n){const e=new Ks(n),t=VN(Ks.prototype.request,e);return V.extend(t,Ks.prototype,e,{allOwnKeys:!0}),V.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return ix(po(n,i))},t}const ot=ix(hh);ot.Axios=Ks;ot.CanceledError=Tl;ot.CancelToken=dE;ot.isCancel=JN;ot.VERSION=rx;ot.toFormData=Yp;ot.AxiosError=se;ot.Cancel=ot.CanceledError;ot.all=function(e){return Promise.all(e)};ot.spread=RW;ot.isAxiosError=AW;ot.mergeConfig=po;ot.AxiosHeaders=En;ot.formToJSON=n=>YN(V.isHTMLForm(n)?new FormData(n):n);ot.getAdapter=nx.getAdapter;ot.HttpStatusCode=my;ot.default=ot;var iR={};const sR="@firebase/database",oR="1.0.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sx="";function CW(n){sx=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PW{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),bt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:pc(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kW{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return dr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new PW(e)}}catch{}return new kW},Bs=ox("localStorage"),bW=ox("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=new zc("@firebase/database"),NW=function(){let n=1;return function(){return n++}}(),ax=function(n){const e=LM(n),t=new NM;t.update(e);const r=t.digest();return Sv.encodeByteArray(r)},dh=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=dh.apply(null,r):typeof r=="object"?e+=bt(r):e+=r,e+=" "}return e};let qu=null,aR=!0;const xW=function(n,e){K(!e,"Can't turn on custom loggers persistently."),Ca.logLevel=ae.VERBOSE,qu=Ca.log.bind(Ca)},zt=function(...n){if(aR===!0&&(aR=!1,qu===null&&bW.get("logging_enabled")===!0&&xW()),qu){const e=dh.apply(null,n);qu(e)}},fh=function(n){return function(...e){zt(n,...e)}},gy=function(...n){const e="FIREBASE INTERNAL ERROR: "+dh(...n);Ca.error(e)},mo=function(...n){const e=`FIREBASE FATAL ERROR: ${dh(...n)}`;throw Ca.error(e),new Error(e)},Pn=function(...n){const e="FIREBASE WARNING: "+dh(...n);Ca.warn(e)},DW=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Pn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},lx=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},OW=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},nl="[MIN_NAME]",go="[MAX_NAME]",Sl=function(n,e){if(n===e)return 0;if(n===nl||e===go)return-1;if(e===nl||n===go)return 1;{const t=lR(n),r=lR(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},LW=function(n,e){return n===e?0:n<e?-1:1},uu=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+bt(e))},fE=function(n){if(typeof n!="object"||n===null)return bt(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=bt(e[r]),t+=":",t+=fE(n[e[r]]);return t+="}",t},ux=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function Hn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const cx=function(n){K(!lx(n),"Invalid JSON number");const e=11,t=52,r=(1<<e-1)-1;let i,s,o,a,l;n===0?(s=0,o=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-r-t))));const c=[];for(l=t;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const h=c.join("");let d="";for(l=0;l<64;l+=8){let p=parseInt(h.substr(l,8),2).toString(16);p.length===1&&(p="0"+p),d=d+p}return d.toLowerCase()},VW=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},MW=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},FW=new RegExp("^-?(0*)\\d{1,10}$"),UW=-2147483648,BW=2147483647,lR=function(n){if(FW.test(n)){const e=Number(n);if(e>=UW&&e<=BW)return e}return null},ph=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw Pn("Exception was thrown by user callback.",t),e},Math.floor(0))}},jW=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},$u=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zW{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Pn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qW{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(zt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Pn(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="5",hx="v",dx="s",fx="r",px="f",mx=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,gx="ls",_x="p",_y="ac",yx="websocket",vx="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $W{constructor(e,t,r,i,s=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Bs.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Bs.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function WW(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function wx(n,e,t){K(typeof e=="string","typeof type must == string"),K(typeof t=="object","typeof params must == object");let r;if(e===yx)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===vx)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);WW(n)&&(t.ns=n.namespace);const i=[];return Hn(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GW{constructor(){this.counters_={}}incrementCounter(e,t=1){dr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return yM(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg={},vg={};function mE(n){const e=n.toString();return yg[e]||(yg[e]=new GW),yg[e]}function HW(n,e){const t=n.toString();return vg[t]||(vg[t]=e()),vg[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KW{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ph(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR="start",QW="close",YW="pLPCommand",JW="pRTLPCB",Ex="id",Ix="pw",Tx="ser",XW="cb",ZW="seg",e5="ts",t5="d",n5="dframe",Sx=1870,Rx=30,r5=Sx-Rx,i5=25e3,s5=3e4;class da{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=fh(e),this.stats_=mE(t),this.urlFn=l=>(this.appCheckToken&&(l[_y]=this.appCheckToken),wx(t,vx,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new KW(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(s5)),OW(()=>{if(this.isClosed_)return;this.scriptTagHolder=new gE((...s)=>{const[o,a,l,c,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===uR)this.id=a,this.password=l;else if(o===QW)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[uR]="t",r[Tx]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[XW]=this.scriptTagHolder.uniqueCallbackIdentifier),r[hx]=pE,this.transportSessionId&&(r[dx]=this.transportSessionId),this.lastSessionId&&(r[gx]=this.lastSessionId),this.applicationId&&(r[_x]=this.applicationId),this.appCheckToken&&(r[_y]=this.appCheckToken),typeof location<"u"&&location.hostname&&mx.test(location.hostname)&&(r[fx]=px);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){da.forceAllow_=!0}static forceDisallow(){da.forceDisallow_=!0}static isAvailable(){return da.forceAllow_?!0:!da.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!VW()&&!MW()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=bt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=hP(t),i=ux(r,r5);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={};r[n5]="t",r[Ex]=e,r[Ix]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=bt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class gE{constructor(e,t,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=NW(),window[YW+this.uniqueCallbackIdentifier]=e,window[JW+this.uniqueCallbackIdentifier]=t,this.myIFrame=gE.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){zt("frame writing exception"),a.stack&&zt(a.stack),zt(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||zt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Ex]=this.myID,e[Ix]=this.myPW,e[Tx]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Rx+r.length<=Sx;){const o=this.pendingSegs.shift();r=r+"&"+ZW+i+"="+o.seg+"&"+e5+i+"="+o.ts+"&"+t5+i+"="+o.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(i5)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{zt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5=16384,a5=45e3;let Lf=null;typeof MozWebSocket<"u"?Lf=MozWebSocket:typeof WebSocket<"u"&&(Lf=WebSocket);class sr{constructor(e,t,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=fh(this.connId),this.stats_=mE(t),this.connURL=sr.connectionURL_(t,o,a,i,r),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,r,i,s){const o={};return o[hx]=pE,typeof location<"u"&&location.hostname&&mx.test(location.hostname)&&(o[fx]=px),t&&(o[dx]=t),r&&(o[gx]=r),i&&(o[_y]=i),s&&(o[_x]=s),wx(e,yx,o)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Bs.set("previous_websocket_failure",!0);try{let r;vP(),this.mySock=new Lf(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){sr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(t);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Lf!==null&&!sr.forceDisallow_}static previouslyFailed(){return Bs.isInMemoryStorage||Bs.get("previous_websocket_failure")===!0}markConnectionHealthy(){Bs.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const r=pc(t);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(K(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const r=this.extractFrameCount_(t);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const t=bt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=ux(t,o5);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(a5))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}sr.responsesRequiredToBeHealthy=2;sr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[da,sr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=sr&&sr.isAvailable();let r=t&&!sr.previouslyFailed();if(e.webSocketOnly&&(t||Pn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[sr];else{const i=this.transports_=[];for(const s of Oc.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Oc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Oc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l5=6e4,u5=5e3,c5=10*1024,h5=100*1024,wg="t",cR="d",d5="s",hR="r",f5="e",dR="o",fR="a",pR="n",mR="p",p5="h";class m5{constructor(e,t,r,i,s,o,a,l,c,h){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=fh("c:"+this.id+":"),this.transportManager_=new Oc(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=$u(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>h5?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>c5?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(wg in e){const t=e[wg];t===fR?this.upgradeIfSecondaryHealthy_():t===hR?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===dR&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=uu("t",e),r=uu("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:mR,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:fR,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:pR,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=uu("t",e),r=uu("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=uu(wg,e);if(cR in e){const r=e[cR];if(t===p5){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===pR){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===d5?this.onConnectionShutdown_(r):t===hR?this.onReset_(r):t===f5?gy("Server Error: "+r):t===dR?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):gy("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),pE!==r&&Pn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),$u(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(l5))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$u(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(u5))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:mR,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Bs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e){this.allowedEvents_=e,this.listeners_={},K(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){K(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf extends Cx{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Av()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Vf}getInitialEvent(e){return K(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR=32,_R=768;class Ve{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function Se(){return new Ve("")}function pe(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function as(n){return n.pieces_.length-n.pieceNum_}function xe(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Ve(n.pieces_,e)}function Px(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function g5(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function kx(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function bx(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Ve(e,0)}function wt(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Ve)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Ve(t,0)}function de(n){return n.pieceNum_>=n.pieces_.length}function Bn(n,e){const t=pe(n),r=pe(e);if(t===null)return e;if(t===r)return Bn(xe(n),xe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Nx(n,e){if(as(n)!==as(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function or(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(as(n)>as(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class _5{constructor(e,t){this.errorPrefix_=t,this.parts_=kx(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=up(this.parts_[r]);xx(this)}}function y5(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=up(e),xx(n)}function v5(n){const e=n.parts_.pop();n.byteLength_-=up(e),n.parts_.length>0&&(n.byteLength_-=1)}function xx(n){if(n.byteLength_>_R)throw new Error(n.errorPrefix_+"has a key path longer than "+_R+" bytes ("+n.byteLength_+").");if(n.parts_.length>gR)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+gR+") or object contains a cycle "+Ps(n))}function Ps(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E extends Cx{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new _E}getInitialEvent(e){return K(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu=1e3,w5=60*5*1e3,yR=30*1e3,E5=1.3,I5=3e4,T5="server_kill",vR=3;class Zr extends Ax{constructor(e,t,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Zr.nextPersistentConnectionId_++,this.log_=fh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=cu,this.maxReconnectDelay_=w5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!vP())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");_E.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Vf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,r){const i=++this.requestNumber_,s={r:i,a:e,b:t};this.log_(bt(s)),K(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const t=new Rv,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?t.resolve(a):t.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),t.promise}listen(e,t,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),K(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),K(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:t,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(r)})}sendListen_(e){const t=e.query,r=t._path.toString(),i=t._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=t._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;Zr.warnOnListenWarnings_(l,t),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&dr(e,"w")){const r=Va(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+t._queryParams.getIndex().toString()+'"',s=t._path.toString();Pn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||bM(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=yR)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=kM(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(t,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,r=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,r)})}unlisten(e,t){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),K(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,t)}sendUnlisten_(e,t,r,i){this.log_("Unlisten on "+e+" for "+t);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:r})}onDisconnectMerge(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:r})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,r,i){const s={p:t,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,t,r,i){this.putInternal("p",e,t,r,i)}merge(e,t,r,i){this.putInternal("m",e,t,r,i)}putInternal(e,t,r,i,s){this.initConnection_();const o={p:t,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,r,s=>{this.log_(t+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+bt(e));const t=e.r,r=this.requestCBHash_[t];r&&(delete this.requestCBHash_[t],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):gy("Unrecognized action received from server: "+bt(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){K(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=cu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=cu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>I5&&(this.reconnectDelay_=cu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*E5)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Zr.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(d){K(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:c};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,p]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?zt("getToken() completed but was canceled"):(zt("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,a=new m5(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,r,g=>{Pn(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(T5)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Pn(d),l())}}}interrupt(e){zt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){zt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],E_(this.interruptReasons_)&&(this.reconnectDelay_=cu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let r;t?r=t.map(s=>fE(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,t){const r=new Ve(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(t),s.delete(t),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,t){zt("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=vR&&(this.reconnectDelay_=yR,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){zt("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=vR&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+sx.replace(/\./g,"-")]=1,Av()?e["framework.cordova"]=1:lp()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Vf.getInstance().currentlyOnline();return E_(this.interruptReasons_)&&e}}Zr.nextPersistentConnectionId_=0;Zr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new me(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new me(nl,e),i=new me(nl,t);return this.compare(r,i)!==0}minPost(){return me.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ad;class Dx extends Xp{static get __EMPTY_NODE(){return ad}static set __EMPTY_NODE(e){ad=e}compare(e,t){return Sl(e.name,t.name)}isDefinedOn(e){throw ll("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return me.MIN}maxPost(){return new me(go,ad)}makePost(e,t){return K(typeof e=="string","KeyIndex indexValue must always be a string."),new me(e,ad)}toString(){return".key"}}const Pa=new Dx;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?r(e.key,t):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class vt{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??vt.RED,this.left=i??_n.EMPTY_NODE,this.right=s??_n.EMPTY_NODE}copy(e,t,r,i,s){return new vt(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i=i.copy(null,t,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return _n.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let r,i;if(r=this,t(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),t(e,r.key)===0){if(r.right.isEmpty())return _n.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}vt.RED=!0;vt.BLACK=!1;class S5{copy(e,t,r,i,s){return this}insert(e,t,r){return new vt(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class _n{constructor(e,t=_n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new _n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,vt.BLACK,null,null))}remove(e){return new _n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,vt.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ld(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ld(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ld(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ld(this.root_,null,this.comparator_,!0,e)}}_n.EMPTY_NODE=new S5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R5(n,e){return Sl(n.name,e.name)}function yE(n,e){return Sl(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yy;function A5(n){yy=n}const Ox=function(n){return typeof n=="number"?"number:"+cx(n):"string:"+n},Lx=function(n){if(n.isLeafNode()){const e=n.val();K(typeof e=="string"||typeof e=="number"||typeof e=="object"&&dr(e,".sv"),"Priority must be a string or number.")}else K(n===yy||n.isEmpty(),"priority of unexpected type.");K(n===yy||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wR;class mt{constructor(e,t=mt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,K(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Lx(this.priorityNode_)}static set __childrenNodeConstructor(e){wR=e}static get __childrenNodeConstructor(){return wR}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new mt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:mt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return de(e)?this:pe(e)===".priority"?this.priorityNode_:mt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:mt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const r=pe(e);return r===null?t:t.isEmpty()&&r!==".priority"?this:(K(r!==".priority"||as(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,mt.__childrenNodeConstructor.EMPTY_NODE.updateChild(xe(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Ox(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=cx(this.value_):e+=this.value_,this.lazyHash_=ax(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===mt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof mt.__childrenNodeConstructor?-1:(K(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,r=typeof this.value_,i=mt.VALUE_TYPE_ORDER.indexOf(t),s=mt.VALUE_TYPE_ORDER.indexOf(r);return K(i>=0,"Unknown leaf type: "+t),K(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}mt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vx,Mx;function C5(n){Vx=n}function P5(n){Mx=n}class k5 extends Xp{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return s===0?Sl(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return me.MIN}maxPost(){return new me(go,new mt("[PRIORITY-POST]",Mx))}makePost(e,t){const r=Vx(e);return new me(t,new mt("[PRIORITY-POST]",r))}toString(){return".priority"}}const Wt=new k5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b5=Math.log(2);class N5{constructor(e){const t=s=>parseInt(Math.log(s)/b5,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Mf=function(n,e,t,r){n.sort(e);const i=function(l,c){const h=c-l;let d,p;if(h===0)return null;if(h===1)return d=n[l],p=t?t(d):d,new vt(p,d.node,vt.BLACK,null,null);{const g=parseInt(h/2,10)+l,y=i(l,g),S=i(g+1,c);return d=n[g],p=t?t(d):d,new vt(p,d.node,vt.BLACK,y,S)}},s=function(l){let c=null,h=null,d=n.length;const p=function(y,S){const C=d-y,I=d;d-=y;const w=i(C+1,I),E=n[C],k=t?t(E):E;g(new vt(k,E.node,S,null,w))},g=function(y){c?(c.left=y,c=y):(h=y,c=y)};for(let y=0;y<l.count;++y){const S=l.nextBitIsOne(),C=Math.pow(2,l.count-(y+1));S?p(C,vt.BLACK):(p(C,vt.BLACK),p(C,vt.RED))}return h},o=new N5(n.length),a=s(o);return new _n(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eg;const Ho={};class Qr{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return K(Ho&&Wt,"ChildrenNode.ts has not been loaded"),Eg=Eg||new Qr({".priority":Ho},{".priority":Wt}),Eg}get(e){const t=Va(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof _n?t:null}hasIndex(e){return dr(this.indexSet_,e.toString())}addIndex(e,t){K(e!==Pa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(me.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Mf(r,e.getCompare()):a=Ho;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const h=Object.assign({},this.indexes_);return h[l]=a,new Qr(h,c)}addToIndexes(e,t){const r=df(this.indexes_,(i,s)=>{const o=Va(this.indexSet_,s);if(K(o,"Missing index implementation for "+s),i===Ho)if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(me.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Mf(a,o.getCompare())}else return Ho;else{const a=t.get(e.name);let l=i;return a&&(l=l.remove(new me(e.name,a))),l.insert(e,e.node)}});return new Qr(r,this.indexSet_)}removeFromIndexes(e,t){const r=df(this.indexes_,i=>{if(i===Ho)return i;{const s=t.get(e.name);return s?i.remove(new me(e.name,s)):i}});return new Qr(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hu;class ve{constructor(e,t,r){this.children_=e,this.priorityNode_=t,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Lx(this.priorityNode_),this.children_.isEmpty()&&K(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return hu||(hu=new ve(new _n(yE),null,Qr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||hu}updatePriority(e){return this.children_.isEmpty()?this:new ve(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?hu:t}}getChild(e){const t=pe(e);return t===null?this:this.getImmediateChild(t).getChild(xe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(K(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const r=new me(e,t);let i,s;t.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,t),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?hu:this.priorityNode_;return new ve(i,o,s)}}updateChild(e,t){const r=pe(e);if(r===null)return t;{K(pe(e)!==".priority"||as(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(xe(e),t);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let r=0,i=0,s=!0;if(this.forEachChild(Wt,(o,a)=>{t[o]=a.val(e),r++,s&&ve.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in t)o[a]=t[a];return o}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Ox(this.getPriority().val())+":"),this.forEachChild(Wt,(t,r)=>{const i=r.hash();i!==""&&(e+=":"+t+":"+i)}),this.lazyHash_=e===""?"":ax(e)}return this.lazyHash_}getPredecessorChildName(e,t,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new me(e,t));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new me(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new me(t,this.children_.get(t)):null}forEachChild(e,t){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>t(i.name,i.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,me.Wrap);let s=i.peek();for(;s!=null&&t.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,me.Wrap);let s=i.peek();for(;s!=null&&t.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===mh?-1:0}withIndex(e){if(e===Pa||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new ve(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Pa||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const r=this.getIterator(Wt),i=t.getIterator(Wt);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Pa?null:this.indexMap_.get(e.toString())}}ve.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class x5 extends ve{constructor(){super(new _n(yE),ve.EMPTY_NODE,Qr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ve.EMPTY_NODE}isEmpty(){return!1}}const mh=new x5;Object.defineProperties(me,{MIN:{value:new me(nl,ve.EMPTY_NODE)},MAX:{value:new me(go,mh)}});Dx.__EMPTY_NODE=ve.EMPTY_NODE;mt.__childrenNodeConstructor=ve;A5(mh);P5(mh);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5=!0;function qt(n,e=null){if(n===null)return ve.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),K(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new mt(t,qt(e))}if(!(n instanceof Array)&&D5){const t=[];let r=!1;if(Hn(n,(o,a)=>{if(o.substring(0,1)!=="."){const l=qt(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),t.push(new me(o,l)))}}),t.length===0)return ve.EMPTY_NODE;const s=Mf(t,R5,o=>o.name,yE);if(r){const o=Mf(t,Wt.getCompare());return new ve(s,qt(e),new Qr({".priority":o},{".priority":Wt}))}else return new ve(s,qt(e),Qr.Default)}else{let t=ve.EMPTY_NODE;return Hn(n,(r,i)=>{if(dr(n,r)&&r.substring(0,1)!=="."){const s=qt(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(qt(e))}}C5(qt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5 extends Xp{constructor(e){super(),this.indexPath_=e,K(!de(e)&&pe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return s===0?Sl(e.name,t.name):s}makePost(e,t){const r=qt(e),i=ve.EMPTY_NODE.updateChild(this.indexPath_,r);return new me(t,i)}maxPost(){const e=ve.EMPTY_NODE.updateChild(this.indexPath_,mh);return new me(go,e)}toString(){return kx(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5 extends Xp{compare(e,t){const r=e.node.compareTo(t.node);return r===0?Sl(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return me.MIN}maxPost(){return me.MAX}makePost(e,t){const r=qt(e);return new me(t,r)}toString(){return".value"}}const V5=new L5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M5(n){return{type:"value",snapshotNode:n}}function F5(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function U5(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function ER(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function B5(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Wt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return K(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return K(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:nl}hasEnd(){return this.endSet_}getIndexEndValue(){return K(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return K(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:go}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return K(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Wt}copy(){const e=new vE;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function IR(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Wt?t="$priority":n.index_===V5?t="$value":n.index_===Pa?t="$key":(K(n.index_ instanceof O5,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=bt(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=bt(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+bt(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=bt(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+bt(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function TR(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Wt&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff extends Ax{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=fh("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(K(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Ff.getListenId_(e,r),a={};this.listens_[o]=a;const l=IR(e._queryParams);this.restRequest_(s+".json",l,(c,h)=>{let d=h;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(s,d,!1,r),Va(this.listens_,o)===a){let p;c?c===401?p="permission_denied":p="rest_error:"+c:p="ok",i(p,null)}})}unlisten(e,t){const r=Ff.getListenId_(e,t);delete this.listens_[r]}get(e){const t=IR(e._queryParams),r=e._path.toString(),i=new Rv;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+So(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=pc(a.responseText)}catch{Pn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&Pn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(){this.rootNode_=ve.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(){return{value:null,children:new Map}}function Fx(n,e,t){if(de(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const r=pe(e);n.children.has(r)||n.children.set(r,Uf());const i=n.children.get(r);e=xe(e),Fx(i,e,t)}}function vy(n,e,t){n.value!==null?t(e,n.value):z5(n,(r,i)=>{const s=new Ve(e.toString()+"/"+r);vy(i,s,t)})}function z5(n,e){n.children.forEach((t,r)=>{e(r,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Hn(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=10*1e3,$5=30*1e3,W5=5*60*1e3;class G5{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new q5(e);const r=SR+($5-SR)*Math.random();$u(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Hn(e,(i,s)=>{s>0&&dr(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),$u(this.reportStats_.bind(this),Math.floor(Math.random()*2*W5))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cr;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Cr||(Cr={}));function Ux(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Bx(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function jx(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Cr.ACK_USER_WRITE,this.source=Ux()}operationForChild(e){if(de(this.path)){if(this.affectedTree.value!=null)return K(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Ve(e));return new Bf(Se(),t,this.revert)}}else return K(pe(this.path)===e,"operationForChild called for unrelated child."),new Bf(xe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Cr.OVERWRITE}operationForChild(e){return de(this.path)?new _o(this.source,Se(),this.snap.getImmediateChild(e)):new _o(this.source,xe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Cr.MERGE}operationForChild(e){if(de(this.path)){const t=this.children.subtree(new Ve(e));return t.isEmpty()?null:t.value?new _o(this.source,Se(),t.value):new Lc(this.source,Se(),t)}else return K(pe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Lc(this.source,xe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(de(e))return this.isFullyInitialized()&&!this.filtered_;const t=pe(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function H5(n,e,t,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(B5(o.childName,o.snapshotNode))}),du(n,i,"child_removed",e,r,t),du(n,i,"child_added",e,r,t),du(n,i,"child_moved",s,r,t),du(n,i,"child_changed",e,r,t),du(n,i,"value",e,r,t),i}function du(n,e,t,r,i,s){const o=r.filter(a=>a.type===t);o.sort((a,l)=>Q5(n,a,l)),o.forEach(a=>{const l=K5(n,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function K5(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function Q5(n,e,t){if(e.childName==null||t.childName==null)throw ll("Should only compare child_ events.");const r=new me(e.childName,e.snapshotNode),i=new me(t.childName,t.snapshotNode);return n.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(n,e){return{eventCache:n,serverCache:e}}function Wu(n,e,t,r){return zx(new wE(e,t,r),n.serverCache)}function qx(n,e,t,r){return zx(n.eventCache,new wE(e,t,r))}function wy(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function yo(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ig;const Y5=()=>(Ig||(Ig=new _n(LW)),Ig);class Ne{constructor(e,t=Y5()){this.value=e,this.children=t}static fromObject(e){let t=new Ne(null);return Hn(e,(r,i)=>{t=t.set(new Ve(r),i)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Se(),value:this.value};if(de(e))return null;{const r=pe(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(xe(e),t);return s!=null?{path:wt(new Ve(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(de(e))return this;{const t=pe(e),r=this.children.get(t);return r!==null?r.subtree(xe(e)):new Ne(null)}}set(e,t){if(de(e))return new Ne(t,this.children);{const r=pe(e),s=(this.children.get(r)||new Ne(null)).set(xe(e),t),o=this.children.insert(r,s);return new Ne(this.value,o)}}remove(e){if(de(e))return this.children.isEmpty()?new Ne(null):new Ne(null,this.children);{const t=pe(e),r=this.children.get(t);if(r){const i=r.remove(xe(e));let s;return i.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,i),this.value===null&&s.isEmpty()?new Ne(null):new Ne(this.value,s)}else return this}}get(e){if(de(e))return this.value;{const t=pe(e),r=this.children.get(t);return r?r.get(xe(e)):null}}setTree(e,t){if(de(e))return t;{const r=pe(e),s=(this.children.get(r)||new Ne(null)).setTree(xe(e),t);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Ne(this.value,o)}}fold(e){return this.fold_(Se(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(wt(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Se(),t)}findOnPath_(e,t,r){const i=this.value?r(t,this.value):!1;if(i)return i;if(de(e))return null;{const s=pe(e),o=this.children.get(s);return o?o.findOnPath_(xe(e),wt(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Se(),t)}foreachOnPath_(e,t,r){if(de(e))return this;{this.value&&r(t,this.value);const i=pe(e),s=this.children.get(i);return s?s.foreachOnPath_(xe(e),wt(t,i),r):new Ne(null)}}foreach(e){this.foreach_(Se(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(wt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.writeTree_=e}static empty(){return new cr(new Ne(null))}}function Gu(n,e,t){if(de(e))return new cr(new Ne(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Bn(i,e);return s=s.updateChild(o,t),new cr(n.writeTree_.set(i,s))}else{const i=new Ne(t),s=n.writeTree_.setTree(e,i);return new cr(s)}}}function RR(n,e,t){let r=n;return Hn(t,(i,s)=>{r=Gu(r,wt(e,i),s)}),r}function AR(n,e){if(de(e))return cr.empty();{const t=n.writeTree_.setTree(e,new Ne(null));return new cr(t)}}function Ey(n,e){return No(n,e)!=null}function No(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Bn(t.path,e)):null}function CR(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Wt,(r,i)=>{e.push(new me(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new me(r,i.value))}),e}function Hi(n,e){if(de(e))return n;{const t=No(n,e);return t!=null?new cr(new Ne(t)):new cr(n.writeTree_.subtree(e))}}function Iy(n){return n.writeTree_.isEmpty()}function rl(n,e){return $x(Se(),n.writeTree_,e)}function $x(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(K(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):t=$x(wt(n,i),s,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(wt(n,".priority"),r)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(n,e){return Yx(e,n)}function J5(n,e,t,r,i){K(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Gu(n.visibleWrites,e,t)),n.lastWriteId=r}function X5(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}function Z5(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);K(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&eG(a,r.path)?i=!1:or(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return tG(n),!0;if(r.snap)n.visibleWrites=AR(n.visibleWrites,r.path);else{const a=r.children;Hn(a,l=>{n.visibleWrites=AR(n.visibleWrites,wt(r.path,l))})}return!0}else return!1}function eG(n,e){if(n.snap)return or(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&or(wt(n.path,t),e))return!0;return!1}function tG(n){n.visibleWrites=Gx(n.allWrites,nG,Se()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function nG(n){return n.visible}function Gx(n,e,t){let r=cr.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const o=s.path;let a;if(s.snap)or(t,o)?(a=Bn(t,o),r=Gu(r,a,s.snap)):or(o,t)&&(a=Bn(o,t),r=Gu(r,Se(),s.snap.getChild(a)));else if(s.children){if(or(t,o))a=Bn(t,o),r=RR(r,a,s.children);else if(or(o,t))if(a=Bn(o,t),de(a))r=RR(r,Se(),s.children);else{const l=Va(s.children,pe(a));if(l){const c=l.getChild(xe(a));r=Gu(r,Se(),c)}}}else throw ll("WriteRecord should have .snap or .children")}}return r}function Hx(n,e,t,r,i){if(!r&&!i){const s=No(n.visibleWrites,e);if(s!=null)return s;{const o=Hi(n.visibleWrites,e);if(Iy(o))return t;if(t==null&&!Ey(o,Se()))return null;{const a=t||ve.EMPTY_NODE;return rl(o,a)}}}else{const s=Hi(n.visibleWrites,e);if(!i&&Iy(s))return t;if(!i&&t==null&&!Ey(s,Se()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(or(c.path,e)||or(e,c.path))},a=Gx(n.allWrites,o,e),l=t||ve.EMPTY_NODE;return rl(a,l)}}}function rG(n,e,t){let r=ve.EMPTY_NODE;const i=No(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Wt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){const s=Hi(n.visibleWrites,e);return t.forEachChild(Wt,(o,a)=>{const l=rl(Hi(s,new Ve(o)),a);r=r.updateImmediateChild(o,l)}),CR(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Hi(n.visibleWrites,e);return CR(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function iG(n,e,t,r,i){K(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=wt(e,t);if(Ey(n.visibleWrites,s))return null;{const o=Hi(n.visibleWrites,s);return Iy(o)?i.getChild(t):rl(o,i.getChild(t))}}function sG(n,e,t,r){const i=wt(e,t),s=No(n.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(t)){const o=Hi(n.visibleWrites,i);return rl(o,r.getNode().getImmediateChild(t))}else return null}function oG(n,e){return No(n.visibleWrites,e)}function aG(n,e,t,r,i,s,o){let a;const l=Hi(n.visibleWrites,e),c=No(l,Se());if(c!=null)a=c;else if(t!=null)a=rl(l,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],d=o.getCompare(),p=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let g=p.getNext();for(;g&&h.length<i;)d(g,r)!==0&&h.push(g),g=p.getNext();return h}else return[]}function lG(){return{visibleWrites:cr.empty(),allWrites:[],lastWriteId:-1}}function Ty(n,e,t,r){return Hx(n.writeTree,n.treePath,e,t,r)}function Kx(n,e){return rG(n.writeTree,n.treePath,e)}function PR(n,e,t,r){return iG(n.writeTree,n.treePath,e,t,r)}function jf(n,e){return oG(n.writeTree,wt(n.treePath,e))}function uG(n,e,t,r,i,s){return aG(n.writeTree,n.treePath,e,t,r,i,s)}function EE(n,e,t){return sG(n.writeTree,n.treePath,e,t)}function Qx(n,e){return Yx(wt(n.treePath,e),n.writeTree)}function Yx(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cG{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;K(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),K(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(r,ER(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(r,U5(r,i.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(r,F5(r,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(r,ER(r,e.snapshotNode,i.oldSnap));else throw ll("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hG{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}}const Jx=new hG;class IE{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new wE(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return EE(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:yo(this.viewCache_),s=uG(this.writes_,i,t,1,r,e);return s.length===0?null:s[0]}}function dG(n,e){K(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),K(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function fG(n,e,t,r,i){const s=new cG;let o,a;if(t.type===Cr.OVERWRITE){const c=t;c.source.fromUser?o=Sy(n,e,c.path,c.snap,r,i,s):(K(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!de(c.path),o=zf(n,e,c.path,c.snap,r,i,a,s))}else if(t.type===Cr.MERGE){const c=t;c.source.fromUser?o=mG(n,e,c.path,c.children,r,i,s):(K(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=Ry(n,e,c.path,c.children,r,i,a,s))}else if(t.type===Cr.ACK_USER_WRITE){const c=t;c.revert?o=yG(n,e,c.path,r,i,s):o=gG(n,e,c.path,c.affectedTree,r,i,s)}else if(t.type===Cr.LISTEN_COMPLETE)o=_G(n,e,t.path,r,s);else throw ll("Unknown operation type: "+t.type);const l=s.getChanges();return pG(e,o,l),{viewCache:o,changes:l}}function pG(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=wy(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(M5(wy(e)))}}function Xx(n,e,t,r,i,s){const o=e.eventCache;if(jf(r,t)!=null)return e;{let a,l;if(de(t))if(K(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=yo(e),h=c instanceof ve?c:ve.EMPTY_NODE,d=Kx(r,h);a=n.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=Ty(r,yo(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=pe(t);if(c===".priority"){K(as(t)===1,"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const d=PR(r,t,h,l);d!=null?a=n.filter.updatePriority(h,d):a=o.getNode()}else{const h=xe(t);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const p=PR(r,t,o.getNode(),l);p!=null?d=o.getNode().getImmediateChild(c).updateChild(h,p):d=o.getNode().getImmediateChild(c)}else d=EE(r,c,e.serverCache);d!=null?a=n.filter.updateChild(o.getNode(),c,d,h,i,s):a=o.getNode()}}return Wu(e,a,o.isFullyInitialized()||de(t),n.filter.filtersNodes())}}function zf(n,e,t,r,i,s,o,a){const l=e.serverCache;let c;const h=o?n.filter:n.filter.getIndexedFilter();if(de(t))c=h.updateFullNode(l.getNode(),r,null);else if(h.filtersNodes()&&!l.isFiltered()){const g=l.getNode().updateChild(t,r);c=h.updateFullNode(l.getNode(),g,null)}else{const g=pe(t);if(!l.isCompleteForPath(t)&&as(t)>1)return e;const y=xe(t),C=l.getNode().getImmediateChild(g).updateChild(y,r);g===".priority"?c=h.updatePriority(l.getNode(),C):c=h.updateChild(l.getNode(),g,C,y,Jx,null)}const d=qx(e,c,l.isFullyInitialized()||de(t),h.filtersNodes()),p=new IE(i,d,s);return Xx(n,d,t,i,p,a)}function Sy(n,e,t,r,i,s,o){const a=e.eventCache;let l,c;const h=new IE(i,e,s);if(de(t))c=n.filter.updateFullNode(e.eventCache.getNode(),r,o),l=Wu(e,c,!0,n.filter.filtersNodes());else{const d=pe(t);if(d===".priority")c=n.filter.updatePriority(e.eventCache.getNode(),r),l=Wu(e,c,a.isFullyInitialized(),a.isFiltered());else{const p=xe(t),g=a.getNode().getImmediateChild(d);let y;if(de(p))y=r;else{const S=h.getCompleteChild(d);S!=null?Px(p)===".priority"&&S.getChild(bx(p)).isEmpty()?y=S:y=S.updateChild(p,r):y=ve.EMPTY_NODE}if(g.equals(y))l=e;else{const S=n.filter.updateChild(a.getNode(),d,y,p,h,o);l=Wu(e,S,a.isFullyInitialized(),n.filter.filtersNodes())}}}return l}function kR(n,e){return n.eventCache.isCompleteForChild(e)}function mG(n,e,t,r,i,s,o){let a=e;return r.foreach((l,c)=>{const h=wt(t,l);kR(e,pe(h))&&(a=Sy(n,a,h,c,i,s,o))}),r.foreach((l,c)=>{const h=wt(t,l);kR(e,pe(h))||(a=Sy(n,a,h,c,i,s,o))}),a}function bR(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Ry(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;de(t)?c=r:c=new Ne(null).setTree(t,r);const h=e.serverCache.getNode();return c.children.inorderTraversal((d,p)=>{if(h.hasChild(d)){const g=e.serverCache.getNode().getImmediateChild(d),y=bR(n,g,p);l=zf(n,l,new Ve(d),y,i,s,o,a)}}),c.children.inorderTraversal((d,p)=>{const g=!e.serverCache.isCompleteForChild(d)&&p.value===null;if(!h.hasChild(d)&&!g){const y=e.serverCache.getNode().getImmediateChild(d),S=bR(n,y,p);l=zf(n,l,new Ve(d),S,i,s,o,a)}}),l}function gG(n,e,t,r,i,s,o){if(jf(i,t)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(de(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return zf(n,e,t,l.getNode().getChild(t),i,s,a,o);if(de(t)){let c=new Ne(null);return l.getNode().forEachChild(Pa,(h,d)=>{c=c.set(new Ve(h),d)}),Ry(n,e,t,c,i,s,a,o)}else return e}else{let c=new Ne(null);return r.foreach((h,d)=>{const p=wt(t,h);l.isCompleteForPath(p)&&(c=c.set(h,l.getNode().getChild(p)))}),Ry(n,e,t,c,i,s,a,o)}}function _G(n,e,t,r,i){const s=e.serverCache,o=qx(e,s.getNode(),s.isFullyInitialized()||de(t),s.isFiltered());return Xx(n,o,t,r,Jx,i)}function yG(n,e,t,r,i,s){let o;if(jf(r,t)!=null)return e;{const a=new IE(r,e,i),l=e.eventCache.getNode();let c;if(de(t)||pe(t)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=Ty(r,yo(e));else{const d=e.serverCache.getNode();K(d instanceof ve,"serverChildren would be complete if leaf node"),h=Kx(r,d)}h=h,c=n.filter.updateFullNode(l,h,s)}else{const h=pe(t);let d=EE(r,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=l.getImmediateChild(h)),d!=null?c=n.filter.updateChild(l,h,d,xe(t),a,s):e.eventCache.getNode().hasChild(h)?c=n.filter.updateChild(l,h,ve.EMPTY_NODE,xe(t),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Ty(r,yo(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||jf(r,Se())!=null,Wu(e,c,o,n.filter.filtersNodes())}}function vG(n,e){const t=yo(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!de(e)&&!t.getImmediateChild(pe(e)).isEmpty())?t.getChild(e):null}function NR(n,e,t,r){e.type===Cr.MERGE&&e.source.queryId!==null&&(K(yo(n.viewCache_),"We should always have a full cache before handling merges"),K(wy(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=fG(n.processor_,i,e,t,r);return dG(n.processor_,s.viewCache),K(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,wG(n,s.changes,s.viewCache.eventCache.getNode())}function wG(n,e,t,r){const i=n.eventRegistrations_;return H5(n.eventGenerator_,e,t,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xR;function EG(n){K(!xR,"__referenceConstructor has already been defined"),xR=n}function TE(n,e,t,r){const i=e.source.queryId;if(i!==null){const s=n.views.get(i);return K(s!=null,"SyncTree gave us an op for an invalid query."),NR(s,e,t,r)}else{let s=[];for(const o of n.views.values())s=s.concat(NR(o,e,t,r));return s}}function SE(n,e){let t=null;for(const r of n.views.values())t=t||vG(r,e);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DR;function IG(n){K(!DR,"__referenceConstructor has already been defined"),DR=n}class OR{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ne(null),this.pendingWriteTree_=lG(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function TG(n,e,t,r,i){return J5(n.pendingWriteTree_,e,t,r,i),i?em(n,new _o(Ux(),e,t)):[]}function fa(n,e,t=!1){const r=X5(n.pendingWriteTree_,e);if(Z5(n.pendingWriteTree_,e)){let s=new Ne(null);return r.snap!=null?s=s.set(Se(),!0):Hn(r.children,o=>{s=s.set(new Ve(o),!0)}),em(n,new Bf(r.path,s,t))}else return[]}function Zp(n,e,t){return em(n,new _o(Bx(),e,t))}function SG(n,e,t){const r=Ne.fromObject(t);return em(n,new Lc(Bx(),e,r))}function RG(n,e,t,r){const i=nD(n,r);if(i!=null){const s=rD(i),o=s.path,a=s.queryId,l=Bn(o,e),c=new _o(jx(a),l,t);return iD(n,o,c)}else return[]}function AG(n,e,t,r){const i=nD(n,r);if(i){const s=rD(i),o=s.path,a=s.queryId,l=Bn(o,e),c=Ne.fromObject(t),h=new Lc(jx(a),l,c);return iD(n,o,h)}else return[]}function Zx(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const l=Bn(o,e),c=SE(a,l);if(c)return c});return Hx(i,e,s,t,!0)}function em(n,e){return eD(e,n.syncPointTree_,null,Wx(n.pendingWriteTree_,Se()))}function eD(n,e,t,r){if(de(n.path))return tD(n,e,t,r);{const i=e.get(Se());t==null&&i!=null&&(t=SE(i,Se()));let s=[];const o=pe(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const c=t?t.getImmediateChild(o):null,h=Qx(r,o);s=s.concat(eD(a,l,c,h))}return i&&(s=s.concat(TE(i,n,r,t))),s}}function tD(n,e,t,r){const i=e.get(Se());t==null&&i!=null&&(t=SE(i,Se()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,c=Qx(r,o),h=n.operationForChild(o);h&&(s=s.concat(tD(h,a,l,c)))}),i&&(s=s.concat(TE(i,n,r,t))),s}function nD(n,e){return n.tagToQueryMap.get(e)}function rD(n){const e=n.indexOf("$");return K(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Ve(n.substr(0,e))}}function iD(n,e,t){const r=n.syncPointTree_.get(e);K(r,"Missing sync point for query tag that we're tracking");const i=Wx(n.pendingWriteTree_,e);return TE(r,t,i,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new RE(t)}node(){return this.node_}}class AE{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=wt(this.path_,e);return new AE(this.syncTree_,t)}node(){return Zx(this.syncTree_,this.path_)}}const CG=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},LR=function(n,e,t){if(!n||typeof n!="object")return n;if(K(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return PG(n[".sv"],e,t);if(typeof n[".sv"]=="object")return kG(n[".sv"],e);K(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},PG=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:K(!1,"Unexpected server value: "+n)}},kG=function(n,e,t){n.hasOwnProperty("increment")||K(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;typeof r!="number"&&K(!1,"Unexpected increment value: "+r);const i=e.node();if(K(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},bG=function(n,e,t,r){return CE(e,new AE(t,n),r)},NG=function(n,e,t){return CE(n,new RE(e),t)};function CE(n,e,t){const r=n.getPriority().val(),i=LR(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=LR(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new mt(a,qt(i)):n}else{const o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new mt(i))),o.forEachChild(Wt,(a,l)=>{const c=CE(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function kE(n,e){let t=e instanceof Ve?e:new Ve(e),r=n,i=pe(t);for(;i!==null;){const s=Va(r.node.children,i)||{children:{},childCount:0};r=new PE(i,r,s),t=xe(t),i=pe(t)}return r}function Rl(n){return n.node.value}function sD(n,e){n.node.value=e,Ay(n)}function oD(n){return n.node.childCount>0}function xG(n){return Rl(n)===void 0&&!oD(n)}function tm(n,e){Hn(n.node.children,(t,r)=>{e(new PE(t,n,r))})}function aD(n,e,t,r){t&&!r&&e(n),tm(n,i=>{aD(i,e,!0,r)}),t&&r&&e(n)}function DG(n,e,t){let r=n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function gh(n){return new Ve(n.parent===null?n.name:gh(n.parent)+"/"+n.name)}function Ay(n){n.parent!==null&&OG(n.parent,n.name,n)}function OG(n,e,t){const r=xG(t),i=dr(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Ay(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Ay(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LG=/[\[\].#$\/\u0000-\u001F\u007F]/,VG=/[\[\].#$\u0000-\u001F\u007F]/,Tg=10*1024*1024,lD=function(n){return typeof n=="string"&&n.length!==0&&!LG.test(n)},MG=function(n){return typeof n=="string"&&n.length!==0&&!VG.test(n)},FG=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),MG(n)},uD=function(n,e,t){const r=t instanceof Ve?new _5(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Ps(r));if(typeof e=="function")throw new Error(n+"contains a function "+Ps(r)+" with contents = "+e.toString());if(lx(e))throw new Error(n+"contains "+e.toString()+" "+Ps(r));if(typeof e=="string"&&e.length>Tg/3&&up(e)>Tg)throw new Error(n+"contains a string greater than "+Tg+" utf8 bytes "+Ps(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Hn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!lD(o)))throw new Error(n+" contains an invalid key ("+o+") "+Ps(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);y5(r,o),uD(n,a,r),v5(r)}),i&&s)throw new Error(n+' contains ".value" child '+Ps(r)+" in addition to actual children.")}},UG=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!lD(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!FG(t))throw new Error(OM(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BG{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function jG(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();t!==null&&!Nx(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function xo(n,e,t){jG(n,t),zG(n,r=>or(r,e)||or(e,r))}function zG(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];if(i){const s=i.path;e(s)?(qG(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function qG(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const r=t.getEventRunner();qu&&zt("event: "+t.toString()),ph(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $G="repo_interrupt",WG=25;class GG{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new BG,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Uf(),this.transactionQueueTree_=new PE,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function HG(n,e,t){if(n.stats_=mE(n.repoInfo_),n.forceRestClient_||jW())n.server_=new Ff(n.repoInfo_,(r,i,s,o)=>{VR(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>MR(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{bt(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Zr(n.repoInfo_,e,(r,i,s,o)=>{VR(n,r,i,s,o)},r=>{MR(n,r)},r=>{QG(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=HW(n.repoInfo_,()=>new G5(n.stats_,n.server_)),n.infoData_=new j5,n.infoSyncTree_=new OR({startListening:(r,i,s,o)=>{let a=[];const l=n.infoData_.getNode(r._path);return l.isEmpty()||(a=Zp(n.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),bE(n,"connected",!1),n.serverSyncTree_=new OR({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);xo(n.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function KG(n){const t=n.infoData_.getNode(new Ve(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function cD(n){return CG({timestamp:KG(n)})}function VR(n,e,t,r,i){n.dataUpdateCount++;const s=new Ve(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){const l=df(t,c=>qt(c));o=AG(n.serverSyncTree_,s,l,i)}else{const l=qt(t);o=RG(n.serverSyncTree_,s,l,i)}else if(r){const l=df(t,c=>qt(c));o=SG(n.serverSyncTree_,s,l)}else{const l=qt(t);o=Zp(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=xE(n,s)),xo(n.eventQueue_,a,o)}function MR(n,e){bE(n,"connected",e),e===!1&&JG(n)}function QG(n,e){Hn(e,(t,r)=>{bE(n,t,r)})}function bE(n,e,t){const r=new Ve("/.info/"+e),i=qt(t);n.infoData_.updateSnapshot(r,i);const s=Zp(n.infoSyncTree_,r,i);xo(n.eventQueue_,r,s)}function YG(n){return n.nextWriteId_++}function JG(n){hD(n,"onDisconnectEvents");const e=cD(n),t=Uf();vy(n.onDisconnect_,Se(),(i,s)=>{const o=bG(i,s,n.serverSyncTree_,e);Fx(t,i,o)});let r=[];vy(t,Se(),(i,s)=>{r=r.concat(Zp(n.serverSyncTree_,i,s));const o=tH(n,i);xE(n,o)}),n.onDisconnect_=Uf(),xo(n.eventQueue_,Se(),r)}function XG(n){n.persistentConnection_&&n.persistentConnection_.interrupt($G)}function hD(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),zt(t,...e)}function dD(n,e,t){return Zx(n.serverSyncTree_,e,t)||ve.EMPTY_NODE}function NE(n,e=n.transactionQueueTree_){if(e||nm(n,e),Rl(e)){const t=pD(n,e);K(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&ZG(n,gh(e),t)}else oD(e)&&tm(e,t=>{NE(n,t)})}function ZG(n,e,t){const r=t.map(c=>c.currentWriteId),i=dD(n,e,r);let s=i;const o=i.hash();for(let c=0;c<t.length;c++){const h=t[c];K(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=Bn(e,h.path);s=s.updateChild(d,h.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{hD(n,"transaction put response",{path:l.toString(),status:c});let h=[];if(c==="ok"){const d=[];for(let p=0;p<t.length;p++)t[p].status=2,h=h.concat(fa(n.serverSyncTree_,t[p].currentWriteId)),t[p].onComplete&&d.push(()=>t[p].onComplete(null,!0,t[p].currentOutputSnapshotResolved)),t[p].unwatcher();nm(n,kE(n.transactionQueueTree_,e)),NE(n,n.transactionQueueTree_),xo(n.eventQueue_,e,h);for(let p=0;p<d.length;p++)ph(d[p])}else{if(c==="datastale")for(let d=0;d<t.length;d++)t[d].status===3?t[d].status=4:t[d].status=0;else{Pn("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=c}xE(n,e)}},o)}function xE(n,e){const t=fD(n,e),r=gh(t),i=pD(n,t);return eH(n,i,r),r}function eH(n,e,t){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Bn(t,l.path);let h=!1,d;if(K(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)h=!0,d=l.abortReason,i=i.concat(fa(n.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=WG)h=!0,d="maxretry",i=i.concat(fa(n.serverSyncTree_,l.currentWriteId,!0));else{const p=dD(n,l.path,o);l.currentInputSnapshot=p;const g=e[a].update(p.val());if(g!==void 0){uD("transaction failed: Data returned ",g,l.path);let y=qt(g);typeof g=="object"&&g!=null&&dr(g,".priority")||(y=y.updatePriority(p.getPriority()));const C=l.currentWriteId,I=cD(n),w=NG(y,p,I);l.currentOutputSnapshotRaw=y,l.currentOutputSnapshotResolved=w,l.currentWriteId=YG(n),o.splice(o.indexOf(C),1),i=i.concat(TG(n.serverSyncTree_,l.path,w,l.currentWriteId,l.applyLocally)),i=i.concat(fa(n.serverSyncTree_,C,!0))}else h=!0,d="nodata",i=i.concat(fa(n.serverSyncTree_,l.currentWriteId,!0))}xo(n.eventQueue_,t,i),i=[],h&&(e[a].status=2,function(p){setTimeout(p,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}nm(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)ph(r[a]);NE(n,n.transactionQueueTree_)}function fD(n,e){let t,r=n.transactionQueueTree_;for(t=pe(e);t!==null&&Rl(r)===void 0;)r=kE(r,t),e=xe(e),t=pe(e);return r}function pD(n,e){const t=[];return mD(n,e,t),t.sort((r,i)=>r.order-i.order),t}function mD(n,e,t){const r=Rl(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);tm(e,i=>{mD(n,i,t)})}function nm(n,e){const t=Rl(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,sD(e,t.length>0?t:void 0)}tm(e,r=>{nm(n,r)})}function tH(n,e){const t=gh(fD(n,e)),r=kE(n.transactionQueueTree_,e);return DG(r,i=>{Sg(n,i)}),Sg(n,r),aD(r,i=>{Sg(n,i)}),t}function Sg(n,e){const t=Rl(e);if(t){const r=[];let i=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(K(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(K(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(fa(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?sD(e,void 0):t.length=s+1,xo(n.eventQueue_,gh(e),i);for(let o=0;o<r.length;o++)ph(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nH(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function rH(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Pn(`Invalid query segment '${t}' in query '${n}'`)}return e}const FR=function(n,e){const t=iH(n),r=t.namespace;t.domain==="firebase.com"&&mo(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&mo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||DW();const i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new $W(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new Ve(t.pathString)}},iH=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",l=443;if(typeof n=="string"){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let h=n.indexOf("/");h===-1&&(h=n.length);let d=n.indexOf("?");d===-1&&(d=n.length),e=n.substring(0,Math.min(h,d)),h<d&&(i=nH(n.substring(h,d)));const p=rH(n.substring(Math.min(n.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const g=e.slice(0,c);if(g.toLowerCase()==="localhost")t="localhost";else if(g.split(".").length<=2)t=g;else{const y=e.indexOf(".");r=e.substring(0,y).toLowerCase(),t=e.substring(y+1),s=r}"ns"in p&&(s=p.ns)}return{host:e,port:l,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return de(this._path)?null:Px(this._path)}get ref(){return new Al(this._repo,this._path)}get _queryIdentifier(){const e=TR(this._queryParams),t=fE(e);return t==="{}"?"default":t}get _queryObject(){return TR(this._queryParams)}isEqual(e){if(e=X(e),!(e instanceof DE))return!1;const t=this._repo===e._repo,r=Nx(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+g5(this._path)}}class Al extends DE{constructor(e,t){super(e,t,new vE,!1)}get parent(){const e=bx(this._path);return e===null?null:new Al(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}EG(Al);IG(Al);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sH="FIREBASE_DATABASE_EMULATOR_HOST",Cy={};let oH=!1;function aH(n,e,t,r,i){let s=r||n.options.databaseURL;s===void 0&&(n.options.projectId||mo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),zt("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=FR(s,i),a=o.repoInfo,l;typeof process<"u"&&iR&&(l=iR[sH]),l?(s=`http://${l}?ns=${a.namespace}`,o=FR(s,i),a=o.repoInfo):o.repoInfo.secure;const c=new qW(n.name,n.options,e);UG("Invalid Firebase Database URL",o),de(o.path)||mo("Database URL must point to the root of a Firebase Database (not including a child path).");const h=uH(a,n,c,new zW(n.name,t));return new cH(h,n)}function lH(n,e){const t=Cy[e];(!t||t[n.key]!==n)&&mo(`Database ${e}(${n.repoInfo_}) has already been deleted.`),XG(n),delete t[n.key]}function uH(n,e,t,r){let i=Cy[e.name];i||(i={},Cy[e.name]=i);let s=i[n.toURLString()];return s&&mo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new GG(n,oH,t,r),i[n.toURLString()]=s,s}class cH{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(HG(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Al(this._repo,Se())),this._rootInternal}_delete(){return this._rootInternal!==null&&(lH(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&mo("Cannot call "+e+" on a deleted database.")}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hH(n){CW(Mr),Dr(new bn("database",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return aH(r,i,s,t)},"PUBLIC").setMultipleInstances(!0)),nn(sR,oR,n),nn(sR,oR,"esm2017")}Zr.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Zr.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};hH();const dH=()=>{const[n,e]=B.useState(null),[t,r]=B.useState(""),[i,s]=B.useState(""),[o,a]=B.useState(""),[l,c]=B.useState(""),[h,d]=B.useState(""),[p,g]=B.useState(null),[y,S]=B.useState(!1),[C,I]=B.useState(null),[w,E]=B.useState(null),k=sP(),[M,F]=B.useState(""),[T,v]=B.useState(""),[R,P]=B.useState(null),[b,N]=B.useState(null),A="https://apinationscomu.vercel.app/",[un,Fr]=B.useState(0),[_s,Kn]=B.useState(""),[Q,ne]=B.useState(""),[re,Pe]=B.useState(""),[we,ze]=B.useState(0),[Qn,Yn]=B.useState(0),[Jn,Xn]=B.useState("");async function rm(){const te=cg();if(n){const he=Gs(te,"users",n.uid),Ot=await nN(he);Ot.exists()&&F(Ot.data().pseudong)}}rm(),B.useEffect(()=>{(async()=>{try{const he=await ot.get(`${A}user?player=${M}`);N(he.data);let Ot=new Date(0),On="";if(he.data.servers){for(const[ys,pi]of Object.entries(he.data.servers))if(pi.last_connection){const Lo=new Date(pi.last_connection);Lo>Ot&&(Ot=Lo,On=ys)}Fr(Ot),Kn(On),On&&he.data.servers[On]&&(ne(he.data.servers[On].country||"pas de pays"),Pe(he.data.servers[On].country_rank||""),ze(he.data.servers[On].power||0),Yn(he.data.servers[On].max_power||0),Xn(he.data.description||"pas de description"))}}catch(he){console.error("Error fetching data:",he)}})()},[M,A]),B.useEffect(()=>{ot.get(A+"playercount").then(te=>{P(te.data)})},[]);const im=R?Object.values(R).reduce((te,he)=>te+(he.players>-1?he.players:0),0):0;B.useEffect(()=>{const te=Te.auth().onAuthStateChanged(he=>{he?(e(he),S(he.providerData.some(Ot=>Ot.providerId==="google.com"))):(e(""),k("/nationglorycomu/Auth"))});return()=>te()},[k]);const Do=async()=>{try{const te=cg();await Nf(Gs(te,"users",n.uid),{pseudong:T},{merge:!0}),console.log("Pseudo NG mis  jour avec succs !"),location.reload()}catch(te){g(te.message),console.error(te.message)}},Oo=async()=>{try{const te=new Te.auth.GoogleAuthProvider;await Te.auth().currentUser.linkWithPopup(te),console.log("Compte Google li avec succs !"),S(!0),location.reload()}catch(te){g(te.message),console.error(te.message)}},Cl=async()=>{try{await Te.auth().currentUser.updateEmail(t),console.log("Adresse email mise  jour avec succs !"),location.reload()}catch(te){g(te.message),console.error(te.message)}},Pl=async()=>{try{if(i!==o){g("Les mots de passe doivent correspondre.");return}await Te.auth().currentUser.updatePassword(i),console.log("Mot de passe mis  jour avec succs !"),location.reload()}catch(te){g(te.message),console.error(te.message)}},kl=async()=>{try{await Te.auth().currentUser.updateProfile({displayName:`${l} ${h}`}),console.log("Nom mis  jour avec succs !"),location.reload()}catch(te){g(te.message),console.error(te.message)}},bl=te=>{E(te.target.files[0])},_h=async()=>{try{if(w){const te=ly(Te.storage(),`profiles/${e9()}`),he=await k6(te,w);console.log(he);const Ot=await DN(he.ref);I(Ot);const ys=v4().currentUser;if(ys){await lk(ys,{photoURL:Ot});const pi=cg();await Nf(Gs(pi,"users",ys.uid),{photoURL:Ot},{merge:!0}),location.reload()}else console.error("Utilisateur non connect")}}catch(te){console.error("Erreur lors du tlchargement de l'image de profil :",te)}};return U.jsxs("div",{children:[U.jsx(aE,{}),U.jsx("h1",{children:"Profil de l'utilisateur"}),p&&U.jsx("p",{style:{color:"red"},children:p}),n?U.jsxs("div",{children:[U.jsx("h2",{children:"Informations de l'utilisateur"}),U.jsx("img",{src:n.photoURL||"https://firebasestorage.googleapis.com/v0/b/nationsglory-62812.appspot.com/o/Prendre%20sa%20sant%C3%A9%20en%20main%20n%E2%80%99a%20jamais%20%C3%A9t%C3%A9%20aussi%20simple.jpg?alt=media&token=dc085ed1-9a30-4dc8-92cc-ad7eaa8a840c"}),U.jsxs("p",{children:["Prnom: ",n.displayName.split(" ")[0]]}),U.jsxs("p",{children:["Nom: ",n.displayName.split(" ")[1]]}),U.jsxs("p",{children:["Email: ",n.email]}),U.jsxs("p",{children:["Pseudo NG: ",M]}),U.jsx("h2",{children:"Informations de nationsglory"}),U.jsxs("div",{children:["Nombre total de joueurs connects : ",im,U.jsx("br",{}),R&&U.jsx("select",{children:Array.from({length:17},(te,he)=>U.jsxs("option",{value:R[he]&&R[he].name,children:["Nombre de connecter sur ",R[he]&&R[he].name," : ",R[he]?R[he].players==-1?0:R[he].players:null]},he))})]}),U.jsxs("div",{children:["description : ",Jn,U.jsx("br",{}),"server : ",_s,U.jsx("br",{}),"dernier connection au server : ",un.toLocaleString(),U.jsx("br",{}),"pays : ",Q,U.jsx("br",{}),"rang dans le pays : ",re,U.jsx("br",{}),"power : ",we," / ",Qn]}),U.jsx("h2",{children:"connection a google"}),U.jsx("div",{children:y?U.jsx("p",{children:"Connect avec Google"}):U.jsx("button",{onClick:Oo,children:"Lier un compte Google"})}),U.jsxs("div",{children:[U.jsx("h2",{children:"Modifier l'adresse email"}),U.jsx("input",{type:"email",placeholder:"Nouvelle adresse email",value:t,onChange:te=>r(te.target.value)}),U.jsx("button",{onClick:Cl,children:"Mettre  jour l'email"})]}),U.jsxs("div",{children:[U.jsx("h2",{children:"Modifier le mot de passe"}),U.jsx("input",{type:"password",placeholder:"Nouveau mot de passe",value:i,onChange:te=>s(te.target.value)}),U.jsx("input",{type:"password",placeholder:"Confirmer le nouveau mot de passe",value:o,onChange:te=>a(te.target.value)}),U.jsx("button",{onClick:Pl,children:"Mettre  jour le mot de passe"})]}),U.jsxs("div",{children:[U.jsx("h2",{children:"Modifier le nom"}),U.jsx("input",{type:"text",placeholder:"Nouveau prnom",value:l,onChange:te=>c(te.target.value)}),U.jsx("input",{type:"text",placeholder:"Nouveau nom de famille",value:h,onChange:te=>d(te.target.value)}),U.jsx("button",{onClick:kl,children:"Mettre  jour le nom"})]}),U.jsxs("div",{children:[U.jsx("h2",{children:"Modifier l'image de profil"}),U.jsx("input",{type:"file",onChange:bl}),U.jsx("button",{onClick:_h,children:"Tlcharger l'image de profil"})]}),U.jsxs("div",{children:[U.jsx("h2",{children:"Modifier le pseudo NG"}),U.jsx("input",{type:"text",placeholder:"Pseudo NG",value:T,onChange:te=>v(te.target.value)}),U.jsx("button",{onClick:Do,children:"Mettre  jour le pseudo NG"})]}),U.jsx("div",{children:U.jsx(LN,{})})]}):U.jsx("p",{children:"Veuillez vous connecter pour accder  votre profil."})]})};function fH(){return U.jsx("div",{children:U.jsxs(sM,{children:[U.jsx(Ed,{path:"/nationglorycomu/",element:U.jsx(G6,{})}),U.jsx(Ed,{path:"/nationglorycomu/auth",element:U.jsx(Q6,{})}),U.jsx(Ed,{path:"/nationglorycomu/profile",element:U.jsx(dH,{})})]})})}const pH=document.getElementById("root"),mH=Rg.createRoot(pH);mH.render(U.jsx(dM,{children:U.jsx(fH,{})}));
