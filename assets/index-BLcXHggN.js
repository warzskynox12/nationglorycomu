function kA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function NA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xA={exports:{}},jp={},DA={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vh=Symbol.for("react.element"),DO=Symbol.for("react.portal"),OO=Symbol.for("react.fragment"),LO=Symbol.for("react.strict_mode"),MO=Symbol.for("react.profiler"),VO=Symbol.for("react.provider"),FO=Symbol.for("react.context"),UO=Symbol.for("react.forward_ref"),BO=Symbol.for("react.suspense"),jO=Symbol.for("react.memo"),zO=Symbol.for("react.lazy"),lT=Symbol.iterator;function qO(t){return t===null||typeof t!="object"?null:(t=lT&&t[lT]||t["@@iterator"],typeof t=="function"?t:null)}var OA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},LA=Object.assign,MA={};function ou(t,e,n){this.props=t,this.context=e,this.refs=MA,this.updater=n||OA}ou.prototype.isReactComponent={};ou.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ou.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function VA(){}VA.prototype=ou.prototype;function yv(t,e,n){this.props=t,this.context=e,this.refs=MA,this.updater=n||OA}var vv=yv.prototype=new VA;vv.constructor=yv;LA(vv,ou.prototype);vv.isPureReactComponent=!0;var uT=Array.isArray,FA=Object.prototype.hasOwnProperty,wv={current:null},UA={key:!0,ref:!0,__self:!0,__source:!0};function BA(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)FA.call(e,r)&&!UA.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Vh,type:t,key:s,ref:o,props:i,_owner:wv.current}}function $O(t,e){return{$$typeof:Vh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ev(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vh}function WO(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var cT=/\/+/g;function ug(t,e){return typeof t=="object"&&t!==null&&t.key!=null?WO(""+t.key):e.toString(36)}function uf(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Vh:case DO:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+ug(o,0):r,uT(i)?(n="",t!=null&&(n=t.replace(cT,"$&/")+"/"),uf(i,e,n,"",function(c){return c})):i!=null&&(Ev(i)&&(i=$O(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(cT,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",uT(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+ug(s,a);o+=uf(s,e,n,l,i)}else if(l=qO(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+ug(s,a++),o+=uf(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function xd(t,e,n){if(t==null)return t;var r=[],i=0;return uf(t,r,"","",function(s){return e.call(n,s,i++)}),r}function HO(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Vn={current:null},cf={transition:null},GO={ReactCurrentDispatcher:Vn,ReactCurrentBatchConfig:cf,ReactCurrentOwner:wv};function jA(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:xd,forEach:function(t,e,n){xd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return xd(t,function(){e++}),e},toArray:function(t){return xd(t,function(e){return e})||[]},only:function(t){if(!Ev(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Te.Component=ou;Te.Fragment=OO;Te.Profiler=MO;Te.PureComponent=yv;Te.StrictMode=LO;Te.Suspense=BO;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GO;Te.act=jA;Te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=LA({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=wv.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)FA.call(e,l)&&!UA.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Vh,type:t.type,key:i,ref:s,props:r,_owner:o}};Te.createContext=function(t){return t={$$typeof:FO,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:VO,_context:t},t.Consumer=t};Te.createElement=BA;Te.createFactory=function(t){var e=BA.bind(null,t);return e.type=t,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(t){return{$$typeof:UO,render:t}};Te.isValidElement=Ev;Te.lazy=function(t){return{$$typeof:zO,_payload:{_status:-1,_result:t},_init:HO}};Te.memo=function(t,e){return{$$typeof:jO,type:t,compare:e===void 0?null:e}};Te.startTransition=function(t){var e=cf.transition;cf.transition={};try{t()}finally{cf.transition=e}};Te.unstable_act=jA;Te.useCallback=function(t,e){return Vn.current.useCallback(t,e)};Te.useContext=function(t){return Vn.current.useContext(t)};Te.useDebugValue=function(){};Te.useDeferredValue=function(t){return Vn.current.useDeferredValue(t)};Te.useEffect=function(t,e){return Vn.current.useEffect(t,e)};Te.useId=function(){return Vn.current.useId()};Te.useImperativeHandle=function(t,e,n){return Vn.current.useImperativeHandle(t,e,n)};Te.useInsertionEffect=function(t,e){return Vn.current.useInsertionEffect(t,e)};Te.useLayoutEffect=function(t,e){return Vn.current.useLayoutEffect(t,e)};Te.useMemo=function(t,e){return Vn.current.useMemo(t,e)};Te.useReducer=function(t,e,n){return Vn.current.useReducer(t,e,n)};Te.useRef=function(t){return Vn.current.useRef(t)};Te.useState=function(t){return Vn.current.useState(t)};Te.useSyncExternalStore=function(t,e,n){return Vn.current.useSyncExternalStore(t,e,n)};Te.useTransition=function(){return Vn.current.useTransition()};Te.version="18.3.1";DA.exports=Te;var U=DA.exports;const zA=NA(U),KO=kA({__proto__:null,default:zA},[U]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QO=U,YO=Symbol.for("react.element"),JO=Symbol.for("react.fragment"),XO=Object.prototype.hasOwnProperty,ZO=QO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eL={key:!0,ref:!0,__self:!0,__source:!0};function qA(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)XO.call(e,r)&&!eL.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:YO,type:t,key:s,ref:o,props:i,_owner:ZO.current}}jp.Fragment=JO;jp.jsx=qA;jp.jsxs=qA;xA.exports=jp;var q=xA.exports,$A={exports:{}},hr={},WA={exports:{}},HA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,ue){var he=H.length;H.push(ue);e:for(;0<he;){var xe=he-1>>>1,ye=H[xe];if(0<i(ye,ue))H[xe]=ue,H[he]=ye,he=xe;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var ue=H[0],he=H.pop();if(he!==ue){H[0]=he;e:for(var xe=0,ye=H.length,Oe=ye>>>1;xe<Oe;){var nn=2*(xe+1)-1,Tt=H[nn],Lt=nn+1,Mt=H[Lt];if(0>i(Tt,he))Lt<ye&&0>i(Mt,Tt)?(H[xe]=Mt,H[Lt]=he,xe=Lt):(H[xe]=Tt,H[nn]=he,xe=nn);else if(Lt<ye&&0>i(Mt,he))H[xe]=Mt,H[Lt]=he,xe=Lt;else break e}}return ue}function i(H,ue){var he=H.sortIndex-ue.sortIndex;return he!==0?he:H.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,_=!1,y=!1,E=!1,P=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(H){for(var ue=n(c);ue!==null;){if(ue.callback===null)r(c);else if(ue.startTime<=H)r(c),ue.sortIndex=ue.expirationTime,e(l,ue);else break;ue=n(c)}}function k(H){if(E=!1,T(H),!y)if(n(l)!==null)y=!0,fr(F);else{var ue=n(c);ue!==null&&fn(k,ue.startTime-H)}}function F(H,ue){y=!1,E&&(E=!1,S(v),v=-1),_=!0;var he=p;try{for(T(ue),d=n(l);d!==null&&(!(d.expirationTime>ue)||H&&!b());){var xe=d.callback;if(typeof xe=="function"){d.callback=null,p=d.priorityLevel;var ye=xe(d.expirationTime<=ue);ue=t.unstable_now(),typeof ye=="function"?d.callback=ye:d===n(l)&&r(l),T(ue)}else r(l);d=n(l)}if(d!==null)var Oe=!0;else{var nn=n(c);nn!==null&&fn(k,nn.startTime-ue),Oe=!1}return Oe}finally{d=null,p=he,_=!1}}var j=!1,g=null,v=-1,R=5,A=-1;function b(){return!(t.unstable_now()-A<R)}function N(){if(g!==null){var H=t.unstable_now();A=H;var ue=!0;try{ue=g(!0,H)}finally{ue?C():(j=!1,g=null)}}else j=!1}var C;if(typeof I=="function")C=function(){I(N)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,Ot=Me.port2;Me.port1.onmessage=N,C=function(){Ot.postMessage(null)}}else C=function(){P(N,0)};function fr(H){g=H,j||(j=!0,C())}function fn(H,ue){v=P(function(){H(t.unstable_now())},ue)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){y||_||(y=!0,fr(F))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(H){switch(p){case 1:case 2:case 3:var ue=3;break;default:ue=p}var he=p;p=ue;try{return H()}finally{p=he}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,ue){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var he=p;p=H;try{return ue()}finally{p=he}},t.unstable_scheduleCallback=function(H,ue,he){var xe=t.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?xe+he:xe):he=xe,H){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=he+ye,H={id:h++,callback:ue,priorityLevel:H,startTime:he,expirationTime:ye,sortIndex:-1},he>xe?(H.sortIndex=he,e(c,H),n(l)===null&&H===n(c)&&(E?(S(v),v=-1):E=!0,fn(k,he-xe))):(H.sortIndex=ye,e(l,H),y||_||(y=!0,fr(F))),H},t.unstable_shouldYield=b,t.unstable_wrapCallback=function(H){var ue=p;return function(){var he=p;p=ue;try{return H.apply(this,arguments)}finally{p=he}}}})(HA);WA.exports=HA;var tL=WA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nL=U,lr=tL;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var GA=new Set,Kc={};function ya(t,e){kl(t,e),kl(t+"Capture",e)}function kl(t,e){for(Kc[t]=e,t=0;t<e.length;t++)GA.add(e[t])}var ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m_=Object.prototype.hasOwnProperty,rL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hT={},dT={};function iL(t){return m_.call(dT,t)?!0:m_.call(hT,t)?!1:rL.test(t)?dT[t]=!0:(hT[t]=!0,!1)}function sL(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function oL(t,e,n,r){if(e===null||typeof e>"u"||sL(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Fn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var dn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){dn[t]=new Fn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];dn[e]=new Fn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){dn[t]=new Fn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){dn[t]=new Fn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){dn[t]=new Fn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){dn[t]=new Fn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){dn[t]=new Fn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){dn[t]=new Fn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){dn[t]=new Fn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Iv=/[\-:]([a-z])/g;function Tv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Iv,Tv);dn[e]=new Fn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Iv,Tv);dn[e]=new Fn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Iv,Tv);dn[e]=new Fn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){dn[t]=new Fn(t,1,!1,t.toLowerCase(),null,!1,!1)});dn.xlinkHref=new Fn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){dn[t]=new Fn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Sv(t,e,n,r){var i=dn.hasOwnProperty(e)?dn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(oL(e,n,i,r)&&(n=null),r||i===null?iL(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ki=nL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Dd=Symbol.for("react.element"),Za=Symbol.for("react.portal"),el=Symbol.for("react.fragment"),Rv=Symbol.for("react.strict_mode"),g_=Symbol.for("react.profiler"),KA=Symbol.for("react.provider"),QA=Symbol.for("react.context"),Av=Symbol.for("react.forward_ref"),__=Symbol.for("react.suspense"),y_=Symbol.for("react.suspense_list"),Cv=Symbol.for("react.memo"),vs=Symbol.for("react.lazy"),YA=Symbol.for("react.offscreen"),fT=Symbol.iterator;function zu(t){return t===null||typeof t!="object"?null:(t=fT&&t[fT]||t["@@iterator"],typeof t=="function"?t:null)}var dt=Object.assign,cg;function fc(t){if(cg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);cg=e&&e[1]||""}return`
`+cg+t}var hg=!1;function dg(t,e){if(!t||hg)return"";hg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{hg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?fc(t):""}function aL(t){switch(t.tag){case 5:return fc(t.type);case 16:return fc("Lazy");case 13:return fc("Suspense");case 19:return fc("SuspenseList");case 0:case 2:case 15:return t=dg(t.type,!1),t;case 11:return t=dg(t.type.render,!1),t;case 1:return t=dg(t.type,!0),t;default:return""}}function v_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case el:return"Fragment";case Za:return"Portal";case g_:return"Profiler";case Rv:return"StrictMode";case __:return"Suspense";case y_:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case QA:return(t.displayName||"Context")+".Consumer";case KA:return(t._context.displayName||"Context")+".Provider";case Av:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Cv:return e=t.displayName||null,e!==null?e:v_(t.type)||"Memo";case vs:e=t._payload,t=t._init;try{return v_(t(e))}catch{}}return null}function lL(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return v_(e);case 8:return e===Rv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function js(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function JA(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function uL(t){var e=JA(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Od(t){t._valueTracker||(t._valueTracker=uL(t))}function XA(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=JA(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Mf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function w_(t,e){var n=e.checked;return dt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function pT(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=js(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ZA(t,e){e=e.checked,e!=null&&Sv(t,"checked",e,!1)}function E_(t,e){ZA(t,e);var n=js(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?I_(t,e.type,n):e.hasOwnProperty("defaultValue")&&I_(t,e.type,js(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function mT(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function I_(t,e,n){(e!=="number"||Mf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var pc=Array.isArray;function ml(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+js(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function T_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return dt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function gT(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(G(92));if(pc(n)){if(1<n.length)throw Error(G(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:js(n)}}function eC(t,e){var n=js(e.value),r=js(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function _T(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function tC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function S_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?tC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ld,nC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ld=Ld||document.createElement("div"),Ld.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ld.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Qc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Sc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cL=["Webkit","ms","Moz","O"];Object.keys(Sc).forEach(function(t){cL.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Sc[e]=Sc[t]})});function rC(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Sc.hasOwnProperty(t)&&Sc[t]?(""+e).trim():e+"px"}function iC(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=rC(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var hL=dt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function R_(t,e){if(e){if(hL[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function A_(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var C_=null;function Pv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var P_=null,gl=null,_l=null;function yT(t){if(t=Bh(t)){if(typeof P_!="function")throw Error(G(280));var e=t.stateNode;e&&(e=Hp(e),P_(t.stateNode,t.type,e))}}function sC(t){gl?_l?_l.push(t):_l=[t]:gl=t}function oC(){if(gl){var t=gl,e=_l;if(_l=gl=null,yT(t),e)for(t=0;t<e.length;t++)yT(e[t])}}function aC(t,e){return t(e)}function lC(){}var fg=!1;function uC(t,e,n){if(fg)return t(e,n);fg=!0;try{return aC(t,e,n)}finally{fg=!1,(gl!==null||_l!==null)&&(lC(),oC())}}function Yc(t,e){var n=t.stateNode;if(n===null)return null;var r=Hp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,e,typeof n));return n}var b_=!1;if(ji)try{var qu={};Object.defineProperty(qu,"passive",{get:function(){b_=!0}}),window.addEventListener("test",qu,qu),window.removeEventListener("test",qu,qu)}catch{b_=!1}function dL(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Rc=!1,Vf=null,Ff=!1,k_=null,fL={onError:function(t){Rc=!0,Vf=t}};function pL(t,e,n,r,i,s,o,a,l){Rc=!1,Vf=null,dL.apply(fL,arguments)}function mL(t,e,n,r,i,s,o,a,l){if(pL.apply(this,arguments),Rc){if(Rc){var c=Vf;Rc=!1,Vf=null}else throw Error(G(198));Ff||(Ff=!0,k_=c)}}function va(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function cC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function vT(t){if(va(t)!==t)throw Error(G(188))}function gL(t){var e=t.alternate;if(!e){if(e=va(t),e===null)throw Error(G(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return vT(i),t;if(s===r)return vT(i),e;s=s.sibling}throw Error(G(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:e}function hC(t){return t=gL(t),t!==null?dC(t):null}function dC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=dC(t);if(e!==null)return e;t=t.sibling}return null}var fC=lr.unstable_scheduleCallback,wT=lr.unstable_cancelCallback,_L=lr.unstable_shouldYield,yL=lr.unstable_requestPaint,Rt=lr.unstable_now,vL=lr.unstable_getCurrentPriorityLevel,bv=lr.unstable_ImmediatePriority,pC=lr.unstable_UserBlockingPriority,Uf=lr.unstable_NormalPriority,wL=lr.unstable_LowPriority,mC=lr.unstable_IdlePriority,zp=null,ci=null;function EL(t){if(ci&&typeof ci.onCommitFiberRoot=="function")try{ci.onCommitFiberRoot(zp,t,void 0,(t.current.flags&128)===128)}catch{}}var zr=Math.clz32?Math.clz32:SL,IL=Math.log,TL=Math.LN2;function SL(t){return t>>>=0,t===0?32:31-(IL(t)/TL|0)|0}var Md=64,Vd=4194304;function mc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=mc(a):(s&=o,s!==0&&(r=mc(s)))}else o=n&~i,o!==0?r=mc(o):s!==0&&(r=mc(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-zr(e),i=1<<n,r|=t[n],e&=~i;return r}function RL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AL(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-zr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=RL(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function N_(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function gC(){var t=Md;return Md<<=1,!(Md&4194240)&&(Md=64),t}function pg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Fh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zr(e),t[e]=n}function CL(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-zr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function kv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-zr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Fe=0;function _C(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var yC,Nv,vC,wC,EC,x_=!1,Fd=[],bs=null,ks=null,Ns=null,Jc=new Map,Xc=new Map,Es=[],PL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ET(t,e){switch(t){case"focusin":case"focusout":bs=null;break;case"dragenter":case"dragleave":ks=null;break;case"mouseover":case"mouseout":Ns=null;break;case"pointerover":case"pointerout":Jc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xc.delete(e.pointerId)}}function $u(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Bh(e),e!==null&&Nv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function bL(t,e,n,r,i){switch(e){case"focusin":return bs=$u(bs,t,e,n,r,i),!0;case"dragenter":return ks=$u(ks,t,e,n,r,i),!0;case"mouseover":return Ns=$u(Ns,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Jc.set(s,$u(Jc.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Xc.set(s,$u(Xc.get(s)||null,t,e,n,r,i)),!0}return!1}function IC(t){var e=No(t.target);if(e!==null){var n=va(e);if(n!==null){if(e=n.tag,e===13){if(e=cC(n),e!==null){t.blockedOn=e,EC(t.priority,function(){vC(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function hf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=D_(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);C_=r,n.target.dispatchEvent(r),C_=null}else return e=Bh(n),e!==null&&Nv(e),t.blockedOn=n,!1;e.shift()}return!0}function IT(t,e,n){hf(t)&&n.delete(e)}function kL(){x_=!1,bs!==null&&hf(bs)&&(bs=null),ks!==null&&hf(ks)&&(ks=null),Ns!==null&&hf(Ns)&&(Ns=null),Jc.forEach(IT),Xc.forEach(IT)}function Wu(t,e){t.blockedOn===e&&(t.blockedOn=null,x_||(x_=!0,lr.unstable_scheduleCallback(lr.unstable_NormalPriority,kL)))}function Zc(t){function e(i){return Wu(i,t)}if(0<Fd.length){Wu(Fd[0],t);for(var n=1;n<Fd.length;n++){var r=Fd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(bs!==null&&Wu(bs,t),ks!==null&&Wu(ks,t),Ns!==null&&Wu(Ns,t),Jc.forEach(e),Xc.forEach(e),n=0;n<Es.length;n++)r=Es[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Es.length&&(n=Es[0],n.blockedOn===null);)IC(n),n.blockedOn===null&&Es.shift()}var yl=Ki.ReactCurrentBatchConfig,jf=!0;function NL(t,e,n,r){var i=Fe,s=yl.transition;yl.transition=null;try{Fe=1,xv(t,e,n,r)}finally{Fe=i,yl.transition=s}}function xL(t,e,n,r){var i=Fe,s=yl.transition;yl.transition=null;try{Fe=4,xv(t,e,n,r)}finally{Fe=i,yl.transition=s}}function xv(t,e,n,r){if(jf){var i=D_(t,e,n,r);if(i===null)Sg(t,e,r,zf,n),ET(t,r);else if(bL(i,t,e,n,r))r.stopPropagation();else if(ET(t,r),e&4&&-1<PL.indexOf(t)){for(;i!==null;){var s=Bh(i);if(s!==null&&yC(s),s=D_(t,e,n,r),s===null&&Sg(t,e,r,zf,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Sg(t,e,r,null,n)}}var zf=null;function D_(t,e,n,r){if(zf=null,t=Pv(r),t=No(t),t!==null)if(e=va(t),e===null)t=null;else if(n=e.tag,n===13){if(t=cC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return zf=t,null}function TC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vL()){case bv:return 1;case pC:return 4;case Uf:case wL:return 16;case mC:return 536870912;default:return 16}default:return 16}}var Rs=null,Dv=null,df=null;function SC(){if(df)return df;var t,e=Dv,n=e.length,r,i="value"in Rs?Rs.value:Rs.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return df=i.slice(t,1<r?1-r:void 0)}function ff(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ud(){return!0}function TT(){return!1}function dr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ud:TT,this.isPropagationStopped=TT,this}return dt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ud)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ud)},persist:function(){},isPersistent:Ud}),e}var au={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ov=dr(au),Uh=dt({},au,{view:0,detail:0}),DL=dr(Uh),mg,gg,Hu,qp=dt({},Uh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Hu&&(Hu&&t.type==="mousemove"?(mg=t.screenX-Hu.screenX,gg=t.screenY-Hu.screenY):gg=mg=0,Hu=t),mg)},movementY:function(t){return"movementY"in t?t.movementY:gg}}),ST=dr(qp),OL=dt({},qp,{dataTransfer:0}),LL=dr(OL),ML=dt({},Uh,{relatedTarget:0}),_g=dr(ML),VL=dt({},au,{animationName:0,elapsedTime:0,pseudoElement:0}),FL=dr(VL),UL=dt({},au,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),BL=dr(UL),jL=dt({},au,{data:0}),RT=dr(jL),zL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$L={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WL(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=$L[t])?!!e[t]:!1}function Lv(){return WL}var HL=dt({},Uh,{key:function(t){if(t.key){var e=zL[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ff(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qL[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lv,charCode:function(t){return t.type==="keypress"?ff(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ff(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),GL=dr(HL),KL=dt({},qp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),AT=dr(KL),QL=dt({},Uh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lv}),YL=dr(QL),JL=dt({},au,{propertyName:0,elapsedTime:0,pseudoElement:0}),XL=dr(JL),ZL=dt({},qp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),eM=dr(ZL),tM=[9,13,27,32],Mv=ji&&"CompositionEvent"in window,Ac=null;ji&&"documentMode"in document&&(Ac=document.documentMode);var nM=ji&&"TextEvent"in window&&!Ac,RC=ji&&(!Mv||Ac&&8<Ac&&11>=Ac),CT=" ",PT=!1;function AC(t,e){switch(t){case"keyup":return tM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function CC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var tl=!1;function rM(t,e){switch(t){case"compositionend":return CC(e);case"keypress":return e.which!==32?null:(PT=!0,CT);case"textInput":return t=e.data,t===CT&&PT?null:t;default:return null}}function iM(t,e){if(tl)return t==="compositionend"||!Mv&&AC(t,e)?(t=SC(),df=Dv=Rs=null,tl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return RC&&e.locale!=="ko"?null:e.data;default:return null}}var sM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!sM[t.type]:e==="textarea"}function PC(t,e,n,r){sC(r),e=qf(e,"onChange"),0<e.length&&(n=new Ov("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Cc=null,eh=null;function oM(t){UC(t,0)}function $p(t){var e=il(t);if(XA(e))return t}function aM(t,e){if(t==="change")return e}var bC=!1;if(ji){var yg;if(ji){var vg="oninput"in document;if(!vg){var kT=document.createElement("div");kT.setAttribute("oninput","return;"),vg=typeof kT.oninput=="function"}yg=vg}else yg=!1;bC=yg&&(!document.documentMode||9<document.documentMode)}function NT(){Cc&&(Cc.detachEvent("onpropertychange",kC),eh=Cc=null)}function kC(t){if(t.propertyName==="value"&&$p(eh)){var e=[];PC(e,eh,t,Pv(t)),uC(oM,e)}}function lM(t,e,n){t==="focusin"?(NT(),Cc=e,eh=n,Cc.attachEvent("onpropertychange",kC)):t==="focusout"&&NT()}function uM(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $p(eh)}function cM(t,e){if(t==="click")return $p(e)}function hM(t,e){if(t==="input"||t==="change")return $p(e)}function dM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hr=typeof Object.is=="function"?Object.is:dM;function th(t,e){if(Hr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!m_.call(e,i)||!Hr(t[i],e[i]))return!1}return!0}function xT(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function DT(t,e){var n=xT(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=xT(n)}}function NC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?NC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function xC(){for(var t=window,e=Mf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Mf(t.document)}return e}function Vv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fM(t){var e=xC(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&NC(n.ownerDocument.documentElement,n)){if(r!==null&&Vv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=DT(n,s);var o=DT(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var pM=ji&&"documentMode"in document&&11>=document.documentMode,nl=null,O_=null,Pc=null,L_=!1;function OT(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;L_||nl==null||nl!==Mf(r)||(r=nl,"selectionStart"in r&&Vv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Pc&&th(Pc,r)||(Pc=r,r=qf(O_,"onSelect"),0<r.length&&(e=new Ov("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=nl)))}function Bd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var rl={animationend:Bd("Animation","AnimationEnd"),animationiteration:Bd("Animation","AnimationIteration"),animationstart:Bd("Animation","AnimationStart"),transitionend:Bd("Transition","TransitionEnd")},wg={},DC={};ji&&(DC=document.createElement("div").style,"AnimationEvent"in window||(delete rl.animationend.animation,delete rl.animationiteration.animation,delete rl.animationstart.animation),"TransitionEvent"in window||delete rl.transitionend.transition);function Wp(t){if(wg[t])return wg[t];if(!rl[t])return t;var e=rl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in DC)return wg[t]=e[n];return t}var OC=Wp("animationend"),LC=Wp("animationiteration"),MC=Wp("animationstart"),VC=Wp("transitionend"),FC=new Map,LT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function to(t,e){FC.set(t,e),ya(e,[t])}for(var Eg=0;Eg<LT.length;Eg++){var Ig=LT[Eg],mM=Ig.toLowerCase(),gM=Ig[0].toUpperCase()+Ig.slice(1);to(mM,"on"+gM)}to(OC,"onAnimationEnd");to(LC,"onAnimationIteration");to(MC,"onAnimationStart");to("dblclick","onDoubleClick");to("focusin","onFocus");to("focusout","onBlur");to(VC,"onTransitionEnd");kl("onMouseEnter",["mouseout","mouseover"]);kl("onMouseLeave",["mouseout","mouseover"]);kl("onPointerEnter",["pointerout","pointerover"]);kl("onPointerLeave",["pointerout","pointerover"]);ya("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ya("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ya("onBeforeInput",["compositionend","keypress","textInput","paste"]);ya("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ya("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ya("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_M=new Set("cancel close invalid load scroll toggle".split(" ").concat(gc));function MT(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,mL(r,e,void 0,t),t.currentTarget=null}function UC(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;MT(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;MT(i,a,c),s=l}}}if(Ff)throw t=k_,Ff=!1,k_=null,t}function Ge(t,e){var n=e[B_];n===void 0&&(n=e[B_]=new Set);var r=t+"__bubble";n.has(r)||(BC(e,t,2,!1),n.add(r))}function Tg(t,e,n){var r=0;e&&(r|=4),BC(n,t,r,e)}var jd="_reactListening"+Math.random().toString(36).slice(2);function nh(t){if(!t[jd]){t[jd]=!0,GA.forEach(function(n){n!=="selectionchange"&&(_M.has(n)||Tg(n,!1,t),Tg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[jd]||(e[jd]=!0,Tg("selectionchange",!1,e))}}function BC(t,e,n,r){switch(TC(e)){case 1:var i=NL;break;case 4:i=xL;break;default:i=xv}n=i.bind(null,e,n,t),i=void 0,!b_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Sg(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=No(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}uC(function(){var c=s,h=Pv(n),d=[];e:{var p=FC.get(t);if(p!==void 0){var _=Ov,y=t;switch(t){case"keypress":if(ff(n)===0)break e;case"keydown":case"keyup":_=GL;break;case"focusin":y="focus",_=_g;break;case"focusout":y="blur",_=_g;break;case"beforeblur":case"afterblur":_=_g;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=ST;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=LL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=YL;break;case OC:case LC:case MC:_=FL;break;case VC:_=XL;break;case"scroll":_=DL;break;case"wheel":_=eM;break;case"copy":case"cut":case"paste":_=BL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=AT}var E=(e&4)!==0,P=!E&&t==="scroll",S=E?p!==null?p+"Capture":null:p;E=[];for(var I=c,T;I!==null;){T=I;var k=T.stateNode;if(T.tag===5&&k!==null&&(T=k,S!==null&&(k=Yc(I,S),k!=null&&E.push(rh(I,k,T)))),P)break;I=I.return}0<E.length&&(p=new _(p,y,null,n,h),d.push({event:p,listeners:E}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",p&&n!==C_&&(y=n.relatedTarget||n.fromElement)&&(No(y)||y[zi]))break e;if((_||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,_?(y=n.relatedTarget||n.toElement,_=c,y=y?No(y):null,y!==null&&(P=va(y),y!==P||y.tag!==5&&y.tag!==6)&&(y=null)):(_=null,y=c),_!==y)){if(E=ST,k="onMouseLeave",S="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(E=AT,k="onPointerLeave",S="onPointerEnter",I="pointer"),P=_==null?p:il(_),T=y==null?p:il(y),p=new E(k,I+"leave",_,n,h),p.target=P,p.relatedTarget=T,k=null,No(h)===c&&(E=new E(S,I+"enter",y,n,h),E.target=T,E.relatedTarget=P,k=E),P=k,_&&y)t:{for(E=_,S=y,I=0,T=E;T;T=Ua(T))I++;for(T=0,k=S;k;k=Ua(k))T++;for(;0<I-T;)E=Ua(E),I--;for(;0<T-I;)S=Ua(S),T--;for(;I--;){if(E===S||S!==null&&E===S.alternate)break t;E=Ua(E),S=Ua(S)}E=null}else E=null;_!==null&&VT(d,p,_,E,!1),y!==null&&P!==null&&VT(d,P,y,E,!0)}}e:{if(p=c?il(c):window,_=p.nodeName&&p.nodeName.toLowerCase(),_==="select"||_==="input"&&p.type==="file")var F=aM;else if(bT(p))if(bC)F=hM;else{F=uM;var j=lM}else(_=p.nodeName)&&_.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(F=cM);if(F&&(F=F(t,c))){PC(d,F,n,h);break e}j&&j(t,p,c),t==="focusout"&&(j=p._wrapperState)&&j.controlled&&p.type==="number"&&I_(p,"number",p.value)}switch(j=c?il(c):window,t){case"focusin":(bT(j)||j.contentEditable==="true")&&(nl=j,O_=c,Pc=null);break;case"focusout":Pc=O_=nl=null;break;case"mousedown":L_=!0;break;case"contextmenu":case"mouseup":case"dragend":L_=!1,OT(d,n,h);break;case"selectionchange":if(pM)break;case"keydown":case"keyup":OT(d,n,h)}var g;if(Mv)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else tl?AC(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(RC&&n.locale!=="ko"&&(tl||v!=="onCompositionStart"?v==="onCompositionEnd"&&tl&&(g=SC()):(Rs=h,Dv="value"in Rs?Rs.value:Rs.textContent,tl=!0)),j=qf(c,v),0<j.length&&(v=new RT(v,t,null,n,h),d.push({event:v,listeners:j}),g?v.data=g:(g=CC(n),g!==null&&(v.data=g)))),(g=nM?rM(t,n):iM(t,n))&&(c=qf(c,"onBeforeInput"),0<c.length&&(h=new RT("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=g))}UC(d,e)})}function rh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function qf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Yc(t,n),s!=null&&r.unshift(rh(t,s,i)),s=Yc(t,e),s!=null&&r.push(rh(t,s,i))),t=t.return}return r}function Ua(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function VT(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Yc(n,s),l!=null&&o.unshift(rh(n,l,a))):i||(l=Yc(n,s),l!=null&&o.push(rh(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var yM=/\r\n?/g,vM=/\u0000|\uFFFD/g;function FT(t){return(typeof t=="string"?t:""+t).replace(yM,`
`).replace(vM,"")}function zd(t,e,n){if(e=FT(e),FT(t)!==e&&n)throw Error(G(425))}function $f(){}var M_=null,V_=null;function F_(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var U_=typeof setTimeout=="function"?setTimeout:void 0,wM=typeof clearTimeout=="function"?clearTimeout:void 0,UT=typeof Promise=="function"?Promise:void 0,EM=typeof queueMicrotask=="function"?queueMicrotask:typeof UT<"u"?function(t){return UT.resolve(null).then(t).catch(IM)}:U_;function IM(t){setTimeout(function(){throw t})}function Rg(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Zc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Zc(e)}function xs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function BT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var lu=Math.random().toString(36).slice(2),ei="__reactFiber$"+lu,ih="__reactProps$"+lu,zi="__reactContainer$"+lu,B_="__reactEvents$"+lu,TM="__reactListeners$"+lu,SM="__reactHandles$"+lu;function No(t){var e=t[ei];if(e)return e;for(var n=t.parentNode;n;){if(e=n[zi]||n[ei]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=BT(t);t!==null;){if(n=t[ei])return n;t=BT(t)}return e}t=n,n=t.parentNode}return null}function Bh(t){return t=t[ei]||t[zi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function il(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function Hp(t){return t[ih]||null}var j_=[],sl=-1;function no(t){return{current:t}}function Je(t){0>sl||(t.current=j_[sl],j_[sl]=null,sl--)}function $e(t,e){sl++,j_[sl]=t.current,t.current=e}var zs={},Rn=no(zs),Qn=no(!1),Ko=zs;function Nl(t,e){var n=t.type.contextTypes;if(!n)return zs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Yn(t){return t=t.childContextTypes,t!=null}function Wf(){Je(Qn),Je(Rn)}function jT(t,e,n){if(Rn.current!==zs)throw Error(G(168));$e(Rn,e),$e(Qn,n)}function jC(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(G(108,lL(t)||"Unknown",i));return dt({},n,r)}function Hf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||zs,Ko=Rn.current,$e(Rn,t),$e(Qn,Qn.current),!0}function zT(t,e,n){var r=t.stateNode;if(!r)throw Error(G(169));n?(t=jC(t,e,Ko),r.__reactInternalMemoizedMergedChildContext=t,Je(Qn),Je(Rn),$e(Rn,t)):Je(Qn),$e(Qn,n)}var bi=null,Gp=!1,Ag=!1;function zC(t){bi===null?bi=[t]:bi.push(t)}function RM(t){Gp=!0,zC(t)}function ro(){if(!Ag&&bi!==null){Ag=!0;var t=0,e=Fe;try{var n=bi;for(Fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}bi=null,Gp=!1}catch(i){throw bi!==null&&(bi=bi.slice(t+1)),fC(bv,ro),i}finally{Fe=e,Ag=!1}}return null}var ol=[],al=0,Gf=null,Kf=0,_r=[],yr=0,Qo=null,ki=1,Ni="";function Eo(t,e){ol[al++]=Kf,ol[al++]=Gf,Gf=t,Kf=e}function qC(t,e,n){_r[yr++]=ki,_r[yr++]=Ni,_r[yr++]=Qo,Qo=t;var r=ki;t=Ni;var i=32-zr(r)-1;r&=~(1<<i),n+=1;var s=32-zr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ki=1<<32-zr(e)+i|n<<i|r,Ni=s+t}else ki=1<<s|n<<i|r,Ni=t}function Fv(t){t.return!==null&&(Eo(t,1),qC(t,1,0))}function Uv(t){for(;t===Gf;)Gf=ol[--al],ol[al]=null,Kf=ol[--al],ol[al]=null;for(;t===Qo;)Qo=_r[--yr],_r[yr]=null,Ni=_r[--yr],_r[yr]=null,ki=_r[--yr],_r[yr]=null}var or=null,ir=null,nt=!1,Fr=null;function $C(t,e){var n=wr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function qT(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,or=t,ir=xs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,or=t,ir=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Qo!==null?{id:ki,overflow:Ni}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=wr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,or=t,ir=null,!0):!1;default:return!1}}function z_(t){return(t.mode&1)!==0&&(t.flags&128)===0}function q_(t){if(nt){var e=ir;if(e){var n=e;if(!qT(t,e)){if(z_(t))throw Error(G(418));e=xs(n.nextSibling);var r=or;e&&qT(t,e)?$C(r,n):(t.flags=t.flags&-4097|2,nt=!1,or=t)}}else{if(z_(t))throw Error(G(418));t.flags=t.flags&-4097|2,nt=!1,or=t}}}function $T(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;or=t}function qd(t){if(t!==or)return!1;if(!nt)return $T(t),nt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!F_(t.type,t.memoizedProps)),e&&(e=ir)){if(z_(t))throw WC(),Error(G(418));for(;e;)$C(t,e),e=xs(e.nextSibling)}if($T(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ir=xs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ir=null}}else ir=or?xs(t.stateNode.nextSibling):null;return!0}function WC(){for(var t=ir;t;)t=xs(t.nextSibling)}function xl(){ir=or=null,nt=!1}function Bv(t){Fr===null?Fr=[t]:Fr.push(t)}var AM=Ki.ReactCurrentBatchConfig;function Gu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,t))}return t}function $d(t,e){throw t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function WT(t){var e=t._init;return e(t._payload)}function HC(t){function e(S,I){if(t){var T=S.deletions;T===null?(S.deletions=[I],S.flags|=16):T.push(I)}}function n(S,I){if(!t)return null;for(;I!==null;)e(S,I),I=I.sibling;return null}function r(S,I){for(S=new Map;I!==null;)I.key!==null?S.set(I.key,I):S.set(I.index,I),I=I.sibling;return S}function i(S,I){return S=Ms(S,I),S.index=0,S.sibling=null,S}function s(S,I,T){return S.index=T,t?(T=S.alternate,T!==null?(T=T.index,T<I?(S.flags|=2,I):T):(S.flags|=2,I)):(S.flags|=1048576,I)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function a(S,I,T,k){return I===null||I.tag!==6?(I=Dg(T,S.mode,k),I.return=S,I):(I=i(I,T),I.return=S,I)}function l(S,I,T,k){var F=T.type;return F===el?h(S,I,T.props.children,k,T.key):I!==null&&(I.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===vs&&WT(F)===I.type)?(k=i(I,T.props),k.ref=Gu(S,I,T),k.return=S,k):(k=wf(T.type,T.key,T.props,null,S.mode,k),k.ref=Gu(S,I,T),k.return=S,k)}function c(S,I,T,k){return I===null||I.tag!==4||I.stateNode.containerInfo!==T.containerInfo||I.stateNode.implementation!==T.implementation?(I=Og(T,S.mode,k),I.return=S,I):(I=i(I,T.children||[]),I.return=S,I)}function h(S,I,T,k,F){return I===null||I.tag!==7?(I=jo(T,S.mode,k,F),I.return=S,I):(I=i(I,T),I.return=S,I)}function d(S,I,T){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Dg(""+I,S.mode,T),I.return=S,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Dd:return T=wf(I.type,I.key,I.props,null,S.mode,T),T.ref=Gu(S,null,I),T.return=S,T;case Za:return I=Og(I,S.mode,T),I.return=S,I;case vs:var k=I._init;return d(S,k(I._payload),T)}if(pc(I)||zu(I))return I=jo(I,S.mode,T,null),I.return=S,I;$d(S,I)}return null}function p(S,I,T,k){var F=I!==null?I.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return F!==null?null:a(S,I,""+T,k);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Dd:return T.key===F?l(S,I,T,k):null;case Za:return T.key===F?c(S,I,T,k):null;case vs:return F=T._init,p(S,I,F(T._payload),k)}if(pc(T)||zu(T))return F!==null?null:h(S,I,T,k,null);$d(S,T)}return null}function _(S,I,T,k,F){if(typeof k=="string"&&k!==""||typeof k=="number")return S=S.get(T)||null,a(I,S,""+k,F);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Dd:return S=S.get(k.key===null?T:k.key)||null,l(I,S,k,F);case Za:return S=S.get(k.key===null?T:k.key)||null,c(I,S,k,F);case vs:var j=k._init;return _(S,I,T,j(k._payload),F)}if(pc(k)||zu(k))return S=S.get(T)||null,h(I,S,k,F,null);$d(I,k)}return null}function y(S,I,T,k){for(var F=null,j=null,g=I,v=I=0,R=null;g!==null&&v<T.length;v++){g.index>v?(R=g,g=null):R=g.sibling;var A=p(S,g,T[v],k);if(A===null){g===null&&(g=R);break}t&&g&&A.alternate===null&&e(S,g),I=s(A,I,v),j===null?F=A:j.sibling=A,j=A,g=R}if(v===T.length)return n(S,g),nt&&Eo(S,v),F;if(g===null){for(;v<T.length;v++)g=d(S,T[v],k),g!==null&&(I=s(g,I,v),j===null?F=g:j.sibling=g,j=g);return nt&&Eo(S,v),F}for(g=r(S,g);v<T.length;v++)R=_(g,S,v,T[v],k),R!==null&&(t&&R.alternate!==null&&g.delete(R.key===null?v:R.key),I=s(R,I,v),j===null?F=R:j.sibling=R,j=R);return t&&g.forEach(function(b){return e(S,b)}),nt&&Eo(S,v),F}function E(S,I,T,k){var F=zu(T);if(typeof F!="function")throw Error(G(150));if(T=F.call(T),T==null)throw Error(G(151));for(var j=F=null,g=I,v=I=0,R=null,A=T.next();g!==null&&!A.done;v++,A=T.next()){g.index>v?(R=g,g=null):R=g.sibling;var b=p(S,g,A.value,k);if(b===null){g===null&&(g=R);break}t&&g&&b.alternate===null&&e(S,g),I=s(b,I,v),j===null?F=b:j.sibling=b,j=b,g=R}if(A.done)return n(S,g),nt&&Eo(S,v),F;if(g===null){for(;!A.done;v++,A=T.next())A=d(S,A.value,k),A!==null&&(I=s(A,I,v),j===null?F=A:j.sibling=A,j=A);return nt&&Eo(S,v),F}for(g=r(S,g);!A.done;v++,A=T.next())A=_(g,S,v,A.value,k),A!==null&&(t&&A.alternate!==null&&g.delete(A.key===null?v:A.key),I=s(A,I,v),j===null?F=A:j.sibling=A,j=A);return t&&g.forEach(function(N){return e(S,N)}),nt&&Eo(S,v),F}function P(S,I,T,k){if(typeof T=="object"&&T!==null&&T.type===el&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Dd:e:{for(var F=T.key,j=I;j!==null;){if(j.key===F){if(F=T.type,F===el){if(j.tag===7){n(S,j.sibling),I=i(j,T.props.children),I.return=S,S=I;break e}}else if(j.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===vs&&WT(F)===j.type){n(S,j.sibling),I=i(j,T.props),I.ref=Gu(S,j,T),I.return=S,S=I;break e}n(S,j);break}else e(S,j);j=j.sibling}T.type===el?(I=jo(T.props.children,S.mode,k,T.key),I.return=S,S=I):(k=wf(T.type,T.key,T.props,null,S.mode,k),k.ref=Gu(S,I,T),k.return=S,S=k)}return o(S);case Za:e:{for(j=T.key;I!==null;){if(I.key===j)if(I.tag===4&&I.stateNode.containerInfo===T.containerInfo&&I.stateNode.implementation===T.implementation){n(S,I.sibling),I=i(I,T.children||[]),I.return=S,S=I;break e}else{n(S,I);break}else e(S,I);I=I.sibling}I=Og(T,S.mode,k),I.return=S,S=I}return o(S);case vs:return j=T._init,P(S,I,j(T._payload),k)}if(pc(T))return y(S,I,T,k);if(zu(T))return E(S,I,T,k);$d(S,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,I!==null&&I.tag===6?(n(S,I.sibling),I=i(I,T),I.return=S,S=I):(n(S,I),I=Dg(T,S.mode,k),I.return=S,S=I),o(S)):n(S,I)}return P}var Dl=HC(!0),GC=HC(!1),Qf=no(null),Yf=null,ll=null,jv=null;function zv(){jv=ll=Yf=null}function qv(t){var e=Qf.current;Je(Qf),t._currentValue=e}function $_(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function vl(t,e){Yf=t,jv=ll=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($n=!0),t.firstContext=null)}function Cr(t){var e=t._currentValue;if(jv!==t)if(t={context:t,memoizedValue:e,next:null},ll===null){if(Yf===null)throw Error(G(308));ll=t,Yf.dependencies={lanes:0,firstContext:t}}else ll=ll.next=t;return e}var xo=null;function $v(t){xo===null?xo=[t]:xo.push(t)}function KC(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,$v(e)):(n.next=i.next,i.next=n),e.interleaved=n,qi(t,r)}function qi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ws=!1;function Wv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function QC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ds(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,qi(t,n)}return i=r.interleaved,i===null?(e.next=e,$v(r)):(e.next=i.next,i.next=e),r.interleaved=e,qi(t,n)}function pf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,kv(t,n)}}function HT(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Jf(t,e,n,r){var i=t.updateQueue;ws=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,_=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:_,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,E=a;switch(p=e,_=n,E.tag){case 1:if(y=E.payload,typeof y=="function"){d=y.call(_,d,p);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=E.payload,p=typeof y=="function"?y.call(_,d,p):y,p==null)break e;d=dt({},d,p);break e;case 2:ws=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else _={eventTime:_,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=_,l=d):h=h.next=_,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Jo|=o,t.lanes=o,t.memoizedState=d}}function GT(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(G(191,i));i.call(r)}}}var jh={},hi=no(jh),sh=no(jh),oh=no(jh);function Do(t){if(t===jh)throw Error(G(174));return t}function Hv(t,e){switch($e(oh,e),$e(sh,t),$e(hi,jh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:S_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=S_(e,t)}Je(hi),$e(hi,e)}function Ol(){Je(hi),Je(sh),Je(oh)}function YC(t){Do(oh.current);var e=Do(hi.current),n=S_(e,t.type);e!==n&&($e(sh,t),$e(hi,n))}function Gv(t){sh.current===t&&(Je(hi),Je(sh))}var ut=no(0);function Xf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Cg=[];function Kv(){for(var t=0;t<Cg.length;t++)Cg[t]._workInProgressVersionPrimary=null;Cg.length=0}var mf=Ki.ReactCurrentDispatcher,Pg=Ki.ReactCurrentBatchConfig,Yo=0,ct=null,Ut=null,Ht=null,Zf=!1,bc=!1,ah=0,CM=0;function gn(){throw Error(G(321))}function Qv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Hr(t[n],e[n]))return!1;return!0}function Yv(t,e,n,r,i,s){if(Yo=s,ct=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,mf.current=t===null||t.memoizedState===null?NM:xM,t=n(r,i),bc){s=0;do{if(bc=!1,ah=0,25<=s)throw Error(G(301));s+=1,Ht=Ut=null,e.updateQueue=null,mf.current=DM,t=n(r,i)}while(bc)}if(mf.current=ep,e=Ut!==null&&Ut.next!==null,Yo=0,Ht=Ut=ct=null,Zf=!1,e)throw Error(G(300));return t}function Jv(){var t=ah!==0;return ah=0,t}function Zr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?ct.memoizedState=Ht=t:Ht=Ht.next=t,Ht}function Pr(){if(Ut===null){var t=ct.alternate;t=t!==null?t.memoizedState:null}else t=Ut.next;var e=Ht===null?ct.memoizedState:Ht.next;if(e!==null)Ht=e,Ut=t;else{if(t===null)throw Error(G(310));Ut=t,t={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},Ht===null?ct.memoizedState=Ht=t:Ht=Ht.next=t}return Ht}function lh(t,e){return typeof e=="function"?e(t):e}function bg(t){var e=Pr(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=Ut,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((Yo&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,ct.lanes|=h,Jo|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Hr(r,e.memoizedState)||($n=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ct.lanes|=s,Jo|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function kg(t){var e=Pr(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Hr(s,e.memoizedState)||($n=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function JC(){}function XC(t,e){var n=ct,r=Pr(),i=e(),s=!Hr(r.memoizedState,i);if(s&&(r.memoizedState=i,$n=!0),r=r.queue,Xv(tP.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ht!==null&&Ht.memoizedState.tag&1){if(n.flags|=2048,uh(9,eP.bind(null,n,r,i,e),void 0,null),Yt===null)throw Error(G(349));Yo&30||ZC(n,e,i)}return i}function ZC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function eP(t,e,n,r){e.value=n,e.getSnapshot=r,nP(e)&&rP(t)}function tP(t,e,n){return n(function(){nP(e)&&rP(t)})}function nP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Hr(t,n)}catch{return!0}}function rP(t){var e=qi(t,1);e!==null&&qr(e,t,1,-1)}function KT(t){var e=Zr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lh,lastRenderedState:t},e.queue=t,t=t.dispatch=kM.bind(null,ct,t),[e.memoizedState,t]}function uh(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function iP(){return Pr().memoizedState}function gf(t,e,n,r){var i=Zr();ct.flags|=t,i.memoizedState=uh(1|e,n,void 0,r===void 0?null:r)}function Kp(t,e,n,r){var i=Pr();r=r===void 0?null:r;var s=void 0;if(Ut!==null){var o=Ut.memoizedState;if(s=o.destroy,r!==null&&Qv(r,o.deps)){i.memoizedState=uh(e,n,s,r);return}}ct.flags|=t,i.memoizedState=uh(1|e,n,s,r)}function QT(t,e){return gf(8390656,8,t,e)}function Xv(t,e){return Kp(2048,8,t,e)}function sP(t,e){return Kp(4,2,t,e)}function oP(t,e){return Kp(4,4,t,e)}function aP(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function lP(t,e,n){return n=n!=null?n.concat([t]):null,Kp(4,4,aP.bind(null,e,t),n)}function Zv(){}function uP(t,e){var n=Pr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Qv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function cP(t,e){var n=Pr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Qv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function hP(t,e,n){return Yo&21?(Hr(n,e)||(n=gC(),ct.lanes|=n,Jo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$n=!0),t.memoizedState=n)}function PM(t,e){var n=Fe;Fe=n!==0&&4>n?n:4,t(!0);var r=Pg.transition;Pg.transition={};try{t(!1),e()}finally{Fe=n,Pg.transition=r}}function dP(){return Pr().memoizedState}function bM(t,e,n){var r=Ls(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},fP(t))pP(e,n);else if(n=KC(t,e,n,r),n!==null){var i=xn();qr(n,t,r,i),mP(n,e,r)}}function kM(t,e,n){var r=Ls(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(fP(t))pP(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Hr(a,o)){var l=e.interleaved;l===null?(i.next=i,$v(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=KC(t,e,i,r),n!==null&&(i=xn(),qr(n,t,r,i),mP(n,e,r))}}function fP(t){var e=t.alternate;return t===ct||e!==null&&e===ct}function pP(t,e){bc=Zf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function mP(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,kv(t,n)}}var ep={readContext:Cr,useCallback:gn,useContext:gn,useEffect:gn,useImperativeHandle:gn,useInsertionEffect:gn,useLayoutEffect:gn,useMemo:gn,useReducer:gn,useRef:gn,useState:gn,useDebugValue:gn,useDeferredValue:gn,useTransition:gn,useMutableSource:gn,useSyncExternalStore:gn,useId:gn,unstable_isNewReconciler:!1},NM={readContext:Cr,useCallback:function(t,e){return Zr().memoizedState=[t,e===void 0?null:e],t},useContext:Cr,useEffect:QT,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,gf(4194308,4,aP.bind(null,e,t),n)},useLayoutEffect:function(t,e){return gf(4194308,4,t,e)},useInsertionEffect:function(t,e){return gf(4,2,t,e)},useMemo:function(t,e){var n=Zr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Zr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=bM.bind(null,ct,t),[r.memoizedState,t]},useRef:function(t){var e=Zr();return t={current:t},e.memoizedState=t},useState:KT,useDebugValue:Zv,useDeferredValue:function(t){return Zr().memoizedState=t},useTransition:function(){var t=KT(!1),e=t[0];return t=PM.bind(null,t[1]),Zr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ct,i=Zr();if(nt){if(n===void 0)throw Error(G(407));n=n()}else{if(n=e(),Yt===null)throw Error(G(349));Yo&30||ZC(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,QT(tP.bind(null,r,s,t),[t]),r.flags|=2048,uh(9,eP.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Zr(),e=Yt.identifierPrefix;if(nt){var n=Ni,r=ki;n=(r&~(1<<32-zr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ah++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=CM++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xM={readContext:Cr,useCallback:uP,useContext:Cr,useEffect:Xv,useImperativeHandle:lP,useInsertionEffect:sP,useLayoutEffect:oP,useMemo:cP,useReducer:bg,useRef:iP,useState:function(){return bg(lh)},useDebugValue:Zv,useDeferredValue:function(t){var e=Pr();return hP(e,Ut.memoizedState,t)},useTransition:function(){var t=bg(lh)[0],e=Pr().memoizedState;return[t,e]},useMutableSource:JC,useSyncExternalStore:XC,useId:dP,unstable_isNewReconciler:!1},DM={readContext:Cr,useCallback:uP,useContext:Cr,useEffect:Xv,useImperativeHandle:lP,useInsertionEffect:sP,useLayoutEffect:oP,useMemo:cP,useReducer:kg,useRef:iP,useState:function(){return kg(lh)},useDebugValue:Zv,useDeferredValue:function(t){var e=Pr();return Ut===null?e.memoizedState=t:hP(e,Ut.memoizedState,t)},useTransition:function(){var t=kg(lh)[0],e=Pr().memoizedState;return[t,e]},useMutableSource:JC,useSyncExternalStore:XC,useId:dP,unstable_isNewReconciler:!1};function Lr(t,e){if(t&&t.defaultProps){e=dt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function W_(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:dt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Qp={isMounted:function(t){return(t=t._reactInternals)?va(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=xn(),i=Ls(t),s=Mi(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ds(t,s,i),e!==null&&(qr(e,t,i,r),pf(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=xn(),i=Ls(t),s=Mi(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ds(t,s,i),e!==null&&(qr(e,t,i,r),pf(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xn(),r=Ls(t),i=Mi(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ds(t,i,r),e!==null&&(qr(e,t,r,n),pf(e,t,r))}};function YT(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!th(n,r)||!th(i,s):!0}function gP(t,e,n){var r=!1,i=zs,s=e.contextType;return typeof s=="object"&&s!==null?s=Cr(s):(i=Yn(e)?Ko:Rn.current,r=e.contextTypes,s=(r=r!=null)?Nl(t,i):zs),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Qp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function JT(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Qp.enqueueReplaceState(e,e.state,null)}function H_(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Wv(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Cr(s):(s=Yn(e)?Ko:Rn.current,i.context=Nl(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(W_(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Qp.enqueueReplaceState(i,i.state,null),Jf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ll(t,e){try{var n="",r=e;do n+=aL(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ng(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function G_(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var OM=typeof WeakMap=="function"?WeakMap:Map;function _P(t,e,n){n=Mi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){np||(np=!0,ry=r),G_(t,e)},n}function yP(t,e,n){n=Mi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){G_(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){G_(t,e),typeof r!="function"&&(Os===null?Os=new Set([this]):Os.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function XT(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new OM;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=KM.bind(null,t,e,n),e.then(t,t))}function ZT(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function e0(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Mi(-1,1),e.tag=2,Ds(n,e,1))),n.lanes|=1),t)}var LM=Ki.ReactCurrentOwner,$n=!1;function Pn(t,e,n,r){e.child=t===null?GC(e,null,n,r):Dl(e,t.child,n,r)}function t0(t,e,n,r,i){n=n.render;var s=e.ref;return vl(e,i),r=Yv(t,e,n,r,s,i),n=Jv(),t!==null&&!$n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,$i(t,e,i)):(nt&&n&&Fv(e),e.flags|=1,Pn(t,e,r,i),e.child)}function n0(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!aw(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,vP(t,e,s,r,i)):(t=wf(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:th,n(o,r)&&t.ref===e.ref)return $i(t,e,i)}return e.flags|=1,t=Ms(s,r),t.ref=e.ref,t.return=e,e.child=t}function vP(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(th(s,r)&&t.ref===e.ref)if($n=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&($n=!0);else return e.lanes=t.lanes,$i(t,e,i)}return K_(t,e,n,r,i)}function wP(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(cl,nr),nr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$e(cl,nr),nr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,$e(cl,nr),nr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,$e(cl,nr),nr|=r;return Pn(t,e,i,n),e.child}function EP(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function K_(t,e,n,r,i){var s=Yn(n)?Ko:Rn.current;return s=Nl(e,s),vl(e,i),n=Yv(t,e,n,r,s,i),r=Jv(),t!==null&&!$n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,$i(t,e,i)):(nt&&r&&Fv(e),e.flags|=1,Pn(t,e,n,i),e.child)}function r0(t,e,n,r,i){if(Yn(n)){var s=!0;Hf(e)}else s=!1;if(vl(e,i),e.stateNode===null)_f(t,e),gP(e,n,r),H_(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Cr(c):(c=Yn(n)?Ko:Rn.current,c=Nl(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&JT(e,o,r,c),ws=!1;var p=e.memoizedState;o.state=p,Jf(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Qn.current||ws?(typeof h=="function"&&(W_(e,n,h,r),l=e.memoizedState),(a=ws||YT(e,n,a,r,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,QC(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Lr(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Cr(l):(l=Yn(n)?Ko:Rn.current,l=Nl(e,l));var _=n.getDerivedStateFromProps;(h=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&JT(e,o,r,l),ws=!1,p=e.memoizedState,o.state=p,Jf(e,r,o,i);var y=e.memoizedState;a!==d||p!==y||Qn.current||ws?(typeof _=="function"&&(W_(e,n,_,r),y=e.memoizedState),(c=ws||YT(e,n,c,r,p,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Q_(t,e,n,r,s,i)}function Q_(t,e,n,r,i,s){EP(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&zT(e,n,!1),$i(t,e,s);r=e.stateNode,LM.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Dl(e,t.child,null,s),e.child=Dl(e,null,a,s)):Pn(t,e,a,s),e.memoizedState=r.state,i&&zT(e,n,!0),e.child}function IP(t){var e=t.stateNode;e.pendingContext?jT(t,e.pendingContext,e.pendingContext!==e.context):e.context&&jT(t,e.context,!1),Hv(t,e.containerInfo)}function i0(t,e,n,r,i){return xl(),Bv(i),e.flags|=256,Pn(t,e,n,r),e.child}var Y_={dehydrated:null,treeContext:null,retryLane:0};function J_(t){return{baseLanes:t,cachePool:null,transitions:null}}function TP(t,e,n){var r=e.pendingProps,i=ut.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),$e(ut,i&1),t===null)return q_(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Xp(o,r,0,null),t=jo(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=J_(n),e.memoizedState=Y_,t):ew(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return MM(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ms(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ms(a,s):(s=jo(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?J_(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Y_,r}return s=t.child,t=s.sibling,r=Ms(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ew(t,e){return e=Xp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Wd(t,e,n,r){return r!==null&&Bv(r),Dl(e,t.child,null,n),t=ew(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function MM(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Ng(Error(G(422))),Wd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Xp({mode:"visible",children:r.children},i,0,null),s=jo(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Dl(e,t.child,null,o),e.child.memoizedState=J_(o),e.memoizedState=Y_,s);if(!(e.mode&1))return Wd(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(G(419)),r=Ng(s,r,void 0),Wd(t,e,o,r)}if(a=(o&t.childLanes)!==0,$n||a){if(r=Yt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,qi(t,i),qr(r,t,i,-1))}return ow(),r=Ng(Error(G(421))),Wd(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=QM.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ir=xs(i.nextSibling),or=e,nt=!0,Fr=null,t!==null&&(_r[yr++]=ki,_r[yr++]=Ni,_r[yr++]=Qo,ki=t.id,Ni=t.overflow,Qo=e),e=ew(e,r.children),e.flags|=4096,e)}function s0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),$_(t.return,e,n)}function xg(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function SP(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Pn(t,e,r.children,n),r=ut.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&s0(t,n,e);else if(t.tag===19)s0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if($e(ut,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Xf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),xg(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Xf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}xg(e,!0,n,null,s);break;case"together":xg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _f(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $i(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Jo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,n=Ms(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ms(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function VM(t,e,n){switch(e.tag){case 3:IP(e),xl();break;case 5:YC(e);break;case 1:Yn(e.type)&&Hf(e);break;case 4:Hv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;$e(Qf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?($e(ut,ut.current&1),e.flags|=128,null):n&e.child.childLanes?TP(t,e,n):($e(ut,ut.current&1),t=$i(t,e,n),t!==null?t.sibling:null);$e(ut,ut.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return SP(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),$e(ut,ut.current),r)break;return null;case 22:case 23:return e.lanes=0,wP(t,e,n)}return $i(t,e,n)}var RP,X_,AP,CP;RP=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};X_=function(){};AP=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Do(hi.current);var s=null;switch(n){case"input":i=w_(t,i),r=w_(t,r),s=[];break;case"select":i=dt({},i,{value:void 0}),r=dt({},r,{value:void 0}),s=[];break;case"textarea":i=T_(t,i),r=T_(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=$f)}R_(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Kc.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Kc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ge("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};CP=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ku(t,e){if(!nt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function _n(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function FM(t,e,n){var r=e.pendingProps;switch(Uv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _n(e),null;case 1:return Yn(e.type)&&Wf(),_n(e),null;case 3:return r=e.stateNode,Ol(),Je(Qn),Je(Rn),Kv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(qd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Fr!==null&&(oy(Fr),Fr=null))),X_(t,e),_n(e),null;case 5:Gv(e);var i=Do(oh.current);if(n=e.type,t!==null&&e.stateNode!=null)AP(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(G(166));return _n(e),null}if(t=Do(hi.current),qd(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ei]=e,r[ih]=s,t=(e.mode&1)!==0,n){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(i=0;i<gc.length;i++)Ge(gc[i],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":pT(r,s),Ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ge("invalid",r);break;case"textarea":gT(r,s),Ge("invalid",r)}R_(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&zd(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&zd(r.textContent,a,t),i=["children",""+a]):Kc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ge("scroll",r)}switch(n){case"input":Od(r),mT(r,s,!0);break;case"textarea":Od(r),_T(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=$f)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=tC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ei]=e,t[ih]=r,RP(t,e,!1,!1),e.stateNode=t;e:{switch(o=A_(n,r),n){case"dialog":Ge("cancel",t),Ge("close",t),i=r;break;case"iframe":case"object":case"embed":Ge("load",t),i=r;break;case"video":case"audio":for(i=0;i<gc.length;i++)Ge(gc[i],t);i=r;break;case"source":Ge("error",t),i=r;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),i=r;break;case"details":Ge("toggle",t),i=r;break;case"input":pT(t,r),i=w_(t,r),Ge("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=dt({},r,{value:void 0}),Ge("invalid",t);break;case"textarea":gT(t,r),i=T_(t,r),Ge("invalid",t);break;default:i=r}R_(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?iC(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&nC(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Qc(t,l):typeof l=="number"&&Qc(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Kc.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ge("scroll",t):l!=null&&Sv(t,s,l,o))}switch(n){case"input":Od(t),mT(t,r,!1);break;case"textarea":Od(t),_T(t);break;case"option":r.value!=null&&t.setAttribute("value",""+js(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ml(t,!!r.multiple,s,!1):r.defaultValue!=null&&ml(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=$f)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _n(e),null;case 6:if(t&&e.stateNode!=null)CP(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(G(166));if(n=Do(oh.current),Do(hi.current),qd(e)){if(r=e.stateNode,n=e.memoizedProps,r[ei]=e,(s=r.nodeValue!==n)&&(t=or,t!==null))switch(t.tag){case 3:zd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&zd(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ei]=e,e.stateNode=r}return _n(e),null;case 13:if(Je(ut),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(nt&&ir!==null&&e.mode&1&&!(e.flags&128))WC(),xl(),e.flags|=98560,s=!1;else if(s=qd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(G(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(G(317));s[ei]=e}else xl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_n(e),s=!1}else Fr!==null&&(oy(Fr),Fr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ut.current&1?Bt===0&&(Bt=3):ow())),e.updateQueue!==null&&(e.flags|=4),_n(e),null);case 4:return Ol(),X_(t,e),t===null&&nh(e.stateNode.containerInfo),_n(e),null;case 10:return qv(e.type._context),_n(e),null;case 17:return Yn(e.type)&&Wf(),_n(e),null;case 19:if(Je(ut),s=e.memoizedState,s===null)return _n(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Ku(s,!1);else{if(Bt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Xf(t),o!==null){for(e.flags|=128,Ku(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $e(ut,ut.current&1|2),e.child}t=t.sibling}s.tail!==null&&Rt()>Ml&&(e.flags|=128,r=!0,Ku(s,!1),e.lanes=4194304)}else{if(!r)if(t=Xf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ku(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!nt)return _n(e),null}else 2*Rt()-s.renderingStartTime>Ml&&n!==1073741824&&(e.flags|=128,r=!0,Ku(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Rt(),e.sibling=null,n=ut.current,$e(ut,r?n&1|2:n&1),e):(_n(e),null);case 22:case 23:return sw(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?nr&1073741824&&(_n(e),e.subtreeFlags&6&&(e.flags|=8192)):_n(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function UM(t,e){switch(Uv(e),e.tag){case 1:return Yn(e.type)&&Wf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ol(),Je(Qn),Je(Rn),Kv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Gv(e),null;case 13:if(Je(ut),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));xl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Je(ut),null;case 4:return Ol(),null;case 10:return qv(e.type._context),null;case 22:case 23:return sw(),null;case 24:return null;default:return null}}var Hd=!1,vn=!1,BM=typeof WeakSet=="function"?WeakSet:Set,re=null;function ul(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){gt(t,e,r)}else n.current=null}function Z_(t,e,n){try{n()}catch(r){gt(t,e,r)}}var o0=!1;function jM(t,e){if(M_=jf,t=xC(),Vv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,p=null;t:for(;;){for(var _;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(_=d.firstChild)!==null;)p=d,d=_;for(;;){if(d===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++h===r&&(l=o),(_=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=_}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(V_={focusedElem:t,selectionRange:n},jf=!1,re=e;re!==null;)if(e=re,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,re=t;else for(;re!==null;){e=re;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var E=y.memoizedProps,P=y.memoizedState,S=e.stateNode,I=S.getSnapshotBeforeUpdate(e.elementType===e.type?E:Lr(e.type,E),P);S.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(k){gt(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,re=t;break}re=e.return}return y=o0,o0=!1,y}function kc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Z_(e,n,s)}i=i.next}while(i!==r)}}function Yp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ey(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function PP(t){var e=t.alternate;e!==null&&(t.alternate=null,PP(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ei],delete e[ih],delete e[B_],delete e[TM],delete e[SM])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function bP(t){return t.tag===5||t.tag===3||t.tag===4}function a0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||bP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ty(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=$f));else if(r!==4&&(t=t.child,t!==null))for(ty(t,e,n),t=t.sibling;t!==null;)ty(t,e,n),t=t.sibling}function ny(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ny(t,e,n),t=t.sibling;t!==null;)ny(t,e,n),t=t.sibling}var ln=null,Mr=!1;function ds(t,e,n){for(n=n.child;n!==null;)kP(t,e,n),n=n.sibling}function kP(t,e,n){if(ci&&typeof ci.onCommitFiberUnmount=="function")try{ci.onCommitFiberUnmount(zp,n)}catch{}switch(n.tag){case 5:vn||ul(n,e);case 6:var r=ln,i=Mr;ln=null,ds(t,e,n),ln=r,Mr=i,ln!==null&&(Mr?(t=ln,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ln.removeChild(n.stateNode));break;case 18:ln!==null&&(Mr?(t=ln,n=n.stateNode,t.nodeType===8?Rg(t.parentNode,n):t.nodeType===1&&Rg(t,n),Zc(t)):Rg(ln,n.stateNode));break;case 4:r=ln,i=Mr,ln=n.stateNode.containerInfo,Mr=!0,ds(t,e,n),ln=r,Mr=i;break;case 0:case 11:case 14:case 15:if(!vn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Z_(n,e,o),i=i.next}while(i!==r)}ds(t,e,n);break;case 1:if(!vn&&(ul(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){gt(n,e,a)}ds(t,e,n);break;case 21:ds(t,e,n);break;case 22:n.mode&1?(vn=(r=vn)||n.memoizedState!==null,ds(t,e,n),vn=r):ds(t,e,n);break;default:ds(t,e,n)}}function l0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new BM),e.forEach(function(r){var i=YM.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Or(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ln=a.stateNode,Mr=!1;break e;case 3:ln=a.stateNode.containerInfo,Mr=!0;break e;case 4:ln=a.stateNode.containerInfo,Mr=!0;break e}a=a.return}if(ln===null)throw Error(G(160));kP(s,o,i),ln=null,Mr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){gt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)NP(e,t),e=e.sibling}function NP(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Or(e,t),Xr(t),r&4){try{kc(3,t,t.return),Yp(3,t)}catch(E){gt(t,t.return,E)}try{kc(5,t,t.return)}catch(E){gt(t,t.return,E)}}break;case 1:Or(e,t),Xr(t),r&512&&n!==null&&ul(n,n.return);break;case 5:if(Or(e,t),Xr(t),r&512&&n!==null&&ul(n,n.return),t.flags&32){var i=t.stateNode;try{Qc(i,"")}catch(E){gt(t,t.return,E)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&ZA(i,s),A_(a,o);var c=A_(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?iC(i,d):h==="dangerouslySetInnerHTML"?nC(i,d):h==="children"?Qc(i,d):Sv(i,h,d,c)}switch(a){case"input":E_(i,s);break;case"textarea":eC(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var _=s.value;_!=null?ml(i,!!s.multiple,_,!1):p!==!!s.multiple&&(s.defaultValue!=null?ml(i,!!s.multiple,s.defaultValue,!0):ml(i,!!s.multiple,s.multiple?[]:"",!1))}i[ih]=s}catch(E){gt(t,t.return,E)}}break;case 6:if(Or(e,t),Xr(t),r&4){if(t.stateNode===null)throw Error(G(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(E){gt(t,t.return,E)}}break;case 3:if(Or(e,t),Xr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Zc(e.containerInfo)}catch(E){gt(t,t.return,E)}break;case 4:Or(e,t),Xr(t);break;case 13:Or(e,t),Xr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(rw=Rt())),r&4&&l0(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(vn=(c=vn)||h,Or(e,t),vn=c):Or(e,t),Xr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(re=t,h=t.child;h!==null;){for(d=re=h;re!==null;){switch(p=re,_=p.child,p.tag){case 0:case 11:case 14:case 15:kc(4,p,p.return);break;case 1:ul(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(E){gt(r,n,E)}}break;case 5:ul(p,p.return);break;case 22:if(p.memoizedState!==null){c0(d);continue}}_!==null?(_.return=p,re=_):c0(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=rC("display",o))}catch(E){gt(t,t.return,E)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(E){gt(t,t.return,E)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Or(e,t),Xr(t),r&4&&l0(t);break;case 21:break;default:Or(e,t),Xr(t)}}function Xr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(bP(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Qc(i,""),r.flags&=-33);var s=a0(t);ny(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=a0(t);ty(t,a,o);break;default:throw Error(G(161))}}catch(l){gt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function zM(t,e,n){re=t,xP(t)}function xP(t,e,n){for(var r=(t.mode&1)!==0;re!==null;){var i=re,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Hd;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||vn;a=Hd;var c=vn;if(Hd=o,(vn=l)&&!c)for(re=i;re!==null;)o=re,l=o.child,o.tag===22&&o.memoizedState!==null?h0(i):l!==null?(l.return=o,re=l):h0(i);for(;s!==null;)re=s,xP(s),s=s.sibling;re=i,Hd=a,vn=c}u0(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,re=s):u0(t)}}function u0(t){for(;re!==null;){var e=re;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vn||Yp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!vn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Lr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&GT(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}GT(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Zc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}vn||e.flags&512&&ey(e)}catch(p){gt(e,e.return,p)}}if(e===t){re=null;break}if(n=e.sibling,n!==null){n.return=e.return,re=n;break}re=e.return}}function c0(t){for(;re!==null;){var e=re;if(e===t){re=null;break}var n=e.sibling;if(n!==null){n.return=e.return,re=n;break}re=e.return}}function h0(t){for(;re!==null;){var e=re;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Yp(4,e)}catch(l){gt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){gt(e,i,l)}}var s=e.return;try{ey(e)}catch(l){gt(e,s,l)}break;case 5:var o=e.return;try{ey(e)}catch(l){gt(e,o,l)}}}catch(l){gt(e,e.return,l)}if(e===t){re=null;break}var a=e.sibling;if(a!==null){a.return=e.return,re=a;break}re=e.return}}var qM=Math.ceil,tp=Ki.ReactCurrentDispatcher,tw=Ki.ReactCurrentOwner,Sr=Ki.ReactCurrentBatchConfig,ke=0,Yt=null,Dt=null,hn=0,nr=0,cl=no(0),Bt=0,ch=null,Jo=0,Jp=0,nw=0,Nc=null,qn=null,rw=0,Ml=1/0,Pi=null,np=!1,ry=null,Os=null,Gd=!1,As=null,rp=0,xc=0,iy=null,yf=-1,vf=0;function xn(){return ke&6?Rt():yf!==-1?yf:yf=Rt()}function Ls(t){return t.mode&1?ke&2&&hn!==0?hn&-hn:AM.transition!==null?(vf===0&&(vf=gC()),vf):(t=Fe,t!==0||(t=window.event,t=t===void 0?16:TC(t.type)),t):1}function qr(t,e,n,r){if(50<xc)throw xc=0,iy=null,Error(G(185));Fh(t,n,r),(!(ke&2)||t!==Yt)&&(t===Yt&&(!(ke&2)&&(Jp|=n),Bt===4&&Is(t,hn)),Jn(t,r),n===1&&ke===0&&!(e.mode&1)&&(Ml=Rt()+500,Gp&&ro()))}function Jn(t,e){var n=t.callbackNode;AL(t,e);var r=Bf(t,t===Yt?hn:0);if(r===0)n!==null&&wT(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&wT(n),e===1)t.tag===0?RM(d0.bind(null,t)):zC(d0.bind(null,t)),EM(function(){!(ke&6)&&ro()}),n=null;else{switch(_C(r)){case 1:n=bv;break;case 4:n=pC;break;case 16:n=Uf;break;case 536870912:n=mC;break;default:n=Uf}n=BP(n,DP.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function DP(t,e){if(yf=-1,vf=0,ke&6)throw Error(G(327));var n=t.callbackNode;if(wl()&&t.callbackNode!==n)return null;var r=Bf(t,t===Yt?hn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ip(t,r);else{e=r;var i=ke;ke|=2;var s=LP();(Yt!==t||hn!==e)&&(Pi=null,Ml=Rt()+500,Bo(t,e));do try{HM();break}catch(a){OP(t,a)}while(!0);zv(),tp.current=s,ke=i,Dt!==null?e=0:(Yt=null,hn=0,e=Bt)}if(e!==0){if(e===2&&(i=N_(t),i!==0&&(r=i,e=sy(t,i))),e===1)throw n=ch,Bo(t,0),Is(t,r),Jn(t,Rt()),n;if(e===6)Is(t,r);else{if(i=t.current.alternate,!(r&30)&&!$M(i)&&(e=ip(t,r),e===2&&(s=N_(t),s!==0&&(r=s,e=sy(t,s))),e===1))throw n=ch,Bo(t,0),Is(t,r),Jn(t,Rt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(G(345));case 2:Io(t,qn,Pi);break;case 3:if(Is(t,r),(r&130023424)===r&&(e=rw+500-Rt(),10<e)){if(Bf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){xn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=U_(Io.bind(null,t,qn,Pi),e);break}Io(t,qn,Pi);break;case 4:if(Is(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-zr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*qM(r/1960))-r,10<r){t.timeoutHandle=U_(Io.bind(null,t,qn,Pi),r);break}Io(t,qn,Pi);break;case 5:Io(t,qn,Pi);break;default:throw Error(G(329))}}}return Jn(t,Rt()),t.callbackNode===n?DP.bind(null,t):null}function sy(t,e){var n=Nc;return t.current.memoizedState.isDehydrated&&(Bo(t,e).flags|=256),t=ip(t,e),t!==2&&(e=qn,qn=n,e!==null&&oy(e)),t}function oy(t){qn===null?qn=t:qn.push.apply(qn,t)}function $M(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Hr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Is(t,e){for(e&=~nw,e&=~Jp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zr(e),r=1<<n;t[n]=-1,e&=~r}}function d0(t){if(ke&6)throw Error(G(327));wl();var e=Bf(t,0);if(!(e&1))return Jn(t,Rt()),null;var n=ip(t,e);if(t.tag!==0&&n===2){var r=N_(t);r!==0&&(e=r,n=sy(t,r))}if(n===1)throw n=ch,Bo(t,0),Is(t,e),Jn(t,Rt()),n;if(n===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Io(t,qn,Pi),Jn(t,Rt()),null}function iw(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(Ml=Rt()+500,Gp&&ro())}}function Xo(t){As!==null&&As.tag===0&&!(ke&6)&&wl();var e=ke;ke|=1;var n=Sr.transition,r=Fe;try{if(Sr.transition=null,Fe=1,t)return t()}finally{Fe=r,Sr.transition=n,ke=e,!(ke&6)&&ro()}}function sw(){nr=cl.current,Je(cl)}function Bo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,wM(n)),Dt!==null)for(n=Dt.return;n!==null;){var r=n;switch(Uv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Wf();break;case 3:Ol(),Je(Qn),Je(Rn),Kv();break;case 5:Gv(r);break;case 4:Ol();break;case 13:Je(ut);break;case 19:Je(ut);break;case 10:qv(r.type._context);break;case 22:case 23:sw()}n=n.return}if(Yt=t,Dt=t=Ms(t.current,null),hn=nr=e,Bt=0,ch=null,nw=Jp=Jo=0,qn=Nc=null,xo!==null){for(e=0;e<xo.length;e++)if(n=xo[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}xo=null}return t}function OP(t,e){do{var n=Dt;try{if(zv(),mf.current=ep,Zf){for(var r=ct.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Zf=!1}if(Yo=0,Ht=Ut=ct=null,bc=!1,ah=0,tw.current=null,n===null||n.return===null){Bt=1,ch=e,Dt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=hn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var _=ZT(o);if(_!==null){_.flags&=-257,e0(_,o,a,s,e),_.mode&1&&XT(s,c,e),e=_,l=c;var y=e.updateQueue;if(y===null){var E=new Set;E.add(l),e.updateQueue=E}else y.add(l);break e}else{if(!(e&1)){XT(s,c,e),ow();break e}l=Error(G(426))}}else if(nt&&a.mode&1){var P=ZT(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),e0(P,o,a,s,e),Bv(Ll(l,a));break e}}s=l=Ll(l,a),Bt!==4&&(Bt=2),Nc===null?Nc=[s]:Nc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var S=_P(s,l,e);HT(s,S);break e;case 1:a=l;var I=s.type,T=s.stateNode;if(!(s.flags&128)&&(typeof I.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Os===null||!Os.has(T)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=yP(s,a,e);HT(s,k);break e}}s=s.return}while(s!==null)}VP(n)}catch(F){e=F,Dt===n&&n!==null&&(Dt=n=n.return);continue}break}while(!0)}function LP(){var t=tp.current;return tp.current=ep,t===null?ep:t}function ow(){(Bt===0||Bt===3||Bt===2)&&(Bt=4),Yt===null||!(Jo&268435455)&&!(Jp&268435455)||Is(Yt,hn)}function ip(t,e){var n=ke;ke|=2;var r=LP();(Yt!==t||hn!==e)&&(Pi=null,Bo(t,e));do try{WM();break}catch(i){OP(t,i)}while(!0);if(zv(),ke=n,tp.current=r,Dt!==null)throw Error(G(261));return Yt=null,hn=0,Bt}function WM(){for(;Dt!==null;)MP(Dt)}function HM(){for(;Dt!==null&&!_L();)MP(Dt)}function MP(t){var e=UP(t.alternate,t,nr);t.memoizedProps=t.pendingProps,e===null?VP(t):Dt=e,tw.current=null}function VP(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=UM(n,e),n!==null){n.flags&=32767,Dt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Bt=6,Dt=null;return}}else if(n=FM(n,e,nr),n!==null){Dt=n;return}if(e=e.sibling,e!==null){Dt=e;return}Dt=e=t}while(e!==null);Bt===0&&(Bt=5)}function Io(t,e,n){var r=Fe,i=Sr.transition;try{Sr.transition=null,Fe=1,GM(t,e,n,r)}finally{Sr.transition=i,Fe=r}return null}function GM(t,e,n,r){do wl();while(As!==null);if(ke&6)throw Error(G(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(CL(t,s),t===Yt&&(Dt=Yt=null,hn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Gd||(Gd=!0,BP(Uf,function(){return wl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Sr.transition,Sr.transition=null;var o=Fe;Fe=1;var a=ke;ke|=4,tw.current=null,jM(t,n),NP(n,t),fM(V_),jf=!!M_,V_=M_=null,t.current=n,zM(n),yL(),ke=a,Fe=o,Sr.transition=s}else t.current=n;if(Gd&&(Gd=!1,As=t,rp=i),s=t.pendingLanes,s===0&&(Os=null),EL(n.stateNode),Jn(t,Rt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(np)throw np=!1,t=ry,ry=null,t;return rp&1&&t.tag!==0&&wl(),s=t.pendingLanes,s&1?t===iy?xc++:(xc=0,iy=t):xc=0,ro(),null}function wl(){if(As!==null){var t=_C(rp),e=Sr.transition,n=Fe;try{if(Sr.transition=null,Fe=16>t?16:t,As===null)var r=!1;else{if(t=As,As=null,rp=0,ke&6)throw Error(G(331));var i=ke;for(ke|=4,re=t.current;re!==null;){var s=re,o=s.child;if(re.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(re=c;re!==null;){var h=re;switch(h.tag){case 0:case 11:case 15:kc(8,h,s)}var d=h.child;if(d!==null)d.return=h,re=d;else for(;re!==null;){h=re;var p=h.sibling,_=h.return;if(PP(h),h===c){re=null;break}if(p!==null){p.return=_,re=p;break}re=_}}}var y=s.alternate;if(y!==null){var E=y.child;if(E!==null){y.child=null;do{var P=E.sibling;E.sibling=null,E=P}while(E!==null)}}re=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,re=o;else e:for(;re!==null;){if(s=re,s.flags&2048)switch(s.tag){case 0:case 11:case 15:kc(9,s,s.return)}var S=s.sibling;if(S!==null){S.return=s.return,re=S;break e}re=s.return}}var I=t.current;for(re=I;re!==null;){o=re;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,re=T;else e:for(o=I;re!==null;){if(a=re,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Yp(9,a)}}catch(F){gt(a,a.return,F)}if(a===o){re=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,re=k;break e}re=a.return}}if(ke=i,ro(),ci&&typeof ci.onPostCommitFiberRoot=="function")try{ci.onPostCommitFiberRoot(zp,t)}catch{}r=!0}return r}finally{Fe=n,Sr.transition=e}}return!1}function f0(t,e,n){e=Ll(n,e),e=_P(t,e,1),t=Ds(t,e,1),e=xn(),t!==null&&(Fh(t,1,e),Jn(t,e))}function gt(t,e,n){if(t.tag===3)f0(t,t,n);else for(;e!==null;){if(e.tag===3){f0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Os===null||!Os.has(r))){t=Ll(n,t),t=yP(e,t,1),e=Ds(e,t,1),t=xn(),e!==null&&(Fh(e,1,t),Jn(e,t));break}}e=e.return}}function KM(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=xn(),t.pingedLanes|=t.suspendedLanes&n,Yt===t&&(hn&n)===n&&(Bt===4||Bt===3&&(hn&130023424)===hn&&500>Rt()-rw?Bo(t,0):nw|=n),Jn(t,e)}function FP(t,e){e===0&&(t.mode&1?(e=Vd,Vd<<=1,!(Vd&130023424)&&(Vd=4194304)):e=1);var n=xn();t=qi(t,e),t!==null&&(Fh(t,e,n),Jn(t,n))}function QM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),FP(t,n)}function YM(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(e),FP(t,n)}var UP;UP=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Qn.current)$n=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return $n=!1,VM(t,e,n);$n=!!(t.flags&131072)}else $n=!1,nt&&e.flags&1048576&&qC(e,Kf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;_f(t,e),t=e.pendingProps;var i=Nl(e,Rn.current);vl(e,n),i=Yv(null,e,r,t,i,n);var s=Jv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yn(r)?(s=!0,Hf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Wv(e),i.updater=Qp,e.stateNode=i,i._reactInternals=e,H_(e,r,t,n),e=Q_(null,e,r,!0,s,n)):(e.tag=0,nt&&s&&Fv(e),Pn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(_f(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=XM(r),t=Lr(r,t),i){case 0:e=K_(null,e,r,t,n);break e;case 1:e=r0(null,e,r,t,n);break e;case 11:e=t0(null,e,r,t,n);break e;case 14:e=n0(null,e,r,Lr(r.type,t),n);break e}throw Error(G(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lr(r,i),K_(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lr(r,i),r0(t,e,r,i,n);case 3:e:{if(IP(e),t===null)throw Error(G(387));r=e.pendingProps,s=e.memoizedState,i=s.element,QC(t,e),Jf(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ll(Error(G(423)),e),e=i0(t,e,r,n,i);break e}else if(r!==i){i=Ll(Error(G(424)),e),e=i0(t,e,r,n,i);break e}else for(ir=xs(e.stateNode.containerInfo.firstChild),or=e,nt=!0,Fr=null,n=GC(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xl(),r===i){e=$i(t,e,n);break e}Pn(t,e,r,n)}e=e.child}return e;case 5:return YC(e),t===null&&q_(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,F_(r,i)?o=null:s!==null&&F_(r,s)&&(e.flags|=32),EP(t,e),Pn(t,e,o,n),e.child;case 6:return t===null&&q_(e),null;case 13:return TP(t,e,n);case 4:return Hv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Dl(e,null,r,n):Pn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lr(r,i),t0(t,e,r,i,n);case 7:return Pn(t,e,e.pendingProps,n),e.child;case 8:return Pn(t,e,e.pendingProps.children,n),e.child;case 12:return Pn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,$e(Qf,r._currentValue),r._currentValue=o,s!==null)if(Hr(s.value,o)){if(s.children===i.children&&!Qn.current){e=$i(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Mi(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),$_(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(G(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),$_(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Pn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,vl(e,n),i=Cr(i),r=r(i),e.flags|=1,Pn(t,e,r,n),e.child;case 14:return r=e.type,i=Lr(r,e.pendingProps),i=Lr(r.type,i),n0(t,e,r,i,n);case 15:return vP(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lr(r,i),_f(t,e),e.tag=1,Yn(r)?(t=!0,Hf(e)):t=!1,vl(e,n),gP(e,r,i),H_(e,r,i,n),Q_(null,e,r,!0,t,n);case 19:return SP(t,e,n);case 22:return wP(t,e,n)}throw Error(G(156,e.tag))};function BP(t,e){return fC(t,e)}function JM(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wr(t,e,n,r){return new JM(t,e,n,r)}function aw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function XM(t){if(typeof t=="function")return aw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Av)return 11;if(t===Cv)return 14}return 2}function Ms(t,e){var n=t.alternate;return n===null?(n=wr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function wf(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")aw(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case el:return jo(n.children,i,s,e);case Rv:o=8,i|=8;break;case g_:return t=wr(12,n,e,i|2),t.elementType=g_,t.lanes=s,t;case __:return t=wr(13,n,e,i),t.elementType=__,t.lanes=s,t;case y_:return t=wr(19,n,e,i),t.elementType=y_,t.lanes=s,t;case YA:return Xp(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case KA:o=10;break e;case QA:o=9;break e;case Av:o=11;break e;case Cv:o=14;break e;case vs:o=16,r=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=wr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function jo(t,e,n,r){return t=wr(7,t,r,e),t.lanes=n,t}function Xp(t,e,n,r){return t=wr(22,t,r,e),t.elementType=YA,t.lanes=n,t.stateNode={isHidden:!1},t}function Dg(t,e,n){return t=wr(6,t,null,e),t.lanes=n,t}function Og(t,e,n){return e=wr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ZM(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pg(0),this.expirationTimes=pg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function lw(t,e,n,r,i,s,o,a,l){return t=new ZM(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=wr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wv(s),t}function eV(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Za,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function jP(t){if(!t)return zs;t=t._reactInternals;e:{if(va(t)!==t||t.tag!==1)throw Error(G(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(t.tag===1){var n=t.type;if(Yn(n))return jC(t,n,e)}return e}function zP(t,e,n,r,i,s,o,a,l){return t=lw(n,r,!0,t,i,s,o,a,l),t.context=jP(null),n=t.current,r=xn(),i=Ls(n),s=Mi(r,i),s.callback=e??null,Ds(n,s,i),t.current.lanes=i,Fh(t,i,r),Jn(t,r),t}function Zp(t,e,n,r){var i=e.current,s=xn(),o=Ls(i);return n=jP(n),e.context===null?e.context=n:e.pendingContext=n,e=Mi(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ds(i,e,o),t!==null&&(qr(t,i,o,s),pf(t,i,o)),o}function sp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function p0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function uw(t,e){p0(t,e),(t=t.alternate)&&p0(t,e)}function tV(){return null}var qP=typeof reportError=="function"?reportError:function(t){console.error(t)};function cw(t){this._internalRoot=t}em.prototype.render=cw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));Zp(t,e,null,null)};em.prototype.unmount=cw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xo(function(){Zp(null,t,null,null)}),e[zi]=null}};function em(t){this._internalRoot=t}em.prototype.unstable_scheduleHydration=function(t){if(t){var e=wC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Es.length&&e!==0&&e<Es[n].priority;n++);Es.splice(n,0,t),n===0&&IC(t)}};function hw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function tm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function m0(){}function nV(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=sp(o);s.call(c)}}var o=zP(e,r,t,0,null,!1,!1,"",m0);return t._reactRootContainer=o,t[zi]=o.current,nh(t.nodeType===8?t.parentNode:t),Xo(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=sp(l);a.call(c)}}var l=lw(t,0,!1,null,null,!1,!1,"",m0);return t._reactRootContainer=l,t[zi]=l.current,nh(t.nodeType===8?t.parentNode:t),Xo(function(){Zp(e,l,n,r)}),l}function nm(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=sp(o);a.call(l)}}Zp(e,o,t,i)}else o=nV(n,e,t,i,r);return sp(o)}yC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=mc(e.pendingLanes);n!==0&&(kv(e,n|1),Jn(e,Rt()),!(ke&6)&&(Ml=Rt()+500,ro()))}break;case 13:Xo(function(){var r=qi(t,1);if(r!==null){var i=xn();qr(r,t,1,i)}}),uw(t,1)}};Nv=function(t){if(t.tag===13){var e=qi(t,134217728);if(e!==null){var n=xn();qr(e,t,134217728,n)}uw(t,134217728)}};vC=function(t){if(t.tag===13){var e=Ls(t),n=qi(t,e);if(n!==null){var r=xn();qr(n,t,e,r)}uw(t,e)}};wC=function(){return Fe};EC=function(t,e){var n=Fe;try{return Fe=t,e()}finally{Fe=n}};P_=function(t,e,n){switch(e){case"input":if(E_(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Hp(r);if(!i)throw Error(G(90));XA(r),E_(r,i)}}}break;case"textarea":eC(t,n);break;case"select":e=n.value,e!=null&&ml(t,!!n.multiple,e,!1)}};aC=iw;lC=Xo;var rV={usingClientEntryPoint:!1,Events:[Bh,il,Hp,sC,oC,iw]},Qu={findFiberByHostInstance:No,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iV={bundleType:Qu.bundleType,version:Qu.version,rendererPackageName:Qu.rendererPackageName,rendererConfig:Qu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ki.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=hC(t),t===null?null:t.stateNode},findFiberByHostInstance:Qu.findFiberByHostInstance||tV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kd.isDisabled&&Kd.supportsFiber)try{zp=Kd.inject(iV),ci=Kd}catch{}}hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rV;hr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hw(e))throw Error(G(200));return eV(t,e,null,n)};hr.createRoot=function(t,e){if(!hw(t))throw Error(G(299));var n=!1,r="",i=qP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=lw(t,1,!1,null,null,n,!1,r,i),t[zi]=e.current,nh(t.nodeType===8?t.parentNode:t),new cw(e)};hr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=hC(e),t=t===null?null:t.stateNode,t};hr.flushSync=function(t){return Xo(t)};hr.hydrate=function(t,e,n){if(!tm(e))throw Error(G(200));return nm(null,t,e,!0,n)};hr.hydrateRoot=function(t,e,n){if(!hw(t))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=qP;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=zP(e,null,t,1,n??null,i,!1,s,o),t[zi]=e.current,nh(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new em(e)};hr.render=function(t,e,n){if(!tm(e))throw Error(G(200));return nm(null,t,e,!1,n)};hr.unmountComponentAtNode=function(t){if(!tm(t))throw Error(G(40));return t._reactRootContainer?(Xo(function(){nm(null,null,t,!1,function(){t._reactRootContainer=null,t[zi]=null})}),!0):!1};hr.unstable_batchedUpdates=iw;hr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!tm(n))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return nm(t,e,n,!1,r)};hr.version="18.3.1-next-f1338f8080-20240426";function $P(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($P)}catch(t){console.error(t)}}$P(),$A.exports=hr;var dw=$A.exports;const sV=NA(dw),oV=kA({__proto__:null,default:sV},[dw]);/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lt(){return lt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lt.apply(this,arguments)}var Nt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Nt||(Nt={}));const g0="popstate";function aV(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return hh("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Zo(i)}return uV(e,n,null,t)}function Ie(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Vl(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function lV(){return Math.random().toString(36).substr(2,8)}function _0(t,e){return{usr:t.state,key:t.key,idx:e}}function hh(t,e,n,r){return n===void 0&&(n=null),lt({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?io(e):e,{state:n,key:e&&e.key||r||lV()})}function Zo(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function io(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function uV(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Nt.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(lt({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=Nt.Pop;let P=h(),S=P==null?null:P-c;c=P,l&&l({action:a,location:E.location,delta:S})}function p(P,S){a=Nt.Push;let I=hh(E.location,P,S);c=h()+1;let T=_0(I,c),k=E.createHref(I);try{o.pushState(T,"",k)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;i.location.assign(k)}s&&l&&l({action:a,location:E.location,delta:1})}function _(P,S){a=Nt.Replace;let I=hh(E.location,P,S);c=h();let T=_0(I,c),k=E.createHref(I);o.replaceState(T,"",k),s&&l&&l({action:a,location:E.location,delta:0})}function y(P){let S=i.location.origin!=="null"?i.location.origin:i.location.href,I=typeof P=="string"?P:Zo(P);return I=I.replace(/ $/,"%20"),Ie(S,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,S)}let E={get action(){return a},get location(){return t(i,o)},listen(P){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(g0,d),l=P,()=>{i.removeEventListener(g0,d),l=null}},createHref(P){return e(i,P)},createURL:y,encodeLocation(P){let S=y(P);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:p,replace:_,go(P){return o.go(P)}};return E}var tt;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(tt||(tt={}));const cV=new Set(["lazy","caseSensitive","path","id","index","children"]);function hV(t){return t.index===!0}function ay(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,s],a=typeof i.id=="string"?i.id:o.join("-");if(Ie(i.index!==!0||!i.children,"Cannot specify children on an index route"),Ie(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),hV(i)){let l=lt({},i,e(i),{id:a});return r[a]=l,l}else{let l=lt({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=ay(i.children,e,o,r)),l}})}function hl(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?io(e):e,i=uu(r.pathname||"/",n);if(i==null)return null;let s=WP(t);fV(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let l=RV(i);o=IV(s[a],l)}return o}function dV(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function WP(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Ie(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Vi([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(Ie(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),WP(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:wV(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of HP(s.path))i(s,o,l)}),e}function HP(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=HP(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function fV(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:EV(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const pV=/^:[\w-]+$/,mV=3,gV=2,_V=1,yV=10,vV=-2,y0=t=>t==="*";function wV(t,e){let n=t.split("/"),r=n.length;return n.some(y0)&&(r+=vV),e&&(r+=gV),n.filter(i=>!y0(i)).reduce((i,s)=>i+(pV.test(s)?mV:s===""?_V:yV),r)}function EV(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function IV(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",h=TV({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!h)return null;Object.assign(r,h.params);let d=a.route;s.push({params:r,pathname:Vi([i,h.pathname]),pathnameBase:PV(Vi([i,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(i=Vi([i,h.pathnameBase]))}return s}function TV(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=SV(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:p,isOptional:_}=h;if(p==="*"){let E=a[d]||"";o=s.slice(0,s.length-E.length).replace(/(.)\/+$/,"$1")}const y=a[d];return _&&!y?c[p]=void 0:c[p]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function SV(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Vl(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function RV(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vl(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function uu(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function AV(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?io(t):t;return{pathname:n?n.startsWith("/")?n:CV(n,e):e,search:bV(r),hash:kV(i)}}function CV(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Lg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function GP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function fw(t,e){let n=GP(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function pw(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=io(t):(i=lt({},t),Ie(!i.pathname||!i.pathname.includes("?"),Lg("?","pathname","search",i)),Ie(!i.pathname||!i.pathname.includes("#"),Lg("#","pathname","hash",i)),Ie(!i.search||!i.search.includes("#"),Lg("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=AV(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Vi=t=>t.join("/").replace(/\/\/+/g,"/"),PV=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),bV=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,kV=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class mw{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function gw(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const KP=["post","put","patch","delete"],NV=new Set(KP),xV=["get",...KP],DV=new Set(xV),OV=new Set([301,302,303,307,308]),LV=new Set([307,308]),Mg={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},MV={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Yu={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},_w=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,VV=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),QP="remix-router-transitions";function FV(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Ie(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let x=t.detectErrorBoundary;i=L=>({hasErrorBoundary:x(L)})}else i=VV;let s={},o=ay(t.routes,i,void 0,s),a,l=t.basename||"/",c=t.unstable_dataStrategy||zV,h=lt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,unstable_skipActionErrorRevalidation:!1},t.future),d=null,p=new Set,_=null,y=null,E=null,P=t.hydrationData!=null,S=hl(o,t.history.location,l),I=null;if(S==null){let x=gr(404,{pathname:t.history.location.pathname}),{matches:L,route:z}=P0(o);S=L,I={[z.id]:x}}let T,k=S.some(x=>x.route.lazy),F=S.some(x=>x.route.loader);if(k)T=!1;else if(!F)T=!0;else if(h.v7_partialHydration){let x=t.hydrationData?t.hydrationData.loaderData:null,L=t.hydrationData?t.hydrationData.errors:null,z=K=>K.route.loader?typeof K.route.loader=="function"&&K.route.loader.hydrate===!0?!1:x&&x[K.route.id]!==void 0||L&&L[K.route.id]!==void 0:!0;if(L){let K=S.findIndex(te=>L[te.route.id]!==void 0);T=S.slice(0,K+1).every(z)}else T=S.every(z)}else T=t.hydrationData!=null;let j,g={historyAction:t.history.action,location:t.history.location,matches:S,initialized:T,navigation:Mg,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||I,fetchers:new Map,blockers:new Map},v=Nt.Pop,R=!1,A,b=!1,N=new Map,C=null,Me=!1,Ot=!1,fr=[],fn=[],H=new Map,ue=0,he=-1,xe=new Map,ye=new Set,Oe=new Map,nn=new Map,Tt=new Set,Lt=new Map,Mt=new Map,fo=!1;function bu(){if(d=t.history.listen(x=>{let{action:L,location:z,delta:K}=x;if(fo){fo=!1;return}Vl(Mt.size===0||K!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let te=Da({currentLocation:g.location,nextLocation:z,historyAction:L});if(te&&K!=null){fo=!0,t.history.go(K*-1),xa(te,{state:"blocked",location:z,proceed(){xa(te,{state:"proceeding",proceed:void 0,reset:void 0,location:z}),t.history.go(K)},reset(){let oe=new Map(g.blockers);oe.set(te,Yu),Vt({blockers:oe})}});return}return pr(L,z)}),n){eF(e,N);let x=()=>tF(e,N);e.addEventListener("pagehide",x),C=()=>e.removeEventListener("pagehide",x)}return g.initialized||pr(Nt.Pop,g.location,{initialHydration:!0}),j}function ts(){d&&d(),C&&C(),p.clear(),A&&A.abort(),g.fetchers.forEach((x,L)=>go(L)),g.blockers.forEach((x,L)=>wd(L))}function ns(x){return p.add(x),()=>p.delete(x)}function Vt(x,L){L===void 0&&(L={}),g=lt({},g,x);let z=[],K=[];h.v7_fetcherPersist&&g.fetchers.forEach((te,oe)=>{te.state==="idle"&&(Tt.has(oe)?K.push(oe):z.push(oe))}),[...p].forEach(te=>te(g,{deletedFetchers:K,unstable_viewTransitionOpts:L.viewTransitionOpts,unstable_flushSync:L.flushSync===!0})),h.v7_fetcherPersist&&(z.forEach(te=>g.fetchers.delete(te)),K.forEach(te=>go(te)))}function Nr(x,L,z){var K,te;let{flushSync:oe}=z===void 0?{}:z,le=g.actionData!=null&&g.navigation.formMethod!=null&&Vr(g.navigation.formMethod)&&g.navigation.state==="loading"&&((K=x.state)==null?void 0:K._isRedirect)!==!0,ee;L.actionData?Object.keys(L.actionData).length>0?ee=L.actionData:ee=null:le?ee=g.actionData:ee=null;let fe=L.loaderData?A0(g.loaderData,L.loaderData,L.matches||[],L.errors):g.loaderData,pe=g.blockers;pe.size>0&&(pe=new Map(pe),pe.forEach((de,qe)=>pe.set(qe,Yu)));let Ft=R===!0||g.navigation.formMethod!=null&&Vr(g.navigation.formMethod)&&((te=x.state)==null?void 0:te._isRedirect)!==!0;a&&(o=a,a=void 0),Me||v===Nt.Pop||(v===Nt.Push?t.history.push(x,x.state):v===Nt.Replace&&t.history.replace(x,x.state));let et;if(v===Nt.Pop){let de=N.get(g.location.pathname);de&&de.has(x.pathname)?et={currentLocation:g.location,nextLocation:x}:N.has(x.pathname)&&(et={currentLocation:x,nextLocation:g.location})}else if(b){let de=N.get(g.location.pathname);de?de.add(x.pathname):(de=new Set([x.pathname]),N.set(g.location.pathname,de)),et={currentLocation:g.location,nextLocation:x}}Vt(lt({},L,{actionData:ee,loaderData:fe,historyAction:v,location:x,initialized:!0,navigation:Mg,revalidation:"idle",restoreScrollPosition:La(x,L.matches||g.matches),preventScrollReset:Ft,blockers:pe}),{viewTransitionOpts:et,flushSync:oe===!0}),v=Nt.Pop,R=!1,b=!1,Me=!1,Ot=!1,fr=[],fn=[]}async function rs(x,L){if(typeof x=="number"){t.history.go(x);return}let z=ly(g.location,g.matches,l,h.v7_prependBasename,x,h.v7_relativeSplatPath,L==null?void 0:L.fromRouteId,L==null?void 0:L.relative),{path:K,submission:te,error:oe}=v0(h.v7_normalizeFormMethod,!1,z,L),le=g.location,ee=hh(g.location,K,L&&L.state);ee=lt({},ee,t.history.encodeLocation(ee));let fe=L&&L.replace!=null?L.replace:void 0,pe=Nt.Push;fe===!0?pe=Nt.Replace:fe===!1||te!=null&&Vr(te.formMethod)&&te.formAction===g.location.pathname+g.location.search&&(pe=Nt.Replace);let Ft=L&&"preventScrollReset"in L?L.preventScrollReset===!0:void 0,et=(L&&L.unstable_flushSync)===!0,de=Da({currentLocation:le,nextLocation:ee,historyAction:pe});if(de){xa(de,{state:"blocked",location:ee,proceed(){xa(de,{state:"proceeding",proceed:void 0,reset:void 0,location:ee}),rs(x,L)},reset(){let qe=new Map(g.blockers);qe.set(de,Yu),Vt({blockers:qe})}});return}return await pr(pe,ee,{submission:te,pendingError:oe,preventScrollReset:Ft,replace:L&&L.replace,enableViewTransition:L&&L.unstable_viewTransition,flushSync:et})}function po(){if(Na(),Vt({revalidation:"loading"}),g.navigation.state!=="submitting"){if(g.navigation.state==="idle"){pr(g.historyAction,g.location,{startUninterruptedRevalidation:!0});return}pr(v||g.historyAction,g.navigation.location,{overrideNavigation:g.navigation})}}async function pr(x,L,z){A&&A.abort(),A=null,v=x,Me=(z&&z.startUninterruptedRevalidation)===!0,Du(g.location,g.matches),R=(z&&z.preventScrollReset)===!0,b=(z&&z.enableViewTransition)===!0;let K=a||o,te=z&&z.overrideNavigation,oe=hl(K,L,l),le=(z&&z.flushSync)===!0;if(!oe){let de=gr(404,{pathname:L.pathname}),{matches:qe,route:at}=P0(K);Oa(),Nr(L,{matches:qe,loaderData:{},errors:{[at.id]:de}},{flushSync:le});return}if(g.initialized&&!Ot&&KV(g.location,L)&&!(z&&z.submission&&Vr(z.submission.formMethod))){Nr(L,{matches:oe},{flushSync:le});return}A=new AbortController;let ee=Ba(t.history,L,A.signal,z&&z.submission),fe;if(z&&z.pendingError)fe=[Dc(oe).route.id,{type:tt.error,error:z.pendingError}];else if(z&&z.submission&&Vr(z.submission.formMethod)){let de=await yd(ee,L,z.submission,oe,{replace:z.replace,flushSync:le});if(de.shortCircuited)return;fe=de.pendingActionResult,te=Vg(L,z.submission),le=!1,ee=Ba(t.history,ee.url,ee.signal)}let{shortCircuited:pe,loaderData:Ft,errors:et}=await ce(ee,L,oe,te,z&&z.submission,z&&z.fetcherSubmission,z&&z.replace,z&&z.initialHydration===!0,le,fe);pe||(A=null,Nr(L,lt({matches:oe},C0(fe),{loaderData:Ft,errors:et})))}async function yd(x,L,z,K,te){te===void 0&&(te={}),Na();let oe=XV(L,z);Vt({navigation:oe},{flushSync:te.flushSync===!0});let le,ee=cy(K,L);if(!ee.route.action&&!ee.route.lazy)le={type:tt.error,error:gr(405,{method:x.method,pathname:L.pathname,routeId:ee.route.id})};else if(le=(await Bn("action",x,[ee],K))[0],x.signal.aborted)return{shortCircuited:!0};if(Lo(le)){let fe;return te&&te.replace!=null?fe=te.replace:fe=T0(le.response.headers.get("Location"),new URL(x.url),l)===g.location.pathname+g.location.search,await Zn(x,le,{submission:z,replace:fe}),{shortCircuited:!0}}if(Oo(le))throw gr(400,{type:"defer-action"});if(vr(le)){let fe=Dc(K,ee.route.id);return(te&&te.replace)!==!0&&(v=Nt.Push),{pendingActionResult:[fe.route.id,le]}}return{pendingActionResult:[ee.route.id,le]}}async function ce(x,L,z,K,te,oe,le,ee,fe,pe){let Ft=K||Vg(L,te),et=te||oe||N0(Ft),de=a||o,[qe,at]=w0(t.history,g,z,et,L,h.v7_partialHydration&&ee===!0,h.unstable_skipActionErrorRevalidation,Ot,fr,fn,Tt,Oe,ye,de,l,pe);if(Oa(Ee=>!(z&&z.some(rn=>rn.route.id===Ee))||qe&&qe.some(rn=>rn.route.id===Ee)),he=++ue,qe.length===0&&at.length===0){let Ee=ku();return Nr(L,lt({matches:z,loaderData:{},errors:pe&&vr(pe[1])?{[pe[0]]:pe[1].error}:null},C0(pe),Ee?{fetchers:new Map(g.fetchers)}:{}),{flushSync:fe}),{shortCircuited:!0}}if(!Me&&(!h.v7_partialHydration||!ee)){at.forEach(rn=>{let sn=g.fetchers.get(rn.key),bt=Ju(void 0,sn?sn.data:void 0);g.fetchers.set(rn.key,bt)});let Ee;pe&&!vr(pe[1])?Ee={[pe[0]]:pe[1].data}:g.actionData&&(Object.keys(g.actionData).length===0?Ee=null:Ee=g.actionData),Vt(lt({navigation:Ft},Ee!==void 0?{actionData:Ee}:{},at.length>0?{fetchers:new Map(g.fetchers)}:{}),{flushSync:fe})}at.forEach(Ee=>{H.has(Ee.key)&&Jr(Ee.key),Ee.controller&&H.set(Ee.key,Ee.controller)});let os=()=>at.forEach(Ee=>Jr(Ee.key));A&&A.signal.addEventListener("abort",os);let{loaderResults:mr,fetcherResults:xr}=await wi(g.matches,z,qe,at,x);if(x.signal.aborted)return{shortCircuited:!0};A&&A.signal.removeEventListener("abort",os),at.forEach(Ee=>H.delete(Ee.key));let An=b0([...mr,...xr]);if(An){if(An.idx>=qe.length){let Ee=at[An.idx-qe.length].key;ye.add(Ee)}return await Zn(x,An.result,{replace:le}),{shortCircuited:!0}}let{loaderData:Ii,errors:er}=R0(g,z,qe,mr,pe,at,xr,Lt);Lt.forEach((Ee,rn)=>{Ee.subscribe(sn=>{(sn||Ee.done)&&Lt.delete(rn)})}),h.v7_partialHydration&&ee&&g.errors&&Object.entries(g.errors).filter(Ee=>{let[rn]=Ee;return!qe.some(sn=>sn.route.id===rn)}).forEach(Ee=>{let[rn,sn]=Ee;er=Object.assign(er||{},{[rn]:sn})});let as=ku(),ls=Nu(he),_o=as||ls||at.length>0;return lt({loaderData:Ii,errors:er},_o?{fetchers:new Map(g.fetchers)}:{})}function we(x,L,z,K){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");H.has(x)&&Jr(x);let te=(K&&K.unstable_flushSync)===!0,oe=a||o,le=ly(g.location,g.matches,l,h.v7_prependBasename,z,h.v7_relativeSplatPath,L,K==null?void 0:K.relative),ee=hl(oe,le,l);if(!ee){St(x,L,gr(404,{pathname:le}),{flushSync:te});return}let{path:fe,submission:pe,error:Ft}=v0(h.v7_normalizeFormMethod,!0,le,K);if(Ft){St(x,L,Ft,{flushSync:te});return}let et=cy(ee,fe);if(R=(K&&K.preventScrollReset)===!0,pe&&Vr(pe.formMethod)){qt(x,L,fe,et,ee,te,pe);return}Oe.set(x,{routeId:L,path:fe}),Un(x,L,fe,et,ee,te,pe)}async function qt(x,L,z,K,te,oe,le){if(Na(),Oe.delete(x),!K.route.action&&!K.route.lazy){let bt=gr(405,{method:le.formMethod,pathname:z,routeId:L});St(x,L,bt,{flushSync:oe});return}let ee=g.fetchers.get(x);We(x,ZV(le,ee),{flushSync:oe});let fe=new AbortController,pe=Ba(t.history,z,fe.signal,le);H.set(x,fe);let Ft=ue,de=(await Bn("action",pe,[K],te))[0];if(pe.signal.aborted){H.get(x)===fe&&H.delete(x);return}if(h.v7_fetcherPersist&&Tt.has(x)){if(Lo(de)||vr(de)){We(x,ys(void 0));return}}else{if(Lo(de))if(H.delete(x),he>Ft){We(x,ys(void 0));return}else return ye.add(x),We(x,Ju(le)),Zn(pe,de,{fetcherSubmission:le});if(vr(de)){St(x,L,de.error);return}}if(Oo(de))throw gr(400,{type:"defer-action"});let qe=g.navigation.location||g.location,at=Ba(t.history,qe,fe.signal),os=a||o,mr=g.navigation.state!=="idle"?hl(os,g.navigation.location,l):g.matches;Ie(mr,"Didn't find any matches after fetcher action");let xr=++ue;xe.set(x,xr);let An=Ju(le,de.data);g.fetchers.set(x,An);let[Ii,er]=w0(t.history,g,mr,le,qe,!1,h.unstable_skipActionErrorRevalidation,Ot,fr,fn,Tt,Oe,ye,os,l,[K.route.id,de]);er.filter(bt=>bt.key!==x).forEach(bt=>{let Ti=bt.key,us=g.fetchers.get(Ti),Si=Ju(void 0,us?us.data:void 0);g.fetchers.set(Ti,Si),H.has(Ti)&&Jr(Ti),bt.controller&&H.set(Ti,bt.controller)}),Vt({fetchers:new Map(g.fetchers)});let as=()=>er.forEach(bt=>Jr(bt.key));fe.signal.addEventListener("abort",as);let{loaderResults:ls,fetcherResults:_o}=await wi(g.matches,mr,Ii,er,at);if(fe.signal.aborted)return;fe.signal.removeEventListener("abort",as),xe.delete(x),H.delete(x),er.forEach(bt=>H.delete(bt.key));let Ee=b0([...ls,..._o]);if(Ee){if(Ee.idx>=Ii.length){let bt=er[Ee.idx-Ii.length].key;ye.add(bt)}return Zn(at,Ee.result)}let{loaderData:rn,errors:sn}=R0(g,g.matches,Ii,ls,void 0,er,_o,Lt);if(g.fetchers.has(x)){let bt=ys(de.data);g.fetchers.set(x,bt)}Nu(xr),g.navigation.state==="loading"&&xr>he?(Ie(v,"Expected pending action"),A&&A.abort(),Nr(g.navigation.location,{matches:mr,loaderData:rn,errors:sn,fetchers:new Map(g.fetchers)})):(Vt({errors:sn,loaderData:A0(g.loaderData,rn,mr,sn),fetchers:new Map(g.fetchers)}),Ot=!1)}async function Un(x,L,z,K,te,oe,le){let ee=g.fetchers.get(x);We(x,Ju(le,ee?ee.data:void 0),{flushSync:oe});let fe=new AbortController,pe=Ba(t.history,z,fe.signal);H.set(x,fe);let Ft=ue,de=(await Bn("loader",pe,[K],te))[0];if(Oo(de)&&(de=await ZP(de,pe.signal,!0)||de),H.get(x)===fe&&H.delete(x),!pe.signal.aborted){if(Tt.has(x)){We(x,ys(void 0));return}if(Lo(de))if(he>Ft){We(x,ys(void 0));return}else{ye.add(x),await Zn(pe,de);return}if(vr(de)){St(x,L,de.error);return}Ie(!Oo(de),"Unhandled fetcher deferred data"),We(x,ys(de.data))}}async function Zn(x,L,z){let{submission:K,fetcherSubmission:te,replace:oe}=z===void 0?{}:z;L.response.headers.has("X-Remix-Revalidate")&&(Ot=!0);let le=L.response.headers.get("Location");Ie(le,"Expected a Location header on the redirect Response"),le=T0(le,new URL(x.url),l);let ee=hh(g.location,le,{_isRedirect:!0});if(n){let qe=!1;if(L.response.headers.has("X-Remix-Reload-Document"))qe=!0;else if(_w.test(le)){const at=t.history.createURL(le);qe=at.origin!==e.location.origin||uu(at.pathname,l)==null}if(qe){oe?e.location.replace(le):e.location.assign(le);return}}A=null;let fe=oe===!0?Nt.Replace:Nt.Push,{formMethod:pe,formAction:Ft,formEncType:et}=g.navigation;!K&&!te&&pe&&Ft&&et&&(K=N0(g.navigation));let de=K||te;if(LV.has(L.response.status)&&de&&Vr(de.formMethod))await pr(fe,ee,{submission:lt({},de,{formAction:le}),preventScrollReset:R});else{let qe=Vg(ee,K);await pr(fe,ee,{overrideNavigation:qe,fetcherSubmission:te,preventScrollReset:R})}}async function Bn(x,L,z,K){try{let te=await qV(c,x,L,z,K,s,i);return await Promise.all(te.map((oe,le)=>{if(QV(oe)){let ee=oe.result;return{type:tt.redirect,response:HV(ee,L,z[le].route.id,K,l,h.v7_relativeSplatPath)}}return WV(oe)}))}catch(te){return z.map(()=>({type:tt.error,error:te}))}}async function wi(x,L,z,K,te){let[oe,...le]=await Promise.all([z.length?Bn("loader",te,z,L):[],...K.map(ee=>{if(ee.matches&&ee.match&&ee.controller){let fe=Ba(t.history,ee.path,ee.controller.signal);return Bn("loader",fe,[ee.match],ee.matches).then(pe=>pe[0])}else return Promise.resolve({type:tt.error,error:gr(404,{pathname:ee.path})})})]);return await Promise.all([k0(x,z,oe,oe.map(()=>te.signal),!1,g.loaderData),k0(x,K.map(ee=>ee.match),le,K.map(ee=>ee.controller?ee.controller.signal:null),!0)]),{loaderResults:oe,fetcherResults:le}}function Na(){Ot=!0,fr.push(...Oa()),Oe.forEach((x,L)=>{H.has(L)&&(fn.push(L),Jr(L))})}function We(x,L,z){z===void 0&&(z={}),g.fetchers.set(x,L),Vt({fetchers:new Map(g.fetchers)},{flushSync:(z&&z.flushSync)===!0})}function St(x,L,z,K){K===void 0&&(K={});let te=Dc(g.matches,L);go(x),Vt({errors:{[te.route.id]:z},fetchers:new Map(g.fetchers)},{flushSync:(K&&K.flushSync)===!0})}function mo(x){return h.v7_fetcherPersist&&(nn.set(x,(nn.get(x)||0)+1),Tt.has(x)&&Tt.delete(x)),g.fetchers.get(x)||MV}function go(x){let L=g.fetchers.get(x);H.has(x)&&!(L&&L.state==="loading"&&xe.has(x))&&Jr(x),Oe.delete(x),xe.delete(x),ye.delete(x),Tt.delete(x),g.fetchers.delete(x)}function vd(x){if(h.v7_fetcherPersist){let L=(nn.get(x)||0)-1;L<=0?(nn.delete(x),Tt.add(x)):nn.set(x,L)}else go(x);Vt({fetchers:new Map(g.fetchers)})}function Jr(x){let L=H.get(x);Ie(L,"Expected fetch controller: "+x),L.abort(),H.delete(x)}function is(x){for(let L of x){let z=mo(L),K=ys(z.data);g.fetchers.set(L,K)}}function ku(){let x=[],L=!1;for(let z of ye){let K=g.fetchers.get(z);Ie(K,"Expected fetcher: "+z),K.state==="loading"&&(ye.delete(z),x.push(z),L=!0)}return is(x),L}function Nu(x){let L=[];for(let[z,K]of xe)if(K<x){let te=g.fetchers.get(z);Ie(te,"Expected fetcher: "+z),te.state==="loading"&&(Jr(z),xe.delete(z),L.push(z))}return is(L),L.length>0}function xu(x,L){let z=g.blockers.get(x)||Yu;return Mt.get(x)!==L&&Mt.set(x,L),z}function wd(x){g.blockers.delete(x),Mt.delete(x)}function xa(x,L){let z=g.blockers.get(x)||Yu;Ie(z.state==="unblocked"&&L.state==="blocked"||z.state==="blocked"&&L.state==="blocked"||z.state==="blocked"&&L.state==="proceeding"||z.state==="blocked"&&L.state==="unblocked"||z.state==="proceeding"&&L.state==="unblocked","Invalid blocker state transition: "+z.state+" -> "+L.state);let K=new Map(g.blockers);K.set(x,L),Vt({blockers:K})}function Da(x){let{currentLocation:L,nextLocation:z,historyAction:K}=x;if(Mt.size===0)return;Mt.size>1&&Vl(!1,"A router only supports one blocker at a time");let te=Array.from(Mt.entries()),[oe,le]=te[te.length-1],ee=g.blockers.get(oe);if(!(ee&&ee.state==="proceeding")&&le({currentLocation:L,nextLocation:z,historyAction:K}))return oe}function Oa(x){let L=[];return Lt.forEach((z,K)=>{(!x||x(K))&&(z.cancel(),L.push(K),Lt.delete(K))}),L}function Ed(x,L,z){if(_=x,E=L,y=z||null,!P&&g.navigation===Mg){P=!0;let K=La(g.location,g.matches);K!=null&&Vt({restoreScrollPosition:K})}return()=>{_=null,E=null,y=null}}function ss(x,L){return y&&y(x,L.map(K=>dV(K,g.loaderData)))||x.key}function Du(x,L){if(_&&E){let z=ss(x,L);_[z]=E()}}function La(x,L){if(_){let z=ss(x,L),K=_[z];if(typeof K=="number")return K}return null}function Ei(x){s={},a=ay(x,i,void 0,s)}return j={get basename(){return l},get future(){return h},get state(){return g},get routes(){return o},get window(){return e},initialize:bu,subscribe:ns,enableScrollRestoration:Ed,navigate:rs,fetch:we,revalidate:po,createHref:x=>t.history.createHref(x),encodeLocation:x=>t.history.encodeLocation(x),getFetcher:mo,deleteFetcher:vd,dispose:ts,getBlocker:xu,deleteBlocker:wd,_internalFetchControllers:H,_internalActiveDeferreds:Lt,_internalSetRoutes:Ei},j}function UV(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function ly(t,e,n,r,i,s,o,a){let l,c;if(o){l=[];for(let d of e)if(l.push(d),d.route.id===o){c=d;break}}else l=e,c=e[e.length-1];let h=pw(i||".",fw(l,s),uu(t.pathname,n)||t.pathname,a==="path");return i==null&&(h.search=t.search,h.hash=t.hash),(i==null||i===""||i===".")&&c&&c.route.index&&!yw(h.search)&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(h.pathname=h.pathname==="/"?n:Vi([n,h.pathname])),Zo(h)}function v0(t,e,n,r){if(!r||!UV(r))return{path:n};if(r.formMethod&&!JV(r.formMethod))return{path:n,error:gr(405,{method:r.formMethod})};let i=()=>({path:n,error:gr(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=JP(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Vr(o))return i();let p=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((_,y)=>{let[E,P]=y;return""+_+E+"="+P+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:p}}}else if(r.formEncType==="application/json"){if(!Vr(o))return i();try{let p=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:p,text:void 0}}}catch{return i()}}}Ie(typeof FormData=="function","FormData is not available in this environment");let l,c;if(r.formData)l=uy(r.formData),c=r.formData;else if(r.body instanceof FormData)l=uy(r.body),c=r.body;else if(r.body instanceof URLSearchParams)l=r.body,c=S0(l);else if(r.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(r.body),c=S0(l)}catch{return i()}let h={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Vr(h.formMethod))return{path:n,submission:h};let d=io(n);return e&&d.search&&yw(d.search)&&l.append("index",""),d.search="?"+l,{path:Zo(d),submission:h}}function BV(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function w0(t,e,n,r,i,s,o,a,l,c,h,d,p,_,y,E){let P=E?vr(E[1])?E[1].error:E[1].data:void 0,S=t.createURL(e.location),I=t.createURL(i),T=E&&vr(E[1])?E[0]:void 0,k=T?BV(n,T):n,F=E?E[1].statusCode:void 0,j=o&&F&&F>=400,g=k.filter((R,A)=>{let{route:b}=R;if(b.lazy)return!0;if(b.loader==null)return!1;if(s)return typeof b.loader!="function"||b.loader.hydrate?!0:e.loaderData[b.id]===void 0&&(!e.errors||e.errors[b.id]===void 0);if(jV(e.loaderData,e.matches[A],R)||l.some(Me=>Me===R.route.id))return!0;let N=e.matches[A],C=R;return E0(R,lt({currentUrl:S,currentParams:N.params,nextUrl:I,nextParams:C.params},r,{actionResult:P,unstable_actionStatus:F,defaultShouldRevalidate:j?!1:a||S.pathname+S.search===I.pathname+I.search||S.search!==I.search||YP(N,C)}))}),v=[];return d.forEach((R,A)=>{if(s||!n.some(Ot=>Ot.route.id===R.routeId)||h.has(A))return;let b=hl(_,R.path,y);if(!b){v.push({key:A,routeId:R.routeId,path:R.path,matches:null,match:null,controller:null});return}let N=e.fetchers.get(A),C=cy(b,R.path),Me=!1;p.has(A)?Me=!1:c.includes(A)?Me=!0:N&&N.state!=="idle"&&N.data===void 0?Me=a:Me=E0(C,lt({currentUrl:S,currentParams:e.matches[e.matches.length-1].params,nextUrl:I,nextParams:n[n.length-1].params},r,{actionResult:P,unstable_actionStatus:F,defaultShouldRevalidate:j?!1:a})),Me&&v.push({key:A,routeId:R.routeId,path:R.path,matches:b,match:C,controller:new AbortController})}),[g,v]}function jV(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function YP(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function E0(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function I0(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];Ie(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";Vl(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!cV.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,lt({},e(i),{lazy:void 0}))}function zV(t){return Promise.all(t.matches.map(e=>e.resolve()))}async function qV(t,e,n,r,i,s,o,a){let l=r.reduce((d,p)=>d.add(p.route.id),new Set),c=new Set,h=await t({matches:i.map(d=>{let p=l.has(d.route.id);return lt({},d,{shouldLoad:p,resolve:y=>(c.add(d.route.id),p?$V(e,n,d,s,o,y,a):Promise.resolve({type:tt.data,result:void 0}))})}),request:n,params:i[0].params,context:a});return i.forEach(d=>Ie(c.has(d.route.id),'`match.resolve()` was not called for route id "'+d.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),h.filter((d,p)=>l.has(i[p].route.id))}async function $V(t,e,n,r,i,s,o){let a,l,c=h=>{let d,p=new Promise((E,P)=>d=P);l=()=>d(),e.signal.addEventListener("abort",l);let _=E=>typeof h!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):h({request:e,params:n.params,context:o},...E!==void 0?[E]:[]),y;return s?y=s(E=>_(E)):y=(async()=>{try{return{type:"data",result:await _()}}catch(E){return{type:"error",result:E}}})(),Promise.race([y,p])};try{let h=n.route[t];if(n.route.lazy)if(h){let d,[p]=await Promise.all([c(h).catch(_=>{d=_}),I0(n.route,i,r)]);if(d!==void 0)throw d;a=p}else if(await I0(n.route,i,r),h=n.route[t],h)a=await c(h);else if(t==="action"){let d=new URL(e.url),p=d.pathname+d.search;throw gr(405,{method:e.method,pathname:p,routeId:n.route.id})}else return{type:tt.data,result:void 0};else if(h)a=await c(h);else{let d=new URL(e.url),p=d.pathname+d.search;throw gr(404,{pathname:p})}Ie(a.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(h){return{type:tt.error,result:h}}finally{l&&e.signal.removeEventListener("abort",l)}return a}async function WV(t){let{result:e,type:n,status:r}=t;if(XP(e)){let o;try{let a=e.headers.get("Content-Type");a&&/\bapplication\/json\b/.test(a)?e.body==null?o=null:o=await e.json():o=await e.text()}catch(a){return{type:tt.error,error:a}}return n===tt.error?{type:tt.error,error:new mw(e.status,e.statusText,o),statusCode:e.status,headers:e.headers}:{type:tt.data,data:o,statusCode:e.status,headers:e.headers}}if(n===tt.error)return{type:tt.error,error:e,statusCode:gw(e)?e.status:r};if(YV(e)){var i,s;return{type:tt.deferred,deferredData:e,statusCode:(i=e.init)==null?void 0:i.status,headers:((s=e.init)==null?void 0:s.headers)&&new Headers(e.init.headers)}}return{type:tt.data,data:e,statusCode:r}}function HV(t,e,n,r,i,s){let o=t.headers.get("Location");if(Ie(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!_w.test(o)){let a=r.slice(0,r.findIndex(l=>l.route.id===n)+1);o=ly(new URL(e.url),a,i,!0,o,s),t.headers.set("Location",o)}return t}function T0(t,e,n){if(_w.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=uu(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function Ba(t,e,n,r){let i=t.createURL(JP(e)).toString(),s={signal:n};if(r&&Vr(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=uy(r.formData):s.body=r.formData}return new Request(i,s)}function uy(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function S0(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function GV(t,e,n,r,i,s){let o={},a=null,l,c=!1,h={},d=r&&vr(r[1])?r[1].error:void 0;return n.forEach((p,_)=>{let y=e[_].route.id;if(Ie(!Lo(p),"Cannot handle redirect results in processLoaderData"),vr(p)){let E=p.error;d!==void 0&&(E=d,d=void 0),a=a||{};{let P=Dc(t,y);a[P.route.id]==null&&(a[P.route.id]=E)}o[y]=void 0,c||(c=!0,l=gw(p.error)?p.error.status:500),p.headers&&(h[y]=p.headers)}else Oo(p)?(i.set(y,p.deferredData),o[y]=p.deferredData.data,p.statusCode!=null&&p.statusCode!==200&&!c&&(l=p.statusCode),p.headers&&(h[y]=p.headers)):(o[y]=p.data,p.statusCode&&p.statusCode!==200&&!c&&(l=p.statusCode),p.headers&&(h[y]=p.headers))}),d!==void 0&&r&&(a={[r[0]]:d},o[r[0]]=void 0),{loaderData:o,errors:a,statusCode:l||200,loaderHeaders:h}}function R0(t,e,n,r,i,s,o,a){let{loaderData:l,errors:c}=GV(e,n,r,i,a);for(let h=0;h<s.length;h++){let{key:d,match:p,controller:_}=s[h];Ie(o!==void 0&&o[h]!==void 0,"Did not find corresponding fetcher result");let y=o[h];if(!(_&&_.signal.aborted))if(vr(y)){let E=Dc(t.matches,p==null?void 0:p.route.id);c&&c[E.route.id]||(c=lt({},c,{[E.route.id]:y.error})),t.fetchers.delete(d)}else if(Lo(y))Ie(!1,"Unhandled fetcher revalidation redirect");else if(Oo(y))Ie(!1,"Unhandled fetcher deferred data");else{let E=ys(y.data);t.fetchers.set(d,E)}}return{loaderData:l,errors:c}}function A0(t,e,n,r){let i=lt({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function C0(t){return t?vr(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Dc(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function P0(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function gr(t,e){let{pathname:n,routeId:r,method:i,type:s}=e===void 0?{}:e,o="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(o="Bad Request",i&&n&&r?a="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?a="defer() is not supported in actions":s==="invalid-body"&&(a="Unable to encode submission body")):t===403?(o="Forbidden",a='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",a='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",i&&n&&r?a="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new mw(t||500,o,new Error(a),!0)}function b0(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(Lo(n))return{result:n,idx:e}}}function JP(t){let e=typeof t=="string"?io(t):t;return Zo(lt({},e,{hash:""}))}function KV(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function QV(t){return XP(t.result)&&OV.has(t.result.status)}function Oo(t){return t.type===tt.deferred}function vr(t){return t.type===tt.error}function Lo(t){return(t&&t.type)===tt.redirect}function YV(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function XP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function JV(t){return DV.has(t.toLowerCase())}function Vr(t){return NV.has(t.toLowerCase())}async function k0(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],l=e[o];if(!l)continue;let c=t.find(d=>d.route.id===l.route.id),h=c!=null&&!YP(c,l)&&(s&&s[l.route.id])!==void 0;if(Oo(a)&&(i||h)){let d=r[o];Ie(d,"Expected an AbortSignal for revalidating fetcher deferred result"),await ZP(a,d,i).then(p=>{p&&(n[o]=p||n[o])})}}}async function ZP(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:tt.data,data:t.deferredData.unwrappedData}}catch(i){return{type:tt.error,error:i}}return{type:tt.data,data:t.deferredData.data}}}function yw(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function cy(t,e){let n=typeof e=="string"?io(e).search:e.search;if(t[t.length-1].route.index&&yw(n||""))return t[t.length-1];let r=GP(t);return r[r.length-1]}function N0(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function Vg(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function XV(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Ju(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function ZV(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function ys(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function eF(t,e){try{let n=t.sessionStorage.getItem(QP);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function tF(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(QP,JSON.stringify(n))}catch(r){Vl(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function op(){return op=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},op.apply(this,arguments)}const rm=U.createContext(null),eb=U.createContext(null),wa=U.createContext(null),vw=U.createContext(null),so=U.createContext({outlet:null,matches:[],isDataRoute:!1}),tb=U.createContext(null);function nF(t,e){let{relative:n}=e===void 0?{}:e;zh()||Ie(!1);let{basename:r,navigator:i}=U.useContext(wa),{hash:s,pathname:o,search:a}=ib(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Vi([r,o])),i.createHref({pathname:l,search:a,hash:s})}function zh(){return U.useContext(vw)!=null}function im(){return zh()||Ie(!1),U.useContext(vw).location}function nb(t){U.useContext(wa).static||U.useLayoutEffect(t)}function rb(){let{isDataRoute:t}=U.useContext(so);return t?gF():rF()}function rF(){zh()||Ie(!1);let t=U.useContext(rm),{basename:e,future:n,navigator:r}=U.useContext(wa),{matches:i}=U.useContext(so),{pathname:s}=im(),o=JSON.stringify(fw(i,n.v7_relativeSplatPath)),a=U.useRef(!1);return nb(()=>{a.current=!0}),U.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=pw(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Vi([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,s,t])}const iF=U.createContext(null);function sF(t){let e=U.useContext(so).outlet;return e&&U.createElement(iF.Provider,{value:t},e)}function ib(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=U.useContext(wa),{matches:i}=U.useContext(so),{pathname:s}=im(),o=JSON.stringify(fw(i,r.v7_relativeSplatPath));return U.useMemo(()=>pw(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function oF(t,e,n,r){zh()||Ie(!1);let{navigator:i}=U.useContext(wa),{matches:s}=U.useContext(so),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=im(),h;h=c;let d=h.pathname||"/",p=d;if(l!=="/"){let E=l.replace(/^\//,"").split("/");p="/"+d.replace(/^\//,"").split("/").slice(E.length).join("/")}let _=hl(t,{pathname:p});return hF(_&&_.map(E=>Object.assign({},E,{params:Object.assign({},a,E.params),pathname:Vi([l,i.encodeLocation?i.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?l:Vi([l,i.encodeLocation?i.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),s,n,r)}function aF(){let t=mF(),e=gw(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),n?U.createElement("pre",{style:i},n):null,null)}const lF=U.createElement(aF,null);class uF extends U.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?U.createElement(so.Provider,{value:this.props.routeContext},U.createElement(tb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cF(t){let{routeContext:e,match:n,children:r}=t,i=U.useContext(rm);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),U.createElement(so.Provider,{value:e},r)}function hF(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Ie(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:p,errors:_}=n,y=d.route.loader&&p[d.route.id]===void 0&&(!_||_[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,p)=>{let _,y=!1,E=null,P=null;n&&(_=a&&d.route.id?a[d.route.id]:void 0,E=d.route.errorElement||lF,l&&(c<0&&p===0?(_F("route-fallback"),y=!0,P=null):c===p&&(y=!0,P=d.route.hydrateFallbackElement||null)));let S=e.concat(o.slice(0,p+1)),I=()=>{let T;return _?T=E:y?T=P:d.route.Component?T=U.createElement(d.route.Component,null):d.route.element?T=d.route.element:T=h,U.createElement(cF,{match:d,routeContext:{outlet:h,matches:S,isDataRoute:n!=null},children:T})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?U.createElement(uF,{location:n.location,revalidation:n.revalidation,component:E,error:_,children:I(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):I()},null)}var sb=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(sb||{}),ap=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ap||{});function dF(t){let e=U.useContext(rm);return e||Ie(!1),e}function fF(t){let e=U.useContext(eb);return e||Ie(!1),e}function pF(t){let e=U.useContext(so);return e||Ie(!1),e}function ob(t){let e=pF(),n=e.matches[e.matches.length-1];return n.route.id||Ie(!1),n.route.id}function mF(){var t;let e=U.useContext(tb),n=fF(ap.UseRouteError),r=ob(ap.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function gF(){let{router:t}=dF(sb.UseNavigateStable),e=ob(ap.UseNavigateStable),n=U.useRef(!1);return nb(()=>{n.current=!0}),U.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,op({fromRouteId:e},s)))},[t,e])}const x0={};function _F(t,e,n){x0[t]||(x0[t]=!0)}function yF(t){return sF(t.context)}function vF(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Nt.Pop,navigator:s,static:o=!1,future:a}=t;zh()&&Ie(!1);let l=e.replace(/^\/*/,"/"),c=U.useMemo(()=>({basename:l,navigator:s,static:o,future:op({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=io(r));let{pathname:h="/",search:d="",hash:p="",state:_=null,key:y="default"}=r,E=U.useMemo(()=>{let P=uu(h,l);return P==null?null:{location:{pathname:P,search:d,hash:p,state:_,key:y},navigationType:i}},[l,h,d,p,_,y,i]);return E==null?null:U.createElement(wa.Provider,{value:c},U.createElement(vw.Provider,{children:n,value:E}))}new Promise(()=>{});function wF(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:U.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:U.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:U.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dh(){return dh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dh.apply(this,arguments)}function EF(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function IF(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function TF(t,e){return t.button===0&&(!e||e==="_self")&&!IF(t)}const SF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],RF="6";try{window.__reactRouterVersion=RF}catch{}function AF(t,e){return FV({basename:void 0,future:dh({},void 0,{v7_prependBasename:!0}),history:aV({window:void 0}),hydrationData:CF(),routes:t,mapRouteProperties:wF,unstable_dataStrategy:void 0,window:void 0}).initialize()}function CF(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=dh({},e,{errors:PF(e.errors)})),e}function PF(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new mw(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const bF=U.createContext({isTransitioning:!1}),kF=U.createContext(new Map),NF="startTransition",D0=KO[NF],xF="flushSync",O0=oV[xF];function DF(t){D0?D0(t):t()}function Xu(t){O0?O0(t):t()}let OF=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function LF(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=U.useState(n.state),[o,a]=U.useState(),[l,c]=U.useState({isTransitioning:!1}),[h,d]=U.useState(),[p,_]=U.useState(),[y,E]=U.useState(),P=U.useRef(new Map),{v7_startTransition:S}=r||{},I=U.useCallback(g=>{S?DF(g):g()},[S]),T=U.useCallback((g,v)=>{let{deletedFetchers:R,unstable_flushSync:A,unstable_viewTransitionOpts:b}=v;R.forEach(C=>P.current.delete(C)),g.fetchers.forEach((C,Me)=>{C.data!==void 0&&P.current.set(Me,C.data)});let N=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!b||N){A?Xu(()=>s(g)):I(()=>s(g));return}if(A){Xu(()=>{p&&(h&&h.resolve(),p.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:b.currentLocation,nextLocation:b.nextLocation})});let C=n.window.document.startViewTransition(()=>{Xu(()=>s(g))});C.finished.finally(()=>{Xu(()=>{d(void 0),_(void 0),a(void 0),c({isTransitioning:!1})})}),Xu(()=>_(C));return}p?(h&&h.resolve(),p.skipTransition(),E({state:g,currentLocation:b.currentLocation,nextLocation:b.nextLocation})):(a(g),c({isTransitioning:!0,flushSync:!1,currentLocation:b.currentLocation,nextLocation:b.nextLocation}))},[n.window,p,h,P,I]);U.useLayoutEffect(()=>n.subscribe(T),[n,T]),U.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new OF)},[l]),U.useEffect(()=>{if(h&&o&&n.window){let g=o,v=h.promise,R=n.window.document.startViewTransition(async()=>{I(()=>s(g)),await v});R.finished.finally(()=>{d(void 0),_(void 0),a(void 0),c({isTransitioning:!1})}),_(R)}},[I,o,h,n.window]),U.useEffect(()=>{h&&o&&i.location.key===o.location.key&&h.resolve()},[h,p,i.location,o]),U.useEffect(()=>{!l.isTransitioning&&y&&(a(y.state),c({isTransitioning:!0,flushSync:!1,currentLocation:y.currentLocation,nextLocation:y.nextLocation}),E(void 0))},[l.isTransitioning,y]),U.useEffect(()=>{},[]);let k=U.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:g=>n.navigate(g),push:(g,v,R)=>n.navigate(g,{state:v,preventScrollReset:R==null?void 0:R.preventScrollReset}),replace:(g,v,R)=>n.navigate(g,{replace:!0,state:v,preventScrollReset:R==null?void 0:R.preventScrollReset})}),[n]),F=n.basename||"/",j=U.useMemo(()=>({router:n,navigator:k,static:!1,basename:F}),[n,k,F]);return U.createElement(U.Fragment,null,U.createElement(rm.Provider,{value:j},U.createElement(eb.Provider,{value:i},U.createElement(kF.Provider,{value:P.current},U.createElement(bF.Provider,{value:l},U.createElement(vF,{basename:F,location:i.location,navigationType:i.historyAction,navigator:k,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},i.initialized||n.future.v7_partialHydration?U.createElement(MF,{routes:n.routes,future:n.future,state:i}):e))))),null)}function MF(t){let{routes:e,future:n,state:r}=t;return oF(e,void 0,r,n)}const VF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",FF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fg=U.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,unstable_viewTransition:d}=e,p=EF(e,SF),{basename:_}=U.useContext(wa),y,E=!1;if(typeof c=="string"&&FF.test(c)&&(y=c,VF))try{let T=new URL(window.location.href),k=c.startsWith("//")?new URL(T.protocol+c):new URL(c),F=uu(k.pathname,_);k.origin===T.origin&&F!=null?c=F+k.search+k.hash:E=!0}catch{}let P=nF(c,{relative:i}),S=UF(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,unstable_viewTransition:d});function I(T){r&&r(T),T.defaultPrevented||S(T)}return U.createElement("a",dh({},p,{href:y||P,onClick:E||s?r:I,ref:n,target:l}))});var L0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(L0||(L0={}));var M0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(M0||(M0={}));function UF(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=rb(),c=im(),h=ib(t,{relative:o});return U.useCallback(d=>{if(TF(d,n)){d.preventDefault();let p=r!==void 0?r:Zo(c)===Zo(h);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,h,r,i,n,t,s,o,a])}var ab,V0=dw;ab=V0.createRoot,V0.hydrateRoot;var F0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z=function(t,e){if(!t)throw cu(e)},cu=function(t){return new Error("Firebase Database ("+lb.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},BF=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ww={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,_=c&63;l||(_=64,o||(p=64)),r.push(n[h],n[d],n[p],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ub(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):BF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new jF;const p=s<<2|a>>4;if(r.push(p),c!==64){const _=a<<4&240|c>>2;if(r.push(_),d!==64){const y=c<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class jF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cb=function(t){const e=ub(t);return ww.encodeByteArray(e,!0)},lp=function(t){return cb(t).replace(/\./g,"")},up=function(t){try{return ww.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zF(t){return fh(void 0,t)}function fh(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!qF(n)||(t[n]=fh(t[n],e[n]));return t}function qF(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $F(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WF=()=>$F().__FIREBASE_DEFAULTS__,HF=()=>{if(typeof process>"u"||typeof F0>"u")return;const t=F0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},GF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&up(t[1]);return e&&JSON.parse(e)},sm=()=>{try{return WF()||HF()||GF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},hb=t=>{var e,n;return(n=(e=sm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},KF=t=>{const e=hb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},db=()=>{var t;return(t=sm())===null||t===void 0?void 0:t.config},fb=t=>{var e;return(e=sm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[lp(JSON.stringify(n)),lp(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Iw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ot())}function Tw(){var t;const e=(t=sm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mb(){return typeof self=="object"&&self.self===self}function gb(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function om(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _b(){const t=ot();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function yb(){return lb.NODE_ADMIN===!0}function vb(){return!Tw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ph(){try{return typeof indexedDB=="object"}catch{return!1}}function QF(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YF="FirebaseError";class Sn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=YF,Object.setPrototypeOf(this,Sn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ea.prototype.create)}}class Ea{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?JF(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Sn(i,a,r)}}function JF(t,e){return t.replace(XF,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const XF=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(t){return JSON.parse(t)}function un(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=mh(up(s[0])||""),n=mh(up(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},ZF=function(t){const e=wb(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},e2=function(t){const e=wb(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Fl(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function hy(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function cp(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Ul(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(U0(s)&&U0(o)){if(!Ul(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function U0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function dl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function _c(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const p=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(p<<1|p>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,h;for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),h=1518500249):(c=s^o^a,h=1859775393):d<60?(c=s&o|a&(s|o),h=2400959708):(c=s^o^a,h=3395469782);const p=(i<<5|i>>>27)+c+l+h+r[d]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=p}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function Eb(t,e){const n=new n2(t,e);return n.subscribe.bind(n)}class n2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");r2(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Ug),i.error===void 0&&(i.error=Ug),i.complete===void 0&&(i.complete=Ug);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function r2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ug(){}function i2(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,Z(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},am=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t){return t&&t._delegate?t._delegate:t}class ur{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Ew;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(l2(e))try{this.getOrInitializeService({instanceIdentifier:To})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=To){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=To){return this.instances.has(e)}getOptions(e=To){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:a2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=To){return this.component?this.component.multipleInstances?e:To:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function a2(t){return t===To?void 0:t}function l2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new o2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=[];var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const Tb={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},u2=ve.INFO,c2={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},h2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=c2[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qh{constructor(e){this.name=e,this._logLevel=u2,this._logHandler=h2,this._userLogHandler=null,Sw.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Tb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}}function d2(t){Sw.forEach(e=>{e.setLogLevel(t)})}function f2(t,e){for(const n of Sw){let r=null;e&&e.level&&(r=Tb[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&t({level:ve[s].toLowerCase(),message:a,args:o,type:i.name})}}}const p2=(t,e)=>e.some(n=>t instanceof n);let B0,j0;function m2(){return B0||(B0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function g2(){return j0||(j0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Sb=new WeakMap,dy=new WeakMap,Rb=new WeakMap,Bg=new WeakMap,Rw=new WeakMap;function _2(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Vs(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Sb.set(n,t)}).catch(()=>{}),Rw.set(e,t),e}function y2(t){if(dy.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});dy.set(t,e)}let fy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return dy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Rb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function v2(t){fy=t(fy)}function w2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(jg(this),e,...n);return Rb.set(r,e.sort?e.sort():[e]),Vs(r)}:g2().includes(t)?function(...e){return t.apply(jg(this),e),Vs(Sb.get(this))}:function(...e){return Vs(t.apply(jg(this),e))}}function E2(t){return typeof t=="function"?w2(t):(t instanceof IDBTransaction&&y2(t),p2(t,m2())?new Proxy(t,fy):t)}function Vs(t){if(t instanceof IDBRequest)return _2(t);if(Bg.has(t))return Bg.get(t);const e=E2(t);return e!==t&&(Bg.set(t,e),Rw.set(e,t)),e}const jg=t=>Rw.get(t);function I2(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Vs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Vs(o.result),l.oldVersion,l.newVersion,Vs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const T2=["get","getKey","getAll","getAllKeys","count"],S2=["put","add","delete","clear"],zg=new Map;function z0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zg.get(e))return zg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=S2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||T2.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return zg.set(e,s),s}v2(t=>({...t,get:(e,n,r)=>z0(e,n)||t.get(e,n,r),has:(e,n)=>!!z0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(A2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function A2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hp="@firebase/app",py="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=new qh("@firebase/app"),C2="@firebase/app-compat",P2="@firebase/analytics-compat",b2="@firebase/analytics",k2="@firebase/app-check-compat",N2="@firebase/app-check",x2="@firebase/auth",D2="@firebase/auth-compat",O2="@firebase/database",L2="@firebase/database-compat",M2="@firebase/functions",V2="@firebase/functions-compat",F2="@firebase/installations",U2="@firebase/installations-compat",B2="@firebase/messaging",j2="@firebase/messaging-compat",z2="@firebase/performance",q2="@firebase/performance-compat",$2="@firebase/remote-config",W2="@firebase/remote-config-compat",H2="@firebase/storage",G2="@firebase/storage-compat",K2="@firebase/firestore",Q2="@firebase/vertexai-preview",Y2="@firebase/firestore-compat",J2="firebase",X2="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs="[DEFAULT]",Z2={[hp]:"fire-core",[C2]:"fire-core-compat",[b2]:"fire-analytics",[P2]:"fire-analytics-compat",[N2]:"fire-app-check",[k2]:"fire-app-check-compat",[x2]:"fire-auth",[D2]:"fire-auth-compat",[O2]:"fire-rtdb",[L2]:"fire-rtdb-compat",[M2]:"fire-fn",[V2]:"fire-fn-compat",[F2]:"fire-iid",[U2]:"fire-iid-compat",[B2]:"fire-fcm",[j2]:"fire-fcm-compat",[z2]:"fire-perf",[q2]:"fire-perf-compat",[$2]:"fire-rc",[W2]:"fire-rc-compat",[H2]:"fire-gcs",[G2]:"fire-gcs-compat",[K2]:"fire-fst",[Y2]:"fire-fst-compat",[Q2]:"fire-vertex","fire-js":"fire-js",[J2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=new Map,Bl=new Map,jl=new Map;function gh(t,e){try{t.container.addComponent(e)}catch(n){ea.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ab(t,e){t.container.addOrOverwriteComponent(e)}function mi(t){const e=t.name;if(jl.has(e))return ea.debug(`There were multiple attempts to register component ${e}.`),!1;jl.set(e,t);for(const n of $s.values())gh(n,t);for(const n of Bl.values())gh(n,t);return!0}function $h(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function eU(t,e,n=qs){$h(t,e).clearInstance(n)}function Cb(t){return t.options!==void 0}function yt(t){return t.settings!==void 0}function tU(){jl.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rr=new Ea("app","Firebase",nU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pb=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ur("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rr.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU extends Pb{constructor(e,n,r,i){const s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{const a=e;super(a.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},n),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Dn(hp,py,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Pw(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Rr.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=X2;function Aw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:qs,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Rr.create("bad-app-name",{appName:String(i)});if(n||(n=db()),!n)throw Rr.create("no-options");const s=$s.get(i);if(s){if(Ul(n,s.options)&&Ul(r,s.config))return s;throw Rr.create("duplicate-app",{appName:i})}const o=new Ib(i);for(const l of jl.values())o.addComponent(l);const a=new Pb(n,r,o);return $s.set(i,a),a}function iU(t,e){if(mb())throw Rr.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;Cb(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=c=>[...c].reduce((h,d)=>Math.imul(31,h)+d.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Rr.create("finalization-registry-not-supported",{});const s=""+i(JSON.stringify(r)),o=Bl.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;const a=new Ib(s);for(const c of jl.values())a.addComponent(c);const l=new rU(n,e,s,a);return Bl.set(s,l),l}function Cw(t=qs){const e=$s.get(t);if(!e&&t===qs&&db())return Aw();if(!e)throw Rr.create("no-app",{appName:t});return e}function sU(){return Array.from($s.values())}async function Pw(t){let e=!1;const n=t.name;$s.has(n)?(e=!0,$s.delete(n)):Bl.has(n)&&t.decRefCount()<=0&&(Bl.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Dn(t,e,n){var r;let i=(r=Z2[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ea.warn(a.join(" "));return}mi(new ur(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function bb(t,e){if(t!==null&&typeof t!="function")throw Rr.create("invalid-log-argument");f2(t,e)}function kb(t){d2(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oU="firebase-heartbeat-database",aU=1,_h="firebase-heartbeat-store";let qg=null;function Nb(){return qg||(qg=I2(oU,aU,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(_h)}catch(n){console.warn(n)}}}}).catch(t=>{throw Rr.create("idb-open",{originalErrorMessage:t.message})})),qg}async function lU(t){try{const n=(await Nb()).transaction(_h),r=await n.objectStore(_h).get(xb(t));return await n.done,r}catch(e){if(e instanceof Sn)ea.warn(e.message);else{const n=Rr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ea.warn(n.message)}}}async function q0(t,e){try{const r=(await Nb()).transaction(_h,"readwrite");await r.objectStore(_h).put(e,xb(t)),await r.done}catch(n){if(n instanceof Sn)ea.warn(n.message);else{const r=Rr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ea.warn(r.message)}}}function xb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uU=1024,cU=30*24*60*60*1e3;class hU{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new fU(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=$0();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=cU}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=$0(),{heartbeatsToSend:r,unsentEntries:i}=dU(this._heartbeatsCache.heartbeats),s=lp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function $0(){return new Date().toISOString().substring(0,10)}function dU(t,e=uU){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),W0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),W0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class fU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ph()?QF().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await lU(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return q0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return q0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function W0(t){return lp(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pU(t){mi(new ur("platform-logger",e=>new R2(e),"PRIVATE")),mi(new ur("heartbeat",e=>new hU(e),"PRIVATE")),Dn(hp,py,t),Dn(hp,py,"esm2017"),Dn("fire-js","")}pU("");const mU=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Sn,SDK_VERSION:vi,_DEFAULT_ENTRY_NAME:qs,_addComponent:gh,_addOrOverwriteComponent:Ab,_apps:$s,_clearComponents:tU,_components:jl,_getProvider:$h,_isFirebaseApp:Cb,_isFirebaseServerApp:yt,_registerComponent:mi,_removeServiceInstance:eU,_serverApps:Bl,deleteApp:Pw,getApp:Cw,getApps:sU,initializeApp:Aw,initializeServerApp:iU,onLog:bb,registerVersion:Dn,setLogLevel:kb},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{constructor(e,n){this._delegate=e,this.firebase=n,gh(e,new ur("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Pw(this._delegate)))}_getService(e,n=qs){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=qs){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){gh(this._delegate,e)}_addOrOverwriteComponent(e){Ab(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _U={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},H0=new Ea("app-compat","Firebase",_U);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yU(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:Dn,setLogLevel:kb,onLog:bb,apps:null,SDK_VERSION:vi,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:mU}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(c){delete e[c]}function i(c){if(c=c||qs,!Gr(e,c))throw H0.create("no-app",{appName:c});return e[c]}i.App=t;function s(c,h={}){const d=Aw(c,h);if(Gr(e,d.name))return e[d.name];const p=new t(d,n);return e[d.name]=p,p}function o(){return Object.keys(e).map(c=>e[c])}function a(c){const h=c.name,d=h.replace("-compat","");if(mi(c)&&c.type==="PUBLIC"){const p=(_=i())=>{if(typeof _[d]!="function")throw H0.create("invalid-app-argument",{appName:h});return _[d]()};c.serviceProps!==void 0&&fh(p,c.serviceProps),n[d]=p,t.prototype[d]=function(..._){return this._getService.bind(this,h).apply(this,c.multipleInstances?_:[])}}return c.type==="PUBLIC"?n[d]:null}function l(c,h){return h==="serverAuth"?null:h}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(){const t=yU(gU);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:Db,extendNamespace:e,createSubscribe:Eb,ErrorFactory:Ea,deepExtend:fh});function e(n){fh(t,n)}return t}const vU=Db();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0=new qh("@firebase/app-compat"),wU="@firebase/app-compat",EU="0.2.35";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IU(t){Dn(wU,EU,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(mb()&&self.firebase!==void 0){G0.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&G0.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const Ue=vU;IU();var TU="firebase",SU="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ue.registerVersion(TU,SU,"app-compat");function bw(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const Zu={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ja={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RU(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function Ob(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AU=RU,CU=Ob,Lb=new Ea("auth","Firebase",Ob());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp=new qh("@firebase/auth");function PU(t,...e){dp.logLevel<=ve.WARN&&dp.warn(`Auth (${vi}): ${t}`,...e)}function Ef(t,...e){dp.logLevel<=ve.ERROR&&dp.error(`Auth (${vi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(t,...e){throw Nw(t,...e)}function jt(t,...e){return Nw(t,...e)}function kw(t,e,n){const r=Object.assign(Object.assign({},CU()),{[e]:n});return new Ea("auth","Firebase",r).create(e,{appName:t.name})}function Jt(t){return kw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hu(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Zt(t,"argument-error"),kw(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Nw(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Lb.create(t,...e)}function Q(t,e,...n){if(!t)throw Nw(e,...n)}function oi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ef(e),new Error(e)}function Kr(t,e){t||oi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function xw(){return K0()==="http:"||K0()==="https:"}function K0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xw()||gb()||"connection"in navigator)?navigator.onLine:!0}function kU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Kr(n>e,"Short delay should be less than long delay!"),this.isMobile=Iw()||om()}get(){return bU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(t,e){Kr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;oi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;oi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;oi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xU=new Wh(3e4,6e4);function Et(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function It(t,e,n,r,i={}){return Vb(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Ia(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),Mb.fetch()(Fb(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function Vb(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},NU),e);try{const i=new OU(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw yc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw yc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw yc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw yc(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw kw(t,h,c);Zt(t,h)}}catch(i){if(i instanceof Sn)throw i;Zt(t,"network-request-failed",{message:String(i)})}}async function Qi(t,e,n,r,i={}){const s=await It(t,e,n,r,i);return"mfaPendingCredential"in s&&Zt(t,"multi-factor-auth-required",{_serverResponse:s}),s}function Fb(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Dw(t.config,i):`${t.config.apiScheme}://${i}`}function DU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class OU{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(jt(this.auth,"network-request-failed")),xU.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function yc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=jt(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(t){return t!==void 0&&t.getResponse!==void 0}function Y0(t){return t!==void 0&&t.enterprise!==void 0}class LU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return DU(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MU(t){return(await It(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function VU(t,e){return It(t,"GET","/v2/recaptchaConfig",Et(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FU(t,e){return It(t,"POST","/v1/accounts:delete",e)}async function UU(t,e){return It(t,"POST","/v1/accounts:update",e)}async function Ub(t,e){return It(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function BU(t,e=!1){const n=ie(t),r=await n.getIdToken(e),i=lm(r);Q(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Oc($g(i.auth_time)),issuedAtTime:Oc($g(i.iat)),expirationTime:Oc($g(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function $g(t){return Number(t)*1e3}function lm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ef("JWT malformed, contained fewer than 3 sections"),null;try{const i=up(n);return i?JSON.parse(i):(Ef("Failed to decode base64 JWT payload"),null)}catch(i){return Ef("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function J0(t){const e=lm(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Sn&&jU(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function jU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oc(this.lastLoginAt),this.creationTime=Oc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Wi(t,Ub(n,{idToken:r}));Q(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Bb(s.providerUserInfo):[],a=$U(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new my(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function qU(t){const e=ie(t);await vh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $U(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Bb(t){return t.map(e=>{var{providerId:n}=e,r=bw(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WU(t,e){const n=await Vb(t,{},async()=>{const r=Ia({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Fb(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Mb.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function HU(t,e){return It(t,"POST","/v2/accounts:revokeToken",Et(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):J0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");const n=J0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await WU(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new El;return r&&(Q(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Q(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Q(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new El,this.toJSON())}_performRefresh(){return oi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class xi{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=bw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new my(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Wi(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return BU(this,e)}reload(){return qU(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new xi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await vh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yt(this.auth.app))return Promise.reject(Jt(this.auth));const e=await this.getIdToken();return await Wi(this,FU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(a=n.tenantId)!==null&&a!==void 0?a:void 0,P=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,S=(c=n.createdAt)!==null&&c!==void 0?c:void 0,I=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:T,emailVerified:k,isAnonymous:F,providerData:j,stsTokenManager:g}=n;Q(T&&g,e,"internal-error");const v=El.fromJSON(this.name,g);Q(typeof T=="string",e,"internal-error"),fs(d,e.name),fs(p,e.name),Q(typeof k=="boolean",e,"internal-error"),Q(typeof F=="boolean",e,"internal-error"),fs(_,e.name),fs(y,e.name),fs(E,e.name),fs(P,e.name),fs(S,e.name),fs(I,e.name);const R=new xi({uid:T,auth:e,email:p,emailVerified:k,displayName:d,isAnonymous:F,photoURL:y,phoneNumber:_,tenantId:E,stsTokenManager:v,createdAt:S,lastLoginAt:I});return j&&Array.isArray(j)&&(R.providerData=j.map(A=>Object.assign({},A))),P&&(R._redirectEventId=P),R}static async _fromIdTokenResponse(e,n,r=!1){const i=new El;i.updateFromServerResponse(n);const s=new xi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await vh(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Q(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Bb(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new El;a.updateFromIdToken(r);const l=new xi({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new my(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0=new Map;function sr(t){Kr(t instanceof Function,"Expected a class definition");let e=X0.get(t);return e?(Kr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,X0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}jb.type="NONE";const zl=jb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(t,e,n){return`firebase:${t}:${e}:${n}`}class Il{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=zo(this.userKey,i.apiKey,s),this.fullPersistenceKey=zo("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?xi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Il(sr(zl),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||sr(zl);const o=zo(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=xi._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Il(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Il(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($b(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Wb(e))return"Blackberry";if(Hb(e))return"Webos";if(Ow(e))return"Safari";if((e.includes("chrome/")||qb(e))&&!e.includes("edge/"))return"Chrome";if(Hh(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function zb(t=ot()){return/firefox\//i.test(t)}function Ow(t=ot()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qb(t=ot()){return/crios\//i.test(t)}function $b(t=ot()){return/iemobile/i.test(t)}function Hh(t=ot()){return/android/i.test(t)}function Wb(t=ot()){return/blackberry/i.test(t)}function Hb(t=ot()){return/webos/i.test(t)}function du(t=ot()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function GU(t=ot()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function KU(t=ot()){var e;return du(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function QU(){return _b()&&document.documentMode===10}function Gb(t=ot()){return du(t)||Hh(t)||Hb(t)||Wb(t)||/windows phone/i.test(t)||$b(t)}function YU(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(t,e=[]){let n;switch(t){case"Browser":n=Z0(ot());break;case"Worker":n=`${Z0(ot())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${vi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XU(t,e={}){return It(t,"GET","/v2/passwordPolicy",Et(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZU=6;class eB{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:ZU,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eS(this),this.idTokenSubscription=new eS(this),this.beforeStateQueue=new JU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Lb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=sr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Il.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ub(this,{idToken:e}),r=await xi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(yt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await vh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yt(this.app))return Promise.reject(Jt(this));const n=e?ie(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yt(this.app)?Promise.reject(Jt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yt(this.app)?Promise.reject(Jt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(sr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await XU(this),n=new eB(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ea("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await HU(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&sr(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await Il.create(this,[sr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Kb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&PU(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function vt(t){return ie(t)}class eS{constructor(e){this.auth=e,this.observer=null,this.addObserver=Eb(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function nB(t){Gh=t}function Lw(t){return Gh.loadJS(t)}function rB(){return Gh.recaptchaV2Script}function iB(){return Gh.recaptchaEnterpriseScript}function sB(){return Gh.gapiScript}function Qb(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const oB="recaptcha-enterprise",aB="NO_RECAPTCHA";class lB{constructor(e){this.type=oB,this.auth=vt(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{VU(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new LU(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;Y0(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(aB)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Y0(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=iB();l.length!==0&&(l+=a),Lw(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function tS(t,e,n,r=!1){const i=new lB(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function wh(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await tS(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await tS(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uB(t,e){const n=$h(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Ul(s,e??{}))return i;Zt(i,"already-initialized")}return n.initialize({options:e})}function cB(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(sr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Yb(t,e,n){const r=vt(t);Q(r._canInitEmulator,r,"emulator-config-failed"),Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=Jb(e),{host:o,port:a}=hB(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||dB()}function Jb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function hB(t){const e=Jb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:nS(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:nS(o)}}}function nS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function dB(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return oi("not implemented")}_getIdTokenResponse(e){return oi("not implemented")}_linkToIdToken(e,n){return oi("not implemented")}_getReauthenticationResolver(e){return oi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xb(t,e){return It(t,"POST","/v1/accounts:resetPassword",Et(t,e))}async function fB(t,e){return It(t,"POST","/v1/accounts:update",e)}async function pB(t,e){return It(t,"POST","/v1/accounts:signUp",e)}async function mB(t,e){return It(t,"POST","/v1/accounts:update",Et(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gB(t,e){return Qi(t,"POST","/v1/accounts:signInWithPassword",Et(t,e))}async function um(t,e){return It(t,"POST","/v1/accounts:sendOobCode",Et(t,e))}async function _B(t,e){return um(t,e)}async function yB(t,e){return um(t,e)}async function vB(t,e){return um(t,e)}async function wB(t,e){return um(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EB(t,e){return Qi(t,"POST","/v1/accounts:signInWithEmailLink",Et(t,e))}async function IB(t,e){return Qi(t,"POST","/v1/accounts:signInWithEmailLink",Et(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh extends fu{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Eh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Eh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wh(e,n,"signInWithPassword",gB);case"emailLink":return EB(e,{email:this._email,oobCode:this._password});default:Zt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wh(e,r,"signUpPassword",pB);case"emailLink":return IB(e,{idToken:n,email:this._email,oobCode:this._password});default:Zt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fi(t,e){return Qi(t,"POST","/v1/accounts:signInWithIdp",Et(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TB="http://localhost";class gi extends fu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new gi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Zt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=bw(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new gi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Fi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Fi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Fi(e,n)}buildRequest(){const e={requestUri:TB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ia(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SB(t,e){return It(t,"POST","/v1/accounts:sendVerificationCode",Et(t,e))}async function RB(t,e){return Qi(t,"POST","/v1/accounts:signInWithPhoneNumber",Et(t,e))}async function AB(t,e){const n=await Qi(t,"POST","/v1/accounts:signInWithPhoneNumber",Et(t,e));if(n.temporaryProof)throw yc(t,"account-exists-with-different-credential",n);return n}const CB={USER_NOT_FOUND:"user-not-found"};async function PB(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Qi(t,"POST","/v1/accounts:signInWithPhoneNumber",Et(t,n),CB)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo extends fu{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new qo({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new qo({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return RB(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return AB(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return PB(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new qo({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function kB(t){const e=dl(_c(t)).link,n=e?dl(_c(e)).deep_link_id:null,r=dl(_c(t)).deep_link_id;return(r?dl(_c(r)).link:null)||r||n||e||t}class cm{constructor(e){var n,r,i,s,o,a;const l=dl(_c(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,d=bB((i=l.mode)!==null&&i!==void 0?i:null);Q(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=kB(e);try{return new cm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(){this.providerId=oo.PROVIDER_ID}static credential(e,n){return Eh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=cm.parseLink(n);return Q(r,"argument-error"),Eh._fromEmailAndCode(e,r.code,r.tenantId)}}oo.PROVIDER_ID="password";oo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";oo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu extends Yi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Tl extends pu{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return Q("providerId"in n&&"signInMethod"in n,"argument-error"),gi._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Q(e.idToken||e.accessToken,"argument-error"),gi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Tl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Tl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new Tl(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti extends pu{constructor(){super("facebook.com")}static credential(e){return gi._fromParams({providerId:ti.PROVIDER_ID,signInMethod:ti.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ti.credentialFromTaggedObject(e)}static credentialFromError(e){return ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ti.credential(e.oauthAccessToken)}catch{return null}}}ti.FACEBOOK_SIGN_IN_METHOD="facebook.com";ti.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni extends pu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return gi._fromParams({providerId:ni.PROVIDER_ID,signInMethod:ni.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ni.credentialFromTaggedObject(e)}static credentialFromError(e){return ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ni.credential(n,r)}catch{return null}}}ni.GOOGLE_SIGN_IN_METHOD="google.com";ni.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri extends pu{constructor(){super("github.com")}static credential(e){return gi._fromParams({providerId:ri.PROVIDER_ID,signInMethod:ri.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ri.credentialFromTaggedObject(e)}static credentialFromError(e){return ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ri.credential(e.oauthAccessToken)}catch{return null}}}ri.GITHUB_SIGN_IN_METHOD="github.com";ri.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NB="http://localhost";class ql extends fu{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Fi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Fi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Fi(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new ql(r,s)}static _create(e,n){return new ql(e,n)}buildRequest(){return{requestUri:NB,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xB="saml.";class fp extends Yi{constructor(e){Q(e.startsWith(xB),"argument-error"),super(e)}static credentialFromResult(e){return fp.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return fp.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=ql.fromJSON(e);return Q(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return ql._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii extends pu{constructor(){super("twitter.com")}static credential(e,n){return gi._fromParams({providerId:ii.PROVIDER_ID,signInMethod:ii.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ii.credentialFromTaggedObject(e)}static credentialFromError(e){return ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ii.credential(n,r)}catch{return null}}}ii.TWITTER_SIGN_IN_METHOD="twitter.com";ii.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zb(t,e){return Qi(t,"POST","/v1/accounts:signUp",Et(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await xi._fromIdTokenResponse(e,r,i),o=rS(r);return new br({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=rS(r);return new br({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function rS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DB(t){var e;if(yt(t.app))return Promise.reject(Jt(t));const n=vt(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new br({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Zb(n,{returnSecureToken:!0}),i=await br._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp extends Sn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,pp.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new pp(e,n,r,i)}}function ek(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?pp._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OB(t,e){const n=ie(t);await hm(!0,n,e);const{providerUserInfo:r}=await UU(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=tk(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Mw(t,e,n=!1){const r=await Wi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return br._forOperation(t,"link",r)}async function hm(t,e,n){await vh(e);const r=tk(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";Q(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nk(t,e,n=!1){const{auth:r}=t;if(yt(r.app))return Promise.reject(Jt(r));const i="reauthenticate";try{const s=await Wi(t,ek(r,i,e,t),n);Q(s.idToken,r,"internal-error");const o=lm(s.idToken);Q(o,r,"internal-error");const{sub:a}=o;return Q(t.uid===a,r,"user-mismatch"),br._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Zt(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rk(t,e,n=!1){if(yt(t.app))return Promise.reject(Jt(t));const r="signIn",i=await ek(t,r,e),s=await br._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function dm(t,e){return rk(vt(t),e)}async function ik(t,e){const n=ie(t);return await hm(!1,n,e.providerId),Mw(n,e)}async function sk(t,e){return nk(ie(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LB(t,e){return Qi(t,"POST","/v1/accounts:signInWithCustomToken",Et(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MB(t,e){if(yt(t.app))return Promise.reject(Jt(t));const n=vt(t),r=await LB(n,{token:e,returnSecureToken:!0}),i=await br._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?Vw._fromServerResponse(e,n):"totpInfo"in n?Fw._fromServerResponse(e,n):Zt(e,"internal-error")}}class Vw extends Kh{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new Vw(n)}}class Fw extends Kh{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new Fw(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(t,e,n){var r;Q(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),Q(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Q(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Q(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uw(t){const e=vt(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function VB(t,e,n){const r=vt(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&fm(r,i,n),await wh(r,i,"getOobCode",yB)}async function FB(t,e,n){await Xb(ie(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Uw(t),r})}async function UB(t,e){await mB(ie(t),{oobCode:e})}async function ok(t,e){const n=ie(t),r=await Xb(n,{oobCode:e}),i=r.requestType;switch(Q(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Q(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Q(r.mfaInfo,n,"internal-error");default:Q(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Kh._fromServerResponse(vt(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function BB(t,e){const{data:n}=await ok(ie(t),e);return n.email}async function jB(t,e,n){if(yt(t.app))return Promise.reject(Jt(t));const r=vt(t),o=await wh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Zb).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Uw(t),l}),a=await br._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function zB(t,e,n){return yt(t.app)?Promise.reject(Jt(t)):dm(ie(t),oo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Uw(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qB(t,e,n){const r=vt(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){Q(a.handleCodeInApp,r,"argument-error"),a&&fm(r,o,a)}s(i,n),await wh(r,i,"getOobCode",vB)}function $B(t,e){const n=cm.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function WB(t,e,n){if(yt(t.app))return Promise.reject(Jt(t));const r=ie(t),i=oo.credentialWithLink(e,n||yh());return Q(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),dm(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HB(t,e){return It(t,"POST","/v1/accounts:createAuthUri",Et(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GB(t,e){const n=xw()?yh():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await HB(ie(t),r);return i||[]}async function KB(t,e){const n=ie(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&fm(n.auth,i,e);const{email:s}=await _B(n.auth,i);s!==t.email&&await t.reload()}async function QB(t,e,n){const r=ie(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&fm(r.auth,s,n);const{email:o}=await wB(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YB(t,e){return It(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ak(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ie(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Wi(r,YB(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function JB(t,e){const n=ie(t);return yt(n.auth.app)?Promise.reject(Jt(n.auth)):lk(n,e,null)}function XB(t,e){return lk(ie(t),null,e)}async function lk(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await Wi(t,fB(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZB(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const o=(n=(e=lm(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new Sl(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new e4(s,i);case"github.com":return new t4(s,i);case"google.com":return new n4(s,i);case"twitter.com":return new r4(s,i,t.screenName||null);case"custom":case"anonymous":return new Sl(s,null);default:return new Sl(s,r,i)}}class Sl{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class uk extends Sl{constructor(e,n,r,i){super(e,n,r),this.username=i}}class e4 extends Sl{constructor(e,n){super(e,"facebook.com",n)}}class t4 extends uk{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class n4 extends Sl{constructor(e,n){super(e,"google.com",n)}}class r4 extends uk{constructor(e,n,r){super(e,"twitter.com",n,r)}}function i4(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:ZB(n)}function s4(t,e,n,r){return ie(t).onIdTokenChanged(e,n,r)}function o4(t,e,n){return ie(t).beforeAuthStateChanged(e,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new Mo("enroll",e,n)}static _fromMfaPendingCredential(e){return new Mo("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Mo._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Mo._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=vt(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>Kh._fromServerResponse(r,a));Q(i.mfaPendingCredential,r,"internal-error");const o=Mo._fromMfaPendingCredential(i.mfaPendingCredential);return new Bw(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const c=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(n.operationType){case"signIn":const h=await br._fromIdTokenResponse(r,n.operationType,c);return await r._updateCurrentUser(h.user),h;case"reauthenticate":return Q(n.user,r,"internal-error"),br._forOperation(n.user,n.operationType,c);default:Zt(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function a4(t,e){var n;const r=ie(t),i=e;return Q(e.customData.operationType,r,"argument-error"),Q((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),Bw._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l4(t,e){return It(t,"POST","/v2/accounts/mfaEnrollment:start",Et(t,e))}function u4(t,e){return It(t,"POST","/v2/accounts/mfaEnrollment:finalize",Et(t,e))}function c4(t,e){return It(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Et(t,e))}class jw{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Kh._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new jw(e)}async getSession(){return Mo._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),s=await Wi(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Wi(this.user,c4(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const Wg=new WeakMap;function h4(t){const e=ie(t);return Wg.has(e)||Wg.set(e,jw._fromUser(e)),Wg.get(e)}const mp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(mp,"1"),this.storage.removeItem(mp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(){const t=ot();return Ow(t)||du(t)}const f4=1e3,p4=10;class hk extends ck{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=d4()&&YU(),this.fallbackToPolling=Gb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);QU()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,p4):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},f4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}hk.type="LOCAL";const pm=hk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk extends ck{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}dk.type="SESSION";const Ws=dk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new mm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await m4(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Qh("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(){return window}function _4(t){xt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(){return typeof xt().WorkerGlobalScope<"u"&&typeof xt().importScripts=="function"}async function y4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function v4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function w4(){return zw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk="firebaseLocalStorageDb",E4=1,gp="firebaseLocalStorage",pk="fbase_key";class Yh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gm(t,e){return t.transaction([gp],e?"readwrite":"readonly").objectStore(gp)}function I4(){const t=indexedDB.deleteDatabase(fk);return new Yh(t).toPromise()}function gy(){const t=indexedDB.open(fk,E4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(gp,{keyPath:pk})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(gp)?e(r):(r.close(),await I4(),e(await gy()))})})}async function iS(t,e,n){const r=gm(t,!0).put({[pk]:e,value:n});return new Yh(r).toPromise()}async function T4(t,e){const n=gm(t,!1).get(e),r=await new Yh(n).toPromise();return r===void 0?null:r.value}function sS(t,e){const n=gm(t,!0).delete(e);return new Yh(n).toPromise()}const S4=800,R4=3;class mk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>R4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mm._getInstance(w4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await y4(),!this.activeServiceWorker)return;this.sender=new g4(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||v4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gy();return await iS(e,mp,"1"),await sS(e,mp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>iS(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>T4(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>sS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=gm(i,!1).getAll();return new Yh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),S4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mk.type="LOCAL";const $l=mk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(t,e){return It(t,"POST","/v2/accounts/mfaSignIn:start",Et(t,e))}function C4(t,e){return It(t,"POST","/v2/accounts/mfaSignIn:finalize",Et(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4=500,b4=6e4,Qd=1e12;class k4{constructor(e){this.auth=e,this.counter=Qd,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new N4(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Qd;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Qd;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Qd;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class N4{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;Q(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=x4(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},b4)},P4))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function x4(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg=Qb("rcb"),D4=new Wh(3e4,6e4);class O4{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=xt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return Q(L4(n),e,"argument-error"),this.shouldResolveImmediately(n)&&Q0(xt().grecaptcha)?Promise.resolve(xt().grecaptcha):new Promise((r,i)=>{const s=xt().setTimeout(()=>{i(jt(e,"network-request-failed"))},D4.get());xt()[Hg]=()=>{xt().clearTimeout(s),delete xt()[Hg];const a=xt().grecaptcha;if(!a||!Q0(a)){i(jt(e,"internal-error"));return}const l=a.render;a.render=(c,h)=>{const d=l(c,h);return this.counter++,d},this.hostLanguage=n,r(a)};const o=`${rB()}?${Ia({onload:Hg,render:"explicit",hl:n})}`;Lw(o).catch(()=>{clearTimeout(s),i(jt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=xt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function L4(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class M4{async load(e){return new k4(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk="recaptcha",V4={theme:"light",type:"image"};let F4=class{constructor(e,n,r=Object.assign({},V4)){this.parameters=r,this.type=gk,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vt(e),this.isInvisible=this.parameters.size==="invisible",Q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;Q(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new M4:new O4,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Q(!this.parameters.sitekey,this.auth,"argument-error"),Q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=xt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){Q(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Q(xw()&&!zw(),this.auth,"internal-error"),await U4(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await MU(this.auth);Q(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function U4(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=qo._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function B4(t,e,n){if(yt(t.app))return Promise.reject(Jt(t));const r=vt(t),i=await _m(r,e,ie(n));return new qw(i,s=>dm(r,s))}async function j4(t,e,n){const r=ie(t);await hm(!1,r,"phone");const i=await _m(r.auth,e,ie(n));return new qw(i,s=>ik(r,s))}async function z4(t,e,n){const r=ie(t);if(yt(r.auth.app))return Promise.reject(Jt(r.auth));const i=await _m(r.auth,e,ie(n));return new qw(i,s=>sk(r,s))}async function _m(t,e,n){var r;const i=await n.verify();try{Q(typeof i=="string",t,"argument-error"),Q(n.type===gk,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return Q(o.type==="enroll",t,"internal-error"),(await l4(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{Q(o.type==="signin",t,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return Q(a,t,"missing-multi-factor-info"),(await A4(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await SB(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}async function q4(t,e){const n=ie(t);if(yt(n.auth.app))return Promise.reject(Jt(n.auth));await Mw(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ta=class If{constructor(e){this.providerId=If.PROVIDER_ID,this.auth=vt(e)}verifyPhoneNumber(e,n){return _m(this.auth,e,ie(n))}static credential(e,n){return qo._fromVerification(e,n)}static credentialFromResult(e){const n=e;return If.credentialFromTaggedObject(n)}static credentialFromError(e){return If.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?qo._fromTokenResponse(n,r):null}};ta.PROVIDER_ID="phone";ta.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ta(t,e){return e?sr(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w extends fu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Fi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Fi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function $4(t){return rk(t.auth,new $w(t),t.bypassAuthState)}function W4(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),nk(n,new $w(t),t.bypassAuthState)}async function H4(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),Mw(n,new $w(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $4;case"linkViaPopup":case"linkViaRedirect":return H4;case"reauthViaPopup":case"reauthViaRedirect":return W4;default:Zt(this.auth,"internal-error")}}resolve(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4=new Wh(2e3,1e4);async function K4(t,e,n){if(yt(t.app))return Promise.reject(jt(t,"operation-not-supported-in-this-environment"));const r=vt(t);hu(t,e,Yi);const i=Ta(r,n);return new Di(r,"signInViaPopup",e,i).executeNotNull()}async function Q4(t,e,n){const r=ie(t);if(yt(r.auth.app))return Promise.reject(jt(r.auth,"operation-not-supported-in-this-environment"));hu(r.auth,e,Yi);const i=Ta(r.auth,n);return new Di(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function Y4(t,e,n){const r=ie(t);hu(r.auth,e,Yi);const i=Ta(r.auth,n);return new Di(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Di extends _k{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Di.currentPopupAction&&Di.currentPopupAction.cancel(),Di.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Q(e,this.auth,"internal-error"),e}async onExecution(){Kr(this.filter.length===1,"Popup operations only handle one event");const e=Qh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(jt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(jt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Di.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,G4.get())};e()}}Di.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4="pendingRedirect",Lc=new Map;class X4 extends _k{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Lc.get(this.auth._key());if(!e){try{const r=await Z4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Lc.set(this.auth._key(),e)}return this.bypassAuthState||Lc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Z4(t,e){const n=vk(e),r=yk(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function Ww(t,e){return yk(t)._set(vk(e),"true")}function ej(){Lc.clear()}function Hw(t,e){Lc.set(t._key(),e)}function yk(t){return sr(t._redirectPersistence)}function vk(t){return zo(J4,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tj(t,e,n){return nj(t,e,n)}async function nj(t,e,n){if(yt(t.app))return Promise.reject(Jt(t));const r=vt(t);hu(t,e,Yi),await r._initializationPromise;const i=Ta(r,n);return await Ww(i,r),i._openRedirect(r,e,"signInViaRedirect")}function rj(t,e,n){return ij(t,e,n)}async function ij(t,e,n){const r=ie(t);if(hu(r.auth,e,Yi),yt(r.auth.app))return Promise.reject(Jt(r.auth));await r.auth._initializationPromise;const i=Ta(r.auth,n);await Ww(i,r.auth);const s=await wk(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function sj(t,e,n){return oj(t,e,n)}async function oj(t,e,n){const r=ie(t);hu(r.auth,e,Yi),await r.auth._initializationPromise;const i=Ta(r.auth,n);await hm(!1,r,e.providerId),await Ww(i,r.auth);const s=await wk(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function aj(t,e){return await vt(t)._initializationPromise,ym(t,e,!1)}async function ym(t,e,n=!1){if(yt(t.app))return Promise.reject(Jt(t));const r=vt(t),i=Ta(r,e),o=await new X4(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function wk(t){const e=Qh(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj=10*60*1e3;class Ek{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Ik(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(jt(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lj&&this.cachedEventUids.clear(),this.cachedEventUids.has(oS(e))}saveEventToCache(e){this.cachedEventUids.add(oS(e)),this.lastProcessedEventTime=Date.now()}}function oS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Ik({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function uj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ik(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tk(t,e={}){return It(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hj=/^https?/;async function dj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Tk(t);for(const n of e)try{if(fj(n))return}catch{}Zt(t,"unauthorized-domain")}function fj(t){const e=yh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!hj.test(n))return!1;if(cj.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pj=new Wh(3e4,6e4);function aS(){const t=xt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function mj(t){return new Promise((e,n)=>{var r,i,s;function o(){aS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{aS(),n(jt(t,"network-request-failed"))},timeout:pj.get()})}if(!((i=(r=xt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=xt().gapi)===null||s===void 0)&&s.load)o();else{const a=Qb("iframefcb");return xt()[a]=()=>{gapi.load?o():n(jt(t,"network-request-failed"))},Lw(`${sB()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Tf=null,e})}let Tf=null;function gj(t){return Tf=Tf||mj(t),Tf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j=new Wh(5e3,15e3),yj="__/auth/iframe",vj="emulator/auth/iframe",wj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ej=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ij(t){const e=t.config;Q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Dw(e,vj):`https://${t.config.authDomain}/${yj}`,r={apiKey:e.apiKey,appName:t.name,v:vi},i=Ej.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ia(r).slice(1)}`}async function Tj(t){const e=await gj(t),n=xt().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:Ij(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wj,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=jt(t,"network-request-failed"),a=xt().setTimeout(()=>{s(o)},_j.get());function l(){xt().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Rj=500,Aj=600,Cj="_blank",Pj="http://localhost";class lS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bj(t,e,n,r=Rj,i=Aj){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Sj),{width:r.toString(),height:i.toString(),top:s,left:o}),c=ot().toLowerCase();n&&(a=qb(c)?Cj:n),zb(c)&&(e=e||Pj,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[_,y])=>`${p}${_}=${y},`,"");if(KU(c)&&a!=="_self")return kj(e||"",a),new lS(null);const d=window.open(e||"",a,h);Q(d,t,"popup-blocked");try{d.focus()}catch{}return new lS(d)}function kj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj="__/auth/handler",xj="emulator/auth/handler",Dj=encodeURIComponent("fac");async function _y(t,e,n,r,i,s){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:vi,eventId:i};if(e instanceof Yi){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",hy(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries(s||{}))o[h]=d}if(e instanceof pu){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${Dj}=${encodeURIComponent(l)}`:"";return`${Oj(t)}?${Ia(a).slice(1)}${c}`}function Oj({config:t}){return t.emulator?Dw(t,xj):`https://${t.authDomain}/${Nj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg="webStorageSupport";class Lj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ws,this._completeRedirectFn=ym,this._overrideRedirectResult=Hw}async _openPopup(e,n,r,i){var s;Kr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await _y(e,n,r,yh(),i);return bj(e,o,Qh())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await _y(e,n,r,yh(),i);return _4(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Kr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Tj(e),r=new Ek(e);return n.register("authEvent",i=>(Q(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Gg,{type:Gg},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Gg];o!==void 0&&n(!!o),Zt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=dj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Gb()||Ow()||du()}}const Sk=Lj;class Mj{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return oi("unexpected MultiFactorSessionType")}}}class Gw extends Mj{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Gw(e)}_finalizeEnroll(e,n,r){return u4(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return C4(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Rk{constructor(){}static assertion(e){return Gw._fromCredential(e)}}Rk.FACTOR_ID="phone";var uS="@firebase/auth",cS="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Uj(t){mi(new ur("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Q(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Kb(t)},c=new tB(r,i,s,l);return cB(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),mi(new ur("auth-internal",e=>{const n=vt(e.getProvider("auth").getImmediate());return(r=>new Vj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Dn(uS,cS,Fj(t)),Dn(uS,cS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj=5*60,jj=fb("authIdTokenMaxAge")||Bj;let hS=null;const zj=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>jj)return;const i=n==null?void 0:n.token;hS!==i&&(hS=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function qj(t=Cw()){const e=$h(t,"auth");if(e.isInitialized())return e.getImmediate();const n=uB(t,{popupRedirectResolver:Sk,persistence:[$l,pm,Ws]}),r=fb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=zj(s.toString());o4(n,o,()=>o(n.currentUser)),s4(n,a=>o(a))}}const i=hb("auth");return i&&Yb(n,`http://${i}`),n}function $j(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}nB({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=jt("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",$j().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Uj("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj=2e3;async function Hj(t,e,n){var r;const{BuildInfo:i}=na();Kr(e.sessionId,"AuthEvent did not contain a session ID");const s=await Jj(e.sessionId),o={};return du()?o.ibi=i.packageName:Hh()?o.apn=i.packageName:Zt(t,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,_y(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function Gj(t){const{BuildInfo:e}=na(),n={};du()?n.iosBundleId=e.packageName:Hh()?n.androidPackageName=e.packageName:Zt(t,"operation-not-supported-in-this-environment"),await Tk(t,n)}function Kj(t){const{cordova:e}=na();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,GU()?"_blank":"_system","location=yes"),n(i)})})}async function Qj(t,e,n){const{cordova:r}=na();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var d;s();const p=(d=r.plugins.browsertab)===null||d===void 0?void 0:d.close;typeof p=="function"&&p(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function c(){a||(a=window.setTimeout(()=>{o(jt(t,"redirect-cancelled-by-user"))},Wj))}function h(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(l),document.addEventListener("resume",c,!1),Hh()&&document.addEventListener("visibilitychange",h,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",h,!1),a&&window.clearTimeout(a)}})}finally{i()}}function Yj(t){var e,n,r,i,s,o,a,l,c,h;const d=na();Q(typeof((e=d==null?void 0:d.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Q(typeof((n=d==null?void 0:d.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Q(typeof((s=(i=(r=d==null?void 0:d.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Q(typeof((l=(a=(o=d==null?void 0:d.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Q(typeof((h=(c=d==null?void 0:d.cordova)===null||c===void 0?void 0:c.InAppBrowser)===null||h===void 0?void 0:h.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function Jj(t){const e=Xj(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function Xj(t){if(Kr(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj=20;class ez extends Ek{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function tz(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:iz(),postBody:null,tenantId:t.tenantId,error:jt(t,"no-auth-event")}}function nz(t,e){return yy()._set(vy(t),e)}async function dS(t){const e=await yy()._get(vy(t));return e&&await yy()._remove(vy(t)),e}function rz(t,e){var n,r;const i=oz(e);if(i.includes("/__/auth/callback")){const s=Sf(i),o=s.firebaseError?sz(decodeURIComponent(s.firebaseError)):null,a=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],l=a?jt(a):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function iz(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Zj;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function yy(){return sr(pm)}function vy(t){return zo("authEvent",t.config.apiKey,t.name)}function sz(t){try{return JSON.parse(t)}catch{return null}}function oz(t){const e=Sf(t),n=e.link?decodeURIComponent(e.link):void 0,r=Sf(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Sf(i).link||i||r||n||t}function Sf(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return dl(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const az=500;class lz{constructor(){this._redirectPersistence=Ws,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ym,this._overrideRedirectResult=Hw}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new ez(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Zt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){Yj(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),ej(),await this._originValidation(e);const o=tz(e,r,i);await nz(e,o);const a=await Hj(e,o,n),l=await Kj(a);return Qj(e,s,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Gj(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=na(),o=setTimeout(async()=>{await dS(e),n.onEvent(fS())},az),a=async h=>{clearTimeout(o);const d=await dS(e);let p=null;d&&(h!=null&&h.url)&&(p=rz(d,h.url)),n.onEvent(p||fS())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,c=`${s.packageName.toLowerCase()}://`;na().handleOpenURL=async h=>{if(h.toLowerCase().startsWith(c)&&a({url:h}),typeof l=="function")try{l(h)}catch(d){console.error(d)}}}}const uz=lz;function fS(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:jt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cz(t,e){vt(t)._logFramework(e)}var hz="@firebase/auth-compat",dz="0.5.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fz=1e3;function Mc(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function pz(){return Mc()==="http:"||Mc()==="https:"}function Ak(t=ot()){return!!((Mc()==="file:"||Mc()==="ionic:"||Mc()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function mz(){return om()||Tw()}function gz(){return _b()&&(document==null?void 0:document.documentMode)===11}function _z(t=ot()){return/Edge\/\d+/.test(t)}function yz(t=ot()){return gz()||_z(t)}function Ck(){try{const t=self.localStorage,e=Qh();if(t)return t.setItem(e,"1"),t.removeItem(e),yz()?ph():!0}catch{return Kw()&&ph()}return!1}function Kw(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Kg(){return(pz()||gb()||Ak())&&!mz()&&Ck()&&!Kw()}function Pk(){return Ak()&&typeof document<"u"}async function vz(){return Pk()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},fz);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function wz(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr={LOCAL:"local",NONE:"none",SESSION:"session"},ec=Q,bk="persistence";function Ez(t,e){if(ec(Object.values(rr).includes(e),t,"invalid-persistence-type"),om()){ec(e!==rr.SESSION,t,"unsupported-persistence-type");return}if(Tw()){ec(e===rr.NONE,t,"unsupported-persistence-type");return}if(Kw()){ec(e===rr.NONE||e===rr.LOCAL&&ph(),t,"unsupported-persistence-type");return}ec(e===rr.NONE||Ck(),t,"unsupported-persistence-type")}async function wy(t){await t._initializationPromise;const e=kk(),n=zo(bk,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function Iz(t,e){const n=kk();if(!n)return[];const r=zo(bk,t,e);switch(n.getItem(r)){case rr.NONE:return[zl];case rr.LOCAL:return[$l,Ws];case rr.SESSION:return[Ws];default:return[]}}function kk(){var t;try{return((t=wz())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tz=Q;class Cs{constructor(){this.browserResolver=sr(Sk),this.cordovaResolver=sr(uz),this.underlyingResolver=null,this._redirectPersistence=Ws,this._completeRedirectFn=ym,this._overrideRedirectResult=Hw}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Pk()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Tz(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await vz();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(t){return t.unwrap()}function Sz(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rz(t){return xk(t)}function Az(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new Cz(t,a4(t,e))}else if(r){const i=xk(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function xk(t){const{_tokenResponse:e}=t instanceof Sn?t.customData:t;if(!e)return null;if(!(t instanceof Sn)&&"temporaryProof"in e&&"phoneNumber"in e)return ta.credentialFromResult(t);const n=e.providerId;if(!n||n===Zu.PASSWORD)return null;let r;switch(n){case Zu.GOOGLE:r=ni;break;case Zu.FACEBOOK:r=ti;break;case Zu.GITHUB:r=ri;break;case Zu.TWITTER:r=ii;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!i&&!a?null:a?n.startsWith("saml.")?ql._create(n,a):gi._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:i,accessToken:s}):new Tl(n).credential({idToken:i,accessToken:s,rawNonce:l})}return t instanceof Sn?r.credentialFromError(t):r.credentialFromResult(t)}function jn(t,e){return e.catch(n=>{throw n instanceof Sn&&Az(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:Rz(n),additionalUserInfo:i4(n),user:vm.getOrCreate(i)}})}async function Ey(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>jn(t,n.confirm(r))}}class Cz{constructor(e,n){this.resolver=n,this.auth=Sz(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return jn(Nk(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vm=class vc{constructor(e){this._delegate=e,this.multiFactor=h4(e)}static getOrCreate(e){return vc.USER_MAP.has(e)||vc.USER_MAP.set(e,new vc(e)),vc.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return jn(this.auth,ik(this._delegate,e))}async linkWithPhoneNumber(e,n){return Ey(this.auth,j4(this._delegate,e,n))}async linkWithPopup(e){return jn(this.auth,Y4(this._delegate,e,Cs))}async linkWithRedirect(e){return await wy(vt(this.auth)),sj(this._delegate,e,Cs)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return jn(this.auth,sk(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return Ey(this.auth,z4(this._delegate,e,n))}reauthenticateWithPopup(e){return jn(this.auth,Q4(this._delegate,e,Cs))}async reauthenticateWithRedirect(e){return await wy(vt(this.auth)),rj(this._delegate,e,Cs)}sendEmailVerification(e){return KB(this._delegate,e)}async unlink(e){return await OB(this._delegate,e),this}updateEmail(e){return JB(this._delegate,e)}updatePassword(e){return XB(this._delegate,e)}updatePhoneNumber(e){return q4(this._delegate,e)}updateProfile(e){return ak(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return QB(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};vm.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc=Q;class Iy{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;tc(r,"invalid-api-key",{appName:e.name}),tc(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Cs:void 0;this._delegate=n.initialize({options:{persistence:Pz(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(AU),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?vm.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){Yb(this._delegate,e,n)}applyActionCode(e){return UB(this._delegate,e)}checkActionCode(e){return ok(this._delegate,e)}confirmPasswordReset(e,n){return FB(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return jn(this._delegate,jB(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return GB(this._delegate,e)}isSignInWithEmailLink(e){return $B(this._delegate,e)}async getRedirectResult(){tc(Kg(),this._delegate,"operation-not-supported-in-this-environment");const e=await aj(this._delegate,Cs);return e?jn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){cz(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:o}=pS(e,n,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:o}=pS(e,n,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,n){return qB(this._delegate,e,n)}sendPasswordResetEmail(e,n){return VB(this._delegate,e,n||void 0)}async setPersistence(e){Ez(this._delegate,e);let n;switch(e){case rr.SESSION:n=Ws;break;case rr.LOCAL:n=await sr($l)._isAvailable()?$l:pm;break;case rr.NONE:n=zl;break;default:return Zt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return jn(this._delegate,DB(this._delegate))}signInWithCredential(e){return jn(this._delegate,dm(this._delegate,e))}signInWithCustomToken(e){return jn(this._delegate,MB(this._delegate,e))}signInWithEmailAndPassword(e,n){return jn(this._delegate,zB(this._delegate,e,n))}signInWithEmailLink(e,n){return jn(this._delegate,WB(this._delegate,e,n))}signInWithPhoneNumber(e,n){return Ey(this._delegate,B4(this._delegate,e,n))}async signInWithPopup(e){return tc(Kg(),this._delegate,"operation-not-supported-in-this-environment"),jn(this._delegate,K4(this._delegate,e,Cs))}async signInWithRedirect(e){return tc(Kg(),this._delegate,"operation-not-supported-in-this-environment"),await wy(this._delegate),tj(this._delegate,e,Cs)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return BB(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Iy.Persistence=rr;function pS(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:o=>i(o&&vm.getOrCreate(o)),error:e,complete:n}}function Pz(t,e){const n=Iz(t,e);if(typeof self<"u"&&!n.includes($l)&&n.push($l),typeof window<"u")for(const r of[pm,Ws])n.includes(r)||n.push(r);return n.includes(zl)||n.push(zl),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(){this.providerId="phone",this._delegate=new ta(Nk(Ue.auth()))}static credential(e,n){return ta.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Qw.PHONE_SIGN_IN_METHOD=ta.PHONE_SIGN_IN_METHOD;Qw.PROVIDER_ID=ta.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bz=Q;class kz{constructor(e,n,r=Ue.app()){var i;bz((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new F4(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nz="auth-compat";function xz(t){t.INTERNAL.registerComponent(new ur(Nz,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new Iy(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ja.EMAIL_SIGNIN,PASSWORD_RESET:ja.PASSWORD_RESET,RECOVER_EMAIL:ja.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ja.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ja.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ja.VERIFY_EMAIL}},EmailAuthProvider:oo,FacebookAuthProvider:ti,GithubAuthProvider:ri,GoogleAuthProvider:ni,OAuthProvider:Tl,SAMLAuthProvider:fp,PhoneAuthProvider:Qw,PhoneMultiFactorGenerator:Rk,RecaptchaVerifier:kz,TwitterAuthProvider:ii,Auth:Iy,AuthCredential:fu,Error:Sn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(hz,dz)}xz(Ue);var mS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $o,Dk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(g,v){function R(){}R.prototype=v.prototype,g.D=v.prototype,g.prototype=new R,g.prototype.constructor=g,g.C=function(A,b,N){for(var C=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)C[Me-2]=arguments[Me];return v.prototype[b].apply(A,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(g,v,R){R||(R=0);var A=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)A[b]=v.charCodeAt(R++)|v.charCodeAt(R++)<<8|v.charCodeAt(R++)<<16|v.charCodeAt(R++)<<24;else for(b=0;16>b;++b)A[b]=v[R++]|v[R++]<<8|v[R++]<<16|v[R++]<<24;v=g.g[0],R=g.g[1],b=g.g[2];var N=g.g[3],C=v+(N^R&(b^N))+A[0]+3614090360&4294967295;v=R+(C<<7&4294967295|C>>>25),C=N+(b^v&(R^b))+A[1]+3905402710&4294967295,N=v+(C<<12&4294967295|C>>>20),C=b+(R^N&(v^R))+A[2]+606105819&4294967295,b=N+(C<<17&4294967295|C>>>15),C=R+(v^b&(N^v))+A[3]+3250441966&4294967295,R=b+(C<<22&4294967295|C>>>10),C=v+(N^R&(b^N))+A[4]+4118548399&4294967295,v=R+(C<<7&4294967295|C>>>25),C=N+(b^v&(R^b))+A[5]+1200080426&4294967295,N=v+(C<<12&4294967295|C>>>20),C=b+(R^N&(v^R))+A[6]+2821735955&4294967295,b=N+(C<<17&4294967295|C>>>15),C=R+(v^b&(N^v))+A[7]+4249261313&4294967295,R=b+(C<<22&4294967295|C>>>10),C=v+(N^R&(b^N))+A[8]+1770035416&4294967295,v=R+(C<<7&4294967295|C>>>25),C=N+(b^v&(R^b))+A[9]+2336552879&4294967295,N=v+(C<<12&4294967295|C>>>20),C=b+(R^N&(v^R))+A[10]+4294925233&4294967295,b=N+(C<<17&4294967295|C>>>15),C=R+(v^b&(N^v))+A[11]+2304563134&4294967295,R=b+(C<<22&4294967295|C>>>10),C=v+(N^R&(b^N))+A[12]+1804603682&4294967295,v=R+(C<<7&4294967295|C>>>25),C=N+(b^v&(R^b))+A[13]+4254626195&4294967295,N=v+(C<<12&4294967295|C>>>20),C=b+(R^N&(v^R))+A[14]+2792965006&4294967295,b=N+(C<<17&4294967295|C>>>15),C=R+(v^b&(N^v))+A[15]+1236535329&4294967295,R=b+(C<<22&4294967295|C>>>10),C=v+(b^N&(R^b))+A[1]+4129170786&4294967295,v=R+(C<<5&4294967295|C>>>27),C=N+(R^b&(v^R))+A[6]+3225465664&4294967295,N=v+(C<<9&4294967295|C>>>23),C=b+(v^R&(N^v))+A[11]+643717713&4294967295,b=N+(C<<14&4294967295|C>>>18),C=R+(N^v&(b^N))+A[0]+3921069994&4294967295,R=b+(C<<20&4294967295|C>>>12),C=v+(b^N&(R^b))+A[5]+3593408605&4294967295,v=R+(C<<5&4294967295|C>>>27),C=N+(R^b&(v^R))+A[10]+38016083&4294967295,N=v+(C<<9&4294967295|C>>>23),C=b+(v^R&(N^v))+A[15]+3634488961&4294967295,b=N+(C<<14&4294967295|C>>>18),C=R+(N^v&(b^N))+A[4]+3889429448&4294967295,R=b+(C<<20&4294967295|C>>>12),C=v+(b^N&(R^b))+A[9]+568446438&4294967295,v=R+(C<<5&4294967295|C>>>27),C=N+(R^b&(v^R))+A[14]+3275163606&4294967295,N=v+(C<<9&4294967295|C>>>23),C=b+(v^R&(N^v))+A[3]+4107603335&4294967295,b=N+(C<<14&4294967295|C>>>18),C=R+(N^v&(b^N))+A[8]+1163531501&4294967295,R=b+(C<<20&4294967295|C>>>12),C=v+(b^N&(R^b))+A[13]+2850285829&4294967295,v=R+(C<<5&4294967295|C>>>27),C=N+(R^b&(v^R))+A[2]+4243563512&4294967295,N=v+(C<<9&4294967295|C>>>23),C=b+(v^R&(N^v))+A[7]+1735328473&4294967295,b=N+(C<<14&4294967295|C>>>18),C=R+(N^v&(b^N))+A[12]+2368359562&4294967295,R=b+(C<<20&4294967295|C>>>12),C=v+(R^b^N)+A[5]+4294588738&4294967295,v=R+(C<<4&4294967295|C>>>28),C=N+(v^R^b)+A[8]+2272392833&4294967295,N=v+(C<<11&4294967295|C>>>21),C=b+(N^v^R)+A[11]+1839030562&4294967295,b=N+(C<<16&4294967295|C>>>16),C=R+(b^N^v)+A[14]+4259657740&4294967295,R=b+(C<<23&4294967295|C>>>9),C=v+(R^b^N)+A[1]+2763975236&4294967295,v=R+(C<<4&4294967295|C>>>28),C=N+(v^R^b)+A[4]+1272893353&4294967295,N=v+(C<<11&4294967295|C>>>21),C=b+(N^v^R)+A[7]+4139469664&4294967295,b=N+(C<<16&4294967295|C>>>16),C=R+(b^N^v)+A[10]+3200236656&4294967295,R=b+(C<<23&4294967295|C>>>9),C=v+(R^b^N)+A[13]+681279174&4294967295,v=R+(C<<4&4294967295|C>>>28),C=N+(v^R^b)+A[0]+3936430074&4294967295,N=v+(C<<11&4294967295|C>>>21),C=b+(N^v^R)+A[3]+3572445317&4294967295,b=N+(C<<16&4294967295|C>>>16),C=R+(b^N^v)+A[6]+76029189&4294967295,R=b+(C<<23&4294967295|C>>>9),C=v+(R^b^N)+A[9]+3654602809&4294967295,v=R+(C<<4&4294967295|C>>>28),C=N+(v^R^b)+A[12]+3873151461&4294967295,N=v+(C<<11&4294967295|C>>>21),C=b+(N^v^R)+A[15]+530742520&4294967295,b=N+(C<<16&4294967295|C>>>16),C=R+(b^N^v)+A[2]+3299628645&4294967295,R=b+(C<<23&4294967295|C>>>9),C=v+(b^(R|~N))+A[0]+4096336452&4294967295,v=R+(C<<6&4294967295|C>>>26),C=N+(R^(v|~b))+A[7]+1126891415&4294967295,N=v+(C<<10&4294967295|C>>>22),C=b+(v^(N|~R))+A[14]+2878612391&4294967295,b=N+(C<<15&4294967295|C>>>17),C=R+(N^(b|~v))+A[5]+4237533241&4294967295,R=b+(C<<21&4294967295|C>>>11),C=v+(b^(R|~N))+A[12]+1700485571&4294967295,v=R+(C<<6&4294967295|C>>>26),C=N+(R^(v|~b))+A[3]+2399980690&4294967295,N=v+(C<<10&4294967295|C>>>22),C=b+(v^(N|~R))+A[10]+4293915773&4294967295,b=N+(C<<15&4294967295|C>>>17),C=R+(N^(b|~v))+A[1]+2240044497&4294967295,R=b+(C<<21&4294967295|C>>>11),C=v+(b^(R|~N))+A[8]+1873313359&4294967295,v=R+(C<<6&4294967295|C>>>26),C=N+(R^(v|~b))+A[15]+4264355552&4294967295,N=v+(C<<10&4294967295|C>>>22),C=b+(v^(N|~R))+A[6]+2734768916&4294967295,b=N+(C<<15&4294967295|C>>>17),C=R+(N^(b|~v))+A[13]+1309151649&4294967295,R=b+(C<<21&4294967295|C>>>11),C=v+(b^(R|~N))+A[4]+4149444226&4294967295,v=R+(C<<6&4294967295|C>>>26),C=N+(R^(v|~b))+A[11]+3174756917&4294967295,N=v+(C<<10&4294967295|C>>>22),C=b+(v^(N|~R))+A[2]+718787259&4294967295,b=N+(C<<15&4294967295|C>>>17),C=R+(N^(b|~v))+A[9]+3951481745&4294967295,g.g[0]=g.g[0]+v&4294967295,g.g[1]=g.g[1]+(b+(C<<21&4294967295|C>>>11))&4294967295,g.g[2]=g.g[2]+b&4294967295,g.g[3]=g.g[3]+N&4294967295}r.prototype.u=function(g,v){v===void 0&&(v=g.length);for(var R=v-this.blockSize,A=this.B,b=this.h,N=0;N<v;){if(b==0)for(;N<=R;)i(this,g,N),N+=this.blockSize;if(typeof g=="string"){for(;N<v;)if(A[b++]=g.charCodeAt(N++),b==this.blockSize){i(this,A),b=0;break}}else for(;N<v;)if(A[b++]=g[N++],b==this.blockSize){i(this,A),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var g=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);g[0]=128;for(var v=1;v<g.length-8;++v)g[v]=0;var R=8*this.o;for(v=g.length-8;v<g.length;++v)g[v]=R&255,R/=256;for(this.u(g),g=Array(16),v=R=0;4>v;++v)for(var A=0;32>A;A+=8)g[R++]=this.g[v]>>>A&255;return g};function s(g,v){var R=a;return Object.prototype.hasOwnProperty.call(R,g)?R[g]:R[g]=v(g)}function o(g,v){this.h=v;for(var R=[],A=!0,b=g.length-1;0<=b;b--){var N=g[b]|0;A&&N==v||(R[b]=N,A=!1)}this.g=R}var a={};function l(g){return-128<=g&&128>g?s(g,function(v){return new o([v|0],0>v?-1:0)}):new o([g|0],0>g?-1:0)}function c(g){if(isNaN(g)||!isFinite(g))return d;if(0>g)return P(c(-g));for(var v=[],R=1,A=0;g>=R;A++)v[A]=g/R|0,R*=4294967296;return new o(v,0)}function h(g,v){if(g.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(g.charAt(0)=="-")return P(h(g.substring(1),v));if(0<=g.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=c(Math.pow(v,8)),A=d,b=0;b<g.length;b+=8){var N=Math.min(8,g.length-b),C=parseInt(g.substring(b,b+N),v);8>N?(N=c(Math.pow(v,N)),A=A.j(N).add(c(C))):(A=A.j(R),A=A.add(c(C)))}return A}var d=l(0),p=l(1),_=l(16777216);t=o.prototype,t.m=function(){if(E(this))return-P(this).m();for(var g=0,v=1,R=0;R<this.g.length;R++){var A=this.i(R);g+=(0<=A?A:4294967296+A)*v,v*=4294967296}return g},t.toString=function(g){if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(y(this))return"0";if(E(this))return"-"+P(this).toString(g);for(var v=c(Math.pow(g,6)),R=this,A="";;){var b=k(R,v).g;R=S(R,b.j(v));var N=((0<R.g.length?R.g[0]:R.h)>>>0).toString(g);if(R=b,y(R))return N+A;for(;6>N.length;)N="0"+N;A=N+A}},t.i=function(g){return 0>g?0:g<this.g.length?this.g[g]:this.h};function y(g){if(g.h!=0)return!1;for(var v=0;v<g.g.length;v++)if(g.g[v]!=0)return!1;return!0}function E(g){return g.h==-1}t.l=function(g){return g=S(this,g),E(g)?-1:y(g)?0:1};function P(g){for(var v=g.g.length,R=[],A=0;A<v;A++)R[A]=~g.g[A];return new o(R,~g.h).add(p)}t.abs=function(){return E(this)?P(this):this},t.add=function(g){for(var v=Math.max(this.g.length,g.g.length),R=[],A=0,b=0;b<=v;b++){var N=A+(this.i(b)&65535)+(g.i(b)&65535),C=(N>>>16)+(this.i(b)>>>16)+(g.i(b)>>>16);A=C>>>16,N&=65535,C&=65535,R[b]=C<<16|N}return new o(R,R[R.length-1]&-2147483648?-1:0)};function S(g,v){return g.add(P(v))}t.j=function(g){if(y(this)||y(g))return d;if(E(this))return E(g)?P(this).j(P(g)):P(P(this).j(g));if(E(g))return P(this.j(P(g)));if(0>this.l(_)&&0>g.l(_))return c(this.m()*g.m());for(var v=this.g.length+g.g.length,R=[],A=0;A<2*v;A++)R[A]=0;for(A=0;A<this.g.length;A++)for(var b=0;b<g.g.length;b++){var N=this.i(A)>>>16,C=this.i(A)&65535,Me=g.i(b)>>>16,Ot=g.i(b)&65535;R[2*A+2*b]+=C*Ot,I(R,2*A+2*b),R[2*A+2*b+1]+=N*Ot,I(R,2*A+2*b+1),R[2*A+2*b+1]+=C*Me,I(R,2*A+2*b+1),R[2*A+2*b+2]+=N*Me,I(R,2*A+2*b+2)}for(A=0;A<v;A++)R[A]=R[2*A+1]<<16|R[2*A];for(A=v;A<2*v;A++)R[A]=0;return new o(R,0)};function I(g,v){for(;(g[v]&65535)!=g[v];)g[v+1]+=g[v]>>>16,g[v]&=65535,v++}function T(g,v){this.g=g,this.h=v}function k(g,v){if(y(v))throw Error("division by zero");if(y(g))return new T(d,d);if(E(g))return v=k(P(g),v),new T(P(v.g),P(v.h));if(E(v))return v=k(g,P(v)),new T(P(v.g),v.h);if(30<g.g.length){if(E(g)||E(v))throw Error("slowDivide_ only works with positive integers.");for(var R=p,A=v;0>=A.l(g);)R=F(R),A=F(A);var b=j(R,1),N=j(A,1);for(A=j(A,2),R=j(R,2);!y(A);){var C=N.add(A);0>=C.l(g)&&(b=b.add(R),N=C),A=j(A,1),R=j(R,1)}return v=S(g,b.j(v)),new T(b,v)}for(b=d;0<=g.l(v);){for(R=Math.max(1,Math.floor(g.m()/v.m())),A=Math.ceil(Math.log(R)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),N=c(R),C=N.j(v);E(C)||0<C.l(g);)R-=A,N=c(R),C=N.j(v);y(N)&&(N=p),b=b.add(N),g=S(g,C)}return new T(b,g)}t.A=function(g){return k(this,g).h},t.and=function(g){for(var v=Math.max(this.g.length,g.g.length),R=[],A=0;A<v;A++)R[A]=this.i(A)&g.i(A);return new o(R,this.h&g.h)},t.or=function(g){for(var v=Math.max(this.g.length,g.g.length),R=[],A=0;A<v;A++)R[A]=this.i(A)|g.i(A);return new o(R,this.h|g.h)},t.xor=function(g){for(var v=Math.max(this.g.length,g.g.length),R=[],A=0;A<v;A++)R[A]=this.i(A)^g.i(A);return new o(R,this.h^g.h)};function F(g){for(var v=g.g.length+1,R=[],A=0;A<v;A++)R[A]=g.i(A)<<1|g.i(A-1)>>>31;return new o(R,g.h)}function j(g,v){var R=v>>5;v%=32;for(var A=g.g.length-R,b=[],N=0;N<A;N++)b[N]=0<v?g.i(N+R)>>>v|g.i(N+R+1)<<32-v:g.i(N+R);return new o(b,g.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Dk=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,$o=o}).apply(typeof mS<"u"?mS:typeof self<"u"?self:typeof window<"u"?window:{});var Yd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ok,Lk,wc,Mk,Rf,Ty,Vk,Fk,Uk;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yd=="object"&&Yd];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(u,f){if(f)e:{var m=r;u=u.split(".");for(var w=0;w<u.length-1;w++){var D=u[w];if(!(D in m))break e;m=m[D]}u=u[u.length-1],w=m[u],f=f(w),f!=w&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var m=0,w=!1,D={next:function(){if(!w&&m<u.length){var V=m++;return{value:f(V,u[V]),done:!1}}return w=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,m){return u.call.apply(u.bind,arguments)}function d(u,f,m){if(!u)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,w),u.apply(f,D)}}return function(){return u.apply(f,arguments)}}function p(u,f,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function _(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var w=m.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function y(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(w,D,V){for(var Y=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)Y[ze-2]=arguments[ze];return f.prototype[D].apply(w,Y)}}function E(u){const f=u.length;if(0<f){const m=Array(f);for(let w=0;w<f;w++)m[w]=u[w];return m}return[]}function P(u,f){for(let m=1;m<arguments.length;m++){const w=arguments[m];if(l(w)){const D=u.length||0,V=w.length||0;u.length=D+V;for(let Y=0;Y<V;Y++)u[D+Y]=w[Y]}else u.push(w)}}class S{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function I(u){return/^[\s\xa0]*$/.test(u)}function T(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function k(u){return k[" "](u),u}k[" "]=function(){};var F=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function j(u,f,m){for(const w in u)f.call(m,u[w],w,u)}function g(u,f){for(const m in u)f.call(void 0,u[m],m,u)}function v(u){const f={};for(const m in u)f[m]=u[m];return f}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(u,f){let m,w;for(let D=1;D<arguments.length;D++){w=arguments[D];for(m in w)u[m]=w[m];for(let V=0;V<R.length;V++)m=R[V],Object.prototype.hasOwnProperty.call(w,m)&&(u[m]=w[m])}}function b(u){var f=1;u=u.split(":");const m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function N(u){a.setTimeout(()=>{throw u},0)}function C(){var u=ue;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class Me{constructor(){this.h=this.g=null}add(f,m){const w=Ot.get();w.set(f,m),this.h?this.h.next=w:this.g=w,this.h=w}}var Ot=new S(()=>new fr,u=>u.reset());class fr{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let fn,H=!1,ue=new Me,he=()=>{const u=a.Promise.resolve(void 0);fn=()=>{u.then(xe)}};var xe=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(m){N(m)}var f=Ot;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}H=!1};function ye(){this.s=this.s,this.C=this.C}ye.prototype.s=!1,ye.prototype.ma=function(){this.s||(this.s=!0,this.N())},ye.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Oe(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}Oe.prototype.h=function(){this.defaultPrevented=!0};var nn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return u}();function Tt(u,f){if(Oe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(F){e:{try{k(f.nodeName);var D=!0;break e}catch{}D=!1}D||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Lt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Tt.aa.h.call(this)}}y(Tt,Oe);var Lt={2:"touch",3:"pen",4:"mouse"};Tt.prototype.h=function(){Tt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Mt="closure_listenable_"+(1e6*Math.random()|0),fo=0;function bu(u,f,m,w,D){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!w,this.ha=D,this.key=++fo,this.da=this.fa=!1}function ts(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ns(u){this.src=u,this.g={},this.h=0}ns.prototype.add=function(u,f,m,w,D){var V=u.toString();u=this.g[V],u||(u=this.g[V]=[],this.h++);var Y=Nr(u,f,w,D);return-1<Y?(f=u[Y],m||(f.fa=!1)):(f=new bu(f,this.src,V,!!w,D),f.fa=m,u.push(f)),f};function Vt(u,f){var m=f.type;if(m in u.g){var w=u.g[m],D=Array.prototype.indexOf.call(w,f,void 0),V;(V=0<=D)&&Array.prototype.splice.call(w,D,1),V&&(ts(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function Nr(u,f,m,w){for(var D=0;D<u.length;++D){var V=u[D];if(!V.da&&V.listener==f&&V.capture==!!m&&V.ha==w)return D}return-1}var rs="closure_lm_"+(1e6*Math.random()|0),po={};function pr(u,f,m,w,D){if(Array.isArray(f)){for(var V=0;V<f.length;V++)pr(u,f[V],m,w,D);return null}return m=Na(m),u&&u[Mt]?u.K(f,m,c(w)?!!w.capture:!!w,D):yd(u,f,m,!1,w,D)}function yd(u,f,m,w,D,V){if(!f)throw Error("Invalid event type");var Y=c(D)?!!D.capture:!!D,ze=Bn(u);if(ze||(u[rs]=ze=new ns(u)),m=ze.add(f,m,w,Y,V),m.proxy)return m;if(w=ce(),m.proxy=w,w.src=u,w.listener=m,u.addEventListener)nn||(D=Y),D===void 0&&(D=!1),u.addEventListener(f.toString(),w,D);else if(u.attachEvent)u.attachEvent(Un(f.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return m}function ce(){function u(m){return f.call(u.src,u.listener,m)}const f=Zn;return u}function we(u,f,m,w,D){if(Array.isArray(f))for(var V=0;V<f.length;V++)we(u,f[V],m,w,D);else w=c(w)?!!w.capture:!!w,m=Na(m),u&&u[Mt]?(u=u.i,f=String(f).toString(),f in u.g&&(V=u.g[f],m=Nr(V,m,w,D),-1<m&&(ts(V[m]),Array.prototype.splice.call(V,m,1),V.length==0&&(delete u.g[f],u.h--)))):u&&(u=Bn(u))&&(f=u.g[f.toString()],u=-1,f&&(u=Nr(f,m,w,D)),(m=-1<u?f[u]:null)&&qt(m))}function qt(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[Mt])Vt(f.i,u);else{var m=u.type,w=u.proxy;f.removeEventListener?f.removeEventListener(m,w,u.capture):f.detachEvent?f.detachEvent(Un(m),w):f.addListener&&f.removeListener&&f.removeListener(w),(m=Bn(f))?(Vt(m,u),m.h==0&&(m.src=null,f[rs]=null)):ts(u)}}}function Un(u){return u in po?po[u]:po[u]="on"+u}function Zn(u,f){if(u.da)u=!0;else{f=new Tt(f,this);var m=u.listener,w=u.ha||u.src;u.fa&&qt(u),u=m.call(w,f)}return u}function Bn(u){return u=u[rs],u instanceof ns?u:null}var wi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Na(u){return typeof u=="function"?u:(u[wi]||(u[wi]=function(f){return u.handleEvent(f)}),u[wi])}function We(){ye.call(this),this.i=new ns(this),this.M=this,this.F=null}y(We,ye),We.prototype[Mt]=!0,We.prototype.removeEventListener=function(u,f,m,w){we(this,u,f,m,w)};function St(u,f){var m,w=u.F;if(w)for(m=[];w;w=w.F)m.push(w);if(u=u.M,w=f.type||f,typeof f=="string")f=new Oe(f,u);else if(f instanceof Oe)f.target=f.target||u;else{var D=f;f=new Oe(w,u),A(f,D)}if(D=!0,m)for(var V=m.length-1;0<=V;V--){var Y=f.g=m[V];D=mo(Y,w,!0,f)&&D}if(Y=f.g=u,D=mo(Y,w,!0,f)&&D,D=mo(Y,w,!1,f)&&D,m)for(V=0;V<m.length;V++)Y=f.g=m[V],D=mo(Y,w,!1,f)&&D}We.prototype.N=function(){if(We.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],w=0;w<m.length;w++)ts(m[w]);delete u.g[f],u.h--}}this.F=null},We.prototype.K=function(u,f,m,w){return this.i.add(String(u),f,!1,m,w)},We.prototype.L=function(u,f,m,w){return this.i.add(String(u),f,!0,m,w)};function mo(u,f,m,w){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var D=!0,V=0;V<f.length;++V){var Y=f[V];if(Y&&!Y.da&&Y.capture==m){var ze=Y.listener,on=Y.ha||Y.src;Y.fa&&Vt(u.i,Y),D=ze.call(on,w)!==!1&&D}}return D&&!w.defaultPrevented}function go(u,f,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function vd(u){u.g=go(()=>{u.g=null,u.i&&(u.i=!1,vd(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class Jr extends ye{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:vd(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function is(u){ye.call(this),this.h=u,this.g={}}y(is,ye);var ku=[];function Nu(u){j(u.g,function(f,m){this.g.hasOwnProperty(m)&&qt(f)},u),u.g={}}is.prototype.N=function(){is.aa.N.call(this),Nu(this)},is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xu=a.JSON.stringify,wd=a.JSON.parse,xa=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Da(){}Da.prototype.h=null;function Oa(u){return u.h||(u.h=u.i())}function Ed(){}var ss={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Du(){Oe.call(this,"d")}y(Du,Oe);function La(){Oe.call(this,"c")}y(La,Oe);var Ei={},x=null;function L(){return x=x||new We}Ei.La="serverreachability";function z(u){Oe.call(this,Ei.La,u)}y(z,Oe);function K(u){const f=L();St(f,new z(f))}Ei.STAT_EVENT="statevent";function te(u,f){Oe.call(this,Ei.STAT_EVENT,u),this.stat=f}y(te,Oe);function oe(u){const f=L();St(f,new te(f,u))}Ei.Ma="timingevent";function le(u,f){Oe.call(this,Ei.Ma,u),this.size=f}y(le,Oe);function ee(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function fe(){this.g=!0}fe.prototype.xa=function(){this.g=!1};function pe(u,f,m,w,D,V){u.info(function(){if(u.g)if(V)for(var Y="",ze=V.split("&"),on=0;on<ze.length;on++){var De=ze[on].split("=");if(1<De.length){var pn=De[0];De=De[1];var mn=pn.split("_");Y=2<=mn.length&&mn[1]=="type"?Y+(pn+"="+De+"&"):Y+(pn+"=redacted&")}}else Y=null;else Y=V;return"XMLHTTP REQ ("+w+") [attempt "+D+"]: "+f+`
`+m+`
`+Y})}function Ft(u,f,m,w,D,V,Y){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+D+"]: "+f+`
`+m+`
`+V+" "+Y})}function et(u,f,m,w){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+qe(u,m)+(w?" "+w:"")})}function de(u,f){u.info(function(){return"TIMEOUT: "+f})}fe.prototype.info=function(){};function qe(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var w=m[u];if(!(2>w.length)){var D=w[1];if(Array.isArray(D)&&!(1>D.length)){var V=D[0];if(V!="noop"&&V!="stop"&&V!="close")for(var Y=1;Y<D.length;Y++)D[Y]=""}}}}return xu(m)}catch{return f}}var at={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},os={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},mr;function xr(){}y(xr,Da),xr.prototype.g=function(){return new XMLHttpRequest},xr.prototype.i=function(){return{}},mr=new xr;function An(u,f,m,w){this.j=u,this.i=f,this.l=m,this.R=w||1,this.U=new is(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ii}function Ii(){this.i=null,this.g="",this.h=!1}var er={},as={};function ls(u,f,m){u.L=1,u.v=Sd(Ri(f)),u.m=m,u.P=!0,_o(u,null)}function _o(u,f){u.F=Date.now(),sn(u),u.A=Ri(u.v);var m=u.A,w=u.R;Array.isArray(w)||(w=[String(w)]),BI(m.i,"t",w),u.C=0,m=u.j.J,u.h=new Ii,u.g=iT(u.j,m?f:null,!u.m),0<u.O&&(u.M=new Jr(p(u.Y,u,u.g),u.O)),f=u.U,m=u.g,w=u.ca;var D="readystatechange";Array.isArray(D)||(D&&(ku[0]=D.toString()),D=ku);for(var V=0;V<D.length;V++){var Y=pr(m,D[V],w||f.handleEvent,!1,f.h||f);if(!Y)break;f.g[Y.key]=Y}f=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),K(),pe(u.i,u.u,u.A,u.l,u.R,u.m)}An.prototype.ca=function(u){u=u.target;const f=this.M;f&&Ai(u)==3?f.j():this.Y(u)},An.prototype.Y=function(u){try{if(u==this.g)e:{const mn=Ai(this.g);var f=this.g.Ba();const Fa=this.g.Z();if(!(3>mn)&&(mn!=3||this.g&&(this.h.h||this.g.oa()||GI(this.g)))){this.J||mn!=4||f==7||(f==8||0>=Fa?K(3):K(2)),Ti(this);var m=this.g.Z();this.X=m;t:if(Ee(this)){var w=GI(this.g);u="";var D=w.length,V=Ai(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Si(this),us(this);var Y="";break t}this.h.i=new a.TextDecoder}for(f=0;f<D;f++)this.h.h=!0,u+=this.h.i.decode(w[f],{stream:!(V&&f==D-1)});w.length=0,this.h.g+=u,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=m==200,Ft(this.i,this.u,this.A,this.l,this.R,mn,m),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,on=this.g;if((ze=on.g?on.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(ze)){var De=ze;break t}}De=null}if(m=De)et(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tg(this,m);else{this.o=!1,this.s=3,oe(12),Si(this),us(this);break e}}if(this.P){m=!0;let Dr;for(;!this.J&&this.C<Y.length;)if(Dr=rn(this,Y),Dr==as){mn==4&&(this.s=4,oe(14),m=!1),et(this.i,this.l,null,"[Incomplete Response]");break}else if(Dr==er){this.s=4,oe(15),et(this.i,this.l,Y,"[Invalid Chunk]"),m=!1;break}else et(this.i,this.l,Dr,null),tg(this,Dr);if(Ee(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mn!=4||Y.length!=0||this.h.h||(this.s=1,oe(16),m=!1),this.o=this.o&&m,!m)et(this.i,this.l,Y,"[Invalid Chunked Response]"),Si(this),us(this);else if(0<Y.length&&!this.W){this.W=!0;var pn=this.j;pn.g==this&&pn.ba&&!pn.M&&(pn.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),ag(pn),pn.M=!0,oe(11))}}else et(this.i,this.l,Y,null),tg(this,Y);mn==4&&Si(this),this.o&&!this.J&&(mn==4?eT(this.j,this):(this.o=!1,sn(this)))}else NO(this.g),m==400&&0<Y.indexOf("Unknown SID")?(this.s=3,oe(12)):(this.s=0,oe(13)),Si(this),us(this)}}}catch{}finally{}};function Ee(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function rn(u,f){var m=u.C,w=f.indexOf(`
`,m);return w==-1?as:(m=Number(f.substring(m,w)),isNaN(m)?er:(w+=1,w+m>f.length?as:(f=f.slice(w,w+m),u.C=w+m,f)))}An.prototype.cancel=function(){this.J=!0,Si(this)};function sn(u){u.S=Date.now()+u.I,bt(u,u.I)}function bt(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ee(p(u.ba,u),f)}function Ti(u){u.B&&(a.clearTimeout(u.B),u.B=null)}An.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(de(this.i,this.A),this.L!=2&&(K(),oe(17)),Si(this),this.s=2,us(this)):bt(this,this.S-u)};function us(u){u.j.G==0||u.J||eT(u.j,u)}function Si(u){Ti(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,Nu(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function tg(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||ng(m.h,u))){if(!u.K&&ng(m.h,u)&&m.G==3){try{var w=m.Da.g.parse(f)}catch{w=null}if(Array.isArray(w)&&w.length==3){var D=w;if(D[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)bd(m),Cd(m);else break e;og(m),oe(18)}}else m.za=D[1],0<m.za-m.T&&37500>D[2]&&m.F&&m.v==0&&!m.C&&(m.C=ee(p(m.Za,m),6e3));if(1>=NI(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else vo(m,11)}else if((u.K||m.g==u)&&bd(m),!I(f))for(D=m.Da.g.parse(f),f=0;f<D.length;f++){let De=D[f];if(m.T=De[0],De=De[1],m.G==2)if(De[0]=="c"){m.K=De[1],m.ia=De[2];const pn=De[3];pn!=null&&(m.la=pn,m.j.info("VER="+m.la));const mn=De[4];mn!=null&&(m.Aa=mn,m.j.info("SVER="+m.Aa));const Fa=De[5];Fa!=null&&typeof Fa=="number"&&0<Fa&&(w=1.5*Fa,m.L=w,m.j.info("backChannelRequestTimeoutMs_="+w)),w=m;const Dr=u.g;if(Dr){const Nd=Dr.g?Dr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nd){var V=w.h;V.g||Nd.indexOf("spdy")==-1&&Nd.indexOf("quic")==-1&&Nd.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(rg(V,V.h),V.h=null))}if(w.D){const lg=Dr.g?Dr.g.getResponseHeader("X-HTTP-Session-Id"):null;lg&&(w.ya=lg,He(w.I,w.D,lg))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),w=m;var Y=u;if(w.qa=rT(w,w.J?w.ia:null,w.W),Y.K){xI(w.h,Y);var ze=Y,on=w.L;on&&(ze.I=on),ze.B&&(Ti(ze),sn(ze)),w.g=Y}else XI(w);0<m.i.length&&Pd(m)}else De[0]!="stop"&&De[0]!="close"||vo(m,7);else m.G==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?vo(m,7):sg(m):De[0]!="noop"&&m.l&&m.l.ta(De),m.v=0)}}K(4)}catch{}}var mO=class{constructor(u,f){this.g=u,this.map=f}};function bI(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function kI(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function NI(u){return u.h?1:u.g?u.g.size:0}function ng(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function rg(u,f){u.g?u.g.add(f):u.h=f}function xI(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}bI.prototype.cancel=function(){if(this.i=DI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function DI(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const m of u.g.values())f=f.concat(m.D);return f}return E(u.i)}function gO(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],m=u.length,w=0;w<m;w++)f.push(u[w]);return f}f=[],m=0;for(w in u)f[m++]=u[w];return f}function _O(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(const w in u)f[m++]=w;return f}}}function OI(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=_O(u),w=gO(u),D=w.length,V=0;V<D;V++)f.call(void 0,w[V],m&&m[V],u)}var LI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yO(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var w=u[m].indexOf("="),D=null;if(0<=w){var V=u[m].substring(0,w);D=u[m].substring(w+1)}else V=u[m];f(V,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function yo(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof yo){this.h=u.h,Id(this,u.j),this.o=u.o,this.g=u.g,Td(this,u.s),this.l=u.l;var f=u.i,m=new Mu;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),MI(this,m),this.m=u.m}else u&&(f=String(u).match(LI))?(this.h=!1,Id(this,f[1]||"",!0),this.o=Ou(f[2]||""),this.g=Ou(f[3]||"",!0),Td(this,f[4]),this.l=Ou(f[5]||"",!0),MI(this,f[6]||"",!0),this.m=Ou(f[7]||"")):(this.h=!1,this.i=new Mu(null,this.h))}yo.prototype.toString=function(){var u=[],f=this.j;f&&u.push(Lu(f,VI,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Lu(f,VI,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(Lu(m,m.charAt(0)=="/"?EO:wO,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",Lu(m,TO)),u.join("")};function Ri(u){return new yo(u)}function Id(u,f,m){u.j=m?Ou(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Td(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function MI(u,f,m){f instanceof Mu?(u.i=f,SO(u.i,u.h)):(m||(f=Lu(f,IO)),u.i=new Mu(f,u.h))}function He(u,f,m){u.i.set(f,m)}function Sd(u){return He(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ou(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Lu(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,vO),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function vO(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var VI=/[#\/\?@]/g,wO=/[#\?:]/g,EO=/[#\?]/g,IO=/[#\?@]/g,TO=/#/g;function Mu(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function cs(u){u.g||(u.g=new Map,u.h=0,u.i&&yO(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}t=Mu.prototype,t.add=function(u,f){cs(this),this.i=null,u=Ma(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function FI(u,f){cs(u),f=Ma(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function UI(u,f){return cs(u),f=Ma(u,f),u.g.has(f)}t.forEach=function(u,f){cs(this),this.g.forEach(function(m,w){m.forEach(function(D){u.call(f,D,w,this)},this)},this)},t.na=function(){cs(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let w=0;w<f.length;w++){const D=u[w];for(let V=0;V<D.length;V++)m.push(f[w])}return m},t.V=function(u){cs(this);let f=[];if(typeof u=="string")UI(this,u)&&(f=f.concat(this.g.get(Ma(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},t.set=function(u,f){return cs(this),this.i=null,u=Ma(this,u),UI(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function BI(u,f,m){FI(u,f),0<m.length&&(u.i=null,u.g.set(Ma(u,f),E(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var w=f[m];const V=encodeURIComponent(String(w)),Y=this.V(w);for(w=0;w<Y.length;w++){var D=V;Y[w]!==""&&(D+="="+encodeURIComponent(String(Y[w]))),u.push(D)}}return this.i=u.join("&")};function Ma(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function SO(u,f){f&&!u.j&&(cs(u),u.i=null,u.g.forEach(function(m,w){var D=w.toLowerCase();w!=D&&(FI(this,w),BI(this,D,m))},u)),u.j=f}function RO(u,f){const m=new fe;if(a.Image){const w=new Image;w.onload=_(hs,m,"TestLoadImage: loaded",!0,f,w),w.onerror=_(hs,m,"TestLoadImage: error",!1,f,w),w.onabort=_(hs,m,"TestLoadImage: abort",!1,f,w),w.ontimeout=_(hs,m,"TestLoadImage: timeout",!1,f,w),a.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else f(!1)}function AO(u,f){const m=new fe,w=new AbortController,D=setTimeout(()=>{w.abort(),hs(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:w.signal}).then(V=>{clearTimeout(D),V.ok?hs(m,"TestPingServer: ok",!0,f):hs(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(D),hs(m,"TestPingServer: error",!1,f)})}function hs(u,f,m,w,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),w(m)}catch{}}function CO(){this.g=new xa}function PO(u,f,m){const w=m||"";try{OI(u,function(D,V){let Y=D;c(D)&&(Y=xu(D)),f.push(w+V+"="+encodeURIComponent(Y))})}catch(D){throw f.push(w+"type="+encodeURIComponent("_badmap")),D}}function Vu(u){this.l=u.Ub||null,this.j=u.eb||!1}y(Vu,Da),Vu.prototype.g=function(){return new Rd(this.l,this.j)},Vu.prototype.i=function(u){return function(){return u}}({});function Rd(u,f){We.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Rd,We),t=Rd.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,Uu(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fu(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Uu(this)),this.g&&(this.readyState=3,Uu(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jI(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function jI(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Fu(this):Uu(this),this.readyState==3&&jI(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Fu(this))},t.Qa=function(u){this.g&&(this.response=u,Fu(this))},t.ga=function(){this.g&&Fu(this)};function Fu(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Uu(u)}t.setRequestHeader=function(u,f){this.u.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function Uu(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Rd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function zI(u){let f="";return j(u,function(m,w){f+=w,f+=":",f+=m,f+=`\r
`}),f}function ig(u,f,m){e:{for(w in m){var w=!1;break e}w=!0}w||(m=zI(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):He(u,f,m))}function mt(u){We.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(mt,We);var bO=/^https?$/i,kO=["POST","PUT"];t=mt.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,f,m,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():mr.g(),this.v=this.o?Oa(this.o):Oa(mr),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(V){qI(this,V);return}if(u=m||"",m=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var D in w)m.set(D,w[D]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const V of w.keys())m.set(V,w.get(V));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(m.keys()).find(V=>V.toLowerCase()=="content-type"),D=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(kO,f,void 0))||w||D||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,Y]of m)this.g.setRequestHeader(V,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{HI(this),this.u=!0,this.g.send(u),this.u=!1}catch(V){qI(this,V)}};function qI(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,$I(u),Ad(u)}function $I(u){u.A||(u.A=!0,St(u,"complete"),St(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,St(this,"complete"),St(this,"abort"),Ad(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ad(this,!0)),mt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?WI(this):this.bb())},t.bb=function(){WI(this)};function WI(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Ai(u)!=4||u.Z()!=2)){if(u.u&&Ai(u)==4)go(u.Ea,0,u);else if(St(u,"readystatechange"),Ai(u)==4){u.h=!1;try{const Y=u.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var w;if(w=Y===0){var D=String(u.D).match(LI)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),w=!bO.test(D?D.toLowerCase():"")}m=w}if(m)St(u,"complete"),St(u,"success");else{u.m=6;try{var V=2<Ai(u)?u.g.statusText:""}catch{V=""}u.l=V+" ["+u.Z()+"]",$I(u)}}finally{Ad(u)}}}}function Ad(u,f){if(u.g){HI(u);const m=u.g,w=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||St(u,"ready");try{m.onreadystatechange=w}catch{}}}function HI(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Ai(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Ai(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),wd(f)}};function GI(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function NO(u){const f={};u=(u.g&&2<=Ai(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(I(u[w]))continue;var m=b(u[w]);const D=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const V=f[D]||[];f[D]=V,V.push(m)}g(f,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bu(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function KI(u){this.Aa=0,this.i=[],this.j=new fe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bu("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bu("baseRetryDelayMs",5e3,u),this.cb=Bu("retryDelaySeedMs",1e4,u),this.Wa=Bu("forwardChannelMaxRetries",2,u),this.wa=Bu("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new bI(u&&u.concurrentRequestLimit),this.Da=new CO,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=KI.prototype,t.la=8,t.G=1,t.connect=function(u,f,m,w){oe(0),this.W=u,this.H=f||{},m&&w!==void 0&&(this.H.OSID=m,this.H.OAID=w),this.F=this.X,this.I=rT(this,null,this.W),Pd(this)};function sg(u){if(QI(u),u.G==3){var f=u.U++,m=Ri(u.I);if(He(m,"SID",u.K),He(m,"RID",f),He(m,"TYPE","terminate"),ju(u,m),f=new An(u,u.j,f),f.L=2,f.v=Sd(Ri(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=iT(f.j,null),f.g.ea(f.v)),f.F=Date.now(),sn(f)}nT(u)}function Cd(u){u.g&&(ag(u),u.g.cancel(),u.g=null)}function QI(u){Cd(u),u.u&&(a.clearTimeout(u.u),u.u=null),bd(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Pd(u){if(!kI(u.h)&&!u.s){u.s=!0;var f=u.Ga;fn||he(),H||(fn(),H=!0),ue.add(f,u),u.B=0}}function xO(u,f){return NI(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ee(p(u.Ga,u,f),tT(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const D=new An(this,this.j,u);let V=this.o;if(this.S&&(V?(V=v(V),A(V,this.S)):V=this.S),this.m!==null||this.O||(D.H=V,V=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var w=this.i[m];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(f+=w,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=JI(this,D,f),m=Ri(this.I),He(m,"RID",u),He(m,"CVER",22),this.D&&He(m,"X-HTTP-Session-Id",this.D),ju(this,m),V&&(this.O?f="headers="+encodeURIComponent(String(zI(V)))+"&"+f:this.m&&ig(m,this.m,V)),rg(this.h,D),this.Ua&&He(m,"TYPE","init"),this.P?(He(m,"$req",f),He(m,"SID","null"),D.T=!0,ls(D,m,null)):ls(D,m,f),this.G=2}}else this.G==3&&(u?YI(this,u):this.i.length==0||kI(this.h)||YI(this))};function YI(u,f){var m;f?m=f.l:m=u.U++;const w=Ri(u.I);He(w,"SID",u.K),He(w,"RID",m),He(w,"AID",u.T),ju(u,w),u.m&&u.o&&ig(w,u.m,u.o),m=new An(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=JI(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),rg(u.h,m),ls(m,w,f)}function ju(u,f){u.H&&j(u.H,function(m,w){He(f,w,m)}),u.l&&OI({},function(m,w){He(f,w,m)})}function JI(u,f,m){m=Math.min(u.i.length,m);var w=u.l?p(u.l.Na,u.l,u):null;e:{var D=u.i;let V=-1;for(;;){const Y=["count="+m];V==-1?0<m?(V=D[0].g,Y.push("ofs="+V)):V=0:Y.push("ofs="+V);let ze=!0;for(let on=0;on<m;on++){let De=D[on].g;const pn=D[on].map;if(De-=V,0>De)V=Math.max(0,D[on].g-100),ze=!1;else try{PO(pn,Y,"req"+De+"_")}catch{w&&w(pn)}}if(ze){w=Y.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,w}function XI(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;fn||he(),H||(fn(),H=!0),ue.add(f,u),u.v=0}}function og(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ee(p(u.Fa,u),tT(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,ZI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ee(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,oe(10),Cd(this),ZI(this))};function ag(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function ZI(u){u.g=new An(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=Ri(u.qa);He(f,"RID","rpc"),He(f,"SID",u.K),He(f,"AID",u.T),He(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&He(f,"TO",u.ja),He(f,"TYPE","xmlhttp"),ju(u,f),u.m&&u.o&&ig(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Sd(Ri(f)),m.m=null,m.P=!0,_o(m,u)}t.Za=function(){this.C!=null&&(this.C=null,Cd(this),og(this),oe(19))};function bd(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function eT(u,f){var m=null;if(u.g==f){bd(u),ag(u),u.g=null;var w=2}else if(ng(u.h,f))m=f.D,xI(u.h,f),w=1;else return;if(u.G!=0){if(f.o)if(w==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var D=u.B;w=L(),St(w,new le(w,m)),Pd(u)}else XI(u);else if(D=f.s,D==3||D==0&&0<f.X||!(w==1&&xO(u,f)||w==2&&og(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),D){case 1:vo(u,5);break;case 4:vo(u,10);break;case 3:vo(u,6);break;default:vo(u,2)}}}function tT(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function vo(u,f){if(u.j.info("Error code "+f),f==2){var m=p(u.fb,u),w=u.Xa;const D=!w;w=new yo(w||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Id(w,"https"),Sd(w),D?RO(w.toString(),m):AO(w.toString(),m)}else oe(2);u.G=0,u.l&&u.l.sa(f),nT(u),QI(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),oe(2)):(this.j.info("Failed to ping google.com"),oe(1))};function nT(u){if(u.G=0,u.ka=[],u.l){const f=DI(u.h);(f.length!=0||u.i.length!=0)&&(P(u.ka,f),P(u.ka,u.i),u.h.i.length=0,E(u.i),u.i.length=0),u.l.ra()}}function rT(u,f,m){var w=m instanceof yo?Ri(m):new yo(m);if(w.g!="")f&&(w.g=f+"."+w.g),Td(w,w.s);else{var D=a.location;w=D.protocol,f=f?f+"."+D.hostname:D.hostname,D=+D.port;var V=new yo(null);w&&Id(V,w),f&&(V.g=f),D&&Td(V,D),m&&(V.l=m),w=V}return m=u.D,f=u.ya,m&&f&&He(w,m,f),He(w,"VER",u.la),ju(u,w),w}function iT(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new mt(new Vu({eb:m})):new mt(u.pa),f.Ha(u.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function sT(){}t=sT.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function kd(){}kd.prototype.g=function(u,f){return new tr(u,f)};function tr(u,f){We.call(this),this.g=new KI(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!I(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!I(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new Va(this)}y(tr,We),tr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tr.prototype.close=function(){sg(this.g)},tr.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=xu(u),u=m);f.i.push(new mO(f.Ya++,u)),f.G==3&&Pd(f)},tr.prototype.N=function(){this.g.l=null,delete this.j,sg(this.g),delete this.g,tr.aa.N.call(this)};function oT(u){Du.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}y(oT,Du);function aT(){La.call(this),this.status=1}y(aT,La);function Va(u){this.g=u}y(Va,sT),Va.prototype.ua=function(){St(this.g,"a")},Va.prototype.ta=function(u){St(this.g,new oT(u))},Va.prototype.sa=function(u){St(this.g,new aT)},Va.prototype.ra=function(){St(this.g,"b")},kd.prototype.createWebChannel=kd.prototype.g,tr.prototype.send=tr.prototype.o,tr.prototype.open=tr.prototype.m,tr.prototype.close=tr.prototype.close,Uk=function(){return new kd},Fk=function(){return L()},Vk=Ei,Ty={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},at.NO_ERROR=0,at.TIMEOUT=8,at.HTTP_ERROR=6,Rf=at,os.COMPLETE="complete",Mk=os,Ed.EventType=ss,ss.OPEN="a",ss.CLOSE="b",ss.ERROR="c",ss.MESSAGE="d",We.prototype.listen=We.prototype.K,wc=Ed,Lk=Vu,mt.prototype.listenOnce=mt.prototype.L,mt.prototype.getLastError=mt.prototype.Ka,mt.prototype.getLastErrorCode=mt.prototype.Ba,mt.prototype.getStatus=mt.prototype.Z,mt.prototype.getResponseJson=mt.prototype.Oa,mt.prototype.getResponseText=mt.prototype.oa,mt.prototype.send=mt.prototype.ea,mt.prototype.setWithCredentials=mt.prototype.Ha,Ok=mt}).apply(typeof Yd<"u"?Yd:typeof self<"u"?self:typeof window<"u"?window:{});const gS="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mu="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs=new qh("@firebase/firestore");function Ka(){return Hs.logLevel}function Dz(t){Hs.setLogLevel(t)}function W(t,...e){if(Hs.logLevel<=ve.DEBUG){const n=e.map(Yw);Hs.debug(`Firestore (${mu}): ${t}`,...n)}}function At(t,...e){if(Hs.logLevel<=ve.ERROR){const n=e.map(Yw);Hs.error(`Firestore (${mu}): ${t}`,...n)}}function Qr(t,...e){if(Hs.logLevel<=ve.WARN){const n=e.map(Yw);Hs.warn(`Firestore (${mu}): ${t}`,...n)}}function Yw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t="Unexpected state"){const e=`FIRESTORE (${mu}) INTERNAL ASSERTION FAILED: `+t;throw At(e),new Error(e)}function se(t,e){t||ne()}function Oz(t,e){t||ne()}function X(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends Sn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Lz{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Gt.UNAUTHENTICATED))}shutdown(){}}class Mz{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Vz{constructor(e){this.t=e,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Xt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Xt,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Xt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(se(typeof r.accessToken=="string"),new Bk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return se(e===null||typeof e=="string"),new Gt(e)}}class Fz{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Uz{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Fz(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Bz{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jz{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(se(typeof n.token=="string"),this.R=n.token,new Bz(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zz(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=zz(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function me(t,e){return t<e?-1:t>e?1:0}function Wl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function zk(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new $(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new st(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ae(e)}static min(){return new ae(new st(0,0))}static max(){return new ae(new st(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(),r===void 0?r=e.length-n:r>e.length-n&&ne(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ih.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ih?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Se extends Ih{construct(e,n,r){return new Se(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Se(n)}static emptyPath(){return new Se([])}}const qz=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rt extends Ih{construct(e,n,r){return new rt(e,n,r)}static isValidIdentifier(e){return qz.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new rt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new $(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new $(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new $(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new $(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rt(n)}static emptyPath(){return new rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Se.fromString(e))}static fromName(e){return new J(Se.fromString(e).popFirst(5))}static empty(){return new J(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Se(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function Sy(t){return t.fields.find(e=>e.kind===2)}function So(t){return t.fields.filter(e=>e.kind!==2)}_p.UNKNOWN_ID=-1;class Af{constructor(e,n){this.fieldPath=e,this.kind=n}}class Th{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Th(0,cr.min())}}function qk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new st(n+1,0):new st(n,r));return new cr(i,J.empty(),e)}function $k(t){return new cr(t.readTime,t.key,-1)}class cr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new cr(ae.min(),J.empty(),-1)}static max(){return new cr(ae.max(),J.empty(),-1)}}function Jw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Hk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ao(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==Wk)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(i=>i?O.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new O((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new O((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Xt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Vc(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=Xw(r.target.error);this.V.reject(new Vc(e,i))}}static open(e,n,r,i){try{return new wm(n,e.transaction(i,r))}catch(s){throw new Vc(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(W("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Wz(n)}}class di{constructor(e,n,r){this.name=e,this.version=n,this.p=r,di.S(ot())===12.2&&At("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return W("SimpleDb","Removing database:",e),Ao(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ph())return!1;if(di.C())return!0;const e=ot(),n=di.S(e),r=0<n&&n<10,i=Gk(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(W("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Vc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new $(M.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new $(M.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Vc(e,o))},i.onupgradeneeded=s=>{W("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{W("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=wm.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),O.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(W("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Gk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class $z{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ao(this.B.delete())}}class Vc extends ${constructor(e,n){super(M.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function lo(t){return t.name==="IndexedDbTransactionError"}class Wz{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(W("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(W("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ao(r)}add(e){return W("SimpleDb","ADD",this.store.name,e,e),Ao(this.store.add(e))}get(e){return Ao(this.store.get(e)).next(n=>(n===void 0&&(n=null),W("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return W("SimpleDb","DELETE",this.store.name,e),Ao(this.store.delete(e))}count(){return W("SimpleDb","COUNT",this.store.name),Ao(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new O((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new O((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){W("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new O((r,i)=>{n.onerror=s=>{const o=Xw(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new O((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new $z(a),c=n(a.primaryKey,a.value,l);if(c instanceof O){const h=c.catch(d=>(l.done(),O.reject(d)));r.push(h)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>O.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ao(t){return new O((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=Xw(r.target.error);n(i)}})}let _S=!1;function Xw(t){const e=di.S(ot());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new $("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _S||(_S=!0,setTimeout(()=>{throw r},0)),r}}return t}class Hz{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){W("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{W("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){lo(n)?W("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await ao(n)}await this.X(6e4)})}}class Gz{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let i=n,s=!0;return O.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return W("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(W("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=$k(s);Jw(o,r)>0&&(r=o)}),new cr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Wn.oe=-1;function Jh(t){return t==null}function Sh(t){return t===0&&1/t==-1/0}function Kk(t){return typeof t=="number"&&Number.isInteger(t)&&!Sh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=yS(e)),e=Kz(t.get(n),e);return yS(e)}function Kz(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function yS(t){return t+""}function ai(t){const e=t.length;if(se(e>=2),e===2)return se(t.charAt(0)===""&&t.charAt(1)===""),Se.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&ne(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:ne()}s=o+2}return new Se(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(t,e){return[t,On(e)]}function Qk(t,e,n){return[t,On(e),n]}const Qz={},Yz=["prefixPath","collectionGroup","readTime","documentId"],Jz=["prefixPath","collectionGroup","documentId"],Xz=["collectionGroup","readTime","prefixPath","documentId"],Zz=["canonicalId","targetId"],eq=["targetId","path"],tq=["path","targetId"],nq=["collectionId","parent"],rq=["indexId","uid"],iq=["uid","sequenceNumber"],sq=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],oq=["indexId","uid","orderedDocumentKey"],aq=["userId","collectionPath","documentId"],lq=["userId","collectionPath","largestBatchId"],uq=["userId","collectionGroup","largestBatchId"],Yk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],cq=[...Yk,"documentOverlays"],Jk=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Xk=Jk,Zk=[...Xk,"indexConfiguration","indexState","indexEntries"],hq=Zk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry extends Hk{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function en(t,e){const n=X(t);return di.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Sa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function e1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ft=class Ay{constructor(e,n){this.comparator=e,this.root=n||Fs.EMPTY}insert(e,n){return new Ay(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Fs.BLACK,null,null))}remove(e){return new Ay(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fs.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jd(this.root,e,this.comparator,!0)}},Jd=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Fs=class Ci{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ci.RED,this.left=i??Ci.EMPTY,this.right=s??Ci.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Ci(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ci.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ci.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ne();const e=this.left.check();if(e!==this.right.check())throw ne();return e+(this.isRed()?0:1)}};Fs.EMPTY=null,Fs.RED=!0,Fs.BLACK=!1;Fs.EMPTY=new class{constructor(){this.size=0}get key(){throw ne()}get value(){throw ne()}get color(){throw ne()}get left(){throw ne()}get right(){throw ne()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Fs(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ES(this.data.getIterator())}getIteratorFrom(e){return new ES(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof je)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new je(this.comparator);return n.data=e,n}}class ES{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function za(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.fields=e,e.sort(rt.comparator)}static empty(){return new Hn([])}unionWith(e){let n=new je(rt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Hn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Wl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dq(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new t1("Invalid base64 string: "+s):s}}(e);return new zt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new zt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zt.EMPTY_BYTE_STRING=new zt("");const fq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hi(t){if(se(!!t),typeof t=="string"){let e=0;const n=fq.exec(t);if(se(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_t(t.seconds),nanos:_t(t.nanos)}}function _t(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Gs(t){return typeof t=="string"?zt.fromBase64String(t):zt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Zw(t){const e=t.mapValue.fields.__previous_value__;return Em(e)?Zw(e):e}function Rh(t){const e=Hi(t.mapValue.fields.__local_write_time__.timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pq{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Ks{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ks("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ks&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Pf={nullValue:"NULL_VALUE"};function ra(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Em(t)?4:n1(t)?9007199254740991:10:ne()}function _i(t,e){if(t===e)return!0;const n=ra(t);if(n!==ra(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Rh(t).isEqual(Rh(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Hi(i.timestampValue),a=Hi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Gs(i.bytesValue).isEqual(Gs(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return _t(i.geoPointValue.latitude)===_t(s.geoPointValue.latitude)&&_t(i.geoPointValue.longitude)===_t(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return _t(i.integerValue)===_t(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=_t(i.doubleValue),a=_t(s.doubleValue);return o===a?Sh(o)===Sh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Wl(t.arrayValue.values||[],e.arrayValue.values||[],_i);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(wS(o)!==wS(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!_i(o[l],a[l])))return!1;return!0}(t,e);default:return ne()}}function Ah(t,e){return(t.values||[]).find(n=>_i(n,e))!==void 0}function Qs(t,e){if(t===e)return 0;const n=ra(t),r=ra(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=_t(s.integerValue||s.doubleValue),l=_t(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return IS(t.timestampValue,e.timestampValue);case 4:return IS(Rh(t),Rh(e));case 5:return me(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Gs(s),l=Gs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=me(a[c],l[c]);if(h!==0)return h}return me(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=me(_t(s.latitude),_t(o.latitude));return a!==0?a:me(_t(s.longitude),_t(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const h=Qs(a[c],l[c]);if(h)return h}return me(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Ps.mapValue&&o===Ps.mapValue)return 0;if(s===Ps.mapValue)return 1;if(o===Ps.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=me(l[d],h[d]);if(p!==0)return p;const _=Qs(a[l[d]],c[h[d]]);if(_!==0)return _}return me(l.length,h.length)}(t.mapValue,e.mapValue);default:throw ne()}}function IS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const n=Hi(t),r=Hi(e),i=me(n.seconds,r.seconds);return i!==0?i:me(n.nanos,r.nanos)}function Hl(t){return Cy(t)}function Cy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Hi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Gs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Cy(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Cy(n.fields[o])}`;return i+"}"}(t.mapValue):ne()}function ia(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Py(t){return!!t&&"integerValue"in t}function Ch(t){return!!t&&"arrayValue"in t}function TS(t){return!!t&&"nullValue"in t}function SS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bf(t){return!!t&&"mapValue"in t}function Fc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Sa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Fc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Fc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function n1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function mq(t){return"nullValue"in t?Pf:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ia(Ks.empty(),J.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:ne()}function gq(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ia(Ks.empty(),J.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Ps:ne()}function RS(t,e){const n=Qs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function AS(t,e){const n=Qs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.value=e}static empty(){return new cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!bf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fc(n)}setAll(e){let n=rt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Fc(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());bf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _i(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];bf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Sa(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new cn(Fc(this.value))}}function r1(t){const e=[];return Sa(t.fields,(n,r)=>{const i=new rt([n]);if(bf(r)){const s=r1(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ye(e,0,ae.min(),ae.min(),ae.min(),cn.empty(),0)}static newFoundDocument(e,n,r,i){return new Ye(e,1,n,ae.min(),r,i,0)}static newNoDocument(e,n){return new Ye(e,2,n,ae.min(),ae.min(),cn.empty(),0)}static newUnknownDocument(e,n){return new Ye(e,3,n,ae.min(),ae.min(),cn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ye&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ye(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,n){this.position=e,this.inclusive=n}}function CS(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=Qs(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function PS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!_i(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,n="asc"){this.field=e,this.dir=n}}function _q(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{}class Re extends i1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new yq(e,n,r):n==="array-contains"?new Eq(e,r):n==="in"?new c1(e,r):n==="not-in"?new Iq(e,r):n==="array-contains-any"?new Tq(e,r):new Re(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new vq(e,r):new wq(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Qs(n,this.value)):n!==null&&ra(this.value)===ra(n)&&this.matchesComparison(Qs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ve extends i1{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ve(e,n)}matches(e){return Gl(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Gl(t){return t.op==="and"}function by(t){return t.op==="or"}function eE(t){return s1(t)&&Gl(t)}function s1(t){for(const e of t.filters)if(e instanceof Ve)return!1;return!0}function ky(t){if(t instanceof Re)return t.field.canonicalString()+t.op.toString()+Hl(t.value);if(eE(t))return t.filters.map(e=>ky(e)).join(",");{const e=t.filters.map(n=>ky(n)).join(",");return`${t.op}(${e})`}}function o1(t,e){return t instanceof Re?function(r,i){return i instanceof Re&&r.op===i.op&&r.field.isEqual(i.field)&&_i(r.value,i.value)}(t,e):t instanceof Ve?function(r,i){return i instanceof Ve&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&o1(o,i.filters[a]),!0):!1}(t,e):void ne()}function a1(t,e){const n=t.filters.concat(e);return Ve.create(n,t.op)}function l1(t){return t instanceof Re?function(n){return`${n.field.canonicalString()} ${n.op} ${Hl(n.value)}`}(t):t instanceof Ve?function(n){return n.op.toString()+" {"+n.getFilters().map(l1).join(" ,")+"}"}(t):"Filter"}class yq extends Re{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class vq extends Re{constructor(e,n){super(e,"in",n),this.keys=u1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class wq extends Re{constructor(e,n){super(e,"not-in",n),this.keys=u1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function u1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class Eq extends Re{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ch(n)&&Ah(n.arrayValue,this.value)}}class c1 extends Re{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ah(this.value.arrayValue,n)}}class Iq extends Re{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ah(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ah(this.value.arrayValue,n)}}class Tq extends Re{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ch(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ah(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sq{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Ny(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Sq(t,e,n,r,i,s,o)}function sa(t){const e=X(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ky(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Jh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Hl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Hl(r)).join(",")),e.ue=n}return e.ue}function Xh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!_q(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!o1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!PS(t.startAt,e.startAt)&&PS(t.endAt,e.endAt)}function yp(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function vp(t,e){return t.filters.filter(n=>n instanceof Re&&n.field.isEqual(e))}function bS(t,e,n){let r=Pf,i=!0;for(const s of vp(t,e)){let o=Pf,a=!0;switch(s.op){case"<":case"<=":o=mq(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Pf}RS({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];RS({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function kS(t,e,n){let r=Ps,i=!0;for(const s of vp(t,e)){let o=Ps,a=!0;switch(s.op){case">=":case">":o=gq(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Ps}AS({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];AS({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function h1(t,e,n,r,i,s,o,a){return new Ji(t,e,n,r,i,s,o,a)}function gu(t){return new Ji(t)}function NS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function tE(t){return t.collectionGroup!==null}function Rl(t){const e=X(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new je(rt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ph(s,r))}),n.has(rt.keyField().canonicalString())||e.ce.push(new Ph(rt.keyField(),r))}return e.ce}function Ln(t){const e=X(t);return e.le||(e.le=Rq(e,Rl(t))),e.le}function Rq(t,e){if(t.limitType==="F")return Ny(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Ph(i.field,s)});const n=t.endAt?new Ys(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ys(t.startAt.position,t.startAt.inclusive):null;return Ny(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function xy(t,e){const n=t.filters.concat([e]);return new Ji(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function wp(t,e,n){return new Ji(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zh(t,e){return Xh(Ln(t),Ln(e))&&t.limitType===e.limitType}function d1(t){return`${sa(Ln(t))}|lt:${t.limitType}`}function Qa(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>l1(i)).join(", ")}]`),Jh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Hl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Hl(i)).join(",")),`Target(${r})`}(Ln(t))}; limitType=${t.limitType})`}function ed(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):J.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Rl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=CS(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Rl(r),i)||r.endAt&&!function(o,a,l){const c=CS(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Rl(r),i))}(t,e)}function f1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function p1(t){return(e,n)=>{let r=!1;for(const i of Rl(t)){const s=Aq(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Aq(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Qs(l,c):ne()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Sa(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return e1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cq=new ft(J.comparator);function Gn(){return Cq}const m1=new ft(J.comparator);function Ec(...t){let e=m1;for(const n of t)e=e.insert(n.key,n);return e}function g1(t){let e=m1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function li(){return Uc()}function _1(){return Uc()}function Uc(){return new uo(t=>t.toString(),(t,e)=>t.isEqual(e))}const Pq=new ft(J.comparator),bq=new je(J.comparator);function _e(...t){let e=bq;for(const n of t)e=e.add(n);return e}const kq=new je(me);function nE(){return kq}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sh(e)?"-0":e}}function v1(t){return{integerValue:""+t}}function w1(t,e){return Kk(e)?v1(e):y1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(){this._=void 0}}function Nq(t,e,n){return t instanceof Kl?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Em(s)&&(s=Zw(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof oa?I1(t,e):t instanceof aa?T1(t,e):function(i,s){const o=E1(i,s),a=xS(o)+xS(i.Pe);return Py(o)&&Py(i.Pe)?v1(a):y1(i.serializer,a)}(t,e)}function xq(t,e,n){return t instanceof oa?I1(t,e):t instanceof aa?T1(t,e):n}function E1(t,e){return t instanceof Ql?function(r){return Py(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Kl extends Im{}class oa extends Im{constructor(e){super(),this.elements=e}}function I1(t,e){const n=S1(e);for(const r of t.elements)n.some(i=>_i(i,r))||n.push(r);return{arrayValue:{values:n}}}class aa extends Im{constructor(e){super(),this.elements=e}}function T1(t,e){let n=S1(e);for(const r of t.elements)n=n.filter(i=>!_i(i,r));return{arrayValue:{values:n}}}class Ql extends Im{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function xS(t){return _t(t.integerValue||t.doubleValue)}function S1(t){return Ch(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,n){this.field=e,this.transform=n}}function Dq(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof oa&&i instanceof oa||r instanceof aa&&i instanceof aa?Wl(r.elements,i.elements,_i):r instanceof Ql&&i instanceof Ql?_i(r.Pe,i.Pe):r instanceof Kl&&i instanceof Kl}(t.transform,e.transform)}class Oq{constructor(e,n){this.version=e,this.transformResults=n}}class it{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new it}static exists(e){return new it(void 0,e)}static updateTime(e){return new it(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Tm{}function R1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new yu(t.key,it.none()):new _u(t.key,t.data,it.none());{const n=t.data,r=cn.empty();let i=new je(rt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Xi(t.key,r,new Hn(i.toArray()),it.none())}}function Lq(t,e,n){t instanceof _u?function(i,s,o){const a=i.value.clone(),l=OS(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Xi?function(i,s,o){if(!kf(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=OS(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(A1(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Bc(t,e,n,r){return t instanceof _u?function(s,o,a,l){if(!kf(s.precondition,o))return a;const c=s.value.clone(),h=LS(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Xi?function(s,o,a,l){if(!kf(s.precondition,o))return a;const c=LS(s.fieldTransforms,l,o),h=o.data;return h.setAll(A1(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return kf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Mq(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=E1(r.transform,i||null);s!=null&&(n===null&&(n=cn.empty()),n.set(r.field,s))}return n||null}function DS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Wl(r,i,(s,o)=>Dq(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class _u extends Tm{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xi extends Tm{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function A1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function OS(t,e,n){const r=new Map;se(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,xq(o,a,n[i]))}return r}function LS(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Nq(s,o,e))}return r}class yu extends Tm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rE extends Tm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Lq(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Bc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Bc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=_1();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=R1(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),_e())}isEqual(e){return this.batchId===e.batchId&&Wl(this.mutations,e.mutations,(n,r)=>DS(n,r))&&Wl(this.baseMutations,e.baseMutations,(n,r)=>DS(n,r))}}class sE{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){se(e.mutations.length===r.length);let i=function(){return Pq}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new sE(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vq{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,Ce;function C1(t){switch(t){default:return ne();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function P1(t){if(t===void 0)return At("GRPC error has no .code"),M.UNKNOWN;switch(t){case kt.OK:return M.OK;case kt.CANCELLED:return M.CANCELLED;case kt.UNKNOWN:return M.UNKNOWN;case kt.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case kt.INTERNAL:return M.INTERNAL;case kt.UNAVAILABLE:return M.UNAVAILABLE;case kt.UNAUTHENTICATED:return M.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case kt.NOT_FOUND:return M.NOT_FOUND;case kt.ALREADY_EXISTS:return M.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return M.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case kt.ABORTED:return M.ABORTED;case kt.OUT_OF_RANGE:return M.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return M.UNIMPLEMENTED;case kt.DATA_LOSS:return M.DATA_LOSS;default:return ne()}}(Ce=kt||(kt={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fq=new $o([4294967295,4294967295],0);function MS(t){const e=b1().encode(t),n=new Dk;return n.update(e),new Uint8Array(n.digest())}function VS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new $o([n,r],0),new $o([i,s],0)]}class aE{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ic(`Invalid padding: ${n}`);if(r<0)throw new Ic(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ic(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ic(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=$o.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply($o.fromNumber(r)));return i.compare(Fq)===1&&(i=new $o([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=MS(e),[r,i]=VS(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new aE(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=MS(e),[r,i]=VS(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ic extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,rd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new nd(ae.min(),i,new ft(me),Gn(),_e())}}class rd{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new rd(r,n,_e(),_e(),_e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class k1{constructor(e,n){this.targetId=e,this.me=n}}class N1{constructor(e,n,r=zt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class FS{constructor(){this.fe=0,this.ge=BS(),this.pe=zt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=_e(),n=_e(),r=_e();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ne()}}),new rd(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=BS()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,se(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Uq{constructor(e){this.Le=e,this.Be=new Map,this.ke=Gn(),this.qe=US(),this.Qe=new ft(me)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ne()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(yp(s))if(r===0){const o=new J(s.path);this.Ue(n,o,Ye.newNoDocument(o,ae.min()))}else se(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Gs(r).toUint8Array()}catch(l){if(l instanceof t1)return Qr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new aE(o,i,s)}catch(l){return Qr(l instanceof Ic?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&yp(a.target)){const l=new J(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Ye.newNoDocument(l,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=_e();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new nd(e,n,this.Qe,this.ke,r);return this.ke=Gn(),this.qe=US(),this.Qe=new ft(me),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new FS,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new je(me),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new FS),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function US(){return new ft(J.comparator)}function BS(){return new ft(J.comparator)}const Bq={asc:"ASCENDING",desc:"DESCENDING"},jq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zq={and:"AND",or:"OR"};class qq{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Dy(t,e){return t.useProto3Json||Jh(e)?e:{value:e}}function Yl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function x1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function $q(t,e){return Yl(t,e.toTimestamp())}function Ct(t){return se(!!t),ae.fromTimestamp(function(n){const r=Hi(n);return new st(r.seconds,r.nanos)}(t))}function lE(t,e){return Oy(t,e).canonicalString()}function Oy(t,e){const n=function(i){return new Se(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function D1(t){const e=Se.fromString(t);return se(q1(e)),e}function bh(t,e){return lE(t.databaseId,e.path)}function fi(t,e){const n=D1(e);if(n.get(1)!==t.databaseId.projectId)throw new $(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(M1(n))}function O1(t,e){return lE(t.databaseId,e)}function L1(t){const e=D1(t);return e.length===4?Se.emptyPath():M1(e)}function Ly(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function M1(t){return se(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function jS(t,e,n){return{name:bh(t,e),fields:n.value.mapValue.fields}}function V1(t,e,n){const r=fi(t,e.name),i=Ct(e.updateTime),s=e.createTime?Ct(e.createTime):ae.min(),o=new cn({mapValue:{fields:e.fields}}),a=Ye.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Wq(t,e){return"found"in e?function(r,i){se(!!i.found),i.found.name,i.found.updateTime;const s=fi(r,i.found.name),o=Ct(i.found.updateTime),a=i.found.createTime?Ct(i.found.createTime):ae.min(),l=new cn({mapValue:{fields:i.found.fields}});return Ye.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(r,i){se(!!i.missing),se(!!i.readTime);const s=fi(r,i.missing),o=Ct(i.readTime);return Ye.newNoDocument(s,o)}(t,e):ne()}function Hq(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(se(h===void 0||typeof h=="string"),zt.fromBase64String(h||"")):(se(h===void 0||h instanceof Buffer||h instanceof Uint8Array),zt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?M.UNKNOWN:P1(c.code);return new $(h,c.message||"")}(o);n=new N1(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=fi(t,r.document.name),s=Ct(r.document.updateTime),o=r.document.createTime?Ct(r.document.createTime):ae.min(),a=new cn({mapValue:{fields:r.document.fields}}),l=Ye.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Nf(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=fi(t,r.document),s=r.readTime?Ct(r.readTime):ae.min(),o=Ye.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Nf([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=fi(t,r.document),s=r.removedTargetIds||[];n=new Nf([],s,i,null)}else{if(!("filter"in e))return ne();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Vq(i,s),a=r.targetId;n=new k1(a,o)}}return n}function kh(t,e){let n;if(e instanceof _u)n={update:jS(t,e.key,e.value)};else if(e instanceof yu)n={delete:bh(t,e.key)};else if(e instanceof Xi)n={update:jS(t,e.key,e.data),updateMask:Xq(e.fieldMask)};else{if(!(e instanceof rE))return ne();n={verify:bh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Kl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof oa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof aa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ql)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ne()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:$q(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ne()}(t,e.precondition)),n}function My(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?it.updateTime(Ct(s.updateTime)):s.exists!==void 0?it.exists(s.exists):it.none()}(e.currentDocument):it.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)se(a.setToServerValue==="REQUEST_TIME"),l=new Kl;else if("appendMissingElements"in a){const h=a.appendMissingElements.values||[];l=new oa(h)}else if("removeAllFromArray"in a){const h=a.removeAllFromArray.values||[];l=new aa(h)}else"increment"in a?l=new Ql(o,a.increment):ne();const c=rt.fromServerFormat(a.fieldPath);return new td(c,l)}(t,i)):[];if(e.update){e.update.name;const i=fi(t,e.update.name),s=new cn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new Hn(c.map(h=>rt.fromServerFormat(h)))}(e.updateMask);return new Xi(i,s,o,n,r)}return new _u(i,s,n,r)}if(e.delete){const i=fi(t,e.delete);return new yu(i,n)}if(e.verify){const i=fi(t,e.verify);return new rE(i,n)}return ne()}function Gq(t,e){return t&&t.length>0?(se(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Ct(i.updateTime):Ct(s);return o.isEqual(ae.min())&&(o=Ct(s)),new Oq(o,i.transformResults||[])}(n,e))):[]}function F1(t,e){return{documents:[O1(t,e.path)]}}function U1(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=O1(t,i);const s=function(c){if(c.length!==0)return z1(Ve.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:Ya(p.field),direction:Qq(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Dy(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function B1(t){let e=L1(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){se(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const p=j1(d);return p instanceof Ve&&eE(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(p=>function(y){return new Ph(Ja(y.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,Jh(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(d){const p=!!d.before,_=d.values||[];return new Ys(_,p)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const p=!d.before,_=d.values||[];return new Ys(_,p)}(n.endAt)),h1(e,i,o,s,a,"F",l,c)}function Kq(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function j1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ja(n.unaryFilter.field);return Re.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ja(n.unaryFilter.field);return Re.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ja(n.unaryFilter.field);return Re.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ja(n.unaryFilter.field);return Re.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ne()}}(t):t.fieldFilter!==void 0?function(n){return Re.create(Ja(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ne()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ve.create(n.compositeFilter.filters.map(r=>j1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne()}}(n.compositeFilter.op))}(t):ne()}function Qq(t){return Bq[t]}function Yq(t){return jq[t]}function Jq(t){return zq[t]}function Ya(t){return{fieldPath:t.canonicalString()}}function Ja(t){return rt.fromServerFormat(t.fieldPath)}function z1(t){return t instanceof Re?function(n){if(n.op==="=="){if(SS(n.value))return{unaryFilter:{field:Ya(n.field),op:"IS_NAN"}};if(TS(n.value))return{unaryFilter:{field:Ya(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(SS(n.value))return{unaryFilter:{field:Ya(n.field),op:"IS_NOT_NAN"}};if(TS(n.value))return{unaryFilter:{field:Ya(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ya(n.field),op:Yq(n.op),value:n.value}}}(t):t instanceof Ve?function(n){const r=n.getFilters().map(i=>z1(i));return r.length===1?r[0]:{compositeFilter:{op:Jq(n.op),filters:r}}}(t):ne()}function Xq(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function q1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,n,r,i,s=ae.min(),o=ae.min(),a=zt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Oi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e){this.ct=e}}function Zq(t,e){let n;if(e.document)n=V1(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=J.fromSegments(e.noDocument.path),i=ua(e.noDocument.readTime);n=Ye.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ne();{const r=J.fromSegments(e.unknownDocument.path),i=ua(e.unknownDocument.version);n=Ye.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new st(i[0],i[1]);return ae.fromTimestamp(s)}(e.readTime)),n}function zS(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ep(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:bh(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Yl(s,o.version.toTimestamp()),createTime:Yl(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:la(e.version)};else{if(!e.isUnknownDocument())return ne();r.unknownDocument={path:n.path.toArray(),version:la(e.version)}}return r}function Ep(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function la(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ua(t){const e=new st(t.seconds,t.nanoseconds);return ae.fromTimestamp(e)}function Co(t,e){const n=(e.baseMutations||[]).map(s=>My(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>My(t.ct,s)),i=st.fromMillis(e.localWriteTimeMs);return new iE(e.batchId,i,n,r)}function Tc(t){const e=ua(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?ua(t.lastLimboFreeSnapshotVersion):ae.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return se(s.documents.length===1),Ln(gu(L1(s.documents[0])))}(t.query):function(s){return Ln(B1(s))}(t.query),new Oi(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,zt.fromBase64String(t.resumeToken))}function W1(t,e){const n=la(e.snapshotVersion),r=la(e.lastLimboFreeSnapshotVersion);let i;i=yp(e.target)?F1(t.ct,e.target):U1(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:sa(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function uE(t){const e=B1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?wp(e,e.limit,"L"):e}function Qg(t,e){return new oE(e.largestBatchId,My(t.ct,e.overlayMutation))}function qS(t,e){const n=e.path.lastSegment();return[t,On(e.path.popLast()),n]}function $S(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:la(r.readTime),documentKey:On(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e${getBundleMetadata(e,n){return WS(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:ua(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return WS(e).put(function(i){return{bundleId:i.id,createTime:la(Ct(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return HS(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:uE(s.bundledQuery),readTime:ua(s.readTime)}}(r)})}saveNamedQuery(e,n){return HS(e).put(function(i){return{name:i.name,readTime:la(Ct(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function WS(t){return en(t,"bundles")}function HS(t){return en(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Sm(e,r)}getOverlay(e,n){return nc(e).get(qS(this.userId,n)).next(r=>r?Qg(this.serializer,r):null)}getOverlays(e,n){const r=li();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new oE(n,o);i.push(this.ht(e,a))}),O.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(On(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(nc(e).j("collectionPathOverlayIndex",a))}),O.waitFor(s)}getOverlaysForCollection(e,n,r){const i=li(),s=On(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return nc(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=Qg(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=li();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return nc(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,h)=>{const d=Qg(this.serializer,c);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):h.done()}).next(()=>s)}ht(e,n){return nc(e).put(function(i,s,o){const[a,l,c]=qS(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:kh(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function nc(t){return en(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(_t(e.integerValue));else if("doubleValue"in e){const r=_t(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),Sh(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=Hi(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Gs(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?n1(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):ne()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const r=e.fields||{};this.Et(n,55);for(const i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){const r=e.values||[];this.Et(n,50);for(const i of r)this.It(i,n)}gt(e,n){this.Et(n,37),J.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}Po.bt=new Po;function t$(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function GS(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=t$(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class n${constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const n=this.Bt(e),r=GS(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){const n=this.Bt(e),r=GS(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){const n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class r${constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class i${constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class rc{constructor(){this.Gt=new n$,this.zt=new r$(this.Gt),this.jt=new i$(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new bo(this.indexId,this.documentKey,this.arrayValue,r)}}function ps(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=KS(t.arrayValue,e.arrayValue),n!==0?n:(n=KS(t.directionalValue,e.directionalValue),n!==0?n:J.comparator(t.documentKey,e.documentKey)))}function KS(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e){this.Yt=new je((n,r)=>rt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(se(e.collectionGroup===this.collectionId),this.en)return!1;const n=Sy(e);if(n!==void 0&&!this.nn(n))return!1;const r=So(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.rn(a,l)||!this.sn(this.Zt[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.Zt.length||!this.sn(this.Zt[o++],a))return!1}return!0}on(){if(this.en)return null;let e=new je(rt.comparator);const n=[];for(const r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Af(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Af(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Af(r.field,r.dir==="asc"?0:1)));return new _p(_p.UNKNOWN_ID,this.collectionId,n,Th.empty())}nn(e){for(const n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(t){var e,n;if(se(t instanceof Re||t instanceof Ve),t instanceof Re){if(t instanceof c1){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>Re.create(t.field,"==",s)))||[];return Ve.create(i,"or")}return t}const r=t.filters.map(i=>H1(i));return Ve.create(r,t.op)}function s$(t){if(t.getFilters().length===0)return[];const e=Uy(H1(t));return se(G1(e)),Vy(e)||Fy(e)?[e]:e.getFilters()}function Vy(t){return t instanceof Re}function Fy(t){return t instanceof Ve&&eE(t)}function G1(t){return Vy(t)||Fy(t)||function(n){if(n instanceof Ve&&by(n)){for(const r of n.getFilters())if(!Vy(r)&&!Fy(r))return!1;return!0}return!1}(t)}function Uy(t){if(se(t instanceof Re||t instanceof Ve),t instanceof Re)return t;if(t.filters.length===1)return Uy(t.filters[0]);const e=t.filters.map(r=>Uy(r));let n=Ve.create(e,t.op);return n=Ip(n),G1(n)?n:(se(n instanceof Ve),se(Gl(n)),se(n.filters.length>1),n.filters.reduce((r,i)=>cE(r,i)))}function cE(t,e){let n;return se(t instanceof Re||t instanceof Ve),se(e instanceof Re||e instanceof Ve),n=t instanceof Re?e instanceof Re?function(i,s){return Ve.create([i,s],"and")}(t,e):YS(t,e):e instanceof Re?YS(e,t):function(i,s){if(se(i.filters.length>0&&s.filters.length>0),Gl(i)&&Gl(s))return a1(i,s.getFilters());const o=by(i)?i:s,a=by(i)?s:i,l=o.filters.map(c=>cE(c,a));return Ve.create(l,"or")}(t,e),Ip(n)}function YS(t,e){if(Gl(e))return a1(e,t.getFilters());{const n=e.filters.map(r=>cE(t,r));return Ve.create(n,"or")}}function Ip(t){if(se(t instanceof Re||t instanceof Ve),t instanceof Re)return t;const e=t.getFilters();if(e.length===1)return Ip(e[0]);if(s1(t))return t;const n=e.map(i=>Ip(i)),r=[];return n.forEach(i=>{i instanceof Re?r.push(i):i instanceof Ve&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ve.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o${constructor(){this._n=new hE}addToCollectionParentIndex(e,n){return this._n.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(cr.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(cr.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class hE{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new je(Se.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new je(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd=new Uint8Array(0);class a${constructor(e,n){this.databaseId=n,this.an=new hE,this.un=new uo(r=>sa(r),(r,i)=>Xh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});const s={collectionId:r,parent:On(i)};return JS(e).put(s)}return O.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[zk(n),""],!1,!0);return JS(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(ai(o.parent))}return r})}addFieldIndex(e,n){const r=ic(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=$a(e);return s.next(a=>{o.put($S(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=ic(e),i=$a(e),s=qa(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=ic(e),r=qa(e),i=$a(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return O.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new QS(r).on();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=qa(e);let i=!0;const s=new Map;return O.forEach(this.cn(n),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=_e();const a=[];return O.forEach(s,(l,c)=>{W("IndexedDbIndexManager",`Using index ${function(T){return`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(k=>`${k.fieldPath}:${k.kind}`).join(",")}`}(l)} to execute ${sa(n)}`);const h=function(T,k){const F=Sy(k);if(F===void 0)return null;for(const j of vp(T,F.fieldPath))switch(j.op){case"array-contains-any":return j.value.arrayValue.values||[];case"array-contains":return[j.value]}return null}(c,l),d=function(T,k){const F=new Map;for(const j of So(k))for(const g of vp(T,j.fieldPath))switch(g.op){case"==":case"in":F.set(j.fieldPath.canonicalString(),g.value);break;case"not-in":case"!=":return F.set(j.fieldPath.canonicalString(),g.value),Array.from(F.values())}return null}(c,l),p=function(T,k){const F=[];let j=!0;for(const g of So(k)){const v=g.kind===0?bS(T,g.fieldPath,T.startAt):kS(T,g.fieldPath,T.startAt);F.push(v.value),j&&(j=v.inclusive)}return new Ys(F,j)}(c,l),_=function(T,k){const F=[];let j=!0;for(const g of So(k)){const v=g.kind===0?kS(T,g.fieldPath,T.endAt):bS(T,g.fieldPath,T.endAt);F.push(v.value),j&&(j=v.inclusive)}return new Ys(F,j)}(c,l),y=this.hn(l,c,p),E=this.hn(l,c,_),P=this.Pn(l,c,d),S=this.In(l.indexId,h,y,p.inclusive,E,_.inclusive,P);return O.forEach(S,I=>r.G(I,n.limit).next(T=>{T.forEach(k=>{const F=J.fromSegments(k.documentKey);o.has(F)||(o=o.add(F),a.push(F))})}))}).next(()=>a)}return O.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=s$(Ve.create(e.filters,"and")).map(r=>Ny(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),c=l/(n!=null?n.length:1),h=[];for(let d=0;d<l;++d){const p=n?this.Tn(n[d/c]):Xd,_=this.En(e,p,r[d%c],i),y=this.dn(e,p,s[d%c],o),E=a.map(P=>this.En(e,p,P,!0));h.push(...this.createRange(_,y,E))}return h}En(e,n,r,i){const s=new bo(e,J.empty(),n,r);return i?s:s.Jt()}dn(e,n,r,i){const s=new bo(e,J.empty(),n,r);return i?s.Jt():s}ln(e,n){const r=new QS(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.cn(n);return O.forEach(i,s=>this.ln(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new je(rt.comparator),h=!1;for(const d of l.filters)for(const p of d.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?h=!0:c=c.add(p.field));for(const d of l.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(e,n){const r=new rc;for(const i of So(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Ht(i.kind);Po.bt.Pt(s,o)}return r.Wt()}Tn(e){const n=new rc;return Po.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){const r=new rc;return Po.bt.Pt(ia(this.databaseId,n),r.Ht(function(s){const o=So(s);return o.length===0?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let i=[];i.push(new rc);let s=0;for(const o of So(e)){const a=r[s++];for(const l of i)if(this.Vn(n,o.fieldPath)&&Ch(a))i=this.mn(i,o,a);else{const c=l.Ht(o.kind);Po.bt.Pt(a,c)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new rc;l.seed(a.Wt()),Po.bt.Pt(o,l.Ht(n.kind)),s.push(l)}return s}Vn(e,n){return!!e.filters.find(r=>r instanceof Re&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=ic(e),i=$a(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const o=[];return O.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(h,d){const p=d?new Th(d.sequenceNumber,new cr(ua(d.readTime),new J(ai(d.documentKey)),d.largestBatchId)):Th.empty(),_=h.fields.map(([y,E])=>new Af(rt.fromServerFormat(y),E));return new _p(h.indexId,h.collectionGroup,_,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:me(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=ic(e),s=$a(e);return this.gn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>O.forEach(a,l=>s.put($S(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return O.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?O.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),O.forEach(a,l=>this.pn(e,i,l).next(c=>{const h=this.yn(s,l);return c.isEqual(h)?O.resolve():this.wn(e,s,l,c,h)}))))})}Sn(e,n,r,i){return qa(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return qa(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){const i=qa(e);let s=new je(ps);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(o,a)=>{s=s.add(new bo(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,n){let r=new je(ps);const i=this.An(n,e);if(i==null)return r;const s=Sy(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Ch(o))for(const a of o.arrayValue.values||[])r=r.add(new bo(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new bo(n.indexId,e.key,Xd,i));return r}wn(e,n,r,i,s){W("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,c,h,d,p){const _=l.getIterator(),y=c.getIterator();let E=za(_),P=za(y);for(;E||P;){let S=!1,I=!1;if(E&&P){const T=h(E,P);T<0?I=!0:T>0&&(S=!0)}else E!=null?I=!0:S=!0;S?(d(P),P=za(y)):I?(p(E),E=za(_)):(E=za(_),P=za(y))}}(i,s,ps,a=>{o.push(this.Sn(e,n,r,a))},a=>{o.push(this.bn(e,n,r,a))}),O.waitFor(o)}gn(e){let n=1;return $a(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>ps(o,a)).filter((o,a,l)=>!a||ps(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=ps(o,e),l=ps(o,n);if(a===0)i[0]=e.Jt();else if(a>0&&l<0)i.push(o),i.push(o.Jt());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Xd,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Xd,[]];s.push(IDBKeyRange.bound(a,l))}return s}Dn(e,n){return ps(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(XS)}getMinOffset(e,n){return O.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||ne())).next(XS)}}function JS(t){return en(t,"collectionParents")}function qa(t){return en(t,"indexEntries")}function ic(t){return en(t,"indexConfiguration")}function $a(t){return en(t,"indexState")}function XS(t){se(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;Jw(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new cr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class zn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new zn(e,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},(h,d,p)=>(a++,p.delete()));s.push(l.next(()=>{se(a===1)}));const c=[];for(const h of n.mutations){const d=Qk(e,h.key.path,n.batchId);s.push(i.delete(d)),c.push(h.key)}return O.waitFor(s).next(()=>c)}function Tp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ne();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn.DEFAULT_COLLECTION_PERCENTILE=10,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zn.DEFAULT=new zn(41943040,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zn.DISABLED=new zn(-1,0,0);class Rm{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){se(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Rm(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ms(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Xa(e),o=ms(e);return o.add({}).next(a=>{se(typeof a=="number");const l=new iE(a,n,r,i),c=function(_,y,E){const P=E.baseMutations.map(I=>kh(_.ct,I)),S=E.mutations.map(I=>kh(_.ct,I));return{userId:y,batchId:E.batchId,localWriteTimeMs:E.localWriteTime.toMillis(),baseMutations:P,mutations:S}}(this.serializer,this.userId,l),h=[];let d=new je((p,_)=>me(p.canonicalString(),_.canonicalString()));for(const p of i){const _=Qk(this.userId,p.key.path,a);d=d.add(p.key.path.popLast()),h.push(o.put(c)),h.push(s.put(_,Qz))}return d.forEach(p=>{h.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Cn[a]=l.keys()}),O.waitFor(h).next(()=>l)})}lookupMutationBatch(e,n){return ms(e).get(n).next(r=>r?(se(r.userId===this.userId),Co(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?O.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ms(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(se(a.batchId>=r),s=Co(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ms(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ms(e).U("userMutationsIndex",n).next(r=>r.map(i=>Co(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Cf(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Xa(e).J({range:i},(o,a,l)=>{const[c,h,d]=o,p=ai(h);if(c===this.userId&&n.path.isEqual(p))return ms(e).get(d).next(_=>{if(!_)throw ne();se(_.userId===this.userId),s.push(Co(this.serializer,_))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new je(me);const i=[];return n.forEach(s=>{const o=Cf(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Xa(e).J({range:a},(c,h,d)=>{const[p,_,y]=c,E=ai(_);p===this.userId&&s.path.isEqual(E)?r=r.add(y):d.done()});i.push(l)}),O.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Cf(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new je(me);return Xa(e).J({range:o},(l,c,h)=>{const[d,p,_]=l,y=ai(p);d===this.userId&&r.isPrefixOf(y)?y.length===i&&(a=a.add(_)):h.done()}).next(()=>this.Fn(e,a))}Fn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(ms(e).get(s).next(o=>{if(o===null)throw ne();se(o.userId===this.userId),r.push(Co(this.serializer,o))}))}),O.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return K1(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),O.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return O.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Xa(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=ai(s[1]);i.push(l)}else a.done()}).next(()=>{se(i.length===0)})})}containsKey(e,n){return Q1(e,this.userId,n)}xn(e){return Y1(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Q1(t,e,n){const r=Cf(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Xa(t).J({range:s,H:!0},(a,l,c)=>{const[h,d,p]=a;h===e&&d===i&&(o=!0),c.done()}).next(()=>o)}function ms(t){return en(t,"mutations")}function Xa(t){return en(t,"documentMutations")}function Y1(t){return en(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new ca(0)}static Ln(){return new ca(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l${constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new ca(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>ae.fromTimestamp(new st(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Wa(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(se(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Wa(e).J((o,a)=>{const l=Tc(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>O.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Wa(e).J((r,i)=>{const s=Tc(i);n(s)})}Bn(e){return eR(e).get("targetGlobalKey").next(n=>(se(n!==null),n))}kn(e,n){return eR(e).put("targetGlobalKey",n)}qn(e,n){return Wa(e).put(W1(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=sa(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Wa(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=Tc(a);Xh(n,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Ts(e);return n.forEach(o=>{const a=On(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),O.waitFor(i)}removeMatchingKeys(e,n,r){const i=Ts(e);return O.forEach(n,s=>{const o=On(s.path);return O.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Ts(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Ts(e);let s=_e();return i.J({range:r,H:!0},(o,a,l)=>{const c=ai(o[1]),h=new J(c);s=s.add(h)}).next(()=>s)}containsKey(e,n){const r=On(n.path),i=IDBKeyRange.bound([r],[zk(r)],!1,!0);let s=0;return Ts(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ot(e,n){return Wa(e).get(n).next(r=>r?Tc(r):null)}}function Wa(t){return en(t,"targets")}function eR(t){return en(t,"targetGlobal")}function Ts(t){return en(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR([t,e],[n,r]){const i=me(t,n);return i===0?me(e,r):i}class u${constructor(e){this.Kn=e,this.buffer=new je(tR),this.$n=0}Un(){return++this.$n}Wn(e){const n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();tR(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class c${constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){W("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){lo(n)?W("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await ao(n)}await this.zn(3e5)})}}class h${constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return O.resolve(Wn.oe);const r=new u$(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(ZS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ZS):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,s,o,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),Ka()<=ve.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function d$(t,e){return new h$(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f${constructor(e,n){this.db=e,this.garbageCollector=d$(this,n)}Hn(e){const n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return Zd(e,r)}removeReference(e,n,r){return Zd(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Zd(e,n)}er(e,n){return function(i,s){let o=!1;return Y1(i).Y(a=>Q1(i,a,s).next(l=>(l&&(o=!0),O.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,a)=>{if(a<=n){const l=this.er(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ae.min()),Ts(e).delete(function(d){return[0,On(d.path)]}(o))))});i.push(l)}}).next(()=>O.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Zd(e,n)}Xn(e,n){const r=Ts(e);let i,s=Wn.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==Wn.oe&&n(new J(ai(i)),s),s=c,i=l):s=Wn.oe}).next(()=>{s!==Wn.oe&&n(new J(ai(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Zd(t,e){return Ts(t).put(function(r,i){return{targetId:0,path:On(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(){this.changes=new uo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ye.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p${constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return wo(e).put(r)}removeEntry(e,n,r){return wo(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Ep(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=Ye.newInvalidDocument(n);return wo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(sc(n))},(i,s)=>{r=this.nr(n,s)}).next(()=>r)}rr(e,n){let r={size:0,document:Ye.newInvalidDocument(n)};return wo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(sc(n))},(i,s)=>{r={document:this.nr(n,s),size:Tp(s)}}).next(()=>r)}getEntries(e,n){let r=Gn();return this.ir(e,n,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,n){let r=Gn(),i=new ft(J.comparator);return this.ir(e,n,(s,o)=>{const a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,Tp(o))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return O.resolve();let i=new je(iR);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(sc(i.first()),sc(i.last())),o=i.getIterator();let a=o.getNext();return wo(e).J({index:"documentKeyIndex",range:s},(l,c,h)=>{const d=J.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&iR(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?h.$(sc(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Ep(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return wo(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let h=Gn();for(const d of c){const p=this.nr(J.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);p.isFoundDocument()&&(ed(n,p)||i.has(p.key))&&(h=h.insert(p.key,p))}return h})}getAllFromCollectionGroup(e,n,r,i){let s=Gn();const o=rR(n,r),a=rR(n,cr.max());return wo(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,h)=>{const d=this.nr(J.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(d.key,d),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new m$(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return nR(e).get("remoteDocumentGlobalKey").next(n=>(se(!!n),n))}tr(e,n){return nR(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){const r=Zq(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ae.min())))return r}return Ye.newInvalidDocument(e)}}function X1(t){return new p$(t)}class m$ extends J1{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new uo(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new je((s,o)=>me(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(n.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=zS(this.ar.serializer,o);i=i.add(s.path.popLast());const c=Tp(l);r+=c-a.size,n.push(this.ar.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=zS(this.ar.serializer,o.convertToNoDocument(ae.min()));n.push(this.ar.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.ar.updateMetadata(e,r)),O.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function nR(t){return en(t,"remoteDocumentGlobal")}function wo(t){return en(t,"remoteDocumentsV14")}function sc(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function rR(t,e){const n=e.documentKey.path.toArray();return[t,Ep(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function iR(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=me(n[s],r[s]),i)return i;return i=me(n.length,r.length),i||(i=me(n[n.length-2],r[r.length-2]),i||me(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g${constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Bc(r.mutation,i,Hn.empty(),st.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,_e()).next(()=>r))}getLocalViewOfDocuments(e,n,r=_e()){const i=li();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ec();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=li();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,_e()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Gn();const o=Uc(),a=function(){return Uc()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof Xi)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Bc(h.mutation,c,h.mutation.getFieldMask(),st.now())):o.set(c.key,Hn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new g$(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Uc();let i=new ft((o,a)=>o-a),s=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Hn.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(i.get(a.batchId)||_e()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=_1();h.forEach(p=>{if(!s.has(p)){const _=R1(n.get(p),r.get(p));_!==null&&d.set(p,_),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):tE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):O.resolve(li());let a=-1,l=s;return o.next(c=>O.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,_e())).next(h=>({batchId:a,changes:g1(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let i=Ec();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ec();return this.indexManager.getCollectionParents(e,s).next(a=>O.forEach(a,l=>{const c=function(d,p){return new Ji(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Ye.newInvalidDocument(h)))});let a=Ec();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&Bc(h.mutation,c,Hn.empty(),st.now()),ed(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _${constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return O.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ct(i.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:uE(i.bundledQuery),readTime:Ct(i.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y${constructor(){this.overlays=new ft(J.comparator),this.hr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=li();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const i=li(),s=n.length+1,o=new J(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ft((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=li(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=li(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return O.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new oE(n,r));let s=this.hr.get(n);s===void 0&&(s=_e(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(){this.Pr=new je(Wt.Ir),this.Tr=new je(Wt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new Wt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Wt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new J(new Se([])),r=new Wt(n,e),i=new Wt(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new J(new Se([])),r=new Wt(n,e),i=new Wt(n,e+1);let s=_e();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Wt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Wt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return J.comparator(e.key,n.key)||me(e.pr,n.pr)}static Er(e,n){return me(e.pr,n.pr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v${constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new je(Wt.Ir)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new iE(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Wt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Wt(n,0),i=new Wt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new je(me);return n.forEach(i=>{const s=new Wt(i,0),o=new Wt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),O.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;J.isDocumentKey(s)||(s=s.child(""));const o=new Wt(new J(s),0);let a=new je(me);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),O.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){se(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return O.forEach(n.mutations,i=>{const s=new Wt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new Wt(n,0),i=this.wr.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w${constructor(e){this.vr=e,this.docs=function(){return new ft(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():Ye.newInvalidDocument(n))}getEntries(e,n){let r=Gn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ye.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Gn();const o=n.path,a=new J(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Jw($k(h),r)<=0||(i.has(h.key)||ed(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ne()}Fr(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new E$(this)}getSize(e){return O.resolve(this.size)}}class E$ extends J1{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I${constructor(e){this.persistence=e,this.Mr=new uo(n=>sa(n),Xh),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Or=0,this.Nr=new dE,this.targetCount=0,this.Lr=ca.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),O.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new ca(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.qn(n),O.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,n){this.Br={},this.overlays={},this.kr=new Wn(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new I$(this),this.indexManager=new o$,this.remoteDocumentCache=function(i){return new w$(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new $1(n),this.$r=new _$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new y$,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new v$(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const i=new T$(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return O.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class T$ extends Hk{constructor(e){super(),this.currentSequenceNumber=e}}class Am{constructor(e){this.persistence=e,this.zr=new dE,this.jr=null}static Hr(e){return new Am(e)}get Jr(){if(this.jr)return this.jr;throw ne()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),O.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Jr,r=>{const i=J.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,ae.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return O.or([()=>O.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S${constructor(e){this.serializer=e}O(e,n,r,i){const s=new wm("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vS,{unique:!0}),l.createObjectStore("documentMutations")}(e),sR(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=O.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),sR(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ae.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(h=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vS,{unique:!0});const d=c.store("mutations"),p=h.map(_=>d.put(_));return O.waitFor(p)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:aq});c.createIndex("collectionPathOverlayIndex",lq,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",uq,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:Yz});c.createIndex("documentKeyIndex",Jz),c.createIndex("collectionGroupIndex",Xz)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:rq}).createIndex("sequenceNumberIndex",iq,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:sq}).createIndex("documentKeyIndex",oq,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),o}ei(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=Tp(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>O.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>O.forEach(a,l=>{se(l.userId===s.userId);const c=Co(this.serializer,l);return K1(e,s.userId,c).next(()=>{})}))}))}ti(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new Se(o),c=function(d){return[0,On(d)]}(l);s.push(n.get(c).next(h=>h?O.resolve():(d=>n.put({targetId:0,path:On(d),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>O.waitFor(s))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:nq});const r=n.store("collectionParents"),i=new hE,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:On(l)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new Se(o);return s(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,l],c)=>{const h=ai(a);return s(h.popLast())}))}ri(e){const n=e.store("targets");return n.J((r,i)=>{const s=Tc(i),o=W1(this.serializer,s);return n.put(o)})}ii(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=n.store("remoteDocumentsV14"),l=function(d){return d.document?new J(Se.fromString(d.document.name).popFirst(5)):d.noDocument?J.fromSegments(d.noDocument.path):d.unknownDocument?J.fromSegments(d.unknownDocument.path):ne()}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>O.waitFor(i))}si(e,n){const r=n.store("mutations"),i=X1(this.serializer),s=new eN(Am.Hr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let h=(c=a.get(l.userId))!==null&&c!==void 0?c:_e();Co(this.serializer,l).keys().forEach(d=>h=h.add(d)),a.set(l.userId,h)}),O.forEach(a,(l,c)=>{const h=new Gt(c),d=Sm.lt(this.serializer,h),p=s.getIndexManager(h),_=Rm.lt(h,this.serializer,p,s.referenceDelegate);return new Z1(i,_,d,p).recalculateAndSaveOverlaysForDocumentKeys(new Ry(n,Wn.oe),l).next()})})}}function sR(t){t.createObjectStore("targetDocuments",{keyPath:eq}).createIndex("documentTargetsIndex",tq,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Zz,{unique:!0}),t.createObjectStore("targetGlobal")}const Yg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class fE{constructor(e,n,r,i,s,o,a,l,c,h,d=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=c,this.ai=h,this.ui=d,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=p=>Promise.resolve(),!fE.D())throw new $(M.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new f$(this,i),this.Ti=n+"main",this.serializer=new $1(l),this.Ei=new di(this.Ti,this.ui,new S$(this.serializer)),this.Qr=new l$(this.referenceDelegate,this.serializer),this.remoteDocumentCache=X1(this.serializer),this.$r=new e$,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,h===!1&&At("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new $(M.FAILED_PRECONDITION,Yg);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Wn(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(async()=>{this.started&&await this.Ai()}))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ef(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(lo(e))return W("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return W("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return oc(e).get("owner").next(n=>O.resolve(this.Si(n)))}bi(e){return ef(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=en(n,"clientMetadata");return r.U().next(i=>{const s=this.vi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return O.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.di)for(const n of e)this.di.removeItem(this.Fi(n.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?O.resolve(!0):oc(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new $(M.FAILED_PRECONDITION,Yg);return!1}}return!(!this.networkEnabled||!this.inForeground)||ef(e).U().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&W("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new Ry(e,Wn.oe);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>ef(e).U().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return Rm.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new a$(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Sm.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){W("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===16?hq:l===15?Zk:l===14?Xk:l===13?Jk:l===12?cq:l===11?Yk:void ne()}(this.ui);let o;return this.Ei.runTransaction(e,i,s,a=>(o=new Ry(a,this.kr?this.kr.next():Wn.oe),n==="readwrite-primary"?this.gi(o).next(l=>!!l||this.pi(o)).next(l=>{if(!l)throw At(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new $(M.FAILED_PRECONDITION,Wk);return r(o)}).next(l=>this.wi(o).next(()=>l)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return oc(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new $(M.FAILED_PRECONDITION,Yg)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return oc(e).put("owner",n)}static D(){return di.D()}yi(e){const n=oc(e);return n.get("owner").next(r=>this.Si(r)?(W("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):O.resolve())}Ci(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(At(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;vb()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{const r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return W("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return At("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){At("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function oc(t){return en(t,"owner")}function ef(t){return en(t,"clientMetadata")}function pE(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=_e(),i=_e();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new mE(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return vb()?8:Gk(ot())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new R$;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Ka()<=ve.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Qa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),O.resolve()):(Ka()<=ve.DEBUG&&W("QueryEngine","Query:",Qa(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Ka()<=ve.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Qa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ln(n))):O.resolve())}ji(e,n){if(NS(n))return O.resolve(null);let r=Ln(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=wp(n,null,"F"),r=Ln(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=_e(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(e,wp(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,i){return NS(n)||i.isEqual(ae.min())?O.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?O.resolve(null):(Ka()<=ve.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Qa(n)),this.es(e,o,n,qk(i,-1)).next(a=>a))})}Zi(e,n){let r=new je(p1(e));return n.forEach((i,s)=>{ed(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return Ka()<=ve.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Qa(n)),this.zi.getDocumentsMatchingQuery(e,n,cr.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A${constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new ft(me),this.rs=new uo(s=>sa(s),Xh),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Z1(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function nN(t,e,n,r){return new A$(t,e,n,r)}async function rN(t,e){const n=X(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=_e();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function C$(t,e){const n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,p=d.keys();let _=O.resolve();return p.forEach(y=>{_=_.next(()=>h.getEntry(l,y)).next(E=>{const P=c.docVersions.get(y);se(P!==null),E.version.compareTo(P)<0&&(d.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),h.addEntry(E)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=_e();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function iN(t){const e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function P$(t,e){const n=X(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((h,d)=>{const p=i.get(d);if(!p)return;a.push(n.Qr.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(s,h.addedDocuments,d)));let _=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?_=_.withResumeToken(zt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(d,_),function(E,P,S){return E.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(p,_,h)&&a.push(n.Qr.updateTargetData(s,_))});let l=Gn(),c=_e();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(sN(s,o,e.documentUpdates).next(h=>{l=h.cs,c=h.ls})),!r.isEqual(ae.min())){const h=n.Qr.getLastRemoteSnapshotVersion(s).next(d=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return O.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.ns=i,s))}function sN(t,e,n){let r=_e(),i=_e();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Gn();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ae.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):W("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:i}})}function b$(t,e){const n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Jl(t,e){const n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Oi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function Xl(t,e,n){const r=X(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!lo(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function Sp(t,e,n){const r=X(t);let i=ae.min(),s=_e();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=X(l),p=d.rs.get(h);return p!==void 0?O.resolve(d.ns.get(p)):d.Qr.getTargetData(c,h)}(r,o,Ln(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:ae.min(),n?s:_e())).next(a=>(lN(r,f1(e),a),{documents:a,hs:s})))}function oN(t,e){const n=X(t),r=X(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function aN(t,e){const n=X(t),r=n.ss.get(e)||ae.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,qk(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(lN(n,e,i),i))}function lN(t,e,n){let r=t.ss.get(e)||ae.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}async function k$(t,e,n,r){const i=X(t);let s=_e(),o=Gn();for(const c of n){const h=e.Ps(c.metadata.name);c.document&&(s=s.add(h));const d=e.Is(c);d.setReadTime(e.Ts(c.metadata.readTime)),o=o.insert(h,d)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=await Jl(i,function(h){return Ln(gu(Se.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>sN(c,a,o).next(h=>(a.apply(c),h)).next(h=>i.Qr.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Qr.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,h.cs,h.ls)).next(()=>h.cs)))}async function N$(t,e,n=_e()){const r=await Jl(t,Ln(uE(e.bundledQuery))),i=X(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Ct(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(s,e);const a=r.withResumeToken(zt.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(s,a).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,n,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})}function oR(t,e){return`firestore_clients_${t}_${e}`}function aR(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Jg(t,e){return`firestore_targets_${t}_${e}`}class Rp{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new $(i.error.code,i.error.message))),o?new Rp(e,n,i.state,s):(At("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jc{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new $(r.error.code,r.error.message))),s?new jc(e,r.state,i):(At("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ap{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=nE();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=Kk(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Ap(e,s):(At("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class gE{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new gE(n.clientId,n.onlineState):(At("SharedClientState",`Failed to parse online state: ${e}`),null)}}class By{constructor(){this.activeTargetIds=nE()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Xg{constructor(e,n,r,i,s){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new ft(me),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=oR(this.persistenceKey,this.Vs),this.Ss=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new By),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Fs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const r of e){if(r===this.Vs)continue;const i=this.getItem(oR(this.persistenceKey,r));if(i){const s=Ap.Es(r,i);s&&(this.ps=this.ps.insert(s.clientId,s))}}this.Ms();const n=this.storage.getItem(this.vs);if(n){const r=this.xs(n);r&&this.Os(r)}for(const r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,r){this.Ls(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Jg(this.persistenceKey,e));if(r){const i=jc.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Jg(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return W("SharedClientState","READ",e,n),n}setItem(e,n){W("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){W("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const n=e;if(n.storageArea===this.storage){if(W("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void At("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){const r=this.$s(n.key);return this.Us(r,null)}{const r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){const r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){const r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){const r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){const r=function(s){let o=Wn.oe;if(s!=null)try{const a=JSON.parse(s);se(typeof a=="number"),o=a}catch(a){At("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Wn.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){const r=this.Js(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(n)})}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,r){const i=new Rp(this.currentUser,e,n,r),s=aR(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Bs(e){const n=aR(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){const n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){const i=Jg(this.persistenceKey,e),s=new jc(e,n,r);this.setItem(i,s.ds())}Ks(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){const n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){const r=this.$s(e);return Ap.Es(r,n)}Gs(e,n){const r=this.Ds.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Rp.Es(new Gt(s),i,n)}js(e,n){const r=this.Cs.exec(e),i=Number(r[1]);return jc.Es(i,n)}xs(e){return gE.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);W("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){const r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=nE();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class uN{constructor(){this.no=new By,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new By,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x${io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tf=null;function Zg(){return tf===null?tf=function(){return 268435456+Math.round(2147483648*Math.random())}():tf++,"0x"+tf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O${constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn="WebChannelConnection";class L$ extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=Zg(),l=this.vo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,s,o),this.Mo(n,l,c,i).then(h=>(W("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Qr("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+mu}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=D$[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){const s=Zg();return new Promise((o,a)=>{const l=new Ok;l.setWithCredentials(!0),l.listenOnce(Mk.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Rf.NO_ERROR:const h=l.getResponseJson();W(yn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Rf.TIMEOUT:W(yn,`RPC '${e}' ${s} timed out`),a(new $(M.DEADLINE_EXCEEDED,"Request time out"));break;case Rf.HTTP_ERROR:const d=l.getStatus();if(W(yn,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const _=p==null?void 0:p.error;if(_&&_.status&&_.message){const y=function(P){const S=P.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(S)>=0?S:M.UNKNOWN}(_.status);a(new $(y,_.message))}else a(new $(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new $(M.UNAVAILABLE,"Connection failed."));break;default:ne()}}finally{W(yn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);W(yn,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Oo(e,n,r){const i=Zg(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Uk(),a=Fk(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new Lk({})),this.Fo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");W(yn,`Creating RPC '${e}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);let p=!1,_=!1;const y=new O$({lo:P=>{_?W(yn,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(p||(W(yn,`Opening RPC '${e}' stream ${i} transport.`),d.open(),p=!0),W(yn,`RPC '${e}' stream ${i} sending:`,P),d.send(P))},ho:()=>d.close()}),E=(P,S,I)=>{P.listen(S,T=>{try{I(T)}catch(k){setTimeout(()=>{throw k},0)}})};return E(d,wc.EventType.OPEN,()=>{_||(W(yn,`RPC '${e}' stream ${i} transport opened.`),y.mo())}),E(d,wc.EventType.CLOSE,()=>{_||(_=!0,W(yn,`RPC '${e}' stream ${i} transport closed`),y.po())}),E(d,wc.EventType.ERROR,P=>{_||(_=!0,Qr(yn,`RPC '${e}' stream ${i} transport errored:`,P),y.po(new $(M.UNAVAILABLE,"The operation could not be completed")))}),E(d,wc.EventType.MESSAGE,P=>{var S;if(!_){const I=P.data[0];se(!!I);const T=I,k=T.error||((S=T[0])===null||S===void 0?void 0:S.error);if(k){W(yn,`RPC '${e}' stream ${i} received error:`,k);const F=k.status;let j=function(R){const A=kt[R];if(A!==void 0)return P1(A)}(F),g=k.message;j===void 0&&(j=M.INTERNAL,g="Unknown error status: "+F+" with message "+k.message),_=!0,y.po(new $(j,g)),d.close()}else W(yn,`RPC '${e}' stream ${i} received:`,I),y.yo(I)}}),E(a,Vk.STAT_EVENT,P=>{P.stat===Ty.PROXY?W(yn,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===Ty.NOPROXY&&W(yn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.fo()},0),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(){return typeof window<"u"?window:null}function xf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(t){return new qq(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,n,r,i,s,o,a,l){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new _E(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(At(n.toString()),At("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(n)}__(){}auth(){this.state=1;const e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{const i=new $(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){const r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class M$ extends hN{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();const n=Hq(this.serializer,e),r=function(s){if(!("targetChange"in s))return ae.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?Ct(o.readTime):ae.min()}(e);return this.listener.h_(n,r)}P_(e){const n={};n.database=Ly(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=yp(l)?{documents:F1(s,l)}:{query:U1(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=x1(s,o.resumeToken);const c=Dy(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=Yl(s,o.snapshotVersion.toTimestamp());const c=Dy(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Kq(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){const n={};n.database=Ly(this.serializer),n.removeTarget=e,this.i_(n)}}class V$ extends hN{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(se(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const n=Gq(e.writeResults,e.commitTime),r=Ct(e.commitTime);return this.listener.A_(r,n)}return se(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=Ly(this.serializer),this.i_(e)}d_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>kh(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F$ extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new $(M.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,Oy(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(M.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,Oy(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(M.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class U${constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(At(n),this.y_=!1):W("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B${constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{co(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=X(l);c.M_.add(4),await vu(c),c.N_.set("Unknown"),c.M_.delete(4),await sd(c)}(this))})}),this.N_=new U$(r,i)}}async function sd(t){if(co(t))for(const e of t.x_)await e(!0)}async function vu(t){for(const e of t.x_)await e(!1)}function Cm(t,e){const n=X(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),wE(n)?vE(n):Eu(n).Xo()&&yE(n,e))}function Zl(t,e){const n=X(t),r=Eu(n);n.F_.delete(e),r.Xo()&&dN(n,e),n.F_.size===0&&(r.Xo()?r.n_():co(n)&&n.N_.set("Unknown"))}function yE(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Eu(t).P_(e)}function dN(t,e){t.L_.xe(e),Eu(t).I_(e)}function vE(t){t.L_=new Uq({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Eu(t).start(),t.N_.w_()}function wE(t){return co(t)&&!Eu(t).Zo()&&t.F_.size>0}function co(t){return X(t).M_.size===0}function fN(t){t.L_=void 0}async function j$(t){t.N_.set("Online")}async function z$(t){t.F_.forEach((e,n)=>{yE(t,e)})}async function q$(t,e){fN(t),wE(t)?(t.N_.D_(e),vE(t)):t.N_.set("Unknown")}async function $$(t,e,n){if(t.N_.set("Online"),e instanceof N1&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Cp(t,r)}else if(e instanceof Nf?t.L_.Ke(e):e instanceof k1?t.L_.He(e):t.L_.We(e),!n.isEqual(ae.min()))try{const r=await iN(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.F_.get(c);h&&s.F_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.F_.get(l);if(!h)return;s.F_.set(l,h.withResumeToken(zt.EMPTY_BYTE_STRING,h.snapshotVersion)),dN(s,l);const d=new Oi(h.target,l,c,h.sequenceNumber);yE(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await Cp(t,r)}}async function Cp(t,e,n){if(!lo(e))throw e;t.M_.add(1),await vu(t),t.N_.set("Offline"),n||(n=()=>iN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.M_.delete(1),await sd(t)})}function pN(t,e){return e().catch(n=>Cp(t,n,e))}async function wu(t){const e=X(t),n=Js(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;W$(e);)try{const i=await b$(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,H$(e,i)}catch(i){await Cp(e,i)}mN(e)&&gN(e)}function W$(t){return co(t)&&t.v_.length<10}function H$(t,e){t.v_.push(e);const n=Js(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function mN(t){return co(t)&&!Js(t).Zo()&&t.v_.length>0}function gN(t){Js(t).start()}async function G$(t){Js(t).V_()}async function K$(t){const e=Js(t);for(const n of t.v_)e.d_(n.mutations)}async function Q$(t,e,n){const r=t.v_.shift(),i=sE.from(r,e,n);await pN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await wu(t)}async function Y$(t,e){e&&Js(t).E_&&await async function(r,i){if(function(o){return C1(o)&&o!==M.ABORTED}(i.code)){const s=r.v_.shift();Js(r).t_(),await pN(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await wu(r)}}(t,e),mN(t)&&gN(t)}async function uR(t,e){const n=X(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=co(n);n.M_.add(3),await vu(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),await sd(n)}async function jy(t,e){const n=X(t);e?(n.M_.delete(2),await sd(n)):e||(n.M_.add(2),await vu(n),n.N_.set("Unknown"))}function Eu(t){return t.B_||(t.B_=function(n,r,i){const s=X(n);return s.f_(),new M$(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:j$.bind(null,t),To:z$.bind(null,t),Ao:q$.bind(null,t),h_:$$.bind(null,t)}),t.x_.push(async e=>{e?(t.B_.t_(),wE(t)?vE(t):t.N_.set("Unknown")):(await t.B_.stop(),fN(t))})),t.B_}function Js(t){return t.k_||(t.k_=function(n,r,i){const s=X(n);return s.f_(),new V$(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:G$.bind(null,t),Ao:Y$.bind(null,t),R_:K$.bind(null,t),A_:Q$.bind(null,t)}),t.x_.push(async e=>{e?(t.k_.t_(),await wu(t)):(await t.k_.stop(),t.v_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))})),t.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Xt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new EE(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Iu(t,e){if(At("AsyncQueue",`${e}: ${t}`),lo(t))return new $(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=Ec(),this.sortedSet=new ft(this.comparator)}static emptySet(e){return new Al(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Al)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Al;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(){this.q_=new ft(J.comparator)}track(e){const n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):ne():this.q_=this.q_.insert(n,e)}Q_(){const e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}}class eu{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new eu(e,n,Al.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J${constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class X${constructor(){this.queries=new uo(e=>d1(e),Zh),this.onlineState="Unknown",this.z_=new Set}}async function IE(t,e){const n=X(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new J$,r=e.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Iu(o,`Initialization of query '${Qa(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&SE(n)}async function TE(t,e){const n=X(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Z$(t,e){const n=X(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&SE(n)}function e3(t,e,n){const r=X(t),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(e)}function SE(t){t.z_.forEach(e=>{e.next()})}var zy,hR;(hR=zy||(zy={})).J_="default",hR.Cache="cache";class RE{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new eu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=eu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==zy.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(e,n){this.ia=e,this.byteLength=n}sa(){return"metadata"in this.ia}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.serializer=e}Ps(e){return fi(this.serializer,e)}Is(e){return e.metadata.exists?V1(this.serializer,e.document,!1):Ye.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Ct(e)}}class n3{constructor(e,n,r){this.oa=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=_N(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++n;const r=Se.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}aa(e){const n=new Map,r=new dR(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||_e()).add(s);n.set(o,a)}}return n}async complete(){const e=await k$(this.localStore,new dR(this.serializer),this.documents,this.oa.id),n=this.aa(this.documents);for(const r of this.queries)await N$(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}}}function _N(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e){this.key=e}}class vN{constructor(e){this.key=e}}class wN{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=_e(),this.mutatedKeys=_e(),this.Ia=p1(e),this.Ta=new Al(this.Ia)}get Ea(){return this.la}da(e,n){const r=n?n.Aa:new cR,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const p=i.get(h),_=ed(this.query,d)?d:null,y=!!p&&this.mutatedKeys.has(p.key),E=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let P=!1;p&&_?p.data.isEqual(_.data)?y!==E&&(r.track({type:3,doc:_}),P=!0):this.Ra(p,_)||(r.track({type:2,doc:_}),P=!0,(l&&this.Ia(_,l)>0||c&&this.Ia(_,c)<0)&&(a=!0)):!p&&_?(r.track({type:0,doc:_}),P=!0):p&&!_&&(r.track({type:1,doc:p}),P=!0,(l||c)&&(a=!0)),P&&(_?(o=o.add(_),s=E?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((h,d)=>function(_,y){const E=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne()}};return E(_)-E(y)}(h.type,d.type)||this.Ia(h.doc,d.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],l=this.Pa.size===0&&this.current&&!i?1:0,c=l!==this.ha;return this.ha=l,o.length!==0||c?{snapshot:new eu(this.query,e.Ta,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new cR,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=_e(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new vN(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new yN(r))}),n}pa(e){this.la=e.hs,this.Pa=_e();const n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return eu.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class r3{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class i3{constructor(e){this.key=e,this.wa=!1}}class s3{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new uo(a=>d1(a),Zh),this.Da=new Map,this.Ca=new Set,this.va=new ft(J.comparator),this.Fa=new Map,this.Ma=new dE,this.xa={},this.Oa=new Map,this.Na=ca.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function o3(t,e,n=!0){const r=Pm(t);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await EN(r,e,n,!0),i}async function a3(t,e){const n=Pm(t);await EN(n,e,!0,!1)}async function EN(t,e,n,r){const i=await Jl(t.localStore,Ln(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await AE(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Cm(t.remoteStore,i),a}async function AE(t,e,n,r,i){t.Ba=(d,p,_)=>async function(E,P,S,I){let T=P.view.da(S);T.Xi&&(T=await Sp(E.localStore,P.query,!1).then(({documents:g})=>P.view.da(g,T)));const k=I&&I.targetChanges.get(P.targetId),F=I&&I.targetMismatches.get(P.targetId)!=null,j=P.view.applyChanges(T,E.isPrimaryClient,k,F);return qy(E,P.targetId,j.fa),j.snapshot}(t,d,p,_);const s=await Sp(t.localStore,e,!0),o=new wN(e,s.hs),a=o.da(s.documents),l=rd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);qy(t,n,c.fa);const h=new r3(e,n,o);return t.ba.set(e,h),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),c.snapshot}async function l3(t,e,n){const r=X(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!Zh(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Xl(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Zl(r.remoteStore,i.targetId),tu(r,i.targetId)}).catch(ao)):(tu(r,i.targetId),await Xl(r.localStore,i.targetId,!0))}async function u3(t,e){const n=X(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Zl(n.remoteStore,r.targetId))}async function c3(t,e,n){const r=kE(t);try{const i=await function(o,a){const l=X(o),c=st.now(),h=a.reduce((_,y)=>_.add(y.key),_e());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let y=Gn(),E=_e();return l.os.getEntries(_,h).next(P=>{y=P,y.forEach((S,I)=>{I.isValidDocument()||(E=E.add(S))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,y)).next(P=>{d=P;const S=[];for(const I of a){const T=Mq(I,d.get(I.key).overlayedDocument);T!=null&&S.push(new Xi(I.key,T,r1(T.value.mapValue),it.exists(!0)))}return l.mutationQueue.addMutationBatch(_,c,S,a)}).next(P=>{p=P;const S=P.applyToLocalDocumentSet(d,E);return l.documentOverlayCache.saveOverlays(_,P.batchId,S)})}).then(()=>({batchId:p.batchId,changes:g1(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.xa[o.currentUser.toKey()];c||(c=new ft(me)),c=c.insert(a,l),o.xa[o.currentUser.toKey()]=c}(r,i.batchId,n),await Zi(r,i.changes),await wu(r.remoteStore)}catch(i){const s=Iu(i,"Failed to persist write");n.reject(s)}}async function IN(t,e){const n=X(t);try{const r=await P$(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(se(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?se(o.wa):i.removedDocuments.size>0&&(se(o.wa),o.wa=!1))}),await Zi(n,r,e)}catch(r){await ao(r)}}function fR(t,e,n){const r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=X(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const p of d.U_)p.j_(a)&&(c=!0)}),c&&SE(l)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function h3(t,e,n){const r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new ft(J.comparator);o=o.insert(s,Ye.newNoDocument(s,ae.min()));const a=_e().add(s),l=new nd(ae.min(),new Map,new ft(me),o,a);await IN(r,l),r.va=r.va.remove(s),r.Fa.delete(e),bE(r)}else await Xl(r.localStore,e,!1).then(()=>tu(r,e,n)).catch(ao)}async function d3(t,e){const n=X(t),r=e.batch.batchId;try{const i=await C$(n.localStore,e);PE(n,r,null),CE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Zi(n,i)}catch(i){await ao(i)}}async function f3(t,e,n){const r=X(t);try{const i=await function(o,a){const l=X(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(se(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);PE(r,e,n),CE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Zi(r,i)}catch(i){await ao(i)}}async function p3(t,e){const n=X(t);co(n.remoteStore)||W("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=X(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===-1)return void e.resolve();const i=n.Oa.get(r)||[];i.push(e),n.Oa.set(r,i)}catch(r){const i=Iu(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function CE(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function PE(t,e,n){const r=X(t);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function tu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||TN(t,r)})}function TN(t,e){t.Ca.delete(e.path.canonicalString());const n=t.va.get(e);n!==null&&(Zl(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),bE(t))}function qy(t,e,n){for(const r of n)r instanceof yN?(t.Ma.addReference(r.key,e),m3(t,r)):r instanceof vN?(W("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||TN(t,r.key)):ne()}function m3(t,e){const n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(W("SyncEngine","New document in limbo: "+n),t.Ca.add(r),bE(t))}function bE(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){const e=t.Ca.values().next().value;t.Ca.delete(e);const n=new J(Se.fromString(e)),r=t.Na.next();t.Fa.set(r,new i3(n)),t.va=t.va.insert(n,r),Cm(t.remoteStore,new Oi(Ln(gu(n.path)),r,"TargetPurposeLimboResolution",Wn.oe))}}async function Zi(t,e,n){const r=X(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,l)=>{o.push(r.Ba(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient){const h=c&&!c.fromCache;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=mE.Ki(l.targetId,c);s.push(h)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(l,c){const h=X(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>O.forEach(c,p=>O.forEach(p.qi,_=>h.persistence.referenceDelegate.addReference(d,p.targetId,_)).next(()=>O.forEach(p.Qi,_=>h.persistence.referenceDelegate.removeReference(d,p.targetId,_)))))}catch(d){if(!lo(d))throw d;W("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const _=h.ns.get(p),y=_.snapshotVersion,E=_.withLastLimboFreeSnapshotVersion(y);h.ns=h.ns.insert(p,E)}}}(r.localStore,s))}async function g3(t,e){const n=X(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await rN(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(l=>{l.reject(new $(M.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Zi(n,r.us)}}function _3(t,e){const n=X(t),r=n.Fa.get(e);if(r&&r.wa)return _e().add(r.key);{let i=_e();const s=n.Da.get(e);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}async function y3(t,e){const n=X(t),r=await Sp(n.localStore,e.query,!0),i=e.view.pa(r);return n.isPrimaryClient&&qy(n,e.targetId,i.fa),i}async function v3(t,e){const n=X(t);return aN(n.localStore,e).then(r=>Zi(n,r))}async function w3(t,e,n,r){const i=X(t),s=await function(a,l){const c=X(a),h=X(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",d=>h.vn(d,l).next(p=>p?c.localDocuments.getDocuments(d,p):O.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await wu(i.remoteStore):n==="acknowledged"||n==="rejected"?(PE(i,e,r||null),CE(i,e),function(a,l){X(X(a).mutationQueue).Mn(l)}(i.localStore,e)):ne(),await Zi(i,s)):W("SyncEngine","Cannot apply mutation batch with id: "+e)}async function E3(t,e){const n=X(t);if(Pm(n),kE(n),e===!0&&n.La!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await pR(n,r.toArray());n.La=!0,await jy(n.remoteStore,!0);for(const s of i)Cm(n.remoteStore,s)}else if(e===!1&&n.La!==!1){const r=[];let i=Promise.resolve();n.Da.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(tu(n,o),Xl(n.localStore,o,!0))),Zl(n.remoteStore,o)}),await i,await pR(n,r),function(o){const a=X(o);a.Fa.forEach((l,c)=>{Zl(a.remoteStore,c)}),a.Ma.mr(),a.Fa=new Map,a.va=new ft(J.comparator)}(n),n.La=!1,await jy(n.remoteStore,!1)}}async function pR(t,e,n){const r=X(t),i=[],s=[];for(const o of e){let a;const l=r.Da.get(o);if(l&&l.length!==0){a=await Jl(r.localStore,Ln(l[0]));for(const c of l){const h=r.ba.get(c),d=await y3(r,h);d.snapshot&&s.push(d.snapshot)}}else{const c=await oN(r.localStore,o);a=await Jl(r.localStore,c),await AE(r,SN(c),o,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(s),i}function SN(t){return h1(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function I3(t){return function(n){return X(X(n).persistence).Bi()}(X(t).localStore)}async function T3(t,e,n,r){const i=X(t);if(i.La)return void W("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await aN(i.localStore,f1(s[0])),a=nd.createSynthesizedRemoteEventForCurrentChange(e,n==="current",zt.EMPTY_BYTE_STRING);await Zi(i,o,a);break}case"rejected":await Xl(i.localStore,e,!0),tu(i,e,r);break;default:ne()}}async function S3(t,e,n){const r=Pm(t);if(r.La){for(const i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){W("SyncEngine","Adding an already active target "+i);continue}const s=await oN(r.localStore,i),o=await Jl(r.localStore,s);await AE(r,SN(s),o.targetId,!1,o.resumeToken),Cm(r.remoteStore,o)}for(const i of n)r.Da.has(i)&&await Xl(r.localStore,i,!1).then(()=>{Zl(r.remoteStore,i),tu(r,i)}).catch(ao)}}function Pm(t){const e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=IN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=h3.bind(null,e),e.Sa.h_=Z$.bind(null,e.eventManager),e.Sa.ka=e3.bind(null,e.eventManager),e}function kE(t){const e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=d3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=f3.bind(null,e),e}function R3(t,e,n){const r=X(t);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(_,y){const E=X(_),P=Ct(y.createTime);return E.persistence.runTransaction("hasNewerBundle","readonly",S=>E.$r.getBundleMetadata(S,y.id)).then(S=>!!S&&S.createTime.compareTo(P)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(_){return{taskState:"Success",documentsLoaded:_.totalDocuments,bytesLoaded:_.totalBytes,totalDocuments:_.totalDocuments,totalBytes:_.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(_N(l));const c=new n3(l,s.localStore,o.serializer);let h=await o.qa();for(;h;){const p=await c._a(h);p&&a._updateProgress(p),h=await o.qa()}const d=await c.complete();return await Zi(s,d.ca,void 0),await function(_,y){const E=X(_);return E.persistence.runTransaction("Save bundle","readwrite",P=>E.$r.saveBundleMetadata(P,y))}(s.localStore,l),a._completeWith(d.progress),Promise.resolve(d.ua)}catch(l){return Qr("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class $y{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=id(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return nN(this.persistence,new tN,e.initialUser,this.serializer)}createPersistence(e){return new eN(Am.Hr,this.serializer)}createSharedClientState(e){return new uN}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class RN extends $y{constructor(e,n,r){super(),this.Qa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Qa.initialize(this,e),await kE(this.Qa.syncEngine),await wu(this.Qa.remoteStore),await this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return nN(this.persistence,new tN,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new c$(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new Gz(n,this.persistence);return new Hz(e.asyncQueue,r)}createPersistence(e){const n=pE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?zn.withCacheSize(this.cacheSizeBytes):zn.DEFAULT;return new fE(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,cN(),xf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new uN}}class A3 extends RN{constructor(e,n){super(e,n,!1),this.Qa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Qa.syncEngine;this.sharedClientState instanceof Xg&&(this.sharedClientState.syncEngine={Zs:w3.bind(null,n),Xs:T3.bind(null,n),eo:S3.bind(null,n),Bi:I3.bind(null,n),Ys:v3.bind(null,n)},await this.sharedClientState.start()),await this.persistence.fi(async r=>{await E3(this.Qa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=cN();if(!Xg.D(n))throw new $(M.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=pE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Xg(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class NE{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>fR(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=g3.bind(null,this.syncEngine),await jy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new X$}()}createDatastore(e){const n=id(e.databaseInfo.databaseId),r=function(s){return new L$(s)}(e.databaseInfo);return function(s,o,a,l){return new F$(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new B$(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>fR(this.syncEngine,n,0),function(){return lR.D()?new lR:new x$}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const d=new s3(i,s,o,a,l,c);return h&&(d.La=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const i=X(r);W("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await vu(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):At("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(e,n){this.Ua=e,this.serializer=n,this.metadata=new Xt,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}async getMetadata(){return this.metadata.promise}async qa(){return await this.getMetadata(),this.Ga()}async Ga(){const e=await this.za();if(e===null)return null;const n=this.Wa.decode(e),r=Number(n);isNaN(r)&&this.ja(`length string (${n}) is not valid number`);const i=await this.Ha(r);return new t3(JSON.parse(i),e.length+r)}Ja(){return this.buffer.findIndex(e=>e===123)}async za(){for(;this.Ja()<0&&!await this.Ya(););if(this.buffer.length===0)return null;const e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Ha(e){for(;this.buffer.length<e;)await this.Ya()&&this.ja("Reached the end of bundle when more is expected.");const n=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ya(){const e=await this.Ua.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new $(M.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=X(i),a={documents:s.map(d=>bh(o.serializer,d))},l=await o.xo("BatchGetDocuments",o.serializer.databaseId,Se.emptyPath(),a,s.length),c=new Map;l.forEach(d=>{const p=Wq(o.serializer,d);c.set(p.key.toString(),p)});const h=[];return s.forEach(d=>{const p=c.get(d.toString());se(!!p),h.push(p)}),h}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new yu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=J.fromPath(r);this.mutations.push(new rE(i,this.precondition(i)))}),await async function(r,i){const s=X(r),o={writes:i.map(a=>kh(s.serializer,a))};await s.Co("Commit",s.serializer.databaseId,Se.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ne();n=ae.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new $(M.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ae.min())?it.exists(!1):it.updateTime(n):it.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ae.min()))throw new $(M.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return it.updateTime(n)}return it.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Za=r.maxAttempts,this.Yo=new _E(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(async()=>{const e=new P3(this.datastore),n=this.tu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.nu(i)}))}).catch(r=>{this.nu(r)})})}tu(e){try{const n=this.updateFunction(e);return!Jh(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!C1(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Gt.UNAUTHENTICATED,this.clientId=jk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{W("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(W("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new $(M.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Iu(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Df(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await rN(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Wy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await xE(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>uR(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>uR(e.remoteStore,i)),t._onlineComponents=e}function AN(t){return t.name==="FirebaseError"?t.code===M.FAILED_PRECONDITION||t.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function xE(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await Df(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!AN(n))throw n;Qr("Error using user provided cache. Falling back to memory cache: "+n),await Df(t,new $y)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await Df(t,new $y);return t._offlineComponents}async function km(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await Wy(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await Wy(t,new NE))),t._onlineComponents}function CN(t){return xE(t).then(e=>e.persistence)}function DE(t){return xE(t).then(e=>e.localStore)}function PN(t){return km(t).then(e=>e.remoteStore)}function OE(t){return km(t).then(e=>e.syncEngine)}function N3(t){return km(t).then(e=>e.datastore)}async function nu(t){const e=await km(t),n=e.eventManager;return n.onListen=o3.bind(null,e.syncEngine),n.onUnlisten=l3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=a3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=u3.bind(null,e.syncEngine),n}function x3(t){return t.asyncQueue.enqueue(async()=>{const e=await CN(t),n=await PN(t);return e.setNetworkEnabled(!0),function(i){const s=X(i);return s.M_.delete(0),sd(s)}(n)})}function D3(t){return t.asyncQueue.enqueue(async()=>{const e=await CN(t),n=await PN(t);return e.setNetworkEnabled(!1),async function(i){const s=X(i);s.M_.add(0),await vu(s),s.N_.set("Offline")}(n)})}function O3(t,e){const n=new Xt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(c,h){const d=X(c);return d.persistence.runTransaction("read document","readonly",p=>d.localDocuments.getDocument(p,h))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new $(M.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Iu(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await DE(t),e,n)),n.promise}function bN(t,e,n={}){const r=new Xt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new bm({next:p=>{o.enqueueAndForget(()=>TE(s,d));const _=p.docs.has(a);!_&&p.fromCache?c.reject(new $(M.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&p.fromCache&&l&&l.source==="server"?c.reject(new $(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new RE(gu(a.path),h,{includeMetadataChanges:!0,ra:!0});return IE(s,d)}(await nu(t),t.asyncQueue,e,n,r)),r.promise}function L3(t,e){const n=new Xt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await Sp(i,s,!0),l=new wN(s,a.hs),c=l.da(a.documents),h=l.applyChanges(c,!1);o.resolve(h.snapshot)}catch(a){const l=Iu(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await DE(t),e,n)),n.promise}function kN(t,e,n={}){const r=new Xt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new bm({next:p=>{o.enqueueAndForget(()=>TE(s,d)),p.fromCache&&l.source==="server"?c.reject(new $(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new RE(a,h,{includeMetadataChanges:!0,ra:!0});return IE(s,d)}(await nu(t),t.asyncQueue,e,n,r)),r.promise}function M3(t,e){const n=new bm(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){X(i).z_.add(s),s.next()}(await nu(t),n)),()=>{n.$a(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){X(i).z_.delete(s)}(await nu(t),n))}}function V3(t,e,n,r){const i=function(o,a){let l;return l=typeof o=="string"?b1().encode(o):o,function(h,d){return new C3(h,d)}(function(h,d){if(h instanceof Uint8Array)return mR(h,d);if(h instanceof ArrayBuffer)return mR(new Uint8Array(h),d);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,id(e));t.asyncQueue.enqueueAndForget(async()=>{R3(await OE(t),i,r)})}function F3(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=X(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(await DE(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(t,e,n){if(!n)throw new $(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function xN(t,e,n,r){if(e===!0&&r===!0)throw new $(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function _R(t){if(!J.isDocumentKey(t))throw new $(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function yR(t){if(J.isDocumentKey(t))throw new $(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Nm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne()}function Ne(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Nm(t);throw new $(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function DN(t,e){if(e<=0)throw new $(M.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new $(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new $(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new $(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class od{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vR({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new $(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new $(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vR(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Lz;switch(r.type){case"firstParty":return new Uz(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=gR.get(n);r&&(W("ComponentProvider","Removing Datastore"),gR.delete(n),r.terminate())}(this),Promise.resolve()}}function ON(t,e,n,r={}){var i;const s=(t=Ne(t,od))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Qr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Gt.MOCK_USER;else{a=pb(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new $(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Gt(c)}t._authCredentials=new Mz(new Bk(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mn=class LN{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new LN(this.firestore,e,this._query)}},ht=class MN{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Us(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new MN(this.firestore,e,this._key)}},Us=class VN extends Mn{constructor(e,n,r){super(e,n,gu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ht(this.firestore,null,new J(e))}withConverter(e){return new VN(this.firestore,e,this._path)}};function FN(t,e,...n){if(t=ie(t),LE("collection","path",e),t instanceof od){const r=Se.fromString(e,...n);return yR(r),new Us(t,null,r)}{if(!(t instanceof ht||t instanceof Us))throw new $(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return yR(r),new Us(t.firestore,null,r)}}function U3(t,e){if(t=Ne(t,od),LE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new $(M.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Mn(t,null,function(r){return new Ji(Se.emptyPath(),r)}(e))}function Wo(t,e,...n){if(t=ie(t),arguments.length===1&&(e=jk.newId()),LE("doc","path",e),t instanceof od){const r=Se.fromString(e,...n);return _R(r),new ht(t,null,new J(r))}{if(!(t instanceof ht||t instanceof Us))throw new $(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return _R(r),new ht(t.firestore,t instanceof Us?t.converter:null,new J(r))}}function UN(t,e){return t=ie(t),e=ie(e),(t instanceof ht||t instanceof Us)&&(e instanceof ht||e instanceof Us)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function BN(t,e){return t=ie(t),e=ie(e),t instanceof Mn&&e instanceof Mn&&t.firestore===e.firestore&&Zh(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new _E(this,"async_queue_retry"),this.hu=()=>{const n=xf();n&&W("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const e=xf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const n=xf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new Xt;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!lo(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(e){const n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw At("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);const i=EE.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&ne()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(const n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const n=this._u.indexOf(e);this._u.splice(n,1)}}function Hy(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class j3{constructor(){this._progressObserver={},this._taskCompletionResolver=new Xt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3=-1;let wt=class extends od{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new B3}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||jN(this),this._firestoreClient.terminate()}};function e_(t,e){const n=Cw(),r="(default)",i=$h(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=KF("firestore");s&&ON(i,...s)}return i}function tn(t){return t._firestoreClient||jN(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function jN(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new pq(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,NN(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new k3(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function q3(t,e){qN(t=Ne(t,wt));const n=tn(t);if(n._uninitializedComponentsProvider)throw new $(M.FAILED_PRECONDITION,"SDK cache is already specified.");Qr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new NE;return zN(n,i,new RN(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function $3(t){qN(t=Ne(t,wt));const e=tn(t);if(e._uninitializedComponentsProvider)throw new $(M.FAILED_PRECONDITION,"SDK cache is already specified.");Qr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new NE;return zN(e,r,new A3(r,n.cacheSizeBytes))}function zN(t,e,n){const r=new Xt;return t.asyncQueue.enqueue(async()=>{try{await Df(t,n),await Wy(t,e),r.resolve()}catch(i){const s=i;if(!AN(s))throw s;Qr("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}}).then(()=>r.promise)}function W3(t){if(t._initialized&&!t._terminated)throw new $(M.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Xt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!di.D())return Promise.resolve();const i=r+"main";await di.delete(i)}(pE(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function H3(t){return function(n){const r=new Xt;return n.asyncQueue.enqueueAndForget(async()=>p3(await OE(n),r)),r.promise}(tn(t=Ne(t,wt)))}function G3(t){return x3(tn(t=Ne(t,wt)))}function K3(t){return D3(tn(t=Ne(t,wt)))}function Q3(t,e){const n=tn(t=Ne(t,wt)),r=new j3;return V3(n,t._databaseId,e,r),r}function Y3(t,e){return F3(tn(t=Ne(t,wt)),e).then(n=>n?new Mn(t,null,n.query):null)}function qN(t){if(t._initialized||t._terminated)throw new $(M.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yi(zt.fromBase64String(e))}catch(n){throw new $(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new yi(zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xs=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ra=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3=/^__.*__$/;class X3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Xi(e,this.data,this.fieldMask,n,this.fieldTransforms):new _u(e,this.data,n,this.fieldTransforms)}}class $N{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Xi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function WN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne()}}class Dm{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new Dm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Pp(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(WN(this.fu)&&J3.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class Z3{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||id(e)}Fu(e,n,r,i=!1){return new Dm({fu:e,methodName:n,vu:r,path:rt.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Aa(t){const e=t._freezeSettings(),n=id(t._databaseId);return new Z3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Om(t,e,n,r,i,s={}){const o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);zE("Data must be an object, but it was:",o,r);const a=KN(r,o);let l,c;if(s.merge)l=new Hn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const p=Gy(e,d,n);if(!o.contains(p))throw new $(M.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);YN(h,p)||h.push(p)}l=new Hn(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new X3(new cn(a),l,c)}class ad extends Ra{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ad}}function HN(t,e,n){return new Dm({fu:3,vu:e.settings.vu,methodName:t._methodName,yu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ME extends Ra{_toFieldTransform(e){return new td(e.path,new Kl)}isEqual(e){return e instanceof ME}}class VE extends Ra{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){const n=HN(this,e,!0),r=this.Mu.map(s=>Ca(s,n)),i=new oa(r);return new td(e.path,i)}isEqual(e){return e instanceof VE&&Ul(this.Mu,e.Mu)}}class FE extends Ra{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){const n=HN(this,e,!0),r=this.Mu.map(s=>Ca(s,n)),i=new aa(r);return new td(e.path,i)}isEqual(e){return e instanceof FE&&Ul(this.Mu,e.Mu)}}class UE extends Ra{constructor(e,n){super(e),this.xu=n}_toFieldTransform(e){const n=new Ql(e.serializer,w1(e.serializer,this.xu));return new td(e.path,n)}isEqual(e){return e instanceof UE&&this.xu===e.xu}}function BE(t,e,n,r){const i=t.Fu(1,e,n);zE("Data must be an object, but it was:",i,r);const s=[],o=cn.empty();Sa(r,(l,c)=>{const h=qE(e,l,n);c=ie(c);const d=i.Su(h);if(c instanceof ad)s.push(h);else{const p=Ca(c,d);p!=null&&(s.push(h),o.set(h,p))}});const a=new Hn(s);return new $N(o,a,i.fieldTransforms)}function jE(t,e,n,r,i,s){const o=t.Fu(1,e,n),a=[Gy(e,r,n)],l=[i];if(s.length%2!=0)throw new $(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Gy(e,s[p])),l.push(s[p+1]);const c=[],h=cn.empty();for(let p=a.length-1;p>=0;--p)if(!YN(c,a[p])){const _=a[p];let y=l[p];y=ie(y);const E=o.Su(_);if(y instanceof ad)c.push(_);else{const P=Ca(y,E);P!=null&&(c.push(_),h.set(_,P))}}const d=new Hn(c);return new $N(h,d,o.fieldTransforms)}function GN(t,e,n,r=!1){return Ca(n,t.Fu(r?4:3,e))}function Ca(t,e){if(QN(t=ie(t)))return zE("Unsupported field value:",e,t),KN(t,e);if(t instanceof Ra)return function(r,i){if(!WN(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Ca(a,i.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ie(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return w1(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=st.fromDate(r);return{timestampValue:Yl(i.serializer,s)}}if(r instanceof st){const s=new st(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yl(i.serializer,s)}}if(r instanceof xm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof yi)return{bytesValue:x1(i.serializer,r._byteString)};if(r instanceof ht){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:lE(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Nm(r)}`)}(t,e)}function KN(t,e){const n={};return e1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sa(t,(r,i)=>{const s=Ca(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function QN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof st||t instanceof xm||t instanceof yi||t instanceof ht||t instanceof Ra)}function zE(t,e,n){if(!QN(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Nm(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function Gy(t,e,n){if((e=ie(e))instanceof Xs)return e._internalPath;if(typeof e=="string")return qE(t,e);throw Pp("Field path arguments must be of type string or ",t,!1,void 0,n)}const e6=new RegExp("[~\\*/\\[\\]]");function qE(t,e,n){if(e.search(e6)>=0)throw Pp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xs(...e.split("."))._internalPath}catch{throw Pp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Pp(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new $(M.INVALID_ARGUMENT,a+t+l)}function YN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new t6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Lm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class t6 extends Nh{data(){return super.data()}}function Lm(t,e){return typeof e=="string"?qE(t,e):e instanceof Xs?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $E{}class ld extends $E{}function gs(t,e,...n){let r=[];e instanceof $E&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof WE).length,a=s.filter(l=>l instanceof Mm).length;if(o>1||o>0&&a>0)throw new $(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Mm extends ld{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Mm(e,n,r)}_apply(e){const n=this._parse(e);return ZN(e._query,n),new Mn(e.firestore,e.converter,xy(e._query,n))}_parse(e){const n=Aa(e.firestore);return function(s,o,a,l,c,h,d){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new $(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){ER(d,h);const _=[];for(const y of d)_.push(wR(l,s,y));p={arrayValue:{values:_}}}else p=wR(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||ER(d,h),p=GN(a,o,d,h==="in"||h==="not-in");return Re.create(c,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function n6(t,e,n){const r=e,i=Lm("where",t);return Mm._create(i,r,n)}class WE extends $E{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new WE(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ve.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)ZN(o,l),o=xy(o,l)}(e._query,n),new Mn(e.firestore,e.converter,xy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class HE extends ld{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new HE(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new $(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new $(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ph(s,o)}(e._query,this._field,this._direction);return new Mn(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Ji(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function r6(t,e="asc"){const n=e,r=Lm("orderBy",t);return HE._create(r,n)}class Vm extends ld{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Vm(e,n,r)}_apply(e){return new Mn(e.firestore,e.converter,wp(e._query,this._limit,this._limitType))}}function i6(t){return DN("limit",t),Vm._create("limit",t,"F")}function s6(t){return DN("limitToLast",t),Vm._create("limitToLast",t,"L")}class Fm extends ld{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Fm(e,n,r)}_apply(e){const n=XN(e,this.type,this._docOrFields,this._inclusive);return new Mn(e.firestore,e.converter,function(i,s){return new Ji(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function o6(...t){return Fm._create("startAt",t,!0)}function a6(...t){return Fm._create("startAfter",t,!1)}class Um extends ld{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Um(e,n,r)}_apply(e){const n=XN(e,this.type,this._docOrFields,this._inclusive);return new Mn(e.firestore,e.converter,function(i,s){return new Ji(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function l6(...t){return Um._create("endBefore",t,!1)}function u6(...t){return Um._create("endAt",t,!0)}function XN(t,e,n,r){if(n[0]=ie(n[0]),n[0]instanceof Nh)return function(s,o,a,l,c){if(!l)throw new $(M.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const d of Rl(s))if(d.field.isKeyField())h.push(ia(o,l.key));else{const p=l.data.field(d.field);if(Em(p))throw new $(M.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const _=d.field.canonicalString();throw new $(M.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}h.push(p)}return new Ys(h,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Aa(t.firestore);return function(o,a,l,c,h,d){const p=o.explicitOrderBy;if(h.length>p.length)throw new $(M.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let y=0;y<h.length;y++){const E=h[y];if(p[y].field.isKeyField()){if(typeof E!="string")throw new $(M.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof E}`);if(!tE(o)&&E.indexOf("/")!==-1)throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${E}' contains a slash.`);const P=o.path.child(Se.fromString(E));if(!J.isDocumentKey(P))throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${P}' is not because it contains an odd number of segments.`);const S=new J(P);_.push(ia(a,S))}else{const P=GN(l,c,E);_.push(P)}}return new Ys(_,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function wR(t,e,n){if(typeof(n=ie(n))=="string"){if(n==="")throw new $(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tE(e)&&n.indexOf("/")!==-1)throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Se.fromString(n));if(!J.isDocumentKey(r))throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ia(t,new J(r))}if(n instanceof ht)return ia(t,n._key);throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nm(n)}.`)}function ER(t,e){if(!Array.isArray(t)||t.length===0)throw new $(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ZN(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class GE{convertValue(e,n="none"){switch(ra(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Sa(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new xm(_t(e.latitude),_t(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Zw(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Rh(e));default:return null}}convertTimestamp(e){const n=Hi(e);return new st(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Se.fromString(e);se(q1(r));const i=new Ks(r.get(1),r.get(3)),s=new J(r.popFirst(5));return i.isEqual(n)||At(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class c6 extends GE{constructor(e){super(),this.firestore=e}convertBytes(e){return new yi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Gi=class extends Nh{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new zc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Lm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},zc=class extends Gi{data(e={}){return super.data(e)}},Zs=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Vo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new zc(this._firestore,this._userDataWriter,r.key,r,new Vo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new zc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Vo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new zc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Vo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:h6(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function h6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne()}}function ex(t,e){return t instanceof Gi&&e instanceof Gi?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Zs&&e instanceof Zs&&t._firestore===e._firestore&&BN(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(t){t=Ne(t,ht);const e=Ne(t.firestore,wt);return bN(tn(e),t._key).then(n=>KE(e,t,n))}class Pa extends GE{constructor(e){super(),this.firestore=e}convertBytes(e){return new yi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,n)}}function d6(t){t=Ne(t,ht);const e=Ne(t.firestore,wt),n=tn(e),r=new Pa(e);return O3(n,t._key).then(i=>new Gi(e,r,t._key,i,new Vo(i!==null&&i.hasLocalMutations,!0),t.converter))}function f6(t){t=Ne(t,ht);const e=Ne(t.firestore,wt);return bN(tn(e),t._key,{source:"server"}).then(n=>KE(e,t,n))}function p6(t){t=Ne(t,Mn);const e=Ne(t.firestore,wt),n=tn(e),r=new Pa(e);return JN(t._query),kN(n,t._query).then(i=>new Zs(e,r,t,i))}function m6(t){t=Ne(t,Mn);const e=Ne(t.firestore,wt),n=tn(e),r=new Pa(e);return L3(n,t._query).then(i=>new Zs(e,r,t,i))}function g6(t){t=Ne(t,Mn);const e=Ne(t.firestore,wt),n=tn(e),r=new Pa(e);return kN(n,t._query,{source:"server"}).then(i=>new Zs(e,r,t,i))}function bp(t,e,n){t=Ne(t,ht);const r=Ne(t.firestore,wt),i=Bm(t.converter,e,n);return ud(r,[Om(Aa(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,it.none())])}function IR(t,e,n,...r){t=Ne(t,ht);const i=Ne(t.firestore,wt),s=Aa(i);let o;return o=typeof(e=ie(e))=="string"||e instanceof Xs?jE(s,"updateDoc",t._key,e,n,r):BE(s,"updateDoc",t._key,e),ud(i,[o.toMutation(t._key,it.exists(!0))])}function _6(t){return ud(Ne(t.firestore,wt),[new yu(t._key,it.none())])}function y6(t,e){const n=Ne(t.firestore,wt),r=Wo(t),i=Bm(t.converter,e);return ud(n,[Om(Aa(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,it.exists(!1))]).then(()=>r)}function nx(t,...e){var n,r,i;t=ie(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Hy(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Hy(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,c,h;if(t instanceof ht)c=Ne(t.firestore,wt),h=gu(t._key.path),l={next:d=>{e[o]&&e[o](KE(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=Ne(t,Mn);c=Ne(d.firestore,wt),h=d._query;const p=new Pa(c);l={next:_=>{e[o]&&e[o](new Zs(c,p,d,_))},error:e[o+1],complete:e[o+2]},JN(t._query)}return function(p,_,y,E){const P=new bm(E),S=new RE(_,P,y);return p.asyncQueue.enqueueAndForget(async()=>IE(await nu(p),S)),()=>{P.$a(),p.asyncQueue.enqueueAndForget(async()=>TE(await nu(p),S))}}(tn(c),h,a,l)}function v6(t,e){return M3(tn(t=Ne(t,wt)),Hy(e)?e:{next:e})}function ud(t,e){return function(r,i){const s=new Xt;return r.asyncQueue.enqueueAndForget(async()=>c3(await OE(r),i,s)),s.promise}(tn(t),e)}function KE(t,e,n){const r=n.docs.get(e._key),i=new Pa(t);return new Gi(t,i,e._key,r,new Vo(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w6={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let E6=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Aa(e)}set(e,n,r){this._verifyNotCommitted();const i=Ss(e,this._firestore),s=Bm(i.converter,n,r),o=Om(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,it.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Ss(e,this._firestore);let o;return o=typeof(n=ie(n))=="string"||n instanceof Xs?jE(this._dataReader,"WriteBatch.update",s._key,n,r,i):BE(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,it.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ss(e,this._firestore);return this._mutations=this._mutations.concat(new yu(n._key,it.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new $(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ss(t,e){if((t=ie(t)).firestore!==e)throw new $(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let I6=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Aa(n)}get(n){const r=Ss(n,this._firestore),i=new c6(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return ne();const o=s[0];if(o.isFoundDocument())return new Nh(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Nh(this._firestore,i,r._key,null,r.converter);throw ne()})}set(n,r,i){const s=Ss(n,this._firestore),o=Bm(s.converter,r,i),a=Om(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=Ss(n,this._firestore);let a;return a=typeof(r=ie(r))=="string"||r instanceof Xs?jE(this._dataReader,"Transaction.update",o._key,r,i,s):BE(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=Ss(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ss(e,this._firestore),r=new Pa(this._firestore);return super.get(e).then(i=>new Gi(this._firestore,r,n._key,i._document,new Vo(!1,!1),n.converter))}};function T6(t,e,n){t=Ne(t,wt);const r=Object.assign(Object.assign({},w6),n);return function(s){if(s.maxAttempts<1)throw new $(M.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new Xt;return s.asyncQueue.enqueueAndForget(async()=>{const c=await N3(s);new b3(s.asyncQueue,c,a,o,l).Xa()}),l.promise}(tn(t),i=>e(new I6(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S6(){return new ad("deleteField")}function R6(){return new ME("serverTimestamp")}function A6(...t){return new VE("arrayUnion",t)}function C6(...t){return new FE("arrayRemove",t)}function P6(t){return new UE("increment",t)}(function(e,n=!0){(function(i){mu=i})(vi),mi(new ur("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new wt(new Vz(r.getProvider("auth-internal")),new jz(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new $(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ks(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Dn(gS,"4.6.3",e),Dn(gS,"4.6.3","esm2017")})();const b6="@firebase/firestore-compat",k6="0.3.32";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new $("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(){if(typeof Uint8Array>"u")throw new $("unimplemented","Uint8Arrays are not available in this environment.")}function SR(){if(!dq())throw new $("unimplemented","Blobs are unavailable in Firestore in this environment.")}let rx=class Ky{constructor(e){this._delegate=e}static fromBase64String(e){return SR(),new Ky(yi.fromBase64String(e))}static fromUint8Array(e){return TR(),new Ky(yi.fromUint8Array(e))}toBase64(){return SR(),this._delegate.toBase64()}toUint8Array(){return TR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(t){return N6(t,["next","error","complete"])}function N6(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{enableIndexedDbPersistence(e,n){return q3(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return $3(e._delegate)}clearIndexedDbPersistence(e){return W3(e._delegate)}}class ix{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ks||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Qr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){ON(this._delegate,e,n,r)}enableNetwork(){return G3(this._delegate)}disableNetwork(){return K3(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,xN("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return H3(this._delegate)}onSnapshotsInSync(e){return v6(this._delegate,e)}get app(){if(!this._appCompat)throw new $("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ru(this,FN(this._delegate,e))}catch(n){throw kn(n,"collection()","Firestore.collection()")}}doc(e){try{return new Er(this,Wo(this._delegate,e))}catch(n){throw kn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new bn(this,U3(this._delegate,e))}catch(n){throw kn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return T6(this._delegate,n=>e(new sx(this,n)))}batch(){return tn(this._delegate),new ox(new E6(this._delegate,e=>ud(this._delegate,e)))}loadBundle(e){return Q3(this._delegate,e)}namedQuery(e){return Y3(this._delegate,e).then(n=>n?new bn(this,n):null)}}class jm extends GE{constructor(e){super(),this.firestore=e}convertBytes(e){return new rx(new yi(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Er.forKey(n,this.firestore,null)}}function D6(t){Dz(t)}class sx{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new jm(e)}get(e){const n=Fo(e);return this._delegate.get(n).then(r=>new xh(this._firestore,new Gi(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Fo(e);return r?(QE("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Fo(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Fo(e);return this._delegate.delete(n),this}}class ox{constructor(e){this._delegate=e}set(e,n,r){const i=Fo(e);return r?(QE("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Fo(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Fo(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class ha{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new zc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Dh(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=ha.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new ha(e,new jm(e),n),i.set(n,s)),s}}ha.INSTANCES=new WeakMap;class Er{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new jm(e)}static forPath(e,n,r){if(e.length%2!==0)throw new $("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Er(n,new ht(n._delegate,r,new J(e)))}static forKey(e,n,r){return new Er(n,new ht(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ru(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ru(this.firestore,FN(this._delegate,e))}catch(n){throw kn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ie(e),e instanceof ht?UN(this._delegate,e):!1}set(e,n){n=QE("DocumentReference.set",n);try{return n?bp(this._delegate,e,n):bp(this._delegate,e)}catch(r){throw kn(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?IR(this._delegate,e):IR(this._delegate,e,n,...r)}catch(i){throw kn(i,"updateDoc()","DocumentReference.update()")}}delete(){return _6(this._delegate)}onSnapshot(...e){const n=ax(e),r=lx(e,i=>new xh(this.firestore,new Gi(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return nx(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=d6(this._delegate):(e==null?void 0:e.source)==="server"?n=f6(this._delegate):n=tx(this._delegate),n.then(r=>new xh(this.firestore,new Gi(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Er(this.firestore,e?this._delegate.withConverter(ha.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function kn(t,e,n){return t.message=t.message.replace(e,n),t}function ax(t){for(const e of t)if(typeof e=="object"&&!Qy(e))return e;return{}}function lx(t,e){var n,r;let i;return Qy(t[0])?i=t[0]:Qy(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class xh{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Er(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return ex(this._delegate,e._delegate)}}class Dh extends xh{data(e){const n=this._delegate.data(e);return this._delegate._converter||Oz(n!==void 0),n}}class bn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new jm(e)}where(e,n,r){try{return new bn(this.firestore,gs(this._delegate,n6(e,n,r)))}catch(i){throw kn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new bn(this.firestore,gs(this._delegate,r6(e,n)))}catch(r){throw kn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new bn(this.firestore,gs(this._delegate,i6(e)))}catch(n){throw kn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new bn(this.firestore,gs(this._delegate,s6(e)))}catch(n){throw kn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new bn(this.firestore,gs(this._delegate,o6(...e)))}catch(n){throw kn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new bn(this.firestore,gs(this._delegate,a6(...e)))}catch(n){throw kn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new bn(this.firestore,gs(this._delegate,l6(...e)))}catch(n){throw kn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new bn(this.firestore,gs(this._delegate,u6(...e)))}catch(n){throw kn(n,"endAt()","Query.endAt()")}}isEqual(e){return BN(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=m6(this._delegate):(e==null?void 0:e.source)==="server"?n=g6(this._delegate):n=p6(this._delegate),n.then(r=>new Yy(this.firestore,new Zs(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=ax(e),r=lx(e,i=>new Yy(this.firestore,new Zs(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return nx(this._delegate,n,r)}withConverter(e){return new bn(this.firestore,e?this._delegate.withConverter(ha.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class O6{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Dh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Yy{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new bn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Dh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new O6(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Dh(this._firestore,r))})}isEqual(e){return ex(this._delegate,e._delegate)}}class ru extends bn{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Er(this.firestore,e):null}doc(e){try{return e===void 0?new Er(this.firestore,Wo(this._delegate)):new Er(this.firestore,Wo(this._delegate,e))}catch(n){throw kn(n,"doc()","CollectionReference.doc()")}}add(e){return y6(this._delegate,e).then(n=>new Er(this.firestore,n))}isEqual(e){return UN(this._delegate,e._delegate)}withConverter(e){return new ru(this.firestore,e?this._delegate.withConverter(ha.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Fo(t){return Ne(t,ht)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(...e){this._delegate=new Xs(...e)}static documentId(){return new YE(rt.keyField().canonicalString())}isEqual(e){return e=ie(e),e instanceof Xs?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e){this._delegate=e}static serverTimestamp(){const e=R6();return e._methodName="FieldValue.serverTimestamp",new ko(e)}static delete(){const e=S6();return e._methodName="FieldValue.delete",new ko(e)}static arrayUnion(...e){const n=A6(...e);return n._methodName="FieldValue.arrayUnion",new ko(n)}static arrayRemove(...e){const n=C6(...e);return n._methodName="FieldValue.arrayRemove",new ko(n)}static increment(e){const n=P6(e);return n._methodName="FieldValue.increment",new ko(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L6={Firestore:ix,GeoPoint:xm,Timestamp:st,Blob:rx,Transaction:sx,WriteBatch:ox,DocumentReference:Er,DocumentSnapshot:xh,Query:bn,QueryDocumentSnapshot:Dh,QuerySnapshot:Yy,CollectionReference:ru,FieldPath:YE,FieldValue:ko,setLogLevel:D6,CACHE_SIZE_UNLIMITED:z3};function M6(t,e){t.INTERNAL.registerComponent(new ur("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},L6)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V6(t){M6(t,(e,n)=>new ix(e,n,new x6)),t.registerVersion(b6,k6)}V6(Ue);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux="firebasestorage.googleapis.com",cx="storageBucket",F6=2*60*1e3,U6=10*60*1e3,B6=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt extends Sn{constructor(e,n,r=0){super(t_(e),`Firebase Storage: ${n} (${t_(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return t_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Xe;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Xe||(Xe={}));function t_(t){return"storage/"+t}function JE(){const t="An unknown error occurred, please check the error payload for server response.";return new pt(Xe.UNKNOWN,t)}function j6(t){return new pt(Xe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function z6(t){return new pt(Xe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function q6(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new pt(Xe.UNAUTHENTICATED,t)}function $6(){return new pt(Xe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function W6(t){return new pt(Xe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function hx(){return new pt(Xe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dx(){return new pt(Xe.CANCELED,"User canceled the upload/download.")}function H6(t){return new pt(Xe.INVALID_URL,"Invalid URL '"+t+"'.")}function G6(t){return new pt(Xe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function K6(){return new pt(Xe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+cx+"' property when initializing the app?")}function fx(){return new pt(Xe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Q6(){return new pt(Xe.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function Y6(){return new pt(Xe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function J6(t){return new pt(Xe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Cl(t){return new pt(Xe.INVALID_ARGUMENT,t)}function px(){return new pt(Xe.APP_DELETED,"The Firebase app was deleted.")}function mx(t){return new pt(Xe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function qc(t,e){return new pt(Xe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ac(t){throw new pt(Xe.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=In.makeFromUrl(e,n)}catch{return new In(e,"")}if(r.path==="")return r;throw G6(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(k){k.path.charAt(k.path.length-1)==="/"&&(k.path_=k.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(k){k.path_=decodeURIComponent(k.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",_=new RegExp(`^https?://${d}/${h}/b/${i}/o${p}`,"i"),y={bucket:1,path:3},E=n===ux?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",S=new RegExp(`^https?://${E}/${i}/${P}`,"i"),T=[{regex:a,indices:l,postModify:s},{regex:_,indices:y,postModify:c},{regex:S,indices:{bucket:1,path:2},postModify:c}];for(let k=0;k<T.length;k++){const F=T[k],j=F.regex.exec(e);if(j){const g=j[F.indices.bucket];let v=j[F.indices.path];v||(v=""),r=new In(g,v),F.postModify(r);break}}if(r==null)throw H6(e);return r}}class X6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z6(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function h(...P){c||(c=!0,e.apply(null,P))}function d(P){i=setTimeout(()=>{i=null,t(_,l())},P)}function p(){s&&clearTimeout(s)}function _(P,...S){if(c){p();return}if(P){p(),h.call(null,P,...S);return}if(l()||o){p(),h.call(null,P,...S);return}r<64&&(r*=2);let T;a===1?(a=2,T=0):T=(r+Math.random())*1e3,d(T)}let y=!1;function E(P){y||(y=!0,p(),!c&&(i!==null?(P||(a=2),clearTimeout(i),d(0)):P||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,E(!0)},n),E}function e9(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t9(t){return t!==void 0}function n9(t){return typeof t=="function"}function r9(t){return typeof t=="object"&&!Array.isArray(t)}function zm(t){return typeof t=="string"||t instanceof String}function RR(t){return XE()&&t instanceof Blob}function XE(){return typeof Blob<"u"}function Jy(t,e,n,r){if(r<e)throw Cl(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Cl(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function gx(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ho;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ho||(Ho={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{constructor(e,n,r,i,s,o,a,l,c,h,d,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,y)=>{this.resolve_=_,this.reject_=y,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new nf(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Ho.NO_ERROR,l=s.getStatus();if(!a||_x(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===Ho.ABORT;r(!1,new nf(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new nf(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());t9(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=JE();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?px():dx();o(l)}else{const l=hx();o(l)}};this.canceled_?n(!1,new nf(!1,null,!0)):this.backoffId_=Z6(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&e9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class nf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function s9(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function o9(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function a9(t,e){e&&(t["X-Firebase-GMPID"]=e)}function l9(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function u9(t,e,n,r,i,s,o=!0){const a=gx(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return a9(c,e),s9(c,n),o9(c,s),l9(c,r),new i9(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c9(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function h9(...t){const e=c9();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(XE())return new Blob(t);throw new pt(Xe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function d9(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f9(t){if(typeof atob>"u")throw J6("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class n_{constructor(e,n){this.data=e,this.contentType=n||null}}function yx(t,e){switch(t){case Ir.RAW:return new n_(vx(e));case Ir.BASE64:case Ir.BASE64URL:return new n_(wx(t,e));case Ir.DATA_URL:return new n_(m9(e),g9(e))}throw JE()}function vx(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function p9(t){let e;try{e=decodeURIComponent(t)}catch{throw qc(Ir.DATA_URL,"Malformed data URL.")}return vx(e)}function wx(t,e){switch(t){case Ir.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw qc(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ir.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw qc(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=f9(e)}catch(i){throw i.message.includes("polyfill")?i:qc(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Ex{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw qc(Ir.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=_9(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function m9(t){const e=new Ex(t);return e.base64?wx(Ir.BASE64,e.rest):p9(e.rest)}function g9(t){return new Ex(t).contentType}function _9(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,n){let r=0,i="";RR(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(RR(this.data_)){const r=this.data_,i=d9(r,e,n);return i===null?null:new si(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new si(r,!0)}}static getBlob(...e){if(XE()){const n=e.map(r=>r instanceof si?r.data_:r);return new si(h9.apply(null,n))}else{const n=e.map(o=>zm(o)?yx(Ir.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new si(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(t){let e;try{e=JSON.parse(t)}catch{return null}return r9(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y9(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function v9(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function Ix(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w9(t,e){return e}class Cn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||w9}}let rf=null;function E9(t){return!zm(t)||t.length<2?t:Ix(t)}function cd(){if(rf)return rf;const t=[];t.push(new Cn("bucket")),t.push(new Cn("generation")),t.push(new Cn("metageneration")),t.push(new Cn("name","fullPath",!0));function e(s,o){return E9(o)}const n=new Cn("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Cn("size");return i.xform=r,t.push(i),t.push(new Cn("timeCreated")),t.push(new Cn("updated")),t.push(new Cn("md5Hash",null,!0)),t.push(new Cn("cacheControl",null,!0)),t.push(new Cn("contentDisposition",null,!0)),t.push(new Cn("contentEncoding",null,!0)),t.push(new Cn("contentLanguage",null,!0)),t.push(new Cn("contentType",null,!0)),t.push(new Cn("metadata","customMetadata",!0)),rf=t,rf}function I9(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new In(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function T9(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return I9(r,t),r}function Tx(t,e,n){const r=ZE(e);return r===null?null:T9(t,r,n)}function S9(t,e,n,r){const i=ZE(e);if(i===null||!zm(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const h=t.bucket,d=t.fullPath,p="/b/"+o(h)+"/o/"+o(d),_=ho(p,n,r),y=gx({alt:"media",token:c});return _+y})[0]}function eI(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR="prefixes",CR="items";function R9(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[AR])for(const i of n[AR]){const s=i.replace(/\/$/,""),o=t._makeStorageReference(new In(e,s));r.prefixes.push(o)}if(n[CR])for(const i of n[CR]){const s=t._makeStorageReference(new In(e,i.name));r.items.push(s)}return r}function A9(t,e,n){const r=ZE(n);return r===null?null:R9(t,e,r)}class es{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(t){if(!t)throw JE()}function qm(t,e){function n(r,i){const s=Tx(t,i,e);return pi(s!==null),s}return n}function C9(t,e){function n(r,i){const s=A9(t,e,i);return pi(s!==null),s}return n}function P9(t,e){function n(r,i){const s=Tx(t,i,e);return pi(s!==null),S9(s,i,t.host,t._protocol)}return n}function Tu(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=$6():i=q6():n.getStatus()===402?i=z6(t.bucket):n.getStatus()===403?i=W6(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function $m(t){const e=Tu(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=j6(t.path)),s.serverResponse=i.serverResponse,s}return n}function Sx(t,e,n){const r=e.fullServerUrl(),i=ho(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new es(i,s,qm(t,n),o);return a.errorHandler=$m(e),a}function b9(t,e,n,r,i){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=e.bucketOnlyServerUrl(),a=ho(o,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,h=new es(a,l,C9(t,e.bucket),c);return h.urlParams=s,h.errorHandler=Tu(e),h}function k9(t,e,n){const r=e.fullServerUrl(),i=ho(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new es(i,s,P9(t,n),o);return a.errorHandler=$m(e),a}function N9(t,e,n,r){const i=e.fullServerUrl(),s=ho(i,t.host,t._protocol),o="PATCH",a=eI(n,r),l={"Content-Type":"application/json; charset=utf-8"},c=t.maxOperationRetryTime,h=new es(s,o,qm(t,r),c);return h.headers=l,h.body=a,h.errorHandler=$m(e),h}function x9(t,e){const n=e.fullServerUrl(),r=ho(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,c){}const a=new es(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=$m(e),a}function D9(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Rx(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=D9(null,e)),r}function Ax(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let T="";for(let k=0;k<2;k++)T=T+Math.random().toString().slice(2);return T}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=Rx(e,r,i),h=eI(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",_=si.getBlob(d,r,p);if(_===null)throw fx();const y={name:c.fullPath},E=ho(s,t.host,t._protocol),P="POST",S=t.maxUploadRetryTime,I=new es(E,P,qm(t,n),S);return I.urlParams=y,I.headers=o,I.body=_.uploadData(),I.errorHandler=Tu(e),I}class kp{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function tI(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{pi(!1)}return pi(!!n&&(e||["active"]).indexOf(n)!==-1),n}function O9(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=Rx(e,r,i),a={name:o.fullPath},l=ho(s,t.host,t._protocol),c="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},d=eI(o,n),p=t.maxUploadRetryTime;function _(E){tI(E);let P;try{P=E.getResponseHeader("X-Goog-Upload-URL")}catch{pi(!1)}return pi(zm(P)),P}const y=new es(l,c,_,p);return y.urlParams=a,y.headers=h,y.body=d,y.errorHandler=Tu(e),y}function L9(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(c){const h=tI(c,["active","final"]);let d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{pi(!1)}d||pi(!1);const p=Number(d);return pi(!isNaN(p)),new kp(p,r.size(),h==="final")}const o="POST",a=t.maxUploadRetryTime,l=new es(n,o,s,a);return l.headers=i,l.errorHandler=Tu(e),l}const PR=256*1024;function M9(t,e,n,r,i,s,o,a){const l=new kp(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw Q6();const c=l.total-l.current;let h=c;i>0&&(h=Math.min(h,i));const d=l.current,p=d+h;let _="";h===0?_="finalize":c===h?_="upload, finalize":_="upload";const y={"X-Goog-Upload-Command":_,"X-Goog-Upload-Offset":`${l.current}`},E=r.slice(d,p);if(E===null)throw fx();function P(k,F){const j=tI(k,["active","final"]),g=l.current+h,v=r.size();let R;return j==="final"?R=qm(e,s)(k,F):R=null,new kp(g,v,j==="final",R)}const S="POST",I=e.maxUploadRetryTime,T=new es(n,S,P,I);return T.headers=y,T.body=E.uploadData(),T.progressCallback=a||null,T.errorHandler=Tu(t),T}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V9={STATE_CHANGED:"state_changed"},Nn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function r_(t){switch(t){case"running":case"pausing":case"canceling":return Nn.RUNNING;case"paused":return Nn.PAUSED;case"success":return Nn.SUCCESS;case"canceled":return Nn.CANCELED;case"error":return Nn.ERROR;default:return Nn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9{constructor(e,n,r){if(n9(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class U9{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ho.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ho.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ho.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw ac("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ac("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ac("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ac("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ac("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class B9 extends U9{initXhr(){this.xhr_.responseType="text"}}function Ur(){return new B9}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=cd(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Xe.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(_x(i.status,[]))if(s)i=hx();else{this.sleepTime=Math.max(this.sleepTime*2,B6),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Xe.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=O9(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ur,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=L9(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Ur,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=PR*this._chunkMultiplier,n=new kp(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=M9(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,Ur,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){PR*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=Sx(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Ur,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=Ax(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ur,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=dx(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=r_(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new F9(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(r_(this._state)){case Nn.SUCCESS:Ha(this._resolve.bind(null,this.snapshot))();break;case Nn.CANCELED:case Nn.ERROR:const n=this._reject;Ha(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(r_(this._state)){case Nn.RUNNING:case Nn.PAUSED:e.next&&Ha(e.next.bind(e,this.snapshot))();break;case Nn.SUCCESS:e.complete&&Ha(e.complete.bind(e))();break;case Nn.CANCELED:case Nn.ERROR:e.error&&Ha(e.error.bind(e,this._error))();break;default:e.error&&Ha(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,n){this._service=e,n instanceof In?this._location=n:this._location=In.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new da(e,n)}get root(){const e=new In(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ix(this._location.path)}get storage(){return this._service}get parent(){const e=y9(this._location.path);if(e===null)return null;const n=new In(this._location.bucket,e);return new da(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw mx(e)}}function j9(t,e,n){t._throwIfRoot("uploadBytes");const r=Ax(t.storage,t._location,cd(),new si(e,!0),n);return t.storage.makeRequestWithTokens(r,Ur).then(i=>({metadata:i,ref:t}))}function z9(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Cx(t,new si(e),n)}function q9(t){const e={prefixes:[],items:[]};return Px(t,e).then(()=>e)}async function Px(t,e,n){const i=await bx(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await Px(t,e,i.nextPageToken)}function bx(t,e){e!=null&&typeof e.maxResults=="number"&&Jy("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=b9(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,Ur)}function $9(t){t._throwIfRoot("getMetadata");const e=Sx(t.storage,t._location,cd());return t.storage.makeRequestWithTokens(e,Ur)}function W9(t,e){t._throwIfRoot("updateMetadata");const n=N9(t.storage,t._location,e,cd());return t.storage.makeRequestWithTokens(n,Ur)}function H9(t){t._throwIfRoot("getDownloadURL");const e=k9(t.storage,t._location,cd());return t.storage.makeRequestWithTokens(e,Ur).then(n=>{if(n===null)throw Y6();return n})}function G9(t){t._throwIfRoot("deleteObject");const e=x9(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Ur)}function kx(t,e){const n=v9(t._location.path,e),r=new In(t._location.bucket,n);return new da(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K9(t){return/^[A-Za-z]+:\/\//.test(t)}function Q9(t,e){return new da(t,e)}function Nx(t,e){if(t instanceof nI){const n=t;if(n._bucket==null)throw K6();const r=new da(n,n._bucket);return e!=null?Nx(r,e):r}else return e!==void 0?kx(t,e):t}function Y9(t,e){if(e&&K9(e)){if(t instanceof nI)return Q9(t,e);throw Cl("To use ref(service, url), the first argument must be a Storage instance.")}else return Nx(t,e)}function bR(t,e){const n=e==null?void 0:e[cx];return n==null?null:In.makeFromBucketSpec(n,t)}function J9(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:pb(i,t.app.options.projectId))}class nI{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=ux,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=F6,this._maxUploadRetryTime=U6,this._requests=new Set,i!=null?this._bucket=In.makeFromBucketSpec(i,this._host):this._bucket=bR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=In.makeFromBucketSpec(this._url,e):this._bucket=bR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Jy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Jy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new da(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new X6(px());{const o=u9(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const kR="@firebase/storage",NR="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X9="storage";function Z9(t,e,n){return t=ie(t),j9(t,e,n)}function eW(t,e,n){return t=ie(t),z9(t,e,n)}function tW(t){return t=ie(t),$9(t)}function nW(t,e){return t=ie(t),W9(t,e)}function rW(t,e){return t=ie(t),bx(t,e)}function iW(t){return t=ie(t),q9(t)}function xx(t){return t=ie(t),H9(t)}function sW(t){return t=ie(t),G9(t)}function Xy(t,e){return t=ie(t),Y9(t,e)}function oW(t,e){return kx(t,e)}function aW(t,e,n,r={}){J9(t,e,n,r)}function lW(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new nI(n,r,i,e,vi)}function uW(){mi(new ur(X9,lW,"PUBLIC").setMultipleInstances(!0)),Dn(kR,NR,""),Dn(kR,NR,"esm2017")}uW();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new sf(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new sf(r,this,this._ref))},n)}on(e,n,r,i){let s;return n&&(typeof n=="function"?s=o=>n(new sf(o,this,this._ref)):s={next:n.next?o=>n.next(new sf(o,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class DR{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Ui(e,this._service))}get items(){return this._delegate.items.map(e=>new Ui(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=oW(this._delegate,e);return new Ui(n,this.storage)}get root(){return new Ui(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new Ui(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new xR(eW(this._delegate,e,n),this)}putString(e,n=Ir.RAW,r){this._throwIfRoot("putString");const i=yx(n,e),s=Object.assign({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new xR(new Cx(this._delegate,new si(i.data,!0),s),this)}listAll(){return iW(this._delegate).then(e=>new DR(e,this.storage))}list(e){return rW(this._delegate,e||void 0).then(n=>new DR(n,this.storage))}getMetadata(){return tW(this._delegate)}updateMetadata(e){return nW(this._delegate,e)}getDownloadURL(){return xx(this._delegate)}delete(){return this._throwIfRoot("delete"),sW(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw mx(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(OR(e))throw Cl("ref() expected a child path but got a URL, use refFromURL instead.");return new Ui(Xy(this._delegate,e),this)}refFromURL(e){if(!OR(e))throw Cl("refFromURL() expected a full URL but got a child path, use ref() instead.");try{In.makeFromUrl(e,this._delegate.host)}catch{throw Cl("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ui(Xy(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){aW(this._delegate,e,n,r)}}function OR(t){return/^[A-Za-z]+:\/\//.test(t)}const cW="@firebase/storage-compat",hW="0.3.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dW="storage-compat";function fW(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new Dx(n,r)}function pW(t){const e={TaskState:Nn,TaskEvent:V9,StringFormat:Ir,Storage:Dx,Reference:Ui};t.INTERNAL.registerComponent(new ur(dW,fW,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(cW,hW)}pW(Ue);const mW={apiKey:"AIzaSyCknnv2K7Zlzh-cxqbAb1lDuoFB79JNvoY",authDomain:"nationsglory-62812.firebaseapp.com",projectId:"nationsglory-62812",storageBucket:"nationsglory-62812.appspot.com",messagingSenderId:"1062049263686",appId:"1:1062049263686:web:42dc7925af2b4f1da69a47",measurementId:"G-156LHMY0NL"};Ue.apps.length||Ue.initializeApp(mW);const gW=()=>{const[t,e]=U.useState(""),[n,r]=U.useState(""),[i,s]=U.useState(""),[o,a]=U.useState(""),[l,c]=U.useState(""),[h,d]=U.useState(null),[p,_]=U.useState(""),[y,E]=U.useState(!1),[P,S]=U.useState(""),I=async()=>{if(_(""),n!==i){_("Les mots de passe ne correspondent pas.");return}E(!0);try{const k=await Ue.auth().createUserWithEmailAndPassword(t,n);if(h){const j=Ue.storage().ref().child(`profiles/${k.user.uid}`);await j.put(h);const g=await j.getDownloadURL();await k.user.updateProfile({displayName:`${o} ${l}`,photoURL:g}),await Ue.firestore().collection("users").doc(k.user.uid).set({firstName:o,lastName:l,email:t,photoURL:g,pseudong:P}),console.log("Profil utilisateur mis  jour avec succs.")}else await k.user.updateProfile({displayName:`${o} ${l}`}),await Ue.firestore().collection("users").doc(k.user.uid).set({firstName:o,lastName:l,email:t,pseudong:P});console.log("Inscription russie !"),window.location.href="/nationglorycomu/"}catch(k){_(k.message),console.error(k.message)}finally{E(!1)}},T=async()=>{E(!0);try{const k=new Ue.auth.GoogleAuthProvider,F=await Ue.auth().signInWithPopup(k),j=F.user.email,{given_name:g,family_name:v}=F.additionalUserInfo.profile,R=F.user.photoURL||"https://firebasestorage.googleapis.com/v0/b/nationsglory-62812.appspot.com/o/Prendre%20sa%20sant%C3%A9%20en%20main%20n%E2%80%99a%20jamais%20%C3%A9t%C3%A9%20aussi%20simple.jpg?alt=media&token=dc085ed1-9a30-4dc8-92cc-ad7eaa8a840c";await Ue.firestore().collection("users").doc(F.user.uid).set({firstName:g,lastName:v,email:j,photoURL:R}),console.log("Inscription avec Google russie !"),window.location.href="/nationglorycomu/"}catch(k){_(k.message),console.error(k.message)}finally{E(!1)}};return q.jsxs("div",{children:[q.jsx("h2",{children:"Inscription"}),p&&q.jsx("p",{style:{color:"red"},children:p}),q.jsx("input",{type:"text",placeholder:"Prnom",value:o,onChange:k=>a(k.target.value)}),q.jsx("input",{type:"text",placeholder:"Nom",value:l,onChange:k=>c(k.target.value)}),q.jsx("input",{type:"email",placeholder:"Adresse email",value:t,onChange:k=>e(k.target.value)}),q.jsx("input",{type:"password",placeholder:"Mot de passe",value:n,onChange:k=>r(k.target.value)}),q.jsx("input",{type:"password",placeholder:"Confirmer le mot de passe",value:i,onChange:k=>s(k.target.value)}),q.jsx("input",{type:"file",accept:"image/*",onChange:k=>d(k.target.files[0])}),q.jsx("input",{type:"text",placeholder:"Pseudong",value:P,onChange:k=>S(k.target.value)}),q.jsx("button",{onClick:I,disabled:y,children:"S'inscrire"}),q.jsx("button",{onClick:T,disabled:y,children:"S'inscrire avec Google"})]})},_W=()=>{const[t,e]=U.useState(""),[n,r]=U.useState(""),[i,s]=U.useState(""),[o,a]=U.useState(!1),l=async()=>{s(""),a(!0);try{await Ue.auth().signInWithEmailAndPassword(t,n),console.log("Connexion russie !"),window.location.href="/nationglorycomu/"}catch(h){s(h.message),console.error(h.message)}finally{a(!1)}},c=async()=>{s(""),a(!0);try{const h=new Ue.auth.GoogleAuthProvider;await Ue.auth().signInWithPopup(h),console.log("Connexion russie avec Google !"),window.location.href="/nationglorycomu/"}catch(h){s(h.message),console.error(h.message)}finally{a(!1)}};return q.jsxs("div",{children:[q.jsx("h2",{children:"Connexion"}),i&&q.jsx("p",{style:{color:"red"},children:i}),q.jsx("input",{type:"email",placeholder:"Adresse email",value:t,onChange:h=>e(h.target.value)}),q.jsx("input",{type:"password",placeholder:"Mot de passe",value:n,onChange:h=>r(h.target.value)}),q.jsx("button",{onClick:l,disabled:o,children:"Se connecter"}),q.jsx("button",{onClick:c,disabled:o,children:"Se connecter avec Google"})]})},yW=()=>{const[t,e]=U.useState(!0);return q.jsxs("div",{children:[t?q.jsx(_W,{}):q.jsx(gW,{}),q.jsx("button",{onClick:()=>e(!t),children:t?"S'inscrire":"Se connecter"})]})};let of;const vW=new Uint8Array(16);function wW(){if(!of&&(of=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!of))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return of(vW)}const an=[];for(let t=0;t<256;++t)an.push((t+256).toString(16).slice(1));function EW(t,e=0){return an[t[e+0]]+an[t[e+1]]+an[t[e+2]]+an[t[e+3]]+"-"+an[t[e+4]]+an[t[e+5]]+"-"+an[t[e+6]]+an[t[e+7]]+"-"+an[t[e+8]]+an[t[e+9]]+"-"+an[t[e+10]]+an[t[e+11]]+an[t[e+12]]+an[t[e+13]]+an[t[e+14]]+an[t[e+15]]}const IW=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),LR={randomUUID:IW};function TW(t,e,n){if(LR.randomUUID&&!e&&!t)return LR.randomUUID();t=t||{};const r=t.random||(t.rng||wW)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,EW(r)}const Ox=()=>{const t=async()=>{try{await Ue.auth().signOut(),console.log("Dconnexion russie !"),window.location.href="/nationglorycomu/"}catch(e){console.error(e.message)}};return q.jsx("div",{children:q.jsx("button",{onClick:t,children:"Se dconnecter"})})};function Lx(t,e){return function(){return t.apply(e,arguments)}}const{toString:SW}=Object.prototype,{getPrototypeOf:rI}=Object,Wm=(t=>e=>{const n=SW.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Yr=t=>(t=t.toLowerCase(),e=>Wm(e)===t),Hm=t=>e=>typeof e===t,{isArray:Su}=Array,Oh=Hm("undefined");function RW(t){return t!==null&&!Oh(t)&&t.constructor!==null&&!Oh(t.constructor)&&Ar(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Mx=Yr("ArrayBuffer");function AW(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Mx(t.buffer),e}const CW=Hm("string"),Ar=Hm("function"),Vx=Hm("number"),Gm=t=>t!==null&&typeof t=="object",PW=t=>t===!0||t===!1,Of=t=>{if(Wm(t)!=="object")return!1;const e=rI(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},bW=Yr("Date"),kW=Yr("File"),NW=Yr("Blob"),xW=Yr("FileList"),DW=t=>Gm(t)&&Ar(t.pipe),OW=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Ar(t.append)&&((e=Wm(t))==="formdata"||e==="object"&&Ar(t.toString)&&t.toString()==="[object FormData]"))},LW=Yr("URLSearchParams"),[MW,VW,FW,UW]=["ReadableStream","Request","Response","Headers"].map(Yr),BW=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function hd(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Su(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function Fx(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Ux=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Bx=t=>!Oh(t)&&t!==Ux;function Zy(){const{caseless:t}=Bx(this)&&this||{},e={},n=(r,i)=>{const s=t&&Fx(e,i)||i;Of(e[s])&&Of(r)?e[s]=Zy(e[s],r):Of(r)?e[s]=Zy({},r):Su(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&hd(arguments[r],n);return e}const jW=(t,e,n,{allOwnKeys:r}={})=>(hd(e,(i,s)=>{n&&Ar(i)?t[s]=Lx(i,n):t[s]=i},{allOwnKeys:r}),t),zW=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),qW=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},$W=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&rI(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},WW=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},HW=t=>{if(!t)return null;if(Su(t))return t;let e=t.length;if(!Vx(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},GW=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&rI(Uint8Array)),KW=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},QW=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},YW=Yr("HTMLFormElement"),JW=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),MR=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),XW=Yr("RegExp"),jx=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};hd(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},ZW=t=>{jx(t,(e,n)=>{if(Ar(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Ar(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},e5=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Su(t)?r(t):r(String(t).split(e)),n},t5=()=>{},n5=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,i_="abcdefghijklmnopqrstuvwxyz",VR="0123456789",zx={DIGIT:VR,ALPHA:i_,ALPHA_DIGIT:i_+i_.toUpperCase()+VR},r5=(t=16,e=zx.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function i5(t){return!!(t&&Ar(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const s5=t=>{const e=new Array(10),n=(r,i)=>{if(Gm(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Su(r)?[]:{};return hd(r,(o,a)=>{const l=n(o,i+1);!Oh(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},o5=Yr("AsyncFunction"),a5=t=>t&&(Gm(t)||Ar(t))&&Ar(t.then)&&Ar(t.catch),B={isArray:Su,isArrayBuffer:Mx,isBuffer:RW,isFormData:OW,isArrayBufferView:AW,isString:CW,isNumber:Vx,isBoolean:PW,isObject:Gm,isPlainObject:Of,isReadableStream:MW,isRequest:VW,isResponse:FW,isHeaders:UW,isUndefined:Oh,isDate:bW,isFile:kW,isBlob:NW,isRegExp:XW,isFunction:Ar,isStream:DW,isURLSearchParams:LW,isTypedArray:GW,isFileList:xW,forEach:hd,merge:Zy,extend:jW,trim:BW,stripBOM:zW,inherits:qW,toFlatObject:$W,kindOf:Wm,kindOfTest:Yr,endsWith:WW,toArray:HW,forEachEntry:KW,matchAll:QW,isHTMLForm:YW,hasOwnProperty:MR,hasOwnProp:MR,reduceDescriptors:jx,freezeMethods:ZW,toObjectSet:e5,toCamelCase:JW,noop:t5,toFiniteNumber:n5,findKey:Fx,global:Ux,isContextDefined:Bx,ALPHABET:zx,generateString:r5,isSpecCompliantForm:i5,toJSONObject:s5,isAsyncFn:o5,isThenable:a5};function ge(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}B.inherits(ge,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:B.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const qx=ge.prototype,$x={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{$x[t]={value:t}});Object.defineProperties(ge,$x);Object.defineProperty(qx,"isAxiosError",{value:!0});ge.from=(t,e,n,r,i,s)=>{const o=Object.create(qx);return B.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),ge.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const l5=null;function ev(t){return B.isPlainObject(t)||B.isArray(t)}function Wx(t){return B.endsWith(t,"[]")?t.slice(0,-2):t}function FR(t,e,n){return t?t.concat(e).map(function(i,s){return i=Wx(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function u5(t){return B.isArray(t)&&!t.some(ev)}const c5=B.toFlatObject(B,{},null,function(e){return/^is[A-Z]/.test(e)});function Km(t,e,n){if(!B.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=B.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,P){return!B.isUndefined(P[E])});const r=n.metaTokens,i=n.visitor||h,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&B.isSpecCompliantForm(e);if(!B.isFunction(i))throw new TypeError("visitor must be a function");function c(y){if(y===null)return"";if(B.isDate(y))return y.toISOString();if(!l&&B.isBlob(y))throw new ge("Blob is not supported. Use a Buffer instead.");return B.isArrayBuffer(y)||B.isTypedArray(y)?l&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function h(y,E,P){let S=y;if(y&&!P&&typeof y=="object"){if(B.endsWith(E,"{}"))E=r?E:E.slice(0,-2),y=JSON.stringify(y);else if(B.isArray(y)&&u5(y)||(B.isFileList(y)||B.endsWith(E,"[]"))&&(S=B.toArray(y)))return E=Wx(E),S.forEach(function(T,k){!(B.isUndefined(T)||T===null)&&e.append(o===!0?FR([E],k,s):o===null?E:E+"[]",c(T))}),!1}return ev(y)?!0:(e.append(FR(P,E,s),c(y)),!1)}const d=[],p=Object.assign(c5,{defaultVisitor:h,convertValue:c,isVisitable:ev});function _(y,E){if(!B.isUndefined(y)){if(d.indexOf(y)!==-1)throw Error("Circular reference detected in "+E.join("."));d.push(y),B.forEach(y,function(S,I){(!(B.isUndefined(S)||S===null)&&i.call(e,S,B.isString(I)?I.trim():I,E,p))===!0&&_(S,E?E.concat(I):[I])}),d.pop()}}if(!B.isObject(t))throw new TypeError("data must be an object");return _(t),e}function UR(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function iI(t,e){this._pairs=[],t&&Km(t,this,e)}const Hx=iI.prototype;Hx.append=function(e,n){this._pairs.push([e,n])};Hx.toString=function(e){const n=e?function(r){return e.call(this,r,UR)}:UR;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function h5(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Gx(t,e,n){if(!e)return t;const r=n&&n.encode||h5,i=n&&n.serialize;let s;if(i?s=i(e,n):s=B.isURLSearchParams(e)?e.toString():new iI(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class BR{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){B.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Kx={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},d5=typeof URLSearchParams<"u"?URLSearchParams:iI,f5=typeof FormData<"u"?FormData:null,p5=typeof Blob<"u"?Blob:null,m5={isBrowser:!0,classes:{URLSearchParams:d5,FormData:f5,Blob:p5},protocols:["http","https","file","blob","url","data"]},sI=typeof window<"u"&&typeof document<"u",g5=(t=>sI&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),_5=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",y5=sI&&window.location.href||"http://localhost",v5=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:sI,hasStandardBrowserEnv:g5,hasStandardBrowserWebWorkerEnv:_5,origin:y5},Symbol.toStringTag,{value:"Module"})),$r={...v5,...m5};function w5(t,e){return Km(t,new $r.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return $r.isNode&&B.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function E5(t){return B.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function I5(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function Qx(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&B.isArray(i)?i.length:o,l?(B.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!B.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&B.isArray(i[o])&&(i[o]=I5(i[o])),!a)}if(B.isFormData(t)&&B.isFunction(t.entries)){const n={};return B.forEachEntry(t,(r,i)=>{e(E5(r),i,n,0)}),n}return null}function T5(t,e,n){if(B.isString(t))try{return(e||JSON.parse)(t),B.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const dd={transitional:Kx,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=B.isObject(e);if(s&&B.isHTMLForm(e)&&(e=new FormData(e)),B.isFormData(e))return i?JSON.stringify(Qx(e)):e;if(B.isArrayBuffer(e)||B.isBuffer(e)||B.isStream(e)||B.isFile(e)||B.isBlob(e)||B.isReadableStream(e))return e;if(B.isArrayBufferView(e))return e.buffer;if(B.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return w5(e,this.formSerializer).toString();if((a=B.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Km(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),T5(e)):e}],transformResponse:[function(e){const n=this.transitional||dd.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(B.isResponse(e)||B.isReadableStream(e))return e;if(e&&B.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?ge.from(a,ge.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$r.classes.FormData,Blob:$r.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};B.forEach(["delete","get","head","post","put","patch"],t=>{dd.headers[t]={}});const S5=B.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),R5=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&S5[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},jR=Symbol("internals");function lc(t){return t&&String(t).trim().toLowerCase()}function Lf(t){return t===!1||t==null?t:B.isArray(t)?t.map(Lf):String(t)}function A5(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const C5=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function s_(t,e,n,r,i){if(B.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!B.isString(e)){if(B.isString(r))return e.indexOf(r)!==-1;if(B.isRegExp(r))return r.test(e)}}function P5(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function b5(t,e){const n=B.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class Xn{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,c){const h=lc(l);if(!h)throw new Error("header name must be a non-empty string");const d=B.findKey(i,h);(!d||i[d]===void 0||c===!0||c===void 0&&i[d]!==!1)&&(i[d||l]=Lf(a))}const o=(a,l)=>B.forEach(a,(c,h)=>s(c,h,l));if(B.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(B.isString(e)&&(e=e.trim())&&!C5(e))o(R5(e),n);else if(B.isHeaders(e))for(const[a,l]of e.entries())s(l,a,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=lc(e),e){const r=B.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return A5(i);if(B.isFunction(n))return n.call(this,i,r);if(B.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=lc(e),e){const r=B.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||s_(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=lc(o),o){const a=B.findKey(r,o);a&&(!n||s_(r,r[a],a,n))&&(delete r[a],i=!0)}}return B.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||s_(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return B.forEach(this,(i,s)=>{const o=B.findKey(r,s);if(o){n[o]=Lf(i),delete n[s];return}const a=e?P5(s):String(s).trim();a!==s&&delete n[s],n[a]=Lf(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return B.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&B.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[jR]=this[jR]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=lc(o);r[a]||(b5(i,o),r[a]=!0)}return B.isArray(e)?e.forEach(s):s(e),this}}Xn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);B.reduceDescriptors(Xn.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});B.freezeMethods(Xn);function o_(t,e){const n=this||dd,r=e||n,i=Xn.from(r.headers);let s=r.data;return B.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function Yx(t){return!!(t&&t.__CANCEL__)}function Ru(t,e,n){ge.call(this,t??"canceled",ge.ERR_CANCELED,e,n),this.name="CanceledError"}B.inherits(Ru,ge,{__CANCEL__:!0});function Jx(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new ge("Request failed with status code "+n.status,[ge.ERR_BAD_REQUEST,ge.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function k5(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function N5(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),h=r[s];o||(o=c),n[i]=l,r[i]=c;let d=s,p=0;for(;d!==i;)p+=n[d++],d=d%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const _=h&&c-h;return _?Math.round(p*1e3/_):void 0}}function x5(t,e){let n=0;const r=1e3/e;let i=null;return function(){const o=this===!0,a=Date.now();if(o||a-n>r)return i&&(clearTimeout(i),i=null),n=a,t.apply(null,arguments);i||(i=setTimeout(()=>(i=null,n=Date.now(),t.apply(null,arguments)),r-(a-n)))}}const Np=(t,e,n=3)=>{let r=0;const i=N5(50,250);return x5(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),h=o<=a;r=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&h?(a-o)/c:void 0,event:s,lengthComputable:a!=null};d[e?"download":"upload"]=!0,t(d)},n)},D5=$r.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){const a=B.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}(),O5=$r.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];B.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),B.isString(r)&&o.push("path="+r),B.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function L5(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function M5(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Xx(t,e){return t&&!L5(e)?M5(t,e):e}const zR=t=>t instanceof Xn?{...t}:t;function fa(t,e){e=e||{};const n={};function r(c,h,d){return B.isPlainObject(c)&&B.isPlainObject(h)?B.merge.call({caseless:d},c,h):B.isPlainObject(h)?B.merge({},h):B.isArray(h)?h.slice():h}function i(c,h,d){if(B.isUndefined(h)){if(!B.isUndefined(c))return r(void 0,c,d)}else return r(c,h,d)}function s(c,h){if(!B.isUndefined(h))return r(void 0,h)}function o(c,h){if(B.isUndefined(h)){if(!B.isUndefined(c))return r(void 0,c)}else return r(void 0,h)}function a(c,h,d){if(d in e)return r(c,h);if(d in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,h)=>i(zR(c),zR(h),!0)};return B.forEach(Object.keys(Object.assign({},t,e)),function(h){const d=l[h]||i,p=d(t[h],e[h],h);B.isUndefined(p)&&d!==a||(n[h]=p)}),n}const Zx=t=>{const e=fa({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=Xn.from(o),e.url=Gx(Xx(e.baseURL,e.url),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(B.isFormData(n)){if($r.hasStandardBrowserEnv||$r.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...h]=l?l.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...h].join("; "))}}if($r.hasStandardBrowserEnv&&(r&&B.isFunction(r)&&(r=r(e)),r||r!==!1&&D5(e.url))){const c=i&&s&&O5.read(s);c&&o.set(i,c)}return e},V5=typeof XMLHttpRequest<"u",F5=V5&&function(t){return new Promise(function(n,r){const i=Zx(t);let s=i.data;const o=Xn.from(i.headers).normalize();let{responseType:a}=i,l;function c(){i.cancelToken&&i.cancelToken.unsubscribe(l),i.signal&&i.signal.removeEventListener("abort",l)}let h=new XMLHttpRequest;h.open(i.method.toUpperCase(),i.url,!0),h.timeout=i.timeout;function d(){if(!h)return;const _=Xn.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders()),E={data:!a||a==="text"||a==="json"?h.responseText:h.response,status:h.status,statusText:h.statusText,headers:_,config:t,request:h};Jx(function(S){n(S),c()},function(S){r(S),c()},E),h=null}"onloadend"in h?h.onloadend=d:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(d)},h.onabort=function(){h&&(r(new ge("Request aborted",ge.ECONNABORTED,i,h)),h=null)},h.onerror=function(){r(new ge("Network Error",ge.ERR_NETWORK,i,h)),h=null},h.ontimeout=function(){let y=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const E=i.transitional||Kx;i.timeoutErrorMessage&&(y=i.timeoutErrorMessage),r(new ge(y,E.clarifyTimeoutError?ge.ETIMEDOUT:ge.ECONNABORTED,i,h)),h=null},s===void 0&&o.setContentType(null),"setRequestHeader"in h&&B.forEach(o.toJSON(),function(y,E){h.setRequestHeader(E,y)}),B.isUndefined(i.withCredentials)||(h.withCredentials=!!i.withCredentials),a&&a!=="json"&&(h.responseType=i.responseType),typeof i.onDownloadProgress=="function"&&h.addEventListener("progress",Np(i.onDownloadProgress,!0)),typeof i.onUploadProgress=="function"&&h.upload&&h.upload.addEventListener("progress",Np(i.onUploadProgress)),(i.cancelToken||i.signal)&&(l=_=>{h&&(r(!_||_.type?new Ru(null,t,h):_),h.abort(),h=null)},i.cancelToken&&i.cancelToken.subscribe(l),i.signal&&(i.signal.aborted?l():i.signal.addEventListener("abort",l)));const p=k5(i.url);if(p&&$r.protocols.indexOf(p)===-1){r(new ge("Unsupported protocol "+p+":",ge.ERR_BAD_REQUEST,t));return}h.send(s||null)})},U5=(t,e)=>{let n=new AbortController,r;const i=function(l){if(!r){r=!0,o();const c=l instanceof Error?l:this.reason;n.abort(c instanceof ge?c:new Ru(c instanceof Error?c.message:c))}};let s=e&&setTimeout(()=>{i(new ge(`timeout ${e} of ms exceeded`,ge.ETIMEDOUT))},e);const o=()=>{t&&(s&&clearTimeout(s),s=null,t.forEach(l=>{l&&(l.removeEventListener?l.removeEventListener("abort",i):l.unsubscribe(i))}),t=null)};t.forEach(l=>l&&l.addEventListener&&l.addEventListener("abort",i));const{signal:a}=n;return a.unsubscribe=o,[a,()=>{s&&clearTimeout(s),s=null}]},B5=function*(t,e){let n=t.byteLength;if(!e||n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},j5=async function*(t,e,n){for await(const r of t)yield*B5(ArrayBuffer.isView(r)?r:await n(String(r)),e)},qR=(t,e,n,r,i)=>{const s=j5(t,e,i);let o=0;return new ReadableStream({type:"bytes",async pull(a){const{done:l,value:c}=await s.next();if(l){a.close(),r();return}let h=c.byteLength;n&&n(o+=h),a.enqueue(new Uint8Array(c))},cancel(a){return r(a),s.return()}},{highWaterMark:2})},$R=(t,e)=>{const n=t!=null;return r=>setTimeout(()=>e({lengthComputable:n,total:t,loaded:r}))},Qm=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",eD=Qm&&typeof ReadableStream=="function",tv=Qm&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),z5=eD&&(()=>{let t=!1;const e=new Request($r.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e})(),WR=64*1024,nv=eD&&!!(()=>{try{return B.isReadableStream(new Response("").body)}catch{}})(),xp={stream:nv&&(t=>t.body)};Qm&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!xp[e]&&(xp[e]=B.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new ge(`Response type '${e}' is not supported`,ge.ERR_NOT_SUPPORT,r)})})})(new Response);const q5=async t=>{if(t==null)return 0;if(B.isBlob(t))return t.size;if(B.isSpecCompliantForm(t))return(await new Request(t).arrayBuffer()).byteLength;if(B.isArrayBufferView(t))return t.byteLength;if(B.isURLSearchParams(t)&&(t=t+""),B.isString(t))return(await tv(t)).byteLength},$5=async(t,e)=>{const n=B.toFiniteNumber(t.getContentLength());return n??q5(e)},W5=Qm&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:h,withCredentials:d="same-origin",fetchOptions:p}=Zx(t);c=c?(c+"").toLowerCase():"text";let[_,y]=i||s||o?U5([i,s],o):[],E,P;const S=()=>{!E&&setTimeout(()=>{_&&_.unsubscribe()}),E=!0};let I;try{if(l&&z5&&n!=="get"&&n!=="head"&&(I=await $5(h,r))!==0){let j=new Request(e,{method:"POST",body:r,duplex:"half"}),g;B.isFormData(r)&&(g=j.headers.get("content-type"))&&h.setContentType(g),j.body&&(r=qR(j.body,WR,$R(I,Np(l)),null,tv))}B.isString(d)||(d=d?"cors":"omit"),P=new Request(e,{...p,signal:_,method:n.toUpperCase(),headers:h.normalize().toJSON(),body:r,duplex:"half",withCredentials:d});let T=await fetch(P);const k=nv&&(c==="stream"||c==="response");if(nv&&(a||k)){const j={};["status","statusText","headers"].forEach(v=>{j[v]=T[v]});const g=B.toFiniteNumber(T.headers.get("content-length"));T=new Response(qR(T.body,WR,a&&$R(g,Np(a,!0)),k&&S,tv),j)}c=c||"text";let F=await xp[B.findKey(xp,c)||"text"](T,t);return!k&&S(),y&&y(),await new Promise((j,g)=>{Jx(j,g,{data:F,headers:Xn.from(T.headers),status:T.status,statusText:T.statusText,config:t,request:P})})}catch(T){throw S(),T&&T.name==="TypeError"&&/fetch/i.test(T.message)?Object.assign(new ge("Network Error",ge.ERR_NETWORK,t,P),{cause:T.cause||T}):ge.from(T,T&&T.code,t,P)}}),rv={http:l5,xhr:F5,fetch:W5};B.forEach(rv,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const HR=t=>`- ${t}`,H5=t=>B.isFunction(t)||t===null||t===!1,tD={getAdapter:t=>{t=B.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!H5(n)&&(r=rv[(o=String(n)).toLowerCase()],r===void 0))throw new ge(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(HR).join(`
`):" "+HR(s[0]):"as no adapter specified";throw new ge("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:rv};function a_(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ru(null,t)}function GR(t){return a_(t),t.headers=Xn.from(t.headers),t.data=o_.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),tD.getAdapter(t.adapter||dd.adapter)(t).then(function(r){return a_(t),r.data=o_.call(t,t.transformResponse,r),r.headers=Xn.from(r.headers),r},function(r){return Yx(r)||(a_(t),r&&r.response&&(r.response.data=o_.call(t,t.transformResponse,r.response),r.response.headers=Xn.from(r.response.headers))),Promise.reject(r)})}const nD="1.7.2",oI={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{oI[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const KR={};oI.transitional=function(e,n,r){function i(s,o){return"[Axios v"+nD+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new ge(i(o," has been removed"+(n?" in "+n:"")),ge.ERR_DEPRECATED);return n&&!KR[o]&&(KR[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};function G5(t,e,n){if(typeof t!="object")throw new ge("options must be an object",ge.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new ge("option "+s+" must be "+l,ge.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ge("Unknown option "+s,ge.ERR_BAD_OPTION)}}const iv={assertOptions:G5,validators:oI},_s=iv.validators;class Go{constructor(e){this.defaults=e,this.interceptors={request:new BR,response:new BR}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=fa(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&iv.assertOptions(r,{silentJSONParsing:_s.transitional(_s.boolean),forcedJSONParsing:_s.transitional(_s.boolean),clarifyTimeoutError:_s.transitional(_s.boolean)},!1),i!=null&&(B.isFunction(i)?n.paramsSerializer={serialize:i}:iv.assertOptions(i,{encode:_s.function,serialize:_s.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&B.merge(s.common,s[n.method]);s&&B.forEach(["delete","get","head","post","put","patch","common"],y=>{delete s[y]}),n.headers=Xn.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(n)===!1||(l=l&&E.synchronous,a.unshift(E.fulfilled,E.rejected))});const c=[];this.interceptors.response.forEach(function(E){c.push(E.fulfilled,E.rejected)});let h,d=0,p;if(!l){const y=[GR.bind(this),void 0];for(y.unshift.apply(y,a),y.push.apply(y,c),p=y.length,h=Promise.resolve(n);d<p;)h=h.then(y[d++],y[d++]);return h}p=a.length;let _=n;for(d=0;d<p;){const y=a[d++],E=a[d++];try{_=y(_)}catch(P){E.call(this,P);break}}try{h=GR.call(this,_)}catch(y){return Promise.reject(y)}for(d=0,p=c.length;d<p;)h=h.then(c[d++],c[d++]);return h}getUri(e){e=fa(this.defaults,e);const n=Xx(e.baseURL,e.url);return Gx(n,e.params,e.paramsSerializer)}}B.forEach(["delete","get","head","options"],function(e){Go.prototype[e]=function(n,r){return this.request(fa(r||{},{method:e,url:n,data:(r||{}).data}))}});B.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(fa(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Go.prototype[e]=n(),Go.prototype[e+"Form"]=n(!0)});class aI{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Ru(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new aI(function(i){e=i}),cancel:e}}}function K5(t){return function(n){return t.apply(null,n)}}function Q5(t){return B.isObject(t)&&t.isAxiosError===!0}const sv={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(sv).forEach(([t,e])=>{sv[e]=t});function rD(t){const e=new Go(t),n=Lx(Go.prototype.request,e);return B.extend(n,Go.prototype,e,{allOwnKeys:!0}),B.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return rD(fa(t,i))},n}const Pt=rD(dd);Pt.Axios=Go;Pt.CanceledError=Ru;Pt.CancelToken=aI;Pt.isCancel=Yx;Pt.VERSION=nD;Pt.toFormData=Km;Pt.AxiosError=ge;Pt.Cancel=Pt.CanceledError;Pt.all=function(e){return Promise.all(e)};Pt.spread=K5;Pt.isAxiosError=Q5;Pt.mergeConfig=fa;Pt.AxiosHeaders=Xn;Pt.formToJSON=t=>Qx(B.isHTMLForm(t)?new FormData(t):t);Pt.getAdapter=tD.getAdapter;Pt.HttpStatusCode=sv;Pt.default=Pt;var QR={};const YR="@firebase/database",JR="1.0.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iD="";function Y5(t){iD=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),un(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:mh(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Gr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new J5(e)}}catch{}return new X5},Uo=sD("localStorage"),Z5=sD("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pl=new qh("@firebase/database"),eH=function(){let t=1;return function(){return t++}}(),oD=function(t){const e=s2(t),n=new t2;n.update(e);const r=n.digest();return ww.encodeByteArray(r)},fd=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=fd.apply(null,r):typeof r=="object"?e+=un(r):e+=r,e+=" "}return e};let $c=null,XR=!0;const tH=function(t,e){Z(!e,"Can't turn on custom loggers persistently."),Pl.logLevel=ve.VERBOSE,$c=Pl.log.bind(Pl)},wn=function(...t){if(XR===!0&&(XR=!1,$c===null&&Z5.get("logging_enabled")===!0&&tH()),$c){const e=fd.apply(null,t);$c(e)}},pd=function(t){return function(...e){wn(t,...e)}},ov=function(...t){const e="FIREBASE INTERNAL ERROR: "+fd(...t);Pl.error(e)},pa=function(...t){const e=`FIREBASE FATAL ERROR: ${fd(...t)}`;throw Pl.error(e),new Error(e)},ar=function(...t){const e="FIREBASE WARNING: "+fd(...t);Pl.warn(e)},nH=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ar("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},aD=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},rH=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},iu="[MIN_NAME]",ma="[MAX_NAME]",Au=function(t,e){if(t===e)return 0;if(t===iu||e===ma)return-1;if(e===iu||t===ma)return 1;{const n=ZR(t),r=ZR(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},iH=function(t,e){return t===e?0:t<e?-1:1},uc=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+un(e))},lI=function(t){if(typeof t!="object"||t===null)return un(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=un(e[r]),n+=":",n+=lI(t[e[r]]);return n+="}",n},lD=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function kr(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const uD=function(t){Z(!aD(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const h=c.join("");let d="";for(l=0;l<64;l+=8){let p=parseInt(h.substr(l,8),2).toString(16);p.length===1&&(p="0"+p),d=d+p}return d.toLowerCase()},sH=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},oH=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},aH=new RegExp("^-?(0*)\\d{1,10}$"),lH=-2147483648,uH=2147483647,ZR=function(t){if(aH.test(t)){const e=Number(t);if(e>=lH&&e<=uH)return e}return null},md=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw ar("Exception was thrown by user callback.",n),e},Math.floor(0))}},cH=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Wc=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hH{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ar(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dH{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(wn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ar(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI="5",cD="v",hD="s",dD="r",fD="f",pD=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,mD="ls",gD="p",av="ac",_D="websocket",yD="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fH{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Uo.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Uo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function pH(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function vD(t,e,n){Z(typeof e=="string","typeof type must == string"),Z(typeof n=="object","typeof params must == object");let r;if(e===_D)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===yD)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);pH(t)&&(n.ns=t.namespace);const i=[];return kr(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mH{constructor(){this.counters_={}}incrementCounter(e,n=1){Gr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return zF(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_={},u_={};function cI(t){const e=t.toString();return l_[e]||(l_[e]=new mH),l_[e]}function gH(t,e){const n=t.toString();return u_[n]||(u_[n]=e()),u_[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _H{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&md(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="start",yH="close",vH="pLPCommand",wH="pRTLPCB",wD="id",ED="pw",ID="ser",EH="cb",IH="seg",TH="ts",SH="d",RH="dframe",TD=1870,SD=30,AH=TD-SD,CH=25e3,PH=3e4;class fl{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=pd(e),this.stats_=cI(n),this.urlFn=l=>(this.appCheckToken&&(l[av]=this.appCheckToken),vD(n,yD,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new _H(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(PH)),rH(()=>{if(this.isClosed_)return;this.scriptTagHolder=new hI((...s)=>{const[o,a,l,c,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===eA)this.id=a,this.password=l;else if(o===yH)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[eA]="t",r[ID]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[EH]=this.scriptTagHolder.uniqueCallbackIdentifier),r[cD]=uI,this.transportSessionId&&(r[hD]=this.transportSessionId),this.lastSessionId&&(r[mD]=this.lastSessionId),this.applicationId&&(r[gD]=this.applicationId),this.appCheckToken&&(r[av]=this.appCheckToken),typeof location<"u"&&location.hostname&&pD.test(location.hostname)&&(r[dD]=fD);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){fl.forceAllow_=!0}static forceDisallow(){fl.forceDisallow_=!0}static isAvailable(){return fl.forceAllow_?!0:!fl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!sH()&&!oH()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=un(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=cb(n),i=lD(r,AH);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[RH]="t",r[wD]=e,r[ED]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=un(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class hI{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=eH(),window[vH+this.uniqueCallbackIdentifier]=e,window[wH+this.uniqueCallbackIdentifier]=n,this.myIFrame=hI.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){wn("frame writing exception"),a.stack&&wn(a.stack),wn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||wn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[wD]=this.myID,e[ED]=this.myPW,e[ID]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+SD+r.length<=TD;){const o=this.pendingSegs.shift();r=r+"&"+IH+i+"="+o.seg+"&"+TH+i+"="+o.ts+"&"+SH+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(CH)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{wn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bH=16384,kH=45e3;let Dp=null;typeof MozWebSocket<"u"?Dp=MozWebSocket:typeof WebSocket<"u"&&(Dp=WebSocket);class Br{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=pd(this.connId),this.stats_=cI(n),this.connURL=Br.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[cD]=uI,typeof location<"u"&&location.hostname&&pD.test(location.hostname)&&(o[dD]=fD),n&&(o[hD]=n),r&&(o[mD]=r),i&&(o[av]=i),s&&(o[gD]=s),vD(e,_D,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Uo.set("previous_websocket_failure",!0);try{let r;yb(),this.mySock=new Dp(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Br.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Dp!==null&&!Br.forceDisallow_}static previouslyFailed(){return Uo.isInMemoryStorage||Uo.get("previous_websocket_failure")===!0}markConnectionHealthy(){Uo.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=mh(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Z(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=un(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=lD(n,bH);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(kH))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Br.responsesRequiredToBeHealthy=2;Br.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[fl,Br]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Br&&Br.isAvailable();let r=n&&!Br.previouslyFailed();if(e.webSocketOnly&&(n||ar("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Br];else{const i=this.transports_=[];for(const s of Lh.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Lh.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Lh.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NH=6e4,xH=5e3,DH=10*1024,OH=100*1024,c_="t",tA="d",LH="s",nA="r",MH="e",rA="o",iA="a",sA="n",oA="p",VH="h";class FH{constructor(e,n,r,i,s,o,a,l,c,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=pd("c:"+this.id+":"),this.transportManager_=new Lh(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Wc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>OH?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>DH?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(c_ in e){const n=e[c_];n===iA?this.upgradeIfSecondaryHealthy_():n===nA?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===rA&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=uc("t",e),r=uc("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:oA,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:iA,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:sA,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=uc("t",e),r=uc("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=uc(c_,e);if(tA in e){const r=e[tA];if(n===VH){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===sA){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===LH?this.onConnectionShutdown_(r):n===nA?this.onReset_(r):n===MH?ov("Server Error: "+r):n===rA?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ov("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),uI!==r&&ar("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Wc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(NH))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Wc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(xH))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:oA,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Uo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e){this.allowedEvents_=e,this.listeners_={},Z(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){Z(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op extends AD{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Iw()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Op}getInitialEvent(e){return Z(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA=32,lA=768;class Ze{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Be(){return new Ze("")}function Pe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function eo(t){return t.pieces_.length-t.pieceNum_}function Qe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ze(t.pieces_,e)}function CD(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function UH(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function PD(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function bD(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ze(e,0)}function Qt(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Ze)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Ze(n,0)}function Ae(t){return t.pieceNum_>=t.pieces_.length}function Tr(t,e){const n=Pe(t),r=Pe(e);if(n===null)return e;if(n===r)return Tr(Qe(t),Qe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function kD(t,e){if(eo(t)!==eo(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function jr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(eo(t)>eo(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class BH{constructor(e,n){this.errorPrefix_=n,this.parts_=PD(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=am(this.parts_[r]);ND(this)}}function jH(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=am(e),ND(t)}function zH(t){const e=t.parts_.pop();t.byteLength_-=am(e),t.parts_.length>0&&(t.byteLength_-=1)}function ND(t){if(t.byteLength_>lA)throw new Error(t.errorPrefix_+"has a key path longer than "+lA+" bytes ("+t.byteLength_+").");if(t.parts_.length>aA)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+aA+") or object contains a cycle "+Ro(t))}function Ro(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI extends AD{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new dI}getInitialEvent(e){return Z(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc=1e3,qH=60*5*1e3,uA=30*1e3,$H=1.3,WH=3e4,HH="server_kill",cA=3;class Bi extends RD{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Bi.nextPersistentConnectionId_++,this.log_=pd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=cc,this.maxReconnectDelay_=qH,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!yb())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");dI.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Op.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(un(s)),Z(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Ew,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),Z(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Z(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;Bi.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Gr(e,"w")){const r=Fl(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();ar(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||e2(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=uA)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=ZF(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),Z(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+un(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):ov("Unrecognized action received from server: "+un(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Z(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=cc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=cc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>WH&&(this.reconnectDelay_=cc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*$H)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Bi.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(d){Z(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:c};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,p]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?wn("getToken() completed but was canceled"):(wn("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,a=new FH(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,_=>{ar(_+" ("+this.repoInfo_.toString()+")"),this.interrupt(HH)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&ar(d),l())}}}interrupt(e){wn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){wn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],hy(this.interruptReasons_)&&(this.reconnectDelay_=cc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>lI(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new Ze(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){wn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=cA&&(this.reconnectDelay_=uA,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){wn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=cA&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+iD.replace(/\./g,"-")]=1,Iw()?e["framework.cordova"]=1:om()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Op.getInstance().currentlyOnline();return hy(this.interruptReasons_)&&e}}Bi.nextPersistentConnectionId_=0;Bi.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new be(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new be(iu,e),i=new be(iu,n);return this.compare(r,i)!==0}minPost(){return be.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let af;class xD extends Ym{static get __EMPTY_NODE(){return af}static set __EMPTY_NODE(e){af=e}compare(e,n){return Au(e.name,n.name)}isDefinedOn(e){throw cu("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return be.MIN}maxPost(){return new be(ma,af)}makePost(e,n){return Z(typeof e=="string","KeyIndex indexValue must always be a string."),new be(e,af)}toString(){return".key"}}const bl=new xD;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Kt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Kt.RED,this.left=i??Kn.EMPTY_NODE,this.right=s??Kn.EMPTY_NODE}copy(e,n,r,i,s){return new Kt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Kn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Kn.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Kt.RED=!0;Kt.BLACK=!1;class GH{copy(e,n,r,i,s){return this}insert(e,n,r){return new Kt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Kn{constructor(e,n=Kn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Kn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Kt.BLACK,null,null))}remove(e){return new Kn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Kt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new lf(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new lf(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new lf(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new lf(this.root_,null,this.comparator_,!0,e)}}Kn.EMPTY_NODE=new GH;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KH(t,e){return Au(t.name,e.name)}function fI(t,e){return Au(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lv;function QH(t){lv=t}const DD=function(t){return typeof t=="number"?"number:"+uD(t):"string:"+t},OD=function(t){if(t.isLeafNode()){const e=t.val();Z(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Gr(e,".sv"),"Priority must be a string or number.")}else Z(t===lv||t.isEmpty(),"priority of unexpected type.");Z(t===lv||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hA;class $t{constructor(e,n=$t.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Z(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),OD(this.priorityNode_)}static set __childrenNodeConstructor(e){hA=e}static get __childrenNodeConstructor(){return hA}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new $t(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:$t.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ae(e)?this:Pe(e)===".priority"?this.priorityNode_:$t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:$t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Pe(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(Z(r!==".priority"||eo(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,$t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Qe(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+DD(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=uD(this.value_):e+=this.value_,this.lazyHash_=oD(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===$t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof $t.__childrenNodeConstructor?-1:(Z(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=$t.VALUE_TYPE_ORDER.indexOf(n),s=$t.VALUE_TYPE_ORDER.indexOf(r);return Z(i>=0,"Unknown leaf type: "+n),Z(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}$t.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let LD,MD;function YH(t){LD=t}function JH(t){MD=t}class XH extends Ym{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Au(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return be.MIN}maxPost(){return new be(ma,new $t("[PRIORITY-POST]",MD))}makePost(e,n){const r=LD(e);return new be(n,new $t("[PRIORITY-POST]",r))}toString(){return".priority"}}const Tn=new XH;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZH=Math.log(2);class eG{constructor(e){const n=s=>parseInt(Math.log(s)/ZH,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Lp=function(t,e,n,r){t.sort(e);const i=function(l,c){const h=c-l;let d,p;if(h===0)return null;if(h===1)return d=t[l],p=n?n(d):d,new Kt(p,d.node,Kt.BLACK,null,null);{const _=parseInt(h/2,10)+l,y=i(l,_),E=i(_+1,c);return d=t[_],p=n?n(d):d,new Kt(p,d.node,Kt.BLACK,y,E)}},s=function(l){let c=null,h=null,d=t.length;const p=function(y,E){const P=d-y,S=d;d-=y;const I=i(P+1,S),T=t[P],k=n?n(T):T;_(new Kt(k,T.node,E,null,I))},_=function(y){c?(c.left=y,c=y):(h=y,c=y)};for(let y=0;y<l.count;++y){const E=l.nextBitIsOne(),P=Math.pow(2,l.count-(y+1));E?p(P,Kt.BLACK):(p(P,Kt.BLACK),p(P,Kt.RED))}return h},o=new eG(t.length),a=s(o);return new Kn(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h_;const Ga={};class Li{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return Z(Ga&&Tn,"ChildrenNode.ts has not been loaded"),h_=h_||new Li({".priority":Ga},{".priority":Tn}),h_}get(e){const n=Fl(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Kn?n:null}hasIndex(e){return Gr(this.indexSet_,e.toString())}addIndex(e,n){Z(e!==bl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(be.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Lp(r,e.getCompare()):a=Ga;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const h=Object.assign({},this.indexes_);return h[l]=a,new Li(h,c)}addToIndexes(e,n){const r=cp(this.indexes_,(i,s)=>{const o=Fl(this.indexSet_,s);if(Z(o,"Missing index implementation for "+s),i===Ga)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(be.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Lp(a,o.getCompare())}else return Ga;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new be(e.name,a))),l.insert(e,e.node)}});return new Li(r,this.indexSet_)}removeFromIndexes(e,n){const r=cp(this.indexes_,i=>{if(i===Ga)return i;{const s=n.get(e.name);return s?i.remove(new be(e.name,s)):i}});return new Li(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hc;class Le{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&OD(this.priorityNode_),this.children_.isEmpty()&&Z(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return hc||(hc=new Le(new Kn(fI),null,Li.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||hc}updatePriority(e){return this.children_.isEmpty()?this:new Le(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?hc:n}}getChild(e){const n=Pe(e);return n===null?this:this.getImmediateChild(n).getChild(Qe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Z(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new be(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?hc:this.priorityNode_;return new Le(i,o,s)}}updateChild(e,n){const r=Pe(e);if(r===null)return n;{Z(Pe(e)!==".priority"||eo(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(Qe(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(Tn,(o,a)=>{n[o]=a.val(e),r++,s&&Le.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+DD(this.getPriority().val())+":"),this.forEachChild(Tn,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":oD(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new be(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new be(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new be(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,be.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,be.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===gd?-1:0}withIndex(e){if(e===bl||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Le(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===bl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Tn),i=n.getIterator(Tn);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===bl?null:this.indexMap_.get(e.toString())}}Le.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class tG extends Le{constructor(){super(new Kn(fI),Le.EMPTY_NODE,Li.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Le.EMPTY_NODE}isEmpty(){return!1}}const gd=new tG;Object.defineProperties(be,{MIN:{value:new be(iu,Le.EMPTY_NODE)},MAX:{value:new be(ma,gd)}});xD.__EMPTY_NODE=Le.EMPTY_NODE;$t.__childrenNodeConstructor=Le;QH(gd);JH(gd);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nG=!0;function En(t,e=null){if(t===null)return Le.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Z(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new $t(n,En(e))}if(!(t instanceof Array)&&nG){const n=[];let r=!1;if(kr(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=En(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new be(o,l)))}}),n.length===0)return Le.EMPTY_NODE;const s=Lp(n,KH,o=>o.name,fI);if(r){const o=Lp(n,Tn.getCompare());return new Le(s,En(e),new Li({".priority":o},{".priority":Tn}))}else return new Le(s,En(e),Li.Default)}else{let n=Le.EMPTY_NODE;return kr(t,(r,i)=>{if(Gr(t,r)&&r.substring(0,1)!=="."){const s=En(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(En(e))}}YH(En);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rG extends Ym{constructor(e){super(),this.indexPath_=e,Z(!Ae(e)&&Pe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Au(e.name,n.name):s}makePost(e,n){const r=En(e),i=Le.EMPTY_NODE.updateChild(this.indexPath_,r);return new be(n,i)}maxPost(){const e=Le.EMPTY_NODE.updateChild(this.indexPath_,gd);return new be(ma,e)}toString(){return PD(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iG extends Ym{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Au(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return be.MIN}maxPost(){return be.MAX}makePost(e,n){const r=En(e);return new be(n,r)}toString(){return".value"}}const sG=new iG;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oG(t){return{type:"value",snapshotNode:t}}function aG(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function lG(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function dA(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function uG(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Tn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Z(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Z(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:iu}hasEnd(){return this.endSet_}getIndexEndValue(){return Z(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Z(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ma}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Z(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Tn}copy(){const e=new pI;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function fA(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Tn?n="$priority":t.index_===sG?n="$value":t.index_===bl?n="$key":(Z(t.index_ instanceof rG,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=un(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=un(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+un(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=un(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+un(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function pA(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Tn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp extends RD{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=pd("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Z(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Mp.getListenId_(e,r),a={};this.listens_[o]=a;const l=fA(e._queryParams);this.restRequest_(s+".json",l,(c,h)=>{let d=h;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(s,d,!1,r),Fl(this.listens_,o)===a){let p;c?c===401?p="permission_denied":p="rest_error:"+c:p="ok",i(p,null)}})}unlisten(e,n){const r=Mp.getListenId_(e,n);delete this.listens_[r]}get(e){const n=fA(e._queryParams),r=e._path.toString(),i=new Ew;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ia(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=mh(a.responseText)}catch{ar("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&ar("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cG{constructor(){this.rootNode_=Le.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(){return{value:null,children:new Map}}function VD(t,e,n){if(Ae(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Pe(e);t.children.has(r)||t.children.set(r,Vp());const i=t.children.get(r);e=Qe(e),VD(i,e,n)}}function uv(t,e,n){t.value!==null?n(e,t.value):hG(t,(r,i)=>{const s=new Ze(e.toString()+"/"+r);uv(i,s,n)})}function hG(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dG{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&kr(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=10*1e3,fG=30*1e3,pG=5*60*1e3;class mG{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new dG(e);const r=mA+(fG-mA)*Math.random();Wc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;kr(e,(i,s)=>{s>0&&Gr(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Wc(this.reportStats_.bind(this),Math.floor(Math.random()*2*pG))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ui;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ui||(ui={}));function FD(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function UD(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function BD(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=ui.ACK_USER_WRITE,this.source=FD()}operationForChild(e){if(Ae(this.path)){if(this.affectedTree.value!=null)return Z(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ze(e));return new Fp(Be(),n,this.revert)}}else return Z(Pe(this.path)===e,"operationForChild called for unrelated child."),new Fp(Qe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=ui.OVERWRITE}operationForChild(e){return Ae(this.path)?new ga(this.source,Be(),this.snap.getImmediateChild(e)):new ga(this.source,Qe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=ui.MERGE}operationForChild(e){if(Ae(this.path)){const n=this.children.subtree(new Ze(e));return n.isEmpty()?null:n.value?new ga(this.source,Be(),n.value):new Mh(this.source,Be(),n)}else return Z(Pe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Mh(this.source,Qe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ae(e))return this.isFullyInitialized()&&!this.filtered_;const n=Pe(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function gG(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(uG(o.childName,o.snapshotNode))}),dc(t,i,"child_removed",e,r,n),dc(t,i,"child_added",e,r,n),dc(t,i,"child_moved",s,r,n),dc(t,i,"child_changed",e,r,n),dc(t,i,"value",e,r,n),i}function dc(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>yG(t,a,l)),o.forEach(a=>{const l=_G(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function _G(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function yG(t,e,n){if(e.childName==null||n.childName==null)throw cu("Should only compare child_ events.");const r=new be(e.childName,e.snapshotNode),i=new be(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(t,e){return{eventCache:t,serverCache:e}}function Hc(t,e,n,r){return jD(new mI(e,n,r),t.serverCache)}function zD(t,e,n,r){return jD(t.eventCache,new mI(e,n,r))}function cv(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function _a(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let d_;const vG=()=>(d_||(d_=new Kn(iH)),d_);class Ke{constructor(e,n=vG()){this.value=e,this.children=n}static fromObject(e){let n=new Ke(null);return kr(e,(r,i)=>{n=n.set(new Ze(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Be(),value:this.value};if(Ae(e))return null;{const r=Pe(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(Qe(e),n);return s!=null?{path:Qt(new Ze(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ae(e))return this;{const n=Pe(e),r=this.children.get(n);return r!==null?r.subtree(Qe(e)):new Ke(null)}}set(e,n){if(Ae(e))return new Ke(n,this.children);{const r=Pe(e),s=(this.children.get(r)||new Ke(null)).set(Qe(e),n),o=this.children.insert(r,s);return new Ke(this.value,o)}}remove(e){if(Ae(e))return this.children.isEmpty()?new Ke(null):new Ke(null,this.children);{const n=Pe(e),r=this.children.get(n);if(r){const i=r.remove(Qe(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Ke(null):new Ke(this.value,s)}else return this}}get(e){if(Ae(e))return this.value;{const n=Pe(e),r=this.children.get(n);return r?r.get(Qe(e)):null}}setTree(e,n){if(Ae(e))return n;{const r=Pe(e),s=(this.children.get(r)||new Ke(null)).setTree(Qe(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Ke(this.value,o)}}fold(e){return this.fold_(Be(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Qt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Be(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(Ae(e))return null;{const s=Pe(e),o=this.children.get(s);return o?o.findOnPath_(Qe(e),Qt(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Be(),n)}foreachOnPath_(e,n,r){if(Ae(e))return this;{this.value&&r(n,this.value);const i=Pe(e),s=this.children.get(i);return s?s.foreachOnPath_(Qe(e),Qt(n,i),r):new Ke(null)}}foreach(e){this.foreach_(Be(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Qt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this.writeTree_=e}static empty(){return new Wr(new Ke(null))}}function Gc(t,e,n){if(Ae(e))return new Wr(new Ke(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Tr(i,e);return s=s.updateChild(o,n),new Wr(t.writeTree_.set(i,s))}else{const i=new Ke(n),s=t.writeTree_.setTree(e,i);return new Wr(s)}}}function gA(t,e,n){let r=t;return kr(n,(i,s)=>{r=Gc(r,Qt(e,i),s)}),r}function _A(t,e){if(Ae(e))return Wr.empty();{const n=t.writeTree_.setTree(e,new Ke(null));return new Wr(n)}}function hv(t,e){return ba(t,e)!=null}function ba(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Tr(n.path,e)):null}function yA(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Tn,(r,i)=>{e.push(new be(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new be(r,i.value))}),e}function Bs(t,e){if(Ae(e))return t;{const n=ba(t,e);return n!=null?new Wr(new Ke(n)):new Wr(t.writeTree_.subtree(e))}}function dv(t){return t.writeTree_.isEmpty()}function su(t,e){return qD(Be(),t.writeTree_,e)}function qD(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(Z(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=qD(Qt(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Qt(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(t,e){return QD(e,t)}function wG(t,e,n,r,i){Z(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Gc(t.visibleWrites,e,n)),t.lastWriteId=r}function EG(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function IG(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);Z(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&TG(a,r.path)?i=!1:jr(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return SG(t),!0;if(r.snap)t.visibleWrites=_A(t.visibleWrites,r.path);else{const a=r.children;kr(a,l=>{t.visibleWrites=_A(t.visibleWrites,Qt(r.path,l))})}return!0}else return!1}function TG(t,e){if(t.snap)return jr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&jr(Qt(t.path,n),e))return!0;return!1}function SG(t){t.visibleWrites=WD(t.allWrites,RG,Be()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function RG(t){return t.visible}function WD(t,e,n){let r=Wr.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)jr(n,o)?(a=Tr(n,o),r=Gc(r,a,s.snap)):jr(o,n)&&(a=Tr(o,n),r=Gc(r,Be(),s.snap.getChild(a)));else if(s.children){if(jr(n,o))a=Tr(n,o),r=gA(r,a,s.children);else if(jr(o,n))if(a=Tr(o,n),Ae(a))r=gA(r,Be(),s.children);else{const l=Fl(s.children,Pe(a));if(l){const c=l.getChild(Qe(a));r=Gc(r,Be(),c)}}}else throw cu("WriteRecord should have .snap or .children")}}return r}function HD(t,e,n,r,i){if(!r&&!i){const s=ba(t.visibleWrites,e);if(s!=null)return s;{const o=Bs(t.visibleWrites,e);if(dv(o))return n;if(n==null&&!hv(o,Be()))return null;{const a=n||Le.EMPTY_NODE;return su(o,a)}}}else{const s=Bs(t.visibleWrites,e);if(!i&&dv(s))return n;if(!i&&n==null&&!hv(s,Be()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(jr(c.path,e)||jr(e,c.path))},a=WD(t.allWrites,o,e),l=n||Le.EMPTY_NODE;return su(a,l)}}}function AG(t,e,n){let r=Le.EMPTY_NODE;const i=ba(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Tn,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Bs(t.visibleWrites,e);return n.forEachChild(Tn,(o,a)=>{const l=su(Bs(s,new Ze(o)),a);r=r.updateImmediateChild(o,l)}),yA(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Bs(t.visibleWrites,e);return yA(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function CG(t,e,n,r,i){Z(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Qt(e,n);if(hv(t.visibleWrites,s))return null;{const o=Bs(t.visibleWrites,s);return dv(o)?i.getChild(n):su(o,i.getChild(n))}}function PG(t,e,n,r){const i=Qt(e,n),s=ba(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=Bs(t.visibleWrites,i);return su(o,r.getNode().getImmediateChild(n))}else return null}function bG(t,e){return ba(t.visibleWrites,e)}function kG(t,e,n,r,i,s,o){let a;const l=Bs(t.visibleWrites,e),c=ba(l,Be());if(c!=null)a=c;else if(n!=null)a=su(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],d=o.getCompare(),p=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let _=p.getNext();for(;_&&h.length<i;)d(_,r)!==0&&h.push(_),_=p.getNext();return h}else return[]}function NG(){return{visibleWrites:Wr.empty(),allWrites:[],lastWriteId:-1}}function fv(t,e,n,r){return HD(t.writeTree,t.treePath,e,n,r)}function GD(t,e){return AG(t.writeTree,t.treePath,e)}function vA(t,e,n,r){return CG(t.writeTree,t.treePath,e,n,r)}function Up(t,e){return bG(t.writeTree,Qt(t.treePath,e))}function xG(t,e,n,r,i,s){return kG(t.writeTree,t.treePath,e,n,r,i,s)}function gI(t,e,n){return PG(t.writeTree,t.treePath,e,n)}function KD(t,e){return QD(Qt(t.treePath,e),t.writeTree)}function QD(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DG{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;Z(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Z(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,dA(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,lG(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,aG(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,dA(r,e.snapshotNode,i.oldSnap));else throw cu("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OG{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const YD=new OG;class _I{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new mI(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return gI(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:_a(this.viewCache_),s=xG(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}function LG(t,e){Z(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Z(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function MG(t,e,n,r,i){const s=new DG;let o,a;if(n.type===ui.OVERWRITE){const c=n;c.source.fromUser?o=pv(t,e,c.path,c.snap,r,i,s):(Z(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Ae(c.path),o=Bp(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===ui.MERGE){const c=n;c.source.fromUser?o=FG(t,e,c.path,c.children,r,i,s):(Z(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=mv(t,e,c.path,c.children,r,i,a,s))}else if(n.type===ui.ACK_USER_WRITE){const c=n;c.revert?o=jG(t,e,c.path,r,i,s):o=UG(t,e,c.path,c.affectedTree,r,i,s)}else if(n.type===ui.LISTEN_COMPLETE)o=BG(t,e,n.path,r,s);else throw cu("Unknown operation type: "+n.type);const l=s.getChanges();return VG(e,o,l),{viewCache:o,changes:l}}function VG(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=cv(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(oG(cv(e)))}}function JD(t,e,n,r,i,s){const o=e.eventCache;if(Up(r,n)!=null)return e;{let a,l;if(Ae(n))if(Z(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=_a(e),h=c instanceof Le?c:Le.EMPTY_NODE,d=GD(r,h);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=fv(r,_a(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=Pe(n);if(c===".priority"){Z(eo(n)===1,"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const d=vA(r,n,h,l);d!=null?a=t.filter.updatePriority(h,d):a=o.getNode()}else{const h=Qe(n);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const p=vA(r,n,o.getNode(),l);p!=null?d=o.getNode().getImmediateChild(c).updateChild(h,p):d=o.getNode().getImmediateChild(c)}else d=gI(r,c,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),c,d,h,i,s):a=o.getNode()}}return Hc(e,a,o.isFullyInitialized()||Ae(n),t.filter.filtersNodes())}}function Bp(t,e,n,r,i,s,o,a){const l=e.serverCache;let c;const h=o?t.filter:t.filter.getIndexedFilter();if(Ae(n))c=h.updateFullNode(l.getNode(),r,null);else if(h.filtersNodes()&&!l.isFiltered()){const _=l.getNode().updateChild(n,r);c=h.updateFullNode(l.getNode(),_,null)}else{const _=Pe(n);if(!l.isCompleteForPath(n)&&eo(n)>1)return e;const y=Qe(n),P=l.getNode().getImmediateChild(_).updateChild(y,r);_===".priority"?c=h.updatePriority(l.getNode(),P):c=h.updateChild(l.getNode(),_,P,y,YD,null)}const d=zD(e,c,l.isFullyInitialized()||Ae(n),h.filtersNodes()),p=new _I(i,d,s);return JD(t,d,n,i,p,a)}function pv(t,e,n,r,i,s,o){const a=e.eventCache;let l,c;const h=new _I(i,e,s);if(Ae(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=Hc(e,c,!0,t.filter.filtersNodes());else{const d=Pe(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=Hc(e,c,a.isFullyInitialized(),a.isFiltered());else{const p=Qe(n),_=a.getNode().getImmediateChild(d);let y;if(Ae(p))y=r;else{const E=h.getCompleteChild(d);E!=null?CD(p)===".priority"&&E.getChild(bD(p)).isEmpty()?y=E:y=E.updateChild(p,r):y=Le.EMPTY_NODE}if(_.equals(y))l=e;else{const E=t.filter.updateChild(a.getNode(),d,y,p,h,o);l=Hc(e,E,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function wA(t,e){return t.eventCache.isCompleteForChild(e)}function FG(t,e,n,r,i,s,o){let a=e;return r.foreach((l,c)=>{const h=Qt(n,l);wA(e,Pe(h))&&(a=pv(t,a,h,c,i,s,o))}),r.foreach((l,c)=>{const h=Qt(n,l);wA(e,Pe(h))||(a=pv(t,a,h,c,i,s,o))}),a}function EA(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function mv(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;Ae(n)?c=r:c=new Ke(null).setTree(n,r);const h=e.serverCache.getNode();return c.children.inorderTraversal((d,p)=>{if(h.hasChild(d)){const _=e.serverCache.getNode().getImmediateChild(d),y=EA(t,_,p);l=Bp(t,l,new Ze(d),y,i,s,o,a)}}),c.children.inorderTraversal((d,p)=>{const _=!e.serverCache.isCompleteForChild(d)&&p.value===null;if(!h.hasChild(d)&&!_){const y=e.serverCache.getNode().getImmediateChild(d),E=EA(t,y,p);l=Bp(t,l,new Ze(d),E,i,s,o,a)}}),l}function UG(t,e,n,r,i,s,o){if(Up(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(Ae(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Bp(t,e,n,l.getNode().getChild(n),i,s,a,o);if(Ae(n)){let c=new Ke(null);return l.getNode().forEachChild(bl,(h,d)=>{c=c.set(new Ze(h),d)}),mv(t,e,n,c,i,s,a,o)}else return e}else{let c=new Ke(null);return r.foreach((h,d)=>{const p=Qt(n,h);l.isCompleteForPath(p)&&(c=c.set(h,l.getNode().getChild(p)))}),mv(t,e,n,c,i,s,a,o)}}function BG(t,e,n,r,i){const s=e.serverCache,o=zD(e,s.getNode(),s.isFullyInitialized()||Ae(n),s.isFiltered());return JD(t,o,n,r,YD,i)}function jG(t,e,n,r,i,s){let o;if(Up(r,n)!=null)return e;{const a=new _I(r,e,i),l=e.eventCache.getNode();let c;if(Ae(n)||Pe(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=fv(r,_a(e));else{const d=e.serverCache.getNode();Z(d instanceof Le,"serverChildren would be complete if leaf node"),h=GD(r,d)}h=h,c=t.filter.updateFullNode(l,h,s)}else{const h=Pe(n);let d=gI(r,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=l.getImmediateChild(h)),d!=null?c=t.filter.updateChild(l,h,d,Qe(n),a,s):e.eventCache.getNode().hasChild(h)?c=t.filter.updateChild(l,h,Le.EMPTY_NODE,Qe(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=fv(r,_a(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||Up(r,Be())!=null,Hc(e,c,o,t.filter.filtersNodes())}}function zG(t,e){const n=_a(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ae(e)&&!n.getImmediateChild(Pe(e)).isEmpty())?n.getChild(e):null}function IA(t,e,n,r){e.type===ui.MERGE&&e.source.queryId!==null&&(Z(_a(t.viewCache_),"We should always have a full cache before handling merges"),Z(cv(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=MG(t.processor_,i,e,n,r);return LG(t.processor_,s.viewCache),Z(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,qG(t,s.changes,s.viewCache.eventCache.getNode())}function qG(t,e,n,r){const i=t.eventRegistrations_;return gG(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TA;function $G(t){Z(!TA,"__referenceConstructor has already been defined"),TA=t}function yI(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return Z(s!=null,"SyncTree gave us an op for an invalid query."),IA(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(IA(o,e,n,r));return s}}function vI(t,e){let n=null;for(const r of t.views.values())n=n||zG(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SA;function WG(t){Z(!SA,"__referenceConstructor has already been defined"),SA=t}class RA{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ke(null),this.pendingWriteTree_=NG(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function HG(t,e,n,r,i){return wG(t.pendingWriteTree_,e,n,r,i),i?Xm(t,new ga(FD(),e,n)):[]}function pl(t,e,n=!1){const r=EG(t.pendingWriteTree_,e);if(IG(t.pendingWriteTree_,e)){let s=new Ke(null);return r.snap!=null?s=s.set(Be(),!0):kr(r.children,o=>{s=s.set(new Ze(o),!0)}),Xm(t,new Fp(r.path,s,n))}else return[]}function Jm(t,e,n){return Xm(t,new ga(UD(),e,n))}function GG(t,e,n){const r=Ke.fromObject(n);return Xm(t,new Mh(UD(),e,r))}function KG(t,e,n,r){const i=tO(t,r);if(i!=null){const s=nO(i),o=s.path,a=s.queryId,l=Tr(o,e),c=new ga(BD(a),l,n);return rO(t,o,c)}else return[]}function QG(t,e,n,r){const i=tO(t,r);if(i){const s=nO(i),o=s.path,a=s.queryId,l=Tr(o,e),c=Ke.fromObject(n),h=new Mh(BD(a),l,c);return rO(t,o,h)}else return[]}function XD(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Tr(o,e),c=vI(a,l);if(c)return c});return HD(i,e,s,n,!0)}function Xm(t,e){return ZD(e,t.syncPointTree_,null,$D(t.pendingWriteTree_,Be()))}function ZD(t,e,n,r){if(Ae(t.path))return eO(t,e,n,r);{const i=e.get(Be());n==null&&i!=null&&(n=vI(i,Be()));let s=[];const o=Pe(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,h=KD(r,o);s=s.concat(ZD(a,l,c,h))}return i&&(s=s.concat(yI(i,t,r,n))),s}}function eO(t,e,n,r){const i=e.get(Be());n==null&&i!=null&&(n=vI(i,Be()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=KD(r,o),h=t.operationForChild(o);h&&(s=s.concat(eO(h,a,l,c)))}),i&&(s=s.concat(yI(i,t,r,n))),s}function tO(t,e){return t.tagToQueryMap.get(e)}function nO(t){const e=t.indexOf("$");return Z(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ze(t.substr(0,e))}}function rO(t,e,n){const r=t.syncPointTree_.get(e);Z(r,"Missing sync point for query tag that we're tracking");const i=$D(t.pendingWriteTree_,e);return yI(r,n,i,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new wI(n)}node(){return this.node_}}class EI{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Qt(this.path_,e);return new EI(this.syncTree_,n)}node(){return XD(this.syncTree_,this.path_)}}const YG=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},AA=function(t,e,n){if(!t||typeof t!="object")return t;if(Z(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return JG(t[".sv"],e,n);if(typeof t[".sv"]=="object")return XG(t[".sv"],e);Z(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},JG=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Z(!1,"Unexpected server value: "+t)}},XG=function(t,e,n){t.hasOwnProperty("increment")||Z(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&Z(!1,"Unexpected increment value: "+r);const i=e.node();if(Z(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},ZG=function(t,e,n,r){return II(e,new EI(n,t),r)},eK=function(t,e,n){return II(t,new wI(e),n)};function II(t,e,n){const r=t.getPriority().val(),i=AA(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=AA(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new $t(a,En(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new $t(i))),o.forEachChild(Tn,(a,l)=>{const c=II(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function SI(t,e){let n=e instanceof Ze?e:new Ze(e),r=t,i=Pe(n);for(;i!==null;){const s=Fl(r.node.children,i)||{children:{},childCount:0};r=new TI(i,r,s),n=Qe(n),i=Pe(n)}return r}function Cu(t){return t.node.value}function iO(t,e){t.node.value=e,gv(t)}function sO(t){return t.node.childCount>0}function tK(t){return Cu(t)===void 0&&!sO(t)}function Zm(t,e){kr(t.node.children,(n,r)=>{e(new TI(n,t,r))})}function oO(t,e,n,r){n&&!r&&e(t),Zm(t,i=>{oO(i,e,!0,r)}),n&&r&&e(t)}function nK(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function _d(t){return new Ze(t.parent===null?t.name:_d(t.parent)+"/"+t.name)}function gv(t){t.parent!==null&&rK(t.parent,t.name,t)}function rK(t,e,n){const r=tK(n),i=Gr(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,gv(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,gv(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iK=/[\[\].#$\/\u0000-\u001F\u007F]/,sK=/[\[\].#$\u0000-\u001F\u007F]/,f_=10*1024*1024,aO=function(t){return typeof t=="string"&&t.length!==0&&!iK.test(t)},oK=function(t){return typeof t=="string"&&t.length!==0&&!sK.test(t)},aK=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),oK(t)},lO=function(t,e,n){const r=n instanceof Ze?new BH(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ro(r));if(typeof e=="function")throw new Error(t+"contains a function "+Ro(r)+" with contents = "+e.toString());if(aD(e))throw new Error(t+"contains "+e.toString()+" "+Ro(r));if(typeof e=="string"&&e.length>f_/3&&am(e)>f_)throw new Error(t+"contains a string greater than "+f_+" utf8 bytes "+Ro(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(kr(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!aO(o)))throw new Error(t+" contains an invalid key ("+o+") "+Ro(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);jH(r,o),lO(t,a,r),zH(r)}),i&&s)throw new Error(t+' contains ".value" child '+Ro(r)+" in addition to actual children.")}},lK=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!aO(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!aK(n))throw new Error(i2(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uK{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function cK(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!kD(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function ka(t,e,n){cK(t,n),hK(t,r=>jr(r,e)||jr(e,r))}function hK(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(dK(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function dK(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();$c&&wn("event: "+n.toString()),md(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fK="repo_interrupt",pK=25;class mK{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new uK,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Vp(),this.transactionQueueTree_=new TI,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function gK(t,e,n){if(t.stats_=cI(t.repoInfo_),t.forceRestClient_||cH())t.server_=new Mp(t.repoInfo_,(r,i,s,o)=>{CA(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>PA(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{un(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Bi(t.repoInfo_,e,(r,i,s,o)=>{CA(t,r,i,s,o)},r=>{PA(t,r)},r=>{yK(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=gH(t.repoInfo_,()=>new mG(t.stats_,t.server_)),t.infoData_=new cG,t.infoSyncTree_=new RA({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=Jm(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),RI(t,"connected",!1),t.serverSyncTree_=new RA({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);ka(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function _K(t){const n=t.infoData_.getNode(new Ze(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function uO(t){return YG({timestamp:_K(t)})}function CA(t,e,n,r,i){t.dataUpdateCount++;const s=new Ze(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=cp(n,c=>En(c));o=QG(t.serverSyncTree_,s,l,i)}else{const l=En(n);o=KG(t.serverSyncTree_,s,l,i)}else if(r){const l=cp(n,c=>En(c));o=GG(t.serverSyncTree_,s,l)}else{const l=En(n);o=Jm(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=CI(t,s)),ka(t.eventQueue_,a,o)}function PA(t,e){RI(t,"connected",e),e===!1&&wK(t)}function yK(t,e){kr(e,(n,r)=>{RI(t,n,r)})}function RI(t,e,n){const r=new Ze("/.info/"+e),i=En(n);t.infoData_.updateSnapshot(r,i);const s=Jm(t.infoSyncTree_,r,i);ka(t.eventQueue_,r,s)}function vK(t){return t.nextWriteId_++}function wK(t){cO(t,"onDisconnectEvents");const e=uO(t),n=Vp();uv(t.onDisconnect_,Be(),(i,s)=>{const o=ZG(i,s,t.serverSyncTree_,e);VD(n,i,o)});let r=[];uv(n,Be(),(i,s)=>{r=r.concat(Jm(t.serverSyncTree_,i,s));const o=SK(t,i);CI(t,o)}),t.onDisconnect_=Vp(),ka(t.eventQueue_,Be(),r)}function EK(t){t.persistentConnection_&&t.persistentConnection_.interrupt(fK)}function cO(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),wn(n,...e)}function hO(t,e,n){return XD(t.serverSyncTree_,e,n)||Le.EMPTY_NODE}function AI(t,e=t.transactionQueueTree_){if(e||eg(t,e),Cu(e)){const n=fO(t,e);Z(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&IK(t,_d(e),n)}else sO(e)&&Zm(e,n=>{AI(t,n)})}function IK(t,e,n){const r=n.map(c=>c.currentWriteId),i=hO(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const h=n[c];Z(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=Tr(e,h.path);s=s.updateChild(d,h.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{cO(t,"transaction put response",{path:l.toString(),status:c});let h=[];if(c==="ok"){const d=[];for(let p=0;p<n.length;p++)n[p].status=2,h=h.concat(pl(t.serverSyncTree_,n[p].currentWriteId)),n[p].onComplete&&d.push(()=>n[p].onComplete(null,!0,n[p].currentOutputSnapshotResolved)),n[p].unwatcher();eg(t,SI(t.transactionQueueTree_,e)),AI(t,t.transactionQueueTree_),ka(t.eventQueue_,e,h);for(let p=0;p<d.length;p++)md(d[p])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{ar("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}CI(t,e)}},o)}function CI(t,e){const n=dO(t,e),r=_d(n),i=fO(t,n);return TK(t,i,r),r}function TK(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Tr(n,l.path);let h=!1,d;if(Z(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)h=!0,d=l.abortReason,i=i.concat(pl(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=pK)h=!0,d="maxretry",i=i.concat(pl(t.serverSyncTree_,l.currentWriteId,!0));else{const p=hO(t,l.path,o);l.currentInputSnapshot=p;const _=e[a].update(p.val());if(_!==void 0){lO("transaction failed: Data returned ",_,l.path);let y=En(_);typeof _=="object"&&_!=null&&Gr(_,".priority")||(y=y.updatePriority(p.getPriority()));const P=l.currentWriteId,S=uO(t),I=eK(y,p,S);l.currentOutputSnapshotRaw=y,l.currentOutputSnapshotResolved=I,l.currentWriteId=vK(t),o.splice(o.indexOf(P),1),i=i.concat(HG(t.serverSyncTree_,l.path,I,l.currentWriteId,l.applyLocally)),i=i.concat(pl(t.serverSyncTree_,P,!0))}else h=!0,d="nodata",i=i.concat(pl(t.serverSyncTree_,l.currentWriteId,!0))}ka(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,function(p){setTimeout(p,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}eg(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)md(r[a]);AI(t,t.transactionQueueTree_)}function dO(t,e){let n,r=t.transactionQueueTree_;for(n=Pe(e);n!==null&&Cu(r)===void 0;)r=SI(r,n),e=Qe(e),n=Pe(e);return r}function fO(t,e){const n=[];return pO(t,e,n),n.sort((r,i)=>r.order-i.order),n}function pO(t,e,n){const r=Cu(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Zm(e,i=>{pO(t,i,n)})}function eg(t,e){const n=Cu(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,iO(e,n.length>0?n:void 0)}Zm(e,r=>{eg(t,r)})}function SK(t,e){const n=_d(dO(t,e)),r=SI(t.transactionQueueTree_,e);return nK(r,i=>{p_(t,i)}),p_(t,r),oO(r,i=>{p_(t,i)}),n}function p_(t,e){const n=Cu(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(Z(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(Z(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(pl(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?iO(e,void 0):n.length=s+1,ka(t.eventQueue_,_d(e),i);for(let o=0;o<r.length;o++)md(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RK(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function AK(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ar(`Invalid query segment '${n}' in query '${t}'`)}return e}const bA=function(t,e){const n=CK(t),r=n.namespace;n.domain==="firebase.com"&&pa(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&pa("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||nH();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new fH(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Ze(n.pathString)}},CK=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=RK(t.substring(h,d)));const p=AK(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const _=e.slice(0,c);if(_.toLowerCase()==="localhost")n="localhost";else if(_.split(".").length<=2)n=_;else{const y=e.indexOf(".");r=e.substring(0,y).toLowerCase(),n=e.substring(y+1),s=r}"ns"in p&&(s=p.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Ae(this._path)?null:CD(this._path)}get ref(){return new Pu(this._repo,this._path)}get _queryIdentifier(){const e=pA(this._queryParams),n=lI(e);return n==="{}"?"default":n}get _queryObject(){return pA(this._queryParams)}isEqual(e){if(e=ie(e),!(e instanceof PI))return!1;const n=this._repo===e._repo,r=kD(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+UH(this._path)}}class Pu extends PI{constructor(e,n){super(e,n,new pI,!1)}get parent(){const e=bD(this._path);return e===null?null:new Pu(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}$G(Pu);WG(Pu);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PK="FIREBASE_DATABASE_EMULATOR_HOST",_v={};let bK=!1;function kK(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||pa("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),wn("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=bA(s,i),a=o.repoInfo,l;typeof process<"u"&&QR&&(l=QR[PK]),l?(s=`http://${l}?ns=${a.namespace}`,o=bA(s,i),a=o.repoInfo):o.repoInfo.secure;const c=new dH(t.name,t.options,e);lK("Invalid Firebase Database URL",o),Ae(o.path)||pa("Database URL must point to the root of a Firebase Database (not including a child path).");const h=xK(a,t,c,new hH(t.name,n));return new DK(h,t)}function NK(t,e){const n=_v[e];(!n||n[t.key]!==t)&&pa(`Database ${e}(${t.repoInfo_}) has already been deleted.`),EK(t),delete n[t.key]}function xK(t,e,n,r){let i=_v[e.name];i||(i={},_v[e.name]=i);let s=i[t.toURLString()];return s&&pa("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new mK(t,bK,n,r),i[t.toURLString()]=s,s}class DK{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(gK(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Pu(this._repo,Be())),this._rootInternal}_delete(){return this._rootInternal!==null&&(NK(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&pa("Cannot call "+e+" on a deleted database.")}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OK(t){Y5(vi),mi(new ur("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return kK(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Dn(YR,JR,t),Dn(YR,JR,"esm2017")}Bi.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Bi.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};OK();const LK=()=>{const[t,e]=U.useState(null),[n,r]=U.useState(""),[i,s]=U.useState(""),[o,a]=U.useState(""),[l,c]=U.useState(""),[h,d]=U.useState(""),[p,_]=U.useState(null),[y,E]=U.useState(!1),[P,S]=U.useState(null),[I,T]=U.useState(null),k=rb(),[F,j]=U.useState(""),[g,v]=U.useState(""),[R,A]=U.useState(null),[b,N]=U.useState(null),C="https://apinationscomu.onrender.com/",[Me,Ot]=U.useState(0),[fr,fn]=U.useState(""),[H,ue]=U.useState(""),[he,xe]=U.useState(""),[ye,Oe]=U.useState(0),[nn,Tt]=U.useState(0),[Lt,Mt]=U.useState("");async function fo(){const ce=e_();if(t){const we=Wo(ce,"users",t.uid),qt=await tx(we);qt.exists()&&j(qt.data().pseudong)}}fo(),U.useEffect(()=>{(async()=>{try{const we=await Pt.get(`${C}user?player=${F}`);N(we.data);let qt=new Date(0),Un="";if(we.data.servers){for(const[Zn,Bn]of Object.entries(we.data.servers))if(Bn.last_connection){const wi=new Date(Bn.last_connection);wi>qt&&(qt=wi,Un=Zn)}Ot(qt),fn(Un),Un&&we.data.servers[Un]&&(ue(we.data.servers[Un].country||"pas de pays"),xe(we.data.servers[Un].country_rank||""),Oe(we.data.servers[Un].power||0),Tt(we.data.servers[Un].max_power||0),Mt(we.data.description||"pas de description"))}}catch(we){console.error("Error fetching data:",we)}})()},[F,C]),U.useEffect(()=>{Pt.get(C+"playercount").then(ce=>{A(ce.data)})},[]);const bu=R?Object.values(R).reduce((ce,we)=>ce+(we.players>-1?we.players:0),0):0;U.useEffect(()=>{const ce=Ue.auth().onAuthStateChanged(we=>{we?(e(we),E(we.providerData.some(qt=>qt.providerId==="google.com"))):(e(""),k("/nationglorycomu/Auth"))});return()=>ce()},[k]);const ts=async()=>{try{const ce=e_();await bp(Wo(ce,"users",t.uid),{pseudong:g},{merge:!0}),console.log("Pseudo NG mis  jour avec succs !"),location.reload()}catch(ce){_(ce.message),console.error(ce.message)}},ns=async()=>{try{const ce=new Ue.auth.GoogleAuthProvider;await Ue.auth().currentUser.linkWithPopup(ce),console.log("Compte Google li avec succs !"),E(!0),location.reload()}catch(ce){_(ce.message),console.error(ce.message)}},Vt=async()=>{try{await Ue.auth().currentUser.updateEmail(n),console.log("Adresse email mise  jour avec succs !"),location.reload()}catch(ce){_(ce.message),console.error(ce.message)}},Nr=async()=>{try{if(i!==o){_("Les mots de passe doivent correspondre.");return}await Ue.auth().currentUser.updatePassword(i),console.log("Mot de passe mis  jour avec succs !"),location.reload()}catch(ce){_(ce.message),console.error(ce.message)}},rs=async()=>{try{await Ue.auth().currentUser.updateProfile({displayName:`${l} ${h}`}),console.log("Nom mis  jour avec succs !"),location.reload()}catch(ce){_(ce.message),console.error(ce.message)}},po=ce=>{T(ce.target.files[0])},pr=async()=>{try{if(I){const ce=Xy(Ue.storage(),`profiles/${TW()}`),we=await Z9(ce,I);console.log(we);const qt=await xx(we.ref);S(qt);const Zn=qj().currentUser;if(Zn){await ak(Zn,{photoURL:qt});const Bn=e_();await bp(Wo(Bn,"users",Zn.uid),{photoURL:qt},{merge:!0}),location.reload()}else console.error("Utilisateur non connect")}}catch(ce){console.error("Erreur lors du tlchargement de l'image de profil :",ce)}};return q.jsxs("div",{children:[q.jsx("h1",{children:"Profil de l'utilisateur"}),p&&q.jsx("p",{style:{color:"red"},children:p}),t?q.jsxs("div",{children:[q.jsx("h2",{children:"Informations de l'utilisateur"}),q.jsx("img",{src:t.photoURL||"https://firebasestorage.googleapis.com/v0/b/nationsglory-62812.appspot.com/o/Prendre%20sa%20sant%C3%A9%20en%20main%20n%E2%80%99a%20jamais%20%C3%A9t%C3%A9%20aussi%20simple.jpg?alt=media&token=dc085ed1-9a30-4dc8-92cc-ad7eaa8a840c"}),q.jsxs("p",{children:["Prnom: ",t.displayName.split(" ")[0]]}),q.jsxs("p",{children:["Nom: ",t.displayName.split(" ")[1]]}),q.jsxs("p",{children:["Email: ",t.email]}),q.jsxs("p",{children:["Pseudo NG: ",F]}),q.jsx("h2",{children:"Informations de nationsglory"}),q.jsxs("div",{children:["Nombre total de joueurs connects : ",bu,q.jsx("br",{}),R&&q.jsx("select",{children:Array.from({length:17},(ce,we)=>q.jsxs("option",{value:R[we]&&R[we].name,children:["Nombre de connecter sur ",R[we]&&R[we].name," : ",R[we]?R[we].players==-1?0:R[we].players:null]},we))})]}),q.jsxs("div",{children:["description : ",Lt,q.jsx("br",{}),"server : ",fr,q.jsx("br",{}),"dernier connection au server : ",Me.toLocaleString(),q.jsx("br",{}),"pays : ",H,q.jsx("br",{}),"rang dans le pays : ",he,q.jsx("br",{}),"power : ",ye," / ",nn]}),q.jsx("h2",{children:"connection a google"}),q.jsx("div",{children:y?q.jsx("p",{children:"Connect avec Google"}):q.jsx("button",{onClick:ns,children:"Lier un compte Google"})}),q.jsxs("div",{children:[q.jsx("h2",{children:"Modifier l'adresse email"}),q.jsx("input",{type:"email",placeholder:"Nouvelle adresse email",value:n,onChange:ce=>r(ce.target.value)}),q.jsx("button",{onClick:Vt,children:"Mettre  jour l'email"})]}),q.jsxs("div",{children:[q.jsx("h2",{children:"Modifier le mot de passe"}),q.jsx("input",{type:"password",placeholder:"Nouveau mot de passe",value:i,onChange:ce=>s(ce.target.value)}),q.jsx("input",{type:"password",placeholder:"Confirmer le nouveau mot de passe",value:o,onChange:ce=>a(ce.target.value)}),q.jsx("button",{onClick:Nr,children:"Mettre  jour le mot de passe"})]}),q.jsxs("div",{children:[q.jsx("h2",{children:"Modifier le nom"}),q.jsx("input",{type:"text",placeholder:"Nouveau prnom",value:l,onChange:ce=>c(ce.target.value)}),q.jsx("input",{type:"text",placeholder:"Nouveau nom de famille",value:h,onChange:ce=>d(ce.target.value)}),q.jsx("button",{onClick:rs,children:"Mettre  jour le nom"})]}),q.jsxs("div",{children:[q.jsx("h2",{children:"Modifier l'image de profil"}),q.jsx("input",{type:"file",onChange:po}),q.jsx("button",{onClick:pr,children:"Tlcharger l'image de profil"})]}),q.jsxs("div",{children:[q.jsx("h2",{children:"Modifier le pseudo NG"}),q.jsx("input",{type:"text",placeholder:"Pseudo NG",value:g,onChange:ce=>v(ce.target.value)}),q.jsx("button",{onClick:ts,children:"Mettre  jour le pseudo NG"})]}),q.jsx("div",{children:q.jsx(Ox,{})})]}):q.jsx("p",{children:"Veuillez vous connecter pour accder  votre profil."})]})},MK=()=>{const[t,e]=U.useState("");U.useEffect(()=>{const r=Ue.auth().onAuthStateChanged(i=>{e(i||null)});return()=>r()},[]);const n=t?t.displayName.split(" ")[0]:"";return q.jsx("div",{children:q.jsx("div",{children:q.jsxs("h1",{children:["Welcome to the Home Page! ",n]})})})},VK=()=>{const[t,e]=U.useState(null),[n,r]=U.useState(!0);return U.useEffect(()=>{const i=Ue.auth().onAuthStateChanged(s=>{e(s),r(!1)});return()=>i()},[]),n?q.jsx("div",{children:"Vrification de l'authentification..."}):q.jsx("nav",{children:q.jsxs("ul",{children:[q.jsx("li",{children:q.jsx(Fg,{to:"/nationglorycomu/",children:q.jsx("button",{children:"Accueil"})})}),t?q.jsxs(q.Fragment,{children:[q.jsx("li",{children:q.jsx(Fg,{to:"/nationglorycomu/Profile",children:q.jsx("button",{children:"Profil"})})}),q.jsx("li",{children:q.jsx(Ox,{})})]}):q.jsx("li",{children:q.jsx(Fg,{to:"/nationglorycomu/Auth",children:q.jsx("button",{children:"Se connecter"})})})]})})};function FK(){return q.jsxs("div",{className:"App",children:[q.jsx(VK,{}),q.jsx("div",{className:"main",children:q.jsx(yF,{})})]})}const UK=AF([{path:"/nationglorycomu/",element:q.jsx(FK,{}),children:[{path:"",element:q.jsx(MK,{})},{path:"auth",element:q.jsx(yW,{})},{path:"profile",element:q.jsx(LK,{})}]}]);ab(document.getElementById("root")).render(q.jsx(zA.StrictMode,{children:q.jsx(LF,{router:UK})}));
